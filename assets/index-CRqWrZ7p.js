var YA=Object.defineProperty;var K0=n=>{throw TypeError(n)};var KA=(n,e,t)=>e in n?YA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var V=(n,e,t)=>KA(n,typeof e!="symbol"?e+"":e,t),Xf=(n,e,t)=>e.has(n)||K0("Cannot "+t);var l=(n,e,t)=>(Xf(n,e,"read from private field"),t?t.call(n):e.get(n)),x=(n,e,t)=>e.has(n)?K0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),v=(n,e,t,i)=>(Xf(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),w=(n,e,t)=>(Xf(n,e,"access private method"),t);var _t=(n,e,t,i)=>({set _(s){v(n,e,s,t)},get _(){return l(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var Ty={exports:{}},bf={},Py={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=Symbol.for("react.element"),QA=Symbol.for("react.portal"),ZA=Symbol.for("react.fragment"),JA=Symbol.for("react.strict_mode"),e1=Symbol.for("react.profiler"),t1=Symbol.for("react.provider"),n1=Symbol.for("react.context"),i1=Symbol.for("react.forward_ref"),s1=Symbol.for("react.suspense"),r1=Symbol.for("react.memo"),o1=Symbol.for("react.lazy"),Q0=Symbol.iterator;function a1(n){return n===null||typeof n!="object"?null:(n=Q0&&n[Q0]||n["@@iterator"],typeof n=="function"?n:null)}var Ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ly=Object.assign,My={};function Tl(n,e,t){this.props=n,this.context=e,this.refs=My,this.updater=t||Ry}Tl.prototype.isReactComponent={};Tl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Tl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Ny(){}Ny.prototype=Tl.prototype;function Fm(n,e,t){this.props=n,this.context=e,this.refs=My,this.updater=t||Ry}var Dm=Fm.prototype=new Ny;Dm.constructor=Fm;Ly(Dm,Tl.prototype);Dm.isPureReactComponent=!0;var Z0=Array.isArray,Iy=Object.prototype.hasOwnProperty,Om={current:null},Fy={key:!0,ref:!0,__self:!0,__source:!0};function Dy(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Iy.call(e,i)&&!Fy.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:sh,type:n,key:r,ref:o,props:s,_owner:Om.current}}function l1(n,e){return{$$typeof:sh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function jm(n){return typeof n=="object"&&n!==null&&n.$$typeof===sh}function c1(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var J0=/\/+/g;function qf(n,e){return typeof n=="object"&&n!==null&&n.key!=null?c1(""+n.key):e.toString(36)}function jh(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case sh:case QA:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+qf(o,0):i,Z0(s)?(t="",n!=null&&(t=n.replace(J0,"$&/")+"/"),jh(s,e,t,"",function(u){return u})):s!=null&&(jm(s)&&(s=l1(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(J0,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",Z0(n))for(var a=0;a<n.length;a++){r=n[a];var c=i+qf(r,a);o+=jh(r,e,t,c,s)}else if(c=a1(n),typeof c=="function")for(n=c.call(n),a=0;!(r=n.next()).done;)r=r.value,c=i+qf(r,a++),o+=jh(r,e,t,c,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gh(n,e,t){if(n==null)return n;var i=[],s=0;return jh(n,i,"","",function(r){return e.call(t,r,s++)}),i}function u1(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var It={current:null},$h={transition:null},h1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:$h,ReactCurrentOwner:Om};function Oy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:gh,forEach:function(n,e,t){gh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return gh(n,function(){e++}),e},toArray:function(n){return gh(n,function(e){return e})||[]},only:function(n){if(!jm(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};te.Component=Tl;te.Fragment=ZA;te.Profiler=e1;te.PureComponent=Fm;te.StrictMode=JA;te.Suspense=s1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h1;te.act=Oy;te.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Ly({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Om.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)Iy.call(e,c)&&!Fy.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:sh,type:n.type,key:s,ref:r,props:i,_owner:o}};te.createContext=function(n){return n={$$typeof:n1,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:t1,_context:n},n.Consumer=n};te.createElement=Dy;te.createFactory=function(n){var e=Dy.bind(null,n);return e.type=n,e};te.createRef=function(){return{current:null}};te.forwardRef=function(n){return{$$typeof:i1,render:n}};te.isValidElement=jm;te.lazy=function(n){return{$$typeof:o1,_payload:{_status:-1,_result:n},_init:u1}};te.memo=function(n,e){return{$$typeof:r1,type:n,compare:e===void 0?null:e}};te.startTransition=function(n){var e=$h.transition;$h.transition={};try{n()}finally{$h.transition=e}};te.unstable_act=Oy;te.useCallback=function(n,e){return It.current.useCallback(n,e)};te.useContext=function(n){return It.current.useContext(n)};te.useDebugValue=function(){};te.useDeferredValue=function(n){return It.current.useDeferredValue(n)};te.useEffect=function(n,e){return It.current.useEffect(n,e)};te.useId=function(){return It.current.useId()};te.useImperativeHandle=function(n,e,t){return It.current.useImperativeHandle(n,e,t)};te.useInsertionEffect=function(n,e){return It.current.useInsertionEffect(n,e)};te.useLayoutEffect=function(n,e){return It.current.useLayoutEffect(n,e)};te.useMemo=function(n,e){return It.current.useMemo(n,e)};te.useReducer=function(n,e,t){return It.current.useReducer(n,e,t)};te.useRef=function(n){return It.current.useRef(n)};te.useState=function(n){return It.current.useState(n)};te.useSyncExternalStore=function(n,e,t){return It.current.useSyncExternalStore(n,e,t)};te.useTransition=function(){return It.current.useTransition()};te.version="18.3.1";Py.exports=te;var U=Py.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1=U,f1=Symbol.for("react.element"),p1=Symbol.for("react.fragment"),g1=Object.prototype.hasOwnProperty,m1=d1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v1={key:!0,ref:!0,__self:!0,__source:!0};function jy(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)g1.call(e,i)&&!v1.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:f1,type:n,key:r,ref:o,props:s,_owner:m1.current}}bf.Fragment=p1;bf.jsx=jy;bf.jsxs=jy;Ty.exports=bf;var k=Ty.exports,$y={exports:{}},fn={},zy={exports:{}},Hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(M,B){var W=M.length;M.push(B);e:for(;0<W;){var re=W-1>>>1,ie=M[re];if(0<s(ie,B))M[re]=B,M[W]=ie,W=re;else break e}}function t(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var B=M[0],W=M.pop();if(W!==B){M[0]=W;e:for(var re=0,ie=M.length,Ee=ie>>>1;re<Ee;){var Ot=2*(re+1)-1,_i=M[Ot],Ie=Ot+1,he=M[Ie];if(0>s(_i,W))Ie<ie&&0>s(he,_i)?(M[re]=he,M[Ie]=W,re=Ie):(M[re]=_i,M[Ot]=W,re=Ot);else if(Ie<ie&&0>s(he,W))M[re]=he,M[Ie]=W,re=Ie;else break e}}return B}function s(M,B){var W=M.sortIndex-B.sortIndex;return W!==0?W:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(M){for(var B=t(u);B!==null;){if(B.callback===null)i(u);else if(B.startTime<=M)i(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=t(u)}}function S(M){if(b=!1,A(M),!m)if(t(c)!==null)m=!0,me(P);else{var B=t(u);B!==null&&H(S,B.startTime-M)}}function P(M,B){m=!1,b&&(b=!1,g(T),T=-1),p=!0;var W=f;try{for(A(B),d=t(c);d!==null&&(!(d.expirationTime>B)||M&&!D());){var re=d.callback;if(typeof re=="function"){d.callback=null,f=d.priorityLevel;var ie=re(d.expirationTime<=B);B=n.unstable_now(),typeof ie=="function"?d.callback=ie:d===t(c)&&i(c),A(B)}else i(c);d=t(c)}if(d!==null)var Ee=!0;else{var Ot=t(u);Ot!==null&&H(S,Ot.startTime-B),Ee=!1}return Ee}finally{d=null,f=W,p=!1}}var _=!1,C=null,T=-1,R=5,L=-1;function D(){return!(n.unstable_now()-L<R)}function q(){if(C!==null){var M=n.unstable_now();L=M;var B=!0;try{B=C(!0,M)}finally{B?K():(_=!1,C=null)}}else _=!1}var K;if(typeof y=="function")K=function(){y(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ce=ae.port2;ae.port1.onmessage=q,K=function(){ce.postMessage(null)}}else K=function(){E(q,0)};function me(M){C=M,_||(_=!0,K())}function H(M,B){T=E(function(){M(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(M){M.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,me(P))},n.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(M){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var W=f;f=B;try{return M()}finally{f=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=f;f=M;try{return B()}finally{f=W}},n.unstable_scheduleCallback=function(M,B,W){var re=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?re+W:re):W=re,M){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=W+ie,M={id:h++,callback:B,priorityLevel:M,startTime:W,expirationTime:ie,sortIndex:-1},W>re?(M.sortIndex=W,e(u,M),t(c)===null&&M===t(u)&&(b?(g(T),T=-1):b=!0,H(S,W-re))):(M.sortIndex=ie,e(c,M),m||p||(m=!0,me(P))),M},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(M){var B=f;return function(){var W=f;f=B;try{return M.apply(this,arguments)}finally{f=W}}}})(Hy);zy.exports=Hy;var y1=zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=U,dn=y1;function N(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var By=new Set,Sc={};function zo(n,e){bl(n,e),bl(n+"Capture",e)}function bl(n,e){for(Sc[n]=e,n=0;n<e.length;n++)By.add(e[n])}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cp=Object.prototype.hasOwnProperty,b1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ev={},tv={};function x1(n){return Cp.call(tv,n)?!0:Cp.call(ev,n)?!1:b1.test(n)?tv[n]=!0:(ev[n]=!0,!1)}function A1(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S1(n,e,t,i){if(e===null||typeof e>"u"||A1(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ft[n]=new Ft(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ft[e]=new Ft(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ft[n]=new Ft(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ft[n]=new Ft(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ft[n]=new Ft(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ft[n]=new Ft(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ft[n]=new Ft(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ft[n]=new Ft(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ft[n]=new Ft(n,5,!1,n.toLowerCase(),null,!1,!1)});var $m=/[\-:]([a-z])/g;function zm(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($m,zm);ft[e]=new Ft(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($m,zm);ft[e]=new Ft(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($m,zm);ft[e]=new Ft(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ft[n]=new Ft(n,1,!1,n.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ft[n]=new Ft(n,1,!1,n.toLowerCase(),null,!0,!0)});function Hm(n,e,t,i){var s=ft.hasOwnProperty(e)?ft[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S1(e,t,s,i)&&(t=null),i||s===null?x1(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var vs=w1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mh=Symbol.for("react.element"),ta=Symbol.for("react.portal"),na=Symbol.for("react.fragment"),Bm=Symbol.for("react.strict_mode"),kp=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),Wy=Symbol.for("react.context"),Um=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),Pp=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),Vy=Symbol.for("react.offscreen"),nv=Symbol.iterator;function Ml(n){return n===null||typeof n!="object"?null:(n=nv&&n[nv]||n["@@iterator"],typeof n=="function"?n:null)}var Ne=Object.assign,Yf;function Ul(n){if(Yf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Yf=e&&e[1]||""}return`
`+Yf+n}var Kf=!1;function Qf(n,e){if(!n||Kf)return"";Kf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{Kf=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ul(n):""}function E1(n){switch(n.tag){case 5:return Ul(n.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return n=Qf(n.type,!1),n;case 11:return n=Qf(n.type.render,!1),n;case 1:return n=Qf(n.type,!0),n;default:return""}}function Rp(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case na:return"Fragment";case ta:return"Portal";case kp:return"Profiler";case Bm:return"StrictMode";case Tp:return"Suspense";case Pp:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Wy:return(n.displayName||"Context")+".Consumer";case Uy:return(n._context.displayName||"Context")+".Provider";case Um:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Wm:return e=n.displayName||null,e!==null?e:Rp(n.type)||"Memo";case xs:e=n._payload,n=n._init;try{return Rp(n(e))}catch{}}return null}function _1(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rp(e);case 8:return e===Bm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Gy(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C1(n){var e=Gy(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function vh(n){n._valueTracker||(n._valueTracker=C1(n))}function Xy(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Gy(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Cd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Lp(n,e){var t=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function iv(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=cr(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qy(n,e){e=e.checked,e!=null&&Hm(n,"checked",e,!1)}function Mp(n,e){qy(n,e);var t=cr(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Np(n,e.type,t):e.hasOwnProperty("defaultValue")&&Np(n,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function sv(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Np(n,e,t){(e!=="number"||Cd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Wl=Array.isArray;function pa(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+cr(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Ip(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function rv(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(N(92));if(Wl(t)){if(1<t.length)throw Error(N(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:cr(t)}}function Yy(n,e){var t=cr(e.value),i=cr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function ov(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Ky(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fp(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Ky(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yh,Qy=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yh=yh||document.createElement("div"),yh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ec(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k1=["Webkit","ms","Moz","O"];Object.keys(uc).forEach(function(n){k1.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),uc[e]=uc[n]})});function Zy(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||uc.hasOwnProperty(n)&&uc[n]?(""+e).trim():e+"px"}function Jy(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=Zy(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var T1=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dp(n,e){if(e){if(T1[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Op(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jp=null;function Vm(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $p=null,ga=null,ma=null;function av(n){if(n=ah(n)){if(typeof $p!="function")throw Error(N(280));var e=n.stateNode;e&&(e=_f(e),$p(n.stateNode,n.type,e))}}function ew(n){ga?ma?ma.push(n):ma=[n]:ga=n}function tw(){if(ga){var n=ga,e=ma;if(ma=ga=null,av(n),e)for(n=0;n<e.length;n++)av(e[n])}}function nw(n,e){return n(e)}function iw(){}var Zf=!1;function sw(n,e,t){if(Zf)return n(e,t);Zf=!0;try{return nw(n,e,t)}finally{Zf=!1,(ga!==null||ma!==null)&&(iw(),tw())}}function _c(n,e){var t=n.stateNode;if(t===null)return null;var i=_f(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(N(231,e,typeof t));return t}var zp=!1;if(hs)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){zp=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{zp=!1}function P1(n,e,t,i,s,r,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var hc=!1,kd=null,Td=!1,Hp=null,R1={onError:function(n){hc=!0,kd=n}};function L1(n,e,t,i,s,r,o,a,c){hc=!1,kd=null,P1.apply(R1,arguments)}function M1(n,e,t,i,s,r,o,a,c){if(L1.apply(this,arguments),hc){if(hc){var u=kd;hc=!1,kd=null}else throw Error(N(198));Td||(Td=!0,Hp=u)}}function Ho(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function rw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function lv(n){if(Ho(n)!==n)throw Error(N(188))}function N1(n){var e=n.alternate;if(!e){if(e=Ho(n),e===null)throw Error(N(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return lv(s),n;if(r===i)return lv(s),e;r=r.sibling}throw Error(N(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(N(189))}}if(t.alternate!==i)throw Error(N(190))}if(t.tag!==3)throw Error(N(188));return t.stateNode.current===t?n:e}function ow(n){return n=N1(n),n!==null?aw(n):null}function aw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=aw(n);if(e!==null)return e;n=n.sibling}return null}var lw=dn.unstable_scheduleCallback,cv=dn.unstable_cancelCallback,I1=dn.unstable_shouldYield,F1=dn.unstable_requestPaint,je=dn.unstable_now,D1=dn.unstable_getCurrentPriorityLevel,Gm=dn.unstable_ImmediatePriority,cw=dn.unstable_UserBlockingPriority,Pd=dn.unstable_NormalPriority,O1=dn.unstable_LowPriority,uw=dn.unstable_IdlePriority,xf=null,Si=null;function j1(n){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(xf,n,void 0,(n.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:H1,$1=Math.log,z1=Math.LN2;function H1(n){return n>>>=0,n===0?32:31-($1(n)/z1|0)|0}var wh=64,bh=4194304;function Vl(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Rd(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=Vl(a):(r&=o,r!==0&&(i=Vl(r)))}else o=t&~s,o!==0?i=Vl(o):r!==0&&(i=Vl(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Qn(e),s=1<<t,i|=n[t],e&=~s;return i}function B1(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U1(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-Qn(r),a=1<<o,c=s[o];c===-1?(!(a&t)||a&i)&&(s[o]=B1(a,e)):c<=e&&(n.expiredLanes|=a),r&=~a}}function Bp(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hw(){var n=wh;return wh<<=1,!(wh&4194240)&&(wh=64),n}function Jf(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function rh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Qn(e),n[e]=t}function W1(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Qn(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function Xm(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Qn(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var ge=0;function dw(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var fw,qm,pw,gw,mw,Up=!1,xh=[],tr=null,nr=null,ir=null,Cc=new Map,kc=new Map,Ss=[],V1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uv(n,e){switch(n){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Cc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(e.pointerId)}}function Il(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=ah(e),e!==null&&qm(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function G1(n,e,t,i,s){switch(e){case"focusin":return tr=Il(tr,n,e,t,i,s),!0;case"dragenter":return nr=Il(nr,n,e,t,i,s),!0;case"mouseover":return ir=Il(ir,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Cc.set(r,Il(Cc.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,kc.set(r,Il(kc.get(r)||null,n,e,t,i,s)),!0}return!1}function vw(n){var e=kr(n.target);if(e!==null){var t=Ho(e);if(t!==null){if(e=t.tag,e===13){if(e=rw(t),e!==null){n.blockedOn=e,mw(n.priority,function(){pw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Wp(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);jp=i,t.target.dispatchEvent(i),jp=null}else return e=ah(t),e!==null&&qm(e),n.blockedOn=t,!1;e.shift()}return!0}function hv(n,e,t){zh(n)&&t.delete(e)}function X1(){Up=!1,tr!==null&&zh(tr)&&(tr=null),nr!==null&&zh(nr)&&(nr=null),ir!==null&&zh(ir)&&(ir=null),Cc.forEach(hv),kc.forEach(hv)}function Fl(n,e){n.blockedOn===e&&(n.blockedOn=null,Up||(Up=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,X1)))}function Tc(n){function e(s){return Fl(s,n)}if(0<xh.length){Fl(xh[0],n);for(var t=1;t<xh.length;t++){var i=xh[t];i.blockedOn===n&&(i.blockedOn=null)}}for(tr!==null&&Fl(tr,n),nr!==null&&Fl(nr,n),ir!==null&&Fl(ir,n),Cc.forEach(e),kc.forEach(e),t=0;t<Ss.length;t++)i=Ss[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Ss.length&&(t=Ss[0],t.blockedOn===null);)vw(t),t.blockedOn===null&&Ss.shift()}var va=vs.ReactCurrentBatchConfig,Ld=!0;function q1(n,e,t,i){var s=ge,r=va.transition;va.transition=null;try{ge=1,Ym(n,e,t,i)}finally{ge=s,va.transition=r}}function Y1(n,e,t,i){var s=ge,r=va.transition;va.transition=null;try{ge=4,Ym(n,e,t,i)}finally{ge=s,va.transition=r}}function Ym(n,e,t,i){if(Ld){var s=Wp(n,e,t,i);if(s===null)cp(n,e,i,Md,t),uv(n,i);else if(G1(s,n,e,t,i))i.stopPropagation();else if(uv(n,i),e&4&&-1<V1.indexOf(n)){for(;s!==null;){var r=ah(s);if(r!==null&&fw(r),r=Wp(n,e,t,i),r===null&&cp(n,e,i,Md,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else cp(n,e,i,null,t)}}var Md=null;function Wp(n,e,t,i){if(Md=null,n=Vm(i),n=kr(n),n!==null)if(e=Ho(n),e===null)n=null;else if(t=e.tag,t===13){if(n=rw(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Md=n,null}function yw(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D1()){case Gm:return 1;case cw:return 4;case Pd:case O1:return 16;case uw:return 536870912;default:return 16}default:return 16}}var Js=null,Km=null,Hh=null;function ww(){if(Hh)return Hh;var n,e=Km,t=e.length,i,s="value"in Js?Js.value:Js.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return Hh=s.slice(n,1<i?1-i:void 0)}function Bh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ah(){return!0}function dv(){return!1}function pn(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ah:dv,this.isPropagationStopped=dv,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ah)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ah)},persist:function(){},isPersistent:Ah}),e}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qm=pn(Pl),oh=Ne({},Pl,{view:0,detail:0}),K1=pn(oh),ep,tp,Dl,Af=Ne({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zm,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dl&&(Dl&&n.type==="mousemove"?(ep=n.screenX-Dl.screenX,tp=n.screenY-Dl.screenY):tp=ep=0,Dl=n),ep)},movementY:function(n){return"movementY"in n?n.movementY:tp}}),fv=pn(Af),Q1=Ne({},Af,{dataTransfer:0}),Z1=pn(Q1),J1=Ne({},oh,{relatedTarget:0}),np=pn(J1),eS=Ne({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=pn(eS),nS=Ne({},Pl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iS=pn(nS),sS=Ne({},Pl,{data:0}),pv=pn(sS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lS(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=aS[n])?!!e[n]:!1}function Zm(){return lS}var cS=Ne({},oh,{key:function(n){if(n.key){var e=rS[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Bh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zm,charCode:function(n){return n.type==="keypress"?Bh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),uS=pn(cS),hS=Ne({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gv=pn(hS),dS=Ne({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zm}),fS=pn(dS),pS=Ne({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),gS=pn(pS),mS=Ne({},Af,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vS=pn(mS),yS=[9,13,27,32],Jm=hs&&"CompositionEvent"in window,dc=null;hs&&"documentMode"in document&&(dc=document.documentMode);var wS=hs&&"TextEvent"in window&&!dc,bw=hs&&(!Jm||dc&&8<dc&&11>=dc),mv=" ",vv=!1;function xw(n,e){switch(n){case"keyup":return yS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ia=!1;function bS(n,e){switch(n){case"compositionend":return Aw(e);case"keypress":return e.which!==32?null:(vv=!0,mv);case"textInput":return n=e.data,n===mv&&vv?null:n;default:return null}}function xS(n,e){if(ia)return n==="compositionend"||!Jm&&xw(n,e)?(n=ww(),Hh=Km=Js=null,ia=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bw&&e.locale!=="ko"?null:e.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!AS[n.type]:e==="textarea"}function Sw(n,e,t,i){ew(i),e=Nd(e,"onChange"),0<e.length&&(t=new Qm("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var fc=null,Pc=null;function SS(n){Iw(n,0)}function Sf(n){var e=oa(n);if(Xy(e))return n}function ES(n,e){if(n==="change")return e}var Ew=!1;if(hs){var ip;if(hs){var sp="oninput"in document;if(!sp){var wv=document.createElement("div");wv.setAttribute("oninput","return;"),sp=typeof wv.oninput=="function"}ip=sp}else ip=!1;Ew=ip&&(!document.documentMode||9<document.documentMode)}function bv(){fc&&(fc.detachEvent("onpropertychange",_w),Pc=fc=null)}function _w(n){if(n.propertyName==="value"&&Sf(Pc)){var e=[];Sw(e,Pc,n,Vm(n)),sw(SS,e)}}function _S(n,e,t){n==="focusin"?(bv(),fc=e,Pc=t,fc.attachEvent("onpropertychange",_w)):n==="focusout"&&bv()}function CS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Sf(Pc)}function kS(n,e){if(n==="click")return Sf(e)}function TS(n,e){if(n==="input"||n==="change")return Sf(e)}function PS(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jn=typeof Object.is=="function"?Object.is:PS;function Rc(n,e){if(Jn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!Cp.call(e,s)||!Jn(n[s],e[s]))return!1}return!0}function xv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Av(n,e){var t=xv(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=xv(t)}}function Cw(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Cw(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function kw(){for(var n=window,e=Cd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Cd(n.document)}return e}function e0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RS(n){var e=kw(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Cw(t.ownerDocument.documentElement,t)){if(i!==null&&e0(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=Av(t,r);var o=Av(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var LS=hs&&"documentMode"in document&&11>=document.documentMode,sa=null,Vp=null,pc=null,Gp=!1;function Sv(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Gp||sa==null||sa!==Cd(i)||(i=sa,"selectionStart"in i&&e0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pc&&Rc(pc,i)||(pc=i,i=Nd(Vp,"onSelect"),0<i.length&&(e=new Qm("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=sa)))}function Sh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ra={animationend:Sh("Animation","AnimationEnd"),animationiteration:Sh("Animation","AnimationIteration"),animationstart:Sh("Animation","AnimationStart"),transitionend:Sh("Transition","TransitionEnd")},rp={},Tw={};hs&&(Tw=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Ef(n){if(rp[n])return rp[n];if(!ra[n])return n;var e=ra[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Tw)return rp[n]=e[t];return n}var Pw=Ef("animationend"),Rw=Ef("animationiteration"),Lw=Ef("animationstart"),Mw=Ef("transitionend"),Nw=new Map,Ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(n,e){Nw.set(n,e),zo(e,[n])}for(var op=0;op<Ev.length;op++){var ap=Ev[op],MS=ap.toLowerCase(),NS=ap[0].toUpperCase()+ap.slice(1);gr(MS,"on"+NS)}gr(Pw,"onAnimationEnd");gr(Rw,"onAnimationIteration");gr(Lw,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(Mw,"onTransitionEnd");bl("onMouseEnter",["mouseout","mouseover"]);bl("onMouseLeave",["mouseout","mouseover"]);bl("onPointerEnter",["pointerout","pointerover"]);bl("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gl));function _v(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,M1(i,e,void 0,n),n.currentTarget=null}function Iw(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==r&&s.isPropagationStopped())break e;_v(s,a,u),r=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==r&&s.isPropagationStopped())break e;_v(s,a,u),r=c}}}if(Td)throw n=Hp,Td=!1,Hp=null,n}function xe(n,e){var t=e[Qp];t===void 0&&(t=e[Qp]=new Set);var i=n+"__bubble";t.has(i)||(Fw(e,n,2,!1),t.add(i))}function lp(n,e,t){var i=0;e&&(i|=4),Fw(t,n,i,e)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Lc(n){if(!n[Eh]){n[Eh]=!0,By.forEach(function(t){t!=="selectionchange"&&(IS.has(t)||lp(t,!1,n),lp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Eh]||(e[Eh]=!0,lp("selectionchange",!1,e))}}function Fw(n,e,t,i){switch(yw(e)){case 1:var s=q1;break;case 4:s=Y1;break;default:s=Ym}t=s.bind(null,e,t,n),s=void 0,!zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function cp(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=kr(a),o===null)return;if(c=o.tag,c===5||c===6){i=r=o;continue e}a=a.parentNode}}i=i.return}sw(function(){var u=r,h=Vm(t),d=[];e:{var f=Nw.get(n);if(f!==void 0){var p=Qm,m=n;switch(n){case"keypress":if(Bh(t)===0)break e;case"keydown":case"keyup":p=uS;break;case"focusin":m="focus",p=np;break;case"focusout":m="blur",p=np;break;case"beforeblur":case"afterblur":p=np;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Z1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fS;break;case Pw:case Rw:case Lw:p=tS;break;case Mw:p=gS;break;case"scroll":p=K1;break;case"wheel":p=vS;break;case"copy":case"cut":case"paste":p=iS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gv}var b=(e&4)!==0,E=!b&&n==="scroll",g=b?f!==null?f+"Capture":null:f;b=[];for(var y=u,A;y!==null;){A=y;var S=A.stateNode;if(A.tag===5&&S!==null&&(A=S,g!==null&&(S=_c(y,g),S!=null&&b.push(Mc(y,S,A)))),E)break;y=y.return}0<b.length&&(f=new p(f,m,null,t,h),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==jp&&(m=t.relatedTarget||t.fromElement)&&(kr(m)||m[ds]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?kr(m):null,m!==null&&(E=Ho(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(b=fv,S="onMouseLeave",g="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(b=gv,S="onPointerLeave",g="onPointerEnter",y="pointer"),E=p==null?f:oa(p),A=m==null?f:oa(m),f=new b(S,y+"leave",p,t,h),f.target=E,f.relatedTarget=A,S=null,kr(h)===u&&(b=new b(g,y+"enter",m,t,h),b.target=A,b.relatedTarget=E,S=b),E=S,p&&m)t:{for(b=p,g=m,y=0,A=b;A;A=Vo(A))y++;for(A=0,S=g;S;S=Vo(S))A++;for(;0<y-A;)b=Vo(b),y--;for(;0<A-y;)g=Vo(g),A--;for(;y--;){if(b===g||g!==null&&b===g.alternate)break t;b=Vo(b),g=Vo(g)}b=null}else b=null;p!==null&&Cv(d,f,p,b,!1),m!==null&&E!==null&&Cv(d,E,m,b,!0)}}e:{if(f=u?oa(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var P=ES;else if(yv(f))if(Ew)P=TS;else{P=CS;var _=_S}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=kS);if(P&&(P=P(n,u))){Sw(d,P,t,h);break e}_&&_(n,f,u),n==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Np(f,"number",f.value)}switch(_=u?oa(u):window,n){case"focusin":(yv(_)||_.contentEditable==="true")&&(sa=_,Vp=u,pc=null);break;case"focusout":pc=Vp=sa=null;break;case"mousedown":Gp=!0;break;case"contextmenu":case"mouseup":case"dragend":Gp=!1,Sv(d,t,h);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":Sv(d,t,h)}var C;if(Jm)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ia?xw(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(bw&&t.locale!=="ko"&&(ia||T!=="onCompositionStart"?T==="onCompositionEnd"&&ia&&(C=ww()):(Js=h,Km="value"in Js?Js.value:Js.textContent,ia=!0)),_=Nd(u,T),0<_.length&&(T=new pv(T,n,null,t,h),d.push({event:T,listeners:_}),C?T.data=C:(C=Aw(t),C!==null&&(T.data=C)))),(C=wS?bS(n,t):xS(n,t))&&(u=Nd(u,"onBeforeInput"),0<u.length&&(h=new pv("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=C))}Iw(d,e)})}function Mc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Nd(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=_c(n,t),r!=null&&i.unshift(Mc(n,r,s)),r=_c(n,e),r!=null&&i.push(Mc(n,r,s))),n=n.return}return i}function Vo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Cv(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&u!==null&&(a=u,s?(c=_c(t,r),c!=null&&o.unshift(Mc(t,c,a))):s||(c=_c(t,r),c!=null&&o.push(Mc(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var FS=/\r\n?/g,DS=/\u0000|\uFFFD/g;function kv(n){return(typeof n=="string"?n:""+n).replace(FS,`
`).replace(DS,"")}function _h(n,e,t){if(e=kv(e),kv(n)!==e&&t)throw Error(N(425))}function Id(){}var Xp=null,qp=null;function Yp(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kp=typeof setTimeout=="function"?setTimeout:void 0,OS=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(n){return Tv.resolve(null).then(n).catch($S)}:Kp;function $S(n){setTimeout(function(){throw n})}function up(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),Tc(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);Tc(e)}function sr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Pv(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),xi="__reactFiber$"+Rl,Nc="__reactProps$"+Rl,ds="__reactContainer$"+Rl,Qp="__reactEvents$"+Rl,zS="__reactListeners$"+Rl,HS="__reactHandles$"+Rl;function kr(n){var e=n[xi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ds]||t[xi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Pv(n);n!==null;){if(t=n[xi])return t;n=Pv(n)}return e}n=t,t=n.parentNode}return null}function ah(n){return n=n[xi]||n[ds],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function oa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(N(33))}function _f(n){return n[Nc]||null}var Zp=[],aa=-1;function mr(n){return{current:n}}function Se(n){0>aa||(n.current=Zp[aa],Zp[aa]=null,aa--)}function be(n,e){aa++,Zp[aa]=n.current,n.current=e}var ur={},Et=mr(ur),Xt=mr(!1),Po=ur;function xl(n,e){var t=n.type.contextTypes;if(!t)return ur;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function qt(n){return n=n.childContextTypes,n!=null}function Fd(){Se(Xt),Se(Et)}function Rv(n,e,t){if(Et.current!==ur)throw Error(N(168));be(Et,e),be(Xt,t)}function Dw(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(N(108,_1(n)||"Unknown",s));return Ne({},t,i)}function Dd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ur,Po=Et.current,be(Et,n),be(Xt,Xt.current),!0}function Lv(n,e,t){var i=n.stateNode;if(!i)throw Error(N(169));t?(n=Dw(n,e,Po),i.__reactInternalMemoizedMergedChildContext=n,Se(Xt),Se(Et),be(Et,n)):Se(Xt),be(Xt,t)}var Mi=null,Cf=!1,hp=!1;function Ow(n){Mi===null?Mi=[n]:Mi.push(n)}function BS(n){Cf=!0,Ow(n)}function vr(){if(!hp&&Mi!==null){hp=!0;var n=0,e=ge;try{var t=Mi;for(ge=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Mi=null,Cf=!1}catch(s){throw Mi!==null&&(Mi=Mi.slice(n+1)),lw(Gm,vr),s}finally{ge=e,hp=!1}}return null}var la=[],ca=0,Od=null,jd=0,xn=[],An=0,Ro=null,ss=1,rs="";function wr(n,e){la[ca++]=jd,la[ca++]=Od,Od=n,jd=e}function jw(n,e,t){xn[An++]=ss,xn[An++]=rs,xn[An++]=Ro,Ro=n;var i=ss;n=rs;var s=32-Qn(i)-1;i&=~(1<<s),t+=1;var r=32-Qn(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ss=1<<32-Qn(e)+s|t<<s|i,rs=r+n}else ss=1<<r|t<<s|i,rs=n}function t0(n){n.return!==null&&(wr(n,1),jw(n,1,0))}function n0(n){for(;n===Od;)Od=la[--ca],la[ca]=null,jd=la[--ca],la[ca]=null;for(;n===Ro;)Ro=xn[--An],xn[An]=null,rs=xn[--An],xn[An]=null,ss=xn[--An],xn[An]=null}var un=null,cn=null,Ce=!1,Yn=null;function $w(n,e){var t=_n(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Mv(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,un=n,cn=sr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,un=n,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ro!==null?{id:ss,overflow:rs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=_n(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,un=n,cn=null,!0):!1;default:return!1}}function Jp(n){return(n.mode&1)!==0&&(n.flags&128)===0}function eg(n){if(Ce){var e=cn;if(e){var t=e;if(!Mv(n,e)){if(Jp(n))throw Error(N(418));e=sr(t.nextSibling);var i=un;e&&Mv(n,e)?$w(i,t):(n.flags=n.flags&-4097|2,Ce=!1,un=n)}}else{if(Jp(n))throw Error(N(418));n.flags=n.flags&-4097|2,Ce=!1,un=n}}}function Nv(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function Ch(n){if(n!==un)return!1;if(!Ce)return Nv(n),Ce=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Yp(n.type,n.memoizedProps)),e&&(e=cn)){if(Jp(n))throw zw(),Error(N(418));for(;e;)$w(n,e),e=sr(e.nextSibling)}if(Nv(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(N(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){cn=sr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}cn=null}}else cn=un?sr(n.stateNode.nextSibling):null;return!0}function zw(){for(var n=cn;n;)n=sr(n.nextSibling)}function Al(){cn=un=null,Ce=!1}function i0(n){Yn===null?Yn=[n]:Yn.push(n)}var US=vs.ReactCurrentBatchConfig;function Ol(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(N(309));var i=t.stateNode}if(!i)throw Error(N(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(N(284));if(!t._owner)throw Error(N(290,n))}return n}function kh(n,e){throw n=Object.prototype.toString.call(e),Error(N(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Iv(n){var e=n._init;return e(n._payload)}function Hw(n){function e(g,y){if(n){var A=g.deletions;A===null?(g.deletions=[y],g.flags|=16):A.push(y)}}function t(g,y){if(!n)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=lr(g,y),g.index=0,g.sibling=null,g}function r(g,y,A){return g.index=A,n?(A=g.alternate,A!==null?(A=A.index,A<y?(g.flags|=2,y):A):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,y,A,S){return y===null||y.tag!==6?(y=yp(A,g.mode,S),y.return=g,y):(y=s(y,A),y.return=g,y)}function c(g,y,A,S){var P=A.type;return P===na?h(g,y,A.props.children,S,A.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xs&&Iv(P)===y.type)?(S=s(y,A.props),S.ref=Ol(g,y,A),S.return=g,S):(S=Yh(A.type,A.key,A.props,null,g.mode,S),S.ref=Ol(g,y,A),S.return=g,S)}function u(g,y,A,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==A.containerInfo||y.stateNode.implementation!==A.implementation?(y=wp(A,g.mode,S),y.return=g,y):(y=s(y,A.children||[]),y.return=g,y)}function h(g,y,A,S,P){return y===null||y.tag!==7?(y=To(A,g.mode,S,P),y.return=g,y):(y=s(y,A),y.return=g,y)}function d(g,y,A){if(typeof y=="string"&&y!==""||typeof y=="number")return y=yp(""+y,g.mode,A),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mh:return A=Yh(y.type,y.key,y.props,null,g.mode,A),A.ref=Ol(g,null,y),A.return=g,A;case ta:return y=wp(y,g.mode,A),y.return=g,y;case xs:var S=y._init;return d(g,S(y._payload),A)}if(Wl(y)||Ml(y))return y=To(y,g.mode,A,null),y.return=g,y;kh(g,y)}return null}function f(g,y,A,S){var P=y!==null?y.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return P!==null?null:a(g,y,""+A,S);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case mh:return A.key===P?c(g,y,A,S):null;case ta:return A.key===P?u(g,y,A,S):null;case xs:return P=A._init,f(g,y,P(A._payload),S)}if(Wl(A)||Ml(A))return P!==null?null:h(g,y,A,S,null);kh(g,A)}return null}function p(g,y,A,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(A)||null,a(y,g,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case mh:return g=g.get(S.key===null?A:S.key)||null,c(y,g,S,P);case ta:return g=g.get(S.key===null?A:S.key)||null,u(y,g,S,P);case xs:var _=S._init;return p(g,y,A,_(S._payload),P)}if(Wl(S)||Ml(S))return g=g.get(A)||null,h(y,g,S,P,null);kh(y,S)}return null}function m(g,y,A,S){for(var P=null,_=null,C=y,T=y=0,R=null;C!==null&&T<A.length;T++){C.index>T?(R=C,C=null):R=C.sibling;var L=f(g,C,A[T],S);if(L===null){C===null&&(C=R);break}n&&C&&L.alternate===null&&e(g,C),y=r(L,y,T),_===null?P=L:_.sibling=L,_=L,C=R}if(T===A.length)return t(g,C),Ce&&wr(g,T),P;if(C===null){for(;T<A.length;T++)C=d(g,A[T],S),C!==null&&(y=r(C,y,T),_===null?P=C:_.sibling=C,_=C);return Ce&&wr(g,T),P}for(C=i(g,C);T<A.length;T++)R=p(C,g,T,A[T],S),R!==null&&(n&&R.alternate!==null&&C.delete(R.key===null?T:R.key),y=r(R,y,T),_===null?P=R:_.sibling=R,_=R);return n&&C.forEach(function(D){return e(g,D)}),Ce&&wr(g,T),P}function b(g,y,A,S){var P=Ml(A);if(typeof P!="function")throw Error(N(150));if(A=P.call(A),A==null)throw Error(N(151));for(var _=P=null,C=y,T=y=0,R=null,L=A.next();C!==null&&!L.done;T++,L=A.next()){C.index>T?(R=C,C=null):R=C.sibling;var D=f(g,C,L.value,S);if(D===null){C===null&&(C=R);break}n&&C&&D.alternate===null&&e(g,C),y=r(D,y,T),_===null?P=D:_.sibling=D,_=D,C=R}if(L.done)return t(g,C),Ce&&wr(g,T),P;if(C===null){for(;!L.done;T++,L=A.next())L=d(g,L.value,S),L!==null&&(y=r(L,y,T),_===null?P=L:_.sibling=L,_=L);return Ce&&wr(g,T),P}for(C=i(g,C);!L.done;T++,L=A.next())L=p(C,g,T,L.value,S),L!==null&&(n&&L.alternate!==null&&C.delete(L.key===null?T:L.key),y=r(L,y,T),_===null?P=L:_.sibling=L,_=L);return n&&C.forEach(function(q){return e(g,q)}),Ce&&wr(g,T),P}function E(g,y,A,S){if(typeof A=="object"&&A!==null&&A.type===na&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case mh:e:{for(var P=A.key,_=y;_!==null;){if(_.key===P){if(P=A.type,P===na){if(_.tag===7){t(g,_.sibling),y=s(_,A.props.children),y.return=g,g=y;break e}}else if(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===xs&&Iv(P)===_.type){t(g,_.sibling),y=s(_,A.props),y.ref=Ol(g,_,A),y.return=g,g=y;break e}t(g,_);break}else e(g,_);_=_.sibling}A.type===na?(y=To(A.props.children,g.mode,S,A.key),y.return=g,g=y):(S=Yh(A.type,A.key,A.props,null,g.mode,S),S.ref=Ol(g,y,A),S.return=g,g=S)}return o(g);case ta:e:{for(_=A.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===A.containerInfo&&y.stateNode.implementation===A.implementation){t(g,y.sibling),y=s(y,A.children||[]),y.return=g,g=y;break e}else{t(g,y);break}else e(g,y);y=y.sibling}y=wp(A,g.mode,S),y.return=g,g=y}return o(g);case xs:return _=A._init,E(g,y,_(A._payload),S)}if(Wl(A))return m(g,y,A,S);if(Ml(A))return b(g,y,A,S);kh(g,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,y!==null&&y.tag===6?(t(g,y.sibling),y=s(y,A),y.return=g,g=y):(t(g,y),y=yp(A,g.mode,S),y.return=g,g=y),o(g)):t(g,y)}return E}var Sl=Hw(!0),Bw=Hw(!1),$d=mr(null),zd=null,ua=null,s0=null;function r0(){s0=ua=zd=null}function o0(n){var e=$d.current;Se($d),n._currentValue=e}function tg(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function ya(n,e){zd=n,s0=ua=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Vt=!0),n.firstContext=null)}function Tn(n){var e=n._currentValue;if(s0!==n)if(n={context:n,memoizedValue:e,next:null},ua===null){if(zd===null)throw Error(N(308));ua=n,zd.dependencies={lanes:0,firstContext:n}}else ua=ua.next=n;return e}var Tr=null;function a0(n){Tr===null?Tr=[n]:Tr.push(n)}function Uw(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,a0(e)):(t.next=s.next,s.next=t),e.interleaved=t,fs(n,i)}function fs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var As=!1;function l0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ww(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function os(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function rr(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,oe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,fs(n,t)}return s=i.interleaved,s===null?(e.next=e,a0(i)):(e.next=s.next,s.next=e),i.interleaved=e,fs(n,t)}function Uh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Xm(n,t)}}function Fv(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Hd(n,e,t,i){var s=n.updateQueue;As=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,a=r;do{var f=a.lane,p=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,b=a;switch(f=e,p=t,b.tag){case 1:if(m=b.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Ne({},d,f);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Mo|=o,n.lanes=o,n.memoizedState=d}}function Dv(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(N(191,s));s.call(i)}}}var lh={},Ei=mr(lh),Ic=mr(lh),Fc=mr(lh);function Pr(n){if(n===lh)throw Error(N(174));return n}function c0(n,e){switch(be(Fc,e),be(Ic,n),be(Ei,lh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fp(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Fp(e,n)}Se(Ei),be(Ei,e)}function El(){Se(Ei),Se(Ic),Se(Fc)}function Vw(n){Pr(Fc.current);var e=Pr(Ei.current),t=Fp(e,n.type);e!==t&&(be(Ic,n),be(Ei,t))}function u0(n){Ic.current===n&&(Se(Ei),Se(Ic))}var Le=mr(0);function Bd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dp=[];function h0(){for(var n=0;n<dp.length;n++)dp[n]._workInProgressVersionPrimary=null;dp.length=0}var Wh=vs.ReactCurrentDispatcher,fp=vs.ReactCurrentBatchConfig,Lo=0,Me=null,Ye=null,st=null,Ud=!1,gc=!1,Dc=0,WS=0;function pt(){throw Error(N(321))}function d0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Jn(n[t],e[t]))return!1;return!0}function f0(n,e,t,i,s,r){if(Lo=r,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wh.current=n===null||n.memoizedState===null?qS:YS,n=t(i,s),gc){r=0;do{if(gc=!1,Dc=0,25<=r)throw Error(N(301));r+=1,st=Ye=null,e.updateQueue=null,Wh.current=KS,n=t(i,s)}while(gc)}if(Wh.current=Wd,e=Ye!==null&&Ye.next!==null,Lo=0,st=Ye=Me=null,Ud=!1,e)throw Error(N(300));return n}function p0(){var n=Dc!==0;return Dc=0,n}function ni(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Me.memoizedState=st=n:st=st.next=n,st}function Pn(){if(Ye===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=Ye.next;var e=st===null?Me.memoizedState:st.next;if(e!==null)st=e,Ye=n;else{if(n===null)throw Error(N(310));Ye=n,n={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},st===null?Me.memoizedState=st=n:st=st.next=n}return st}function Oc(n,e){return typeof e=="function"?e(n):e}function pp(n){var e=Pn(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=n;var i=Ye,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,c=null,u=r;do{var h=u.lane;if((Lo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=i):c=c.next=d,Me.lanes|=h,Mo|=h}u=u.next}while(u!==null&&u!==r);c===null?o=i:c.next=a,Jn(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Me.lanes|=r,Mo|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gp(n){var e=Pn(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Jn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function Gw(){}function Xw(n,e){var t=Me,i=Pn(),s=e(),r=!Jn(i.memoizedState,s);if(r&&(i.memoizedState=s,Vt=!0),i=i.queue,g0(Kw.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||st!==null&&st.memoizedState.tag&1){if(t.flags|=2048,jc(9,Yw.bind(null,t,i,s,e),void 0,null),rt===null)throw Error(N(349));Lo&30||qw(t,e,s)}return s}function qw(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Yw(n,e,t,i){e.value=t,e.getSnapshot=i,Qw(e)&&Zw(n)}function Kw(n,e,t){return t(function(){Qw(e)&&Zw(n)})}function Qw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jn(n,t)}catch{return!0}}function Zw(n){var e=fs(n,1);e!==null&&Zn(e,n,1,-1)}function Ov(n){var e=ni();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:n},e.queue=n,n=n.dispatch=XS.bind(null,Me,n),[e.memoizedState,n]}function jc(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Jw(){return Pn().memoizedState}function Vh(n,e,t,i){var s=ni();Me.flags|=n,s.memoizedState=jc(1|e,t,void 0,i===void 0?null:i)}function kf(n,e,t,i){var s=Pn();i=i===void 0?null:i;var r=void 0;if(Ye!==null){var o=Ye.memoizedState;if(r=o.destroy,i!==null&&d0(i,o.deps)){s.memoizedState=jc(e,t,r,i);return}}Me.flags|=n,s.memoizedState=jc(1|e,t,r,i)}function jv(n,e){return Vh(8390656,8,n,e)}function g0(n,e){return kf(2048,8,n,e)}function eb(n,e){return kf(4,2,n,e)}function tb(n,e){return kf(4,4,n,e)}function nb(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ib(n,e,t){return t=t!=null?t.concat([n]):null,kf(4,4,nb.bind(null,e,n),t)}function m0(){}function sb(n,e){var t=Pn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&d0(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function rb(n,e){var t=Pn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&d0(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function ob(n,e,t){return Lo&21?(Jn(t,e)||(t=hw(),Me.lanes|=t,Mo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Vt=!0),n.memoizedState=t)}function VS(n,e){var t=ge;ge=t!==0&&4>t?t:4,n(!0);var i=fp.transition;fp.transition={};try{n(!1),e()}finally{ge=t,fp.transition=i}}function ab(){return Pn().memoizedState}function GS(n,e,t){var i=ar(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},lb(n))cb(e,t);else if(t=Uw(n,e,t,i),t!==null){var s=Rt();Zn(t,n,i,s),ub(t,e,i)}}function XS(n,e,t){var i=ar(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(lb(n))cb(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,Jn(a,o)){var c=e.interleaved;c===null?(s.next=s,a0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=Uw(n,e,s,i),t!==null&&(s=Rt(),Zn(t,n,i,s),ub(t,e,i))}}function lb(n){var e=n.alternate;return n===Me||e!==null&&e===Me}function cb(n,e){gc=Ud=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function ub(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Xm(n,t)}}var Wd={readContext:Tn,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},qS={readContext:Tn,useCallback:function(n,e){return ni().memoizedState=[n,e===void 0?null:e],n},useContext:Tn,useEffect:jv,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Vh(4194308,4,nb.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Vh(4194308,4,n,e)},useInsertionEffect:function(n,e){return Vh(4,2,n,e)},useMemo:function(n,e){var t=ni();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=ni();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=GS.bind(null,Me,n),[i.memoizedState,n]},useRef:function(n){var e=ni();return n={current:n},e.memoizedState=n},useState:Ov,useDebugValue:m0,useDeferredValue:function(n){return ni().memoizedState=n},useTransition:function(){var n=Ov(!1),e=n[0];return n=VS.bind(null,n[1]),ni().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Me,s=ni();if(Ce){if(t===void 0)throw Error(N(407));t=t()}else{if(t=e(),rt===null)throw Error(N(349));Lo&30||qw(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,jv(Kw.bind(null,i,r,n),[n]),i.flags|=2048,jc(9,Yw.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=ni(),e=rt.identifierPrefix;if(Ce){var t=rs,i=ss;t=(i&~(1<<32-Qn(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Dc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=WS++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},YS={readContext:Tn,useCallback:sb,useContext:Tn,useEffect:g0,useImperativeHandle:ib,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:rb,useReducer:pp,useRef:Jw,useState:function(){return pp(Oc)},useDebugValue:m0,useDeferredValue:function(n){var e=Pn();return ob(e,Ye.memoizedState,n)},useTransition:function(){var n=pp(Oc)[0],e=Pn().memoizedState;return[n,e]},useMutableSource:Gw,useSyncExternalStore:Xw,useId:ab,unstable_isNewReconciler:!1},KS={readContext:Tn,useCallback:sb,useContext:Tn,useEffect:g0,useImperativeHandle:ib,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:rb,useReducer:gp,useRef:Jw,useState:function(){return gp(Oc)},useDebugValue:m0,useDeferredValue:function(n){var e=Pn();return Ye===null?e.memoizedState=n:ob(e,Ye.memoizedState,n)},useTransition:function(){var n=gp(Oc)[0],e=Pn().memoizedState;return[n,e]},useMutableSource:Gw,useSyncExternalStore:Xw,useId:ab,unstable_isNewReconciler:!1};function Nn(n,e){if(n&&n.defaultProps){e=Ne({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function ng(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Ne({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Tf={isMounted:function(n){return(n=n._reactInternals)?Ho(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Rt(),s=ar(n),r=os(i,s);r.payload=e,t!=null&&(r.callback=t),e=rr(n,r,s),e!==null&&(Zn(e,n,s,i),Uh(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Rt(),s=ar(n),r=os(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=rr(n,r,s),e!==null&&(Zn(e,n,s,i),Uh(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Rt(),i=ar(n),s=os(t,i);s.tag=2,e!=null&&(s.callback=e),e=rr(n,s,i),e!==null&&(Zn(e,n,i,t),Uh(e,n,i))}};function $v(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Rc(t,i)||!Rc(s,r):!0}function hb(n,e,t){var i=!1,s=ur,r=e.contextType;return typeof r=="object"&&r!==null?r=Tn(r):(s=qt(e)?Po:Et.current,i=e.contextTypes,r=(i=i!=null)?xl(n,s):ur),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tf,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function zv(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Tf.enqueueReplaceState(e,e.state,null)}function ig(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},l0(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Tn(r):(r=qt(e)?Po:Et.current,s.context=xl(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(ng(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tf.enqueueReplaceState(s,s.state,null),Hd(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function _l(n,e){try{var t="",i=e;do t+=E1(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function mp(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function sg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QS=typeof WeakMap=="function"?WeakMap:Map;function db(n,e,t){t=os(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Gd||(Gd=!0,pg=i),sg(n,e)},t}function fb(n,e,t){t=os(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){sg(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){sg(n,e),typeof i!="function"&&(or===null?or=new Set([this]):or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Hv(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new QS;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=hE.bind(null,n,e,t),e.then(n,n))}function Bv(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Uv(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=os(-1,1),e.tag=2,rr(t,e,1))),t.lanes|=1),n)}var ZS=vs.ReactCurrentOwner,Vt=!1;function Tt(n,e,t,i){e.child=n===null?Bw(e,null,t,i):Sl(e,n.child,t,i)}function Wv(n,e,t,i,s){t=t.render;var r=e.ref;return ya(e,s),i=f0(n,e,t,i,r,s),t=p0(),n!==null&&!Vt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ps(n,e,s)):(Ce&&t&&t0(e),e.flags|=1,Tt(n,e,i,s),e.child)}function Vv(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!E0(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,pb(n,e,r,i,s)):(n=Yh(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Rc,t(o,i)&&n.ref===e.ref)return ps(n,e,s)}return e.flags|=1,n=lr(r,i),n.ref=e.ref,n.return=e,e.child=n}function pb(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Rc(r,i)&&n.ref===e.ref)if(Vt=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Vt=!0);else return e.lanes=n.lanes,ps(n,e,s)}return rg(n,e,t,i,s)}function gb(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(da,an),an|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,be(da,an),an|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,be(da,an),an|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,be(da,an),an|=i;return Tt(n,e,s,t),e.child}function mb(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function rg(n,e,t,i,s){var r=qt(t)?Po:Et.current;return r=xl(e,r),ya(e,s),t=f0(n,e,t,i,r,s),i=p0(),n!==null&&!Vt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ps(n,e,s)):(Ce&&i&&t0(e),e.flags|=1,Tt(n,e,t,s),e.child)}function Gv(n,e,t,i,s){if(qt(t)){var r=!0;Dd(e)}else r=!1;if(ya(e,s),e.stateNode===null)Gh(n,e),hb(e,t,i),ig(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Tn(u):(u=qt(t)?Po:Et.current,u=xl(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||c!==u)&&zv(e,o,i,u),As=!1;var f=e.memoizedState;o.state=f,Hd(e,i,o,s),c=e.memoizedState,a!==i||f!==c||Xt.current||As?(typeof h=="function"&&(ng(e,t,h,i),c=e.memoizedState),(a=As||$v(e,t,a,i,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),o.props=i,o.state=c,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ww(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Nn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=qt(t)?Po:Et.current,c=xl(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&zv(e,o,i,c),As=!1,f=e.memoizedState,o.state=f,Hd(e,i,o,s);var m=e.memoizedState;a!==d||f!==m||Xt.current||As?(typeof p=="function"&&(ng(e,t,p,i),m=e.memoizedState),(u=As||$v(e,t,u,i,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return og(n,e,t,i,r,s)}function og(n,e,t,i,s,r){mb(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&Lv(e,t,!1),ps(n,e,r);i=e.stateNode,ZS.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Sl(e,n.child,null,r),e.child=Sl(e,null,a,r)):Tt(n,e,a,r),e.memoizedState=i.state,s&&Lv(e,t,!0),e.child}function vb(n){var e=n.stateNode;e.pendingContext?Rv(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Rv(n,e.context,!1),c0(n,e.containerInfo)}function Xv(n,e,t,i,s){return Al(),i0(s),e.flags|=256,Tt(n,e,t,i),e.child}var ag={dehydrated:null,treeContext:null,retryLane:0};function lg(n){return{baseLanes:n,cachePool:null,transitions:null}}function yb(n,e,t){var i=e.pendingProps,s=Le.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),be(Le,s&1),n===null)return eg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Lf(o,i,0,null),n=To(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=lg(t),e.memoizedState=ag,n):v0(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return JS(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=lr(s,c),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=lr(a,r):(r=To(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?lg(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=ag,i}return r=n.child,n=r.sibling,i=lr(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function v0(n,e){return e=Lf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Th(n,e,t,i){return i!==null&&i0(i),Sl(e,n.child,null,t),n=v0(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function JS(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=mp(Error(N(422))),Th(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Lf({mode:"visible",children:i.children},s,0,null),r=To(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Sl(e,n.child,null,o),e.child.memoizedState=lg(o),e.memoizedState=ag,r);if(!(e.mode&1))return Th(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(N(419)),i=mp(r,i,void 0),Th(n,e,o,i)}if(a=(o&n.childLanes)!==0,Vt||a){if(i=rt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,fs(n,s),Zn(i,n,s,-1))}return S0(),i=mp(Error(N(421))),Th(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=dE.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,cn=sr(s.nextSibling),un=e,Ce=!0,Yn=null,n!==null&&(xn[An++]=ss,xn[An++]=rs,xn[An++]=Ro,ss=n.id,rs=n.overflow,Ro=e),e=v0(e,i.children),e.flags|=4096,e)}function qv(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),tg(n.return,e,t)}function vp(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function wb(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Tt(n,e,i.children,t),i=Le.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qv(n,t,e);else if(n.tag===19)qv(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(be(Le,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Bd(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),vp(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Bd(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}vp(e,!0,t,null,r);break;case"together":vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ps(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Mo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(N(153));if(e.child!==null){for(n=e.child,t=lr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=lr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function eE(n,e,t){switch(e.tag){case 3:vb(e),Al();break;case 5:Vw(e);break;case 1:qt(e.type)&&Dd(e);break;case 4:c0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;be($d,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(be(Le,Le.current&1),e.flags|=128,null):t&e.child.childLanes?yb(n,e,t):(be(Le,Le.current&1),n=ps(n,e,t),n!==null?n.sibling:null);be(Le,Le.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return wb(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Le,Le.current),i)break;return null;case 22:case 23:return e.lanes=0,gb(n,e,t)}return ps(n,e,t)}var bb,cg,xb,Ab;bb=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};cg=function(){};xb=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Pr(Ei.current);var r=null;switch(t){case"input":s=Lp(n,s),i=Lp(n,i),r=[];break;case"select":s=Ne({},s,{value:void 0}),i=Ne({},i,{value:void 0}),r=[];break;case"textarea":s=Ip(n,s),i=Ip(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Id)}Dp(t,i);var o;t=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sc.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(a=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xe("scroll",n),r||a===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Ab=function(n,e,t,i){t!==i&&(e.flags|=4)};function jl(n,e){if(!Ce)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function gt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function tE(n,e,t){var i=e.pendingProps;switch(n0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return qt(e.type)&&Fd(),gt(e),null;case 3:return i=e.stateNode,El(),Se(Xt),Se(Et),h0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Ch(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(vg(Yn),Yn=null))),cg(n,e),gt(e),null;case 5:u0(e);var s=Pr(Fc.current);if(t=e.type,n!==null&&e.stateNode!=null)xb(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(N(166));return gt(e),null}if(n=Pr(Ei.current),Ch(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[xi]=e,i[Nc]=r,n=(e.mode&1)!==0,t){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(s=0;s<Gl.length;s++)xe(Gl[s],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":iv(i,r),xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},xe("invalid",i);break;case"textarea":rv(i,r),xe("invalid",i)}Dp(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&_h(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&_h(i.textContent,a,n),s=["children",""+a]):Sc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",i)}switch(t){case"input":vh(i),sv(i,r,!0);break;case"textarea":vh(i),ov(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Id)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ky(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[xi]=e,n[Nc]=i,bb(n,e,!1,!1),e.stateNode=n;e:{switch(o=Op(t,i),t){case"dialog":xe("cancel",n),xe("close",n),s=i;break;case"iframe":case"object":case"embed":xe("load",n),s=i;break;case"video":case"audio":for(s=0;s<Gl.length;s++)xe(Gl[s],n);s=i;break;case"source":xe("error",n),s=i;break;case"img":case"image":case"link":xe("error",n),xe("load",n),s=i;break;case"details":xe("toggle",n),s=i;break;case"input":iv(n,i),s=Lp(n,i),xe("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ne({},i,{value:void 0}),xe("invalid",n);break;case"textarea":rv(n,i),s=Ip(n,i),xe("invalid",n);break;default:s=i}Dp(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var c=a[r];r==="style"?Jy(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qy(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Ec(n,c):typeof c=="number"&&Ec(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Sc.hasOwnProperty(r)?c!=null&&r==="onScroll"&&xe("scroll",n):c!=null&&Hm(n,r,c,o))}switch(t){case"input":vh(n),sv(n,i,!1);break;case"textarea":vh(n),ov(n);break;case"option":i.value!=null&&n.setAttribute("value",""+cr(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?pa(n,!!i.multiple,r,!1):i.defaultValue!=null&&pa(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Id)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(n&&e.stateNode!=null)Ab(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(N(166));if(t=Pr(Fc.current),Pr(Ei.current),Ch(e)){if(i=e.stateNode,t=e.memoizedProps,i[xi]=e,(r=i.nodeValue!==t)&&(n=un,n!==null))switch(n.tag){case 3:_h(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_h(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[xi]=e,e.stateNode=i}return gt(e),null;case 13:if(Se(Le),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ce&&cn!==null&&e.mode&1&&!(e.flags&128))zw(),Al(),e.flags|=98560,r=!1;else if(r=Ch(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(N(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(N(317));r[xi]=e}else Al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),r=!1}else Yn!==null&&(vg(Yn),Yn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Le.current&1?Qe===0&&(Qe=3):S0())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return El(),cg(n,e),n===null&&Lc(e.stateNode.containerInfo),gt(e),null;case 10:return o0(e.type._context),gt(e),null;case 17:return qt(e.type)&&Fd(),gt(e),null;case 19:if(Se(Le),r=e.memoizedState,r===null)return gt(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)jl(r,!1);else{if(Qe!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Bd(n),o!==null){for(e.flags|=128,jl(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return be(Le,Le.current&1|2),e.child}n=n.sibling}r.tail!==null&&je()>Cl&&(e.flags|=128,i=!0,jl(r,!1),e.lanes=4194304)}else{if(!i)if(n=Bd(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),jl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ce)return gt(e),null}else 2*je()-r.renderingStartTime>Cl&&t!==1073741824&&(e.flags|=128,i=!0,jl(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=je(),e.sibling=null,t=Le.current,be(Le,i?t&1|2:t&1),e):(gt(e),null);case 22:case 23:return A0(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?an&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function nE(n,e){switch(n0(e),e.tag){case 1:return qt(e.type)&&Fd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return El(),Se(Xt),Se(Et),h0(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return u0(e),null;case 13:if(Se(Le),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Al()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Se(Le),null;case 4:return El(),null;case 10:return o0(e.type._context),null;case 22:case 23:return A0(),null;case 24:return null;default:return null}}var Ph=!1,At=!1,iE=typeof WeakSet=="function"?WeakSet:Set,j=null;function ha(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){De(n,e,i)}else t.current=null}function ug(n,e,t){try{t()}catch(i){De(n,e,i)}}var Yv=!1;function sE(n,e){if(Xp=Ld,n=kw(),e0(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===s&&(a=o),f===r&&++h===i&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(qp={focusedElem:n,selectionRange:t},Ld=!1,j=e;j!==null;)if(e=j,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,j=n;else for(;j!==null;){e=j;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,E=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:Nn(e.type,b),E);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(S){De(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,j=n;break}j=e.return}return m=Yv,Yv=!1,m}function mc(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&ug(e,t,r)}s=s.next}while(s!==i)}}function Pf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function hg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Sb(n){var e=n.alternate;e!==null&&(n.alternate=null,Sb(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[xi],delete e[Nc],delete e[Qp],delete e[zS],delete e[HS])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Eb(n){return n.tag===5||n.tag===3||n.tag===4}function Kv(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Eb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Id));else if(i!==4&&(n=n.child,n!==null))for(dg(n,e,t),n=n.sibling;n!==null;)dg(n,e,t),n=n.sibling}function fg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(fg(n,e,t),n=n.sibling;n!==null;)fg(n,e,t),n=n.sibling}var ut=null,qn=!1;function ys(n,e,t){for(t=t.child;t!==null;)_b(n,e,t),t=t.sibling}function _b(n,e,t){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(xf,t)}catch{}switch(t.tag){case 5:At||ha(t,e);case 6:var i=ut,s=qn;ut=null,ys(n,e,t),ut=i,qn=s,ut!==null&&(qn?(n=ut,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ut.removeChild(t.stateNode));break;case 18:ut!==null&&(qn?(n=ut,t=t.stateNode,n.nodeType===8?up(n.parentNode,t):n.nodeType===1&&up(n,t),Tc(n)):up(ut,t.stateNode));break;case 4:i=ut,s=qn,ut=t.stateNode.containerInfo,qn=!0,ys(n,e,t),ut=i,qn=s;break;case 0:case 11:case 14:case 15:if(!At&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ug(t,e,o),s=s.next}while(s!==i)}ys(n,e,t);break;case 1:if(!At&&(ha(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){De(t,e,a)}ys(n,e,t);break;case 21:ys(n,e,t);break;case 22:t.mode&1?(At=(i=At)||t.memoizedState!==null,ys(n,e,t),At=i):ys(n,e,t);break;default:ys(n,e,t)}}function Qv(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new iE),e.forEach(function(i){var s=fE.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Ln(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,qn=!1;break e;case 3:ut=a.stateNode.containerInfo,qn=!0;break e;case 4:ut=a.stateNode.containerInfo,qn=!0;break e}a=a.return}if(ut===null)throw Error(N(160));_b(r,o,s),ut=null,qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){De(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cb(e,n),e=e.sibling}function Cb(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ln(e,n),ei(n),i&4){try{mc(3,n,n.return),Pf(3,n)}catch(b){De(n,n.return,b)}try{mc(5,n,n.return)}catch(b){De(n,n.return,b)}}break;case 1:Ln(e,n),ei(n),i&512&&t!==null&&ha(t,t.return);break;case 5:if(Ln(e,n),ei(n),i&512&&t!==null&&ha(t,t.return),n.flags&32){var s=n.stateNode;try{Ec(s,"")}catch(b){De(n,n.return,b)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&qy(s,r),Op(a,o);var u=Op(a,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Jy(s,d):h==="dangerouslySetInnerHTML"?Qy(s,d):h==="children"?Ec(s,d):Hm(s,h,d,u)}switch(a){case"input":Mp(s,r);break;case"textarea":Yy(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?pa(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?pa(s,!!r.multiple,r.defaultValue,!0):pa(s,!!r.multiple,r.multiple?[]:"",!1))}s[Nc]=r}catch(b){De(n,n.return,b)}}break;case 6:if(Ln(e,n),ei(n),i&4){if(n.stateNode===null)throw Error(N(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(b){De(n,n.return,b)}}break;case 3:if(Ln(e,n),ei(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Tc(e.containerInfo)}catch(b){De(n,n.return,b)}break;case 4:Ln(e,n),ei(n);break;case 13:Ln(e,n),ei(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(b0=je())),i&4&&Qv(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(At=(u=At)||h,Ln(e,n),At=u):Ln(e,n),ei(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(j=n,h=n.child;h!==null;){for(d=j=h;j!==null;){switch(f=j,p=f.child,f.tag){case 0:case 11:case 14:case 15:mc(4,f,f.return);break;case 1:ha(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(b){De(i,t,b)}}break;case 5:ha(f,f.return);break;case 22:if(f.memoizedState!==null){Jv(d);continue}}p!==null?(p.return=f,j=p):Jv(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Zy("display",o))}catch(b){De(n,n.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){De(n,n.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,n),ei(n),i&4&&Qv(n);break;case 21:break;default:Ln(e,n),ei(n)}}function ei(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Eb(t)){var i=t;break e}t=t.return}throw Error(N(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ec(s,""),i.flags&=-33);var r=Kv(n);fg(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Kv(n);dg(n,a,o);break;default:throw Error(N(161))}}catch(c){De(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function rE(n,e,t){j=n,kb(n)}function kb(n,e,t){for(var i=(n.mode&1)!==0;j!==null;){var s=j,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Ph;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||At;a=Ph;var u=At;if(Ph=o,(At=c)&&!u)for(j=s;j!==null;)o=j,c=o.child,o.tag===22&&o.memoizedState!==null?ey(s):c!==null?(c.return=o,j=c):ey(s);for(;r!==null;)j=r,kb(r),r=r.sibling;j=s,Ph=a,At=u}Zv(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,j=r):Zv(n)}}function Zv(n){for(;j!==null;){var e=j;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Pf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!At)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Nn(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Dv(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Dv(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Tc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}At||e.flags&512&&hg(e)}catch(f){De(e,e.return,f)}}if(e===n){j=null;break}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}}function Jv(n){for(;j!==null;){var e=j;if(e===n){j=null;break}var t=e.sibling;if(t!==null){t.return=e.return,j=t;break}j=e.return}}function ey(n){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Pf(4,e)}catch(c){De(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(c){De(e,s,c)}}var r=e.return;try{hg(e)}catch(c){De(e,r,c)}break;case 5:var o=e.return;try{hg(e)}catch(c){De(e,o,c)}}}catch(c){De(e,e.return,c)}if(e===n){j=null;break}var a=e.sibling;if(a!==null){a.return=e.return,j=a;break}j=e.return}}var oE=Math.ceil,Vd=vs.ReactCurrentDispatcher,y0=vs.ReactCurrentOwner,Cn=vs.ReactCurrentBatchConfig,oe=0,rt=null,Be=null,ht=0,an=0,da=mr(0),Qe=0,$c=null,Mo=0,Rf=0,w0=0,vc=null,Wt=null,b0=0,Cl=1/0,Pi=null,Gd=!1,pg=null,or=null,Rh=!1,er=null,Xd=0,yc=0,gg=null,Xh=-1,qh=0;function Rt(){return oe&6?je():Xh!==-1?Xh:Xh=je()}function ar(n){return n.mode&1?oe&2&&ht!==0?ht&-ht:US.transition!==null?(qh===0&&(qh=hw()),qh):(n=ge,n!==0||(n=window.event,n=n===void 0?16:yw(n.type)),n):1}function Zn(n,e,t,i){if(50<yc)throw yc=0,gg=null,Error(N(185));rh(n,t,i),(!(oe&2)||n!==rt)&&(n===rt&&(!(oe&2)&&(Rf|=t),Qe===4&&Es(n,ht)),Yt(n,i),t===1&&oe===0&&!(e.mode&1)&&(Cl=je()+500,Cf&&vr()))}function Yt(n,e){var t=n.callbackNode;U1(n,e);var i=Rd(n,n===rt?ht:0);if(i===0)t!==null&&cv(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&cv(t),e===1)n.tag===0?BS(ty.bind(null,n)):Ow(ty.bind(null,n)),jS(function(){!(oe&6)&&vr()}),t=null;else{switch(dw(i)){case 1:t=Gm;break;case 4:t=cw;break;case 16:t=Pd;break;case 536870912:t=uw;break;default:t=Pd}t=Fb(t,Tb.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Tb(n,e){if(Xh=-1,qh=0,oe&6)throw Error(N(327));var t=n.callbackNode;if(wa()&&n.callbackNode!==t)return null;var i=Rd(n,n===rt?ht:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=qd(n,i);else{e=i;var s=oe;oe|=2;var r=Rb();(rt!==n||ht!==e)&&(Pi=null,Cl=je()+500,ko(n,e));do try{cE();break}catch(a){Pb(n,a)}while(!0);r0(),Vd.current=r,oe=s,Be!==null?e=0:(rt=null,ht=0,e=Qe)}if(e!==0){if(e===2&&(s=Bp(n),s!==0&&(i=s,e=mg(n,s))),e===1)throw t=$c,ko(n,0),Es(n,i),Yt(n,je()),t;if(e===6)Es(n,i);else{if(s=n.current.alternate,!(i&30)&&!aE(s)&&(e=qd(n,i),e===2&&(r=Bp(n),r!==0&&(i=r,e=mg(n,r))),e===1))throw t=$c,ko(n,0),Es(n,i),Yt(n,je()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(N(345));case 2:br(n,Wt,Pi);break;case 3:if(Es(n,i),(i&130023424)===i&&(e=b0+500-je(),10<e)){if(Rd(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Rt(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Kp(br.bind(null,n,Wt,Pi),e);break}br(n,Wt,Pi);break;case 4:if(Es(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-Qn(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*oE(i/1960))-i,10<i){n.timeoutHandle=Kp(br.bind(null,n,Wt,Pi),i);break}br(n,Wt,Pi);break;case 5:br(n,Wt,Pi);break;default:throw Error(N(329))}}}return Yt(n,je()),n.callbackNode===t?Tb.bind(null,n):null}function mg(n,e){var t=vc;return n.current.memoizedState.isDehydrated&&(ko(n,e).flags|=256),n=qd(n,e),n!==2&&(e=Wt,Wt=t,e!==null&&vg(e)),n}function vg(n){Wt===null?Wt=n:Wt.push.apply(Wt,n)}function aE(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Jn(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Es(n,e){for(e&=~w0,e&=~Rf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Qn(e),i=1<<t;n[t]=-1,e&=~i}}function ty(n){if(oe&6)throw Error(N(327));wa();var e=Rd(n,0);if(!(e&1))return Yt(n,je()),null;var t=qd(n,e);if(n.tag!==0&&t===2){var i=Bp(n);i!==0&&(e=i,t=mg(n,i))}if(t===1)throw t=$c,ko(n,0),Es(n,e),Yt(n,je()),t;if(t===6)throw Error(N(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,br(n,Wt,Pi),Yt(n,je()),null}function x0(n,e){var t=oe;oe|=1;try{return n(e)}finally{oe=t,oe===0&&(Cl=je()+500,Cf&&vr())}}function No(n){er!==null&&er.tag===0&&!(oe&6)&&wa();var e=oe;oe|=1;var t=Cn.transition,i=ge;try{if(Cn.transition=null,ge=1,n)return n()}finally{ge=i,Cn.transition=t,oe=e,!(oe&6)&&vr()}}function A0(){an=da.current,Se(da)}function ko(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,OS(t)),Be!==null)for(t=Be.return;t!==null;){var i=t;switch(n0(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Fd();break;case 3:El(),Se(Xt),Se(Et),h0();break;case 5:u0(i);break;case 4:El();break;case 13:Se(Le);break;case 19:Se(Le);break;case 10:o0(i.type._context);break;case 22:case 23:A0()}t=t.return}if(rt=n,Be=n=lr(n.current,null),ht=an=e,Qe=0,$c=null,w0=Rf=Mo=0,Wt=vc=null,Tr!==null){for(e=0;e<Tr.length;e++)if(t=Tr[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Tr=null}return n}function Pb(n,e){do{var t=Be;try{if(r0(),Wh.current=Wd,Ud){for(var i=Me.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ud=!1}if(Lo=0,st=Ye=Me=null,gc=!1,Dc=0,y0.current=null,t===null||t.return===null){Qe=1,$c=e,Be=null;break}e:{var r=n,o=t.return,a=t,c=e;if(e=ht,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Bv(o);if(p!==null){p.flags&=-257,Uv(p,o,a,r,e),p.mode&1&&Hv(r,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var b=new Set;b.add(c),e.updateQueue=b}else m.add(c);break e}else{if(!(e&1)){Hv(r,u,e),S0();break e}c=Error(N(426))}}else if(Ce&&a.mode&1){var E=Bv(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Uv(E,o,a,r,e),i0(_l(c,a));break e}}r=c=_l(c,a),Qe!==4&&(Qe=2),vc===null?vc=[r]:vc.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=db(r,c,e);Fv(r,g);break e;case 1:a=c;var y=r.type,A=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(or===null||!or.has(A)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=fb(r,a,e);Fv(r,S);break e}}r=r.return}while(r!==null)}Mb(t)}catch(P){e=P,Be===t&&t!==null&&(Be=t=t.return);continue}break}while(!0)}function Rb(){var n=Vd.current;return Vd.current=Wd,n===null?Wd:n}function S0(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),rt===null||!(Mo&268435455)&&!(Rf&268435455)||Es(rt,ht)}function qd(n,e){var t=oe;oe|=2;var i=Rb();(rt!==n||ht!==e)&&(Pi=null,ko(n,e));do try{lE();break}catch(s){Pb(n,s)}while(!0);if(r0(),oe=t,Vd.current=i,Be!==null)throw Error(N(261));return rt=null,ht=0,Qe}function lE(){for(;Be!==null;)Lb(Be)}function cE(){for(;Be!==null&&!I1();)Lb(Be)}function Lb(n){var e=Ib(n.alternate,n,an);n.memoizedProps=n.pendingProps,e===null?Mb(n):Be=e,y0.current=null}function Mb(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=nE(t,e),t!==null){t.flags&=32767,Be=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Qe=6,Be=null;return}}else if(t=tE(t,e,an),t!==null){Be=t;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=n}while(e!==null);Qe===0&&(Qe=5)}function br(n,e,t){var i=ge,s=Cn.transition;try{Cn.transition=null,ge=1,uE(n,e,t,i)}finally{Cn.transition=s,ge=i}return null}function uE(n,e,t,i){do wa();while(er!==null);if(oe&6)throw Error(N(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(N(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(W1(n,r),n===rt&&(Be=rt=null,ht=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Rh||(Rh=!0,Fb(Pd,function(){return wa(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Cn.transition,Cn.transition=null;var o=ge;ge=1;var a=oe;oe|=4,y0.current=null,sE(n,t),Cb(t,n),RS(qp),Ld=!!Xp,qp=Xp=null,n.current=t,rE(t),F1(),oe=a,ge=o,Cn.transition=r}else n.current=t;if(Rh&&(Rh=!1,er=n,Xd=s),r=n.pendingLanes,r===0&&(or=null),j1(t.stateNode),Yt(n,je()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(Gd)throw Gd=!1,n=pg,pg=null,n;return Xd&1&&n.tag!==0&&wa(),r=n.pendingLanes,r&1?n===gg?yc++:(yc=0,gg=n):yc=0,vr(),null}function wa(){if(er!==null){var n=dw(Xd),e=Cn.transition,t=ge;try{if(Cn.transition=null,ge=16>n?16:n,er===null)var i=!1;else{if(n=er,er=null,Xd=0,oe&6)throw Error(N(331));var s=oe;for(oe|=4,j=n.current;j!==null;){var r=j,o=r.child;if(j.flags&16){var a=r.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(j=u;j!==null;){var h=j;switch(h.tag){case 0:case 11:case 15:mc(8,h,r)}var d=h.child;if(d!==null)d.return=h,j=d;else for(;j!==null;){h=j;var f=h.sibling,p=h.return;if(Sb(h),h===u){j=null;break}if(f!==null){f.return=p,j=f;break}j=p}}}var m=r.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}j=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,j=o;else e:for(;j!==null;){if(r=j,r.flags&2048)switch(r.tag){case 0:case 11:case 15:mc(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,j=g;break e}j=r.return}}var y=n.current;for(j=y;j!==null;){o=j;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,j=A;else e:for(o=y;j!==null;){if(a=j,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pf(9,a)}}catch(P){De(a,a.return,P)}if(a===o){j=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,j=S;break e}j=a.return}}if(oe=s,vr(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(xf,n)}catch{}i=!0}return i}finally{ge=t,Cn.transition=e}}return!1}function ny(n,e,t){e=_l(t,e),e=db(n,e,1),n=rr(n,e,1),e=Rt(),n!==null&&(rh(n,1,e),Yt(n,e))}function De(n,e,t){if(n.tag===3)ny(n,n,t);else for(;e!==null;){if(e.tag===3){ny(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(or===null||!or.has(i))){n=_l(t,n),n=fb(e,n,1),e=rr(e,n,1),n=Rt(),e!==null&&(rh(e,1,n),Yt(e,n));break}}e=e.return}}function hE(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Rt(),n.pingedLanes|=n.suspendedLanes&t,rt===n&&(ht&t)===t&&(Qe===4||Qe===3&&(ht&130023424)===ht&&500>je()-b0?ko(n,0):w0|=t),Yt(n,e)}function Nb(n,e){e===0&&(n.mode&1?(e=bh,bh<<=1,!(bh&130023424)&&(bh=4194304)):e=1);var t=Rt();n=fs(n,e),n!==null&&(rh(n,e,t),Yt(n,t))}function dE(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Nb(n,t)}function fE(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(N(314))}i!==null&&i.delete(e),Nb(n,t)}var Ib;Ib=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Xt.current)Vt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Vt=!1,eE(n,e,t);Vt=!!(n.flags&131072)}else Vt=!1,Ce&&e.flags&1048576&&jw(e,jd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Gh(n,e),n=e.pendingProps;var s=xl(e,Et.current);ya(e,t),s=f0(null,e,i,n,s,t);var r=p0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(i)?(r=!0,Dd(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,l0(e),s.updater=Tf,e.stateNode=s,s._reactInternals=e,ig(e,i,n,t),e=og(null,e,i,!0,r,t)):(e.tag=0,Ce&&r&&t0(e),Tt(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Gh(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=gE(i),n=Nn(i,n),s){case 0:e=rg(null,e,i,n,t);break e;case 1:e=Gv(null,e,i,n,t);break e;case 11:e=Wv(null,e,i,n,t);break e;case 14:e=Vv(null,e,i,Nn(i.type,n),t);break e}throw Error(N(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),rg(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),Gv(n,e,i,s,t);case 3:e:{if(vb(e),n===null)throw Error(N(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Ww(n,e),Hd(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=_l(Error(N(423)),e),e=Xv(n,e,i,t,s);break e}else if(i!==s){s=_l(Error(N(424)),e),e=Xv(n,e,i,t,s);break e}else for(cn=sr(e.stateNode.containerInfo.firstChild),un=e,Ce=!0,Yn=null,t=Bw(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Al(),i===s){e=ps(n,e,t);break e}Tt(n,e,i,t)}e=e.child}return e;case 5:return Vw(e),n===null&&eg(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,Yp(i,s)?o=null:r!==null&&Yp(i,r)&&(e.flags|=32),mb(n,e),Tt(n,e,o,t),e.child;case 6:return n===null&&eg(e),null;case 13:return yb(n,e,t);case 4:return c0(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Sl(e,null,i,t):Tt(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),Wv(n,e,i,s,t);case 7:return Tt(n,e,e.pendingProps,t),e.child;case 8:return Tt(n,e,e.pendingProps.children,t),e.child;case 12:return Tt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,be($d,i._currentValue),i._currentValue=o,r!==null)if(Jn(r.value,o)){if(r.children===s.children&&!Xt.current){e=ps(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=os(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),tg(r.return,t,e),a.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(N(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),tg(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Tt(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ya(e,t),s=Tn(s),i=i(s),e.flags|=1,Tt(n,e,i,t),e.child;case 14:return i=e.type,s=Nn(i,e.pendingProps),s=Nn(i.type,s),Vv(n,e,i,s,t);case 15:return pb(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),Gh(n,e),e.tag=1,qt(i)?(n=!0,Dd(e)):n=!1,ya(e,t),hb(e,i,s),ig(e,i,s,t),og(null,e,i,!0,n,t);case 19:return wb(n,e,t);case 22:return gb(n,e,t)}throw Error(N(156,e.tag))};function Fb(n,e){return lw(n,e)}function pE(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,e,t,i){return new pE(n,e,t,i)}function E0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gE(n){if(typeof n=="function")return E0(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Um)return 11;if(n===Wm)return 14}return 2}function lr(n,e){var t=n.alternate;return t===null?(t=_n(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Yh(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")E0(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case na:return To(t.children,s,r,e);case Bm:o=8,s|=8;break;case kp:return n=_n(12,t,e,s|2),n.elementType=kp,n.lanes=r,n;case Tp:return n=_n(13,t,e,s),n.elementType=Tp,n.lanes=r,n;case Pp:return n=_n(19,t,e,s),n.elementType=Pp,n.lanes=r,n;case Vy:return Lf(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Uy:o=10;break e;case Wy:o=9;break e;case Um:o=11;break e;case Wm:o=14;break e;case xs:o=16,i=null;break e}throw Error(N(130,n==null?n:typeof n,""))}return e=_n(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function To(n,e,t,i){return n=_n(7,n,i,e),n.lanes=t,n}function Lf(n,e,t,i){return n=_n(22,n,i,e),n.elementType=Vy,n.lanes=t,n.stateNode={isHidden:!1},n}function yp(n,e,t){return n=_n(6,n,null,e),n.lanes=t,n}function wp(n,e,t){return e=_n(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function mE(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jf(0),this.expirationTimes=Jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jf(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _0(n,e,t,i,s,r,o,a,c){return n=new mE(n,e,t,a,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=_n(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},l0(r),n}function vE(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function Db(n){if(!n)return ur;n=n._reactInternals;e:{if(Ho(n)!==n||n.tag!==1)throw Error(N(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(n.tag===1){var t=n.type;if(qt(t))return Dw(n,t,e)}return e}function Ob(n,e,t,i,s,r,o,a,c){return n=_0(t,i,!0,n,s,r,o,a,c),n.context=Db(null),t=n.current,i=Rt(),s=ar(t),r=os(i,s),r.callback=e??null,rr(t,r,s),n.current.lanes=s,rh(n,s,i),Yt(n,i),n}function Mf(n,e,t,i){var s=e.current,r=Rt(),o=ar(s);return t=Db(t),e.context===null?e.context=t:e.pendingContext=t,e=os(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=rr(s,e,o),n!==null&&(Zn(n,s,o,r),Uh(n,s,o)),o}function Yd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function iy(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function C0(n,e){iy(n,e),(n=n.alternate)&&iy(n,e)}function yE(){return null}var jb=typeof reportError=="function"?reportError:function(n){console.error(n)};function k0(n){this._internalRoot=n}Nf.prototype.render=k0.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(N(409));Mf(n,e,null,null)};Nf.prototype.unmount=k0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;No(function(){Mf(null,n,null,null)}),e[ds]=null}};function Nf(n){this._internalRoot=n}Nf.prototype.unstable_scheduleHydration=function(n){if(n){var e=gw();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ss.length&&e!==0&&e<Ss[t].priority;t++);Ss.splice(t,0,n),t===0&&vw(n)}};function T0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function If(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function sy(){}function wE(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=Yd(o);r.call(u)}}var o=Ob(e,i,n,0,null,!1,!1,"",sy);return n._reactRootContainer=o,n[ds]=o.current,Lc(n.nodeType===8?n.parentNode:n),No(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var u=Yd(c);a.call(u)}}var c=_0(n,0,!1,null,null,!1,!1,"",sy);return n._reactRootContainer=c,n[ds]=c.current,Lc(n.nodeType===8?n.parentNode:n),No(function(){Mf(e,c,t,i)}),c}function Ff(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var c=Yd(o);a.call(c)}}Mf(e,o,n,s)}else o=wE(t,e,n,s,i);return Yd(o)}fw=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vl(e.pendingLanes);t!==0&&(Xm(e,t|1),Yt(e,je()),!(oe&6)&&(Cl=je()+500,vr()))}break;case 13:No(function(){var i=fs(n,1);if(i!==null){var s=Rt();Zn(i,n,1,s)}}),C0(n,1)}};qm=function(n){if(n.tag===13){var e=fs(n,134217728);if(e!==null){var t=Rt();Zn(e,n,134217728,t)}C0(n,134217728)}};pw=function(n){if(n.tag===13){var e=ar(n),t=fs(n,e);if(t!==null){var i=Rt();Zn(t,n,e,i)}C0(n,e)}};gw=function(){return ge};mw=function(n,e){var t=ge;try{return ge=n,e()}finally{ge=t}};$p=function(n,e,t){switch(e){case"input":if(Mp(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=_f(i);if(!s)throw Error(N(90));Xy(i),Mp(i,s)}}}break;case"textarea":Yy(n,t);break;case"select":e=t.value,e!=null&&pa(n,!!t.multiple,e,!1)}};nw=x0;iw=No;var bE={usingClientEntryPoint:!1,Events:[ah,oa,_f,ew,tw,x0]},$l={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xE={bundleType:$l.bundleType,version:$l.version,rendererPackageName:$l.rendererPackageName,rendererConfig:$l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ow(n),n===null?null:n.stateNode},findFiberByHostInstance:$l.findFiberByHostInstance||yE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{xf=Lh.inject(xE),Si=Lh}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bE;fn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T0(e))throw Error(N(200));return vE(n,e,null,t)};fn.createRoot=function(n,e){if(!T0(n))throw Error(N(299));var t=!1,i="",s=jb;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_0(n,1,!1,null,null,t,!1,i,s),n[ds]=e.current,Lc(n.nodeType===8?n.parentNode:n),new k0(e)};fn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(N(188)):(n=Object.keys(n).join(","),Error(N(268,n)));return n=ow(e),n=n===null?null:n.stateNode,n};fn.flushSync=function(n){return No(n)};fn.hydrate=function(n,e,t){if(!If(e))throw Error(N(200));return Ff(null,n,e,!0,t)};fn.hydrateRoot=function(n,e,t){if(!T0(n))throw Error(N(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=jb;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Ob(e,null,n,1,t??null,s,!1,r,o),n[ds]=e.current,Lc(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Nf(e)};fn.render=function(n,e,t){if(!If(e))throw Error(N(200));return Ff(null,n,e,!1,t)};fn.unmountComponentAtNode=function(n){if(!If(n))throw Error(N(40));return n._reactRootContainer?(No(function(){Ff(null,null,n,!1,function(){n._reactRootContainer=null,n[ds]=null})}),!0):!1};fn.unstable_batchedUpdates=x0;fn.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!If(t))throw Error(N(200));if(n==null||n._reactInternals===void 0)throw Error(N(38));return Ff(n,e,t,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function $b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($b)}catch(n){console.error(n)}}$b(),$y.exports=fn;var AE=$y.exports,zb,ry=AE;zb=ry.createRoot,ry.hydrateRoot;var SE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_E=(n,e)=>{const t=U.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,children:a,...c},u)=>U.createElement("svg",{ref:u,...SE,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:`lucide lucide-${EE(n)}`,...c},[...e.map(([h,d])=>U.createElement(h,d)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t};var Dt=_E;const CE=Dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),kE=Dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),TE=Dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),PE=Dt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),P0=Dt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),RE=Dt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Df=Dt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),LE=Dt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),ME=Dt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),NE=Dt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),R0=Dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),IE=Dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),FE=Dt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),L0=Dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),DE=Dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);class ch{constructor(e,t,i){this.id=e,this.name=t,this.description=i}generateHTML(e,t,i,s=!1){var a;const r=this.generateStyles(t,s),o=this.generateBody(e,i);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${((a=e.personalDetails)==null?void 0:a.name)||"CV"}</title>
    <style>
        ${r}
    </style>
</head>
<body>
    ${o}
</body>
</html>`}generateStyles(e,t=!1){throw new Error("generateStyles must be implemented by subclass")}generateBody(e,t){throw new Error("generateBody must be implemented by subclass")}shouldRenderSection(e,t,i){var s,r,o,a,c,u,h,d,f;if(!t.includes(e))return!1;switch(e){case"personal":return((s=i.personalDetails)==null?void 0:s.name)||((r=i.personalDetails)==null?void 0:r.email);case"profile":return(o=i.profile)==null?void 0:o.trim();case"experience":return((a=i.workExperience)==null?void 0:a.length)>0;case"projects":return((c=i.personalProjects)==null?void 0:c.length)>0;case"certificates":return((u=i.certificates)==null?void 0:u.length)>0;case"education":return((h=i.education)==null?void 0:h.degree)||((d=i.education)==null?void 0:d.university);case"courses":return(f=i.courses)==null?void 0:f.trim();default:return!1}}getColorScheme(e,t=!1){const i={primaryText:"#1a202c",secondaryText:"#4a5568",mutedText:"#718096",background:"#ffffff",cardBackground:"#f7fafc",accentPrimary:"#4299e1",accentSecondary:"#3182ce",accentGradientStart:"#667eea",accentGradientEnd:"#764ba2",borderColor:"#e2e8f0",borderAccent:"#4299e1"};return t?i:e==="dark"?{...i,primaryText:"#f7fafc",secondaryText:"#e2e8f0",mutedText:"#cbd5e0",background:"#1a202c",cardBackground:"#2d3748",borderColor:"#4a5568"}:i}}class OE{constructor(){this.templates=new Map}registerTemplate(e){if(!(e instanceof ch))throw new Error("Template must extend CVTemplate class");this.templates.set(e.id,e)}getTemplate(e){const t=this.templates.get(e);if(!t){const i=Array.from(this.templates.values())[0];if(i)return console.warn(`Template with ID "${e}" not found, falling back to ${i.id}`),i;throw new Error(`Template with ID "${e}" not found and no fallback available`)}return t}getAllTemplates(){return Array.from(this.templates.values())}getTemplateOptions(){return this.getAllTemplates().map(e=>({value:e.id,label:e.name,description:e.description}))}generateHTML(e,t,i="light",s=[]){return this.getTemplate(e).generateHTML(t,i,s,!1)}generateExportHTML(e,t,i=[]){return this.getTemplate(e).generateHTML(t,"light",i,!0)}hasTemplate(e){return this.templates.has(e)}getTemplateInfo(e){const t=this.templates.get(e);return t?{id:t.id,name:t.name,description:t.description}:null}getTemplateCount(){return this.templates.size}clearTemplates(){this.templates.clear()}getTemplateIds(){return Array.from(this.templates.keys())}}class jE extends ch{constructor(){super("rich-professional","Rich Professional","Professional classic two-column layout with sidebar for personal details")}generateStyles(e,t=!1){const i=this.getColorScheme(e,t),s=800,r=10,o=16,a=260,c=.92,u=`
      * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    `,h=t?`
      .cv-container {
        max-width: ${s}px !important;
        width: 100% !important;
        margin: 0 auto !important;
        padding: 22px !important; /* slightly tighter padding */
      }
    `:"";return`
      ${u}

      .cv-container {
        text-align: initial;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        font-size: ${c}em;
        line-height: 1.5;                     /* a touch tighter */
        color: ${i.primaryText};
        background: ${i.background};
        padding: 22px;                        /* a touch tighter */
        max-width: ${s}px;
        margin: 0 auto;
        border-radius: ${r}px;
        overflow: hidden;
      }

      /* Name header */
      .cv-container .name-header {
        text-align: center;
        margin-bottom: ${o}px;
      }
      .cv-container .name-header h1 {
        margin: 0;
        font-size: 1.9em;                     /* slightly smaller */
        letter-spacing: 0.4px;
        font-weight: 800;
        color: ${i.primaryText};
      }

      /* Two-column grid */
      .cv-container .layout {
        display: grid;
        grid-template-columns: ${a}px 1fr;
        gap: ${o}px;
      }

      /* Sidebar */
      .cv-container .sidebar {
        border: 1px solid ${i.borderColor};
        border-radius: ${r}px;
        background: ${i.cardBackground};
        padding: 12px 12px;                   /* tighter */
      }
      .cv-container .sidebar .sidebar-title {
        font-size: 0.92em;                    /* smaller title */
        font-weight: 800;
        text-transform: uppercase;
        color: ${i.primaryText};
        border-bottom: 2px solid ${i.borderAccent};
        padding-bottom: 6px;
        margin-bottom: 8px;
      }
      .cv-container .sidebar .kv { margin-bottom: 8px; }
      .cv-container .sidebar .kv .label {
        display: block;
        font-size: 0.78em;                    /* smaller label */
        text-transform: uppercase;
        color: ${i.mutedText};
        letter-spacing: 0.35px;
      }
      .cv-container .sidebar .kv .value {
        display: block;
        font-weight: 700;
        color: ${i.primaryText};
        margin-top: 2px;
        word-break: break-word;
      }
      .cv-container .sidebar ul { list-style: none; padding: 0; margin: 0; }
      .cv-container .sidebar li { margin: 5px 0; color: ${i.secondaryText}; }

      /* Main sections */
      .cv-container .main .section {
        border: 1px solid ${i.borderColor};
        border-radius: ${r}px;
        background: ${i.cardBackground};
        padding: 14px 16px;                   /* tighter */
        margin-bottom: ${o}px;
      }
      .cv-container .main .section-title {
        display: inline-block;
        font-size: 0.98em;                    /* tighter */
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.28px;
        color: ${i.primaryText};
        border-bottom: 2px solid ${i.borderAccent};
        padding-bottom: 5px;
        margin-bottom: 8px;
      }

      /* Work Experience: extra-tight rhythm */
      .cv-container .section-experience .item { margin-bottom: 30px; }
      .cv-container .section-experience .job-head {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        align-items: baseline;
        flex-wrap: wrap;
      }
      .cv-container .section-experience .job-title {
        font-weight: 700;
        color: ${i.primaryText};
      }
      .cv-container .section-experience .job-meta {
        color: ${i.mutedText};
        font-weight: 600;
        font-size: 0.92em;                    /* slightly smaller meta */
      }
      .cv-container .section-experience .description {
        margin-top: 4px;                      /* tighter */
        color: ${i.secondaryText};
        white-space: pre-line;
      }
      .cv-container .section-experience ul.bullets {
        margin-top: 4px;                      /* tighter */
        margin-bottom: 0;
        padding-left: 16px;                   /* smaller indent */
      }
      .cv-container .section-experience ul.bullets li {
        margin-bottom: 2px;                   /* tighter */
        color: ${i.secondaryText};
      }

      /* Generic items (non-experience) */
      .cv-container .item { margin-bottom: 12px; }
      .cv-container .item:last-child { margin-bottom: 0; }

      .cv-container .job-head {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: baseline;
        flex-wrap: wrap;
      }
      .cv-container .job-title { font-weight: 700; color: ${i.primaryText}; }
      .cv-container .job-meta { color: ${i.mutedText}; font-weight: 600; }
      .cv-container .description { margin-top: 6px; color: ${i.secondaryText}; white-space: pre-line; }

      .cv-container ul.bullets { margin-top: 6px; margin-bottom: 0; padding-left: 18px; }
      .cv-container ul.bullets li { margin-bottom: 4px; color: ${i.secondaryText}; }

      ${h}

      @media print {
        .cv-container {
          max-width: ${s}px !important;
          margin: 0 auto !important;
        }
      }
    `}generateBody(e,t){const i=e.personalDetails||{},s=o=>this.shouldRenderSection(o,t,e);let r='<div class="cv-container">';if(r+=`
      <div class="name-header">
        <h1>${i.name||""}</h1>
      </div>
    `,r+='<div class="layout">',r+='<aside class="sidebar">',s("personal")&&(r+='<div class="sidebar-title">Personal Details</div>',[["Name",i.name],["Address",i.address],["Phone",i.phone],["Email",i.email],["Website",i.website]].filter(([,a])=>a).forEach(([a,c])=>{r+=`
          <div class="kv">
            <span class="label">${a}</span>
            <span class="value">${c}</span>
          </div>
        `})),r+="</aside>",r+='<main class="main">',s("profile")&&(r+=`
        <section class="section">
          <div class="section-title">Professional Profile</div>
          <div class="description">${e.profile||""}</div>
        </section>
      `),s("experience")&&(r+='<section class="section section-experience"><div class="section-title">Work Experience</div>',(e.workExperience||[]).forEach(o=>{const a=o.title||"",c=[o.company,o.dates].filter(Boolean).join("  ");r+=`
          <div class="item">
            <div class="job-head">
              <div class="job-title">${a}</div>
              <div class="job-meta">${c}</div>
            </div>
            ${o.description?`<div class="description">${o.description}</div>`:""}
            ${o.responsibilities&&o.responsibilities.length?`<ul class="bullets">${o.responsibilities.map(u=>u!=null&&u.trim()?`<li>${u}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),r+="</section>"),s("projects")&&(r+='<section class="section"><div class="section-title">Personal Projects</div>',(e.personalProjects||[]).forEach(o=>{r+=`
          <div class="item">
            <div class="job-head">
              <div class="job-title">${o.title||""}</div>
              <div class="job-meta">${o.technologies||""}</div>
            </div>
            ${o.responsibilities&&o.responsibilities.length?`<ul class="bullets">${o.responsibilities.map(a=>a!=null&&a.trim()?`<li>${a}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),r+="</section>"),s("education")){const o=e.education||{},a=[o.university,o.dates,o.grade].filter(Boolean).join("  ");r+=`
        <section class="section">
          <div class="section-title">Education</div>
          <div class="item">
            <div class="job-head">
              <div class="job-title">${o.degree||""}</div>
              <div class="job-meta">${a}</div>
            </div>
          </div>
        </section>
      `}return s("certificates")&&(r+='<section class="section"><div class="section-title">Certificates</div>',(e.certificates||[]).forEach(o=>{r+=`
          <div class="item">
            <div class="job-title">${o.title||""}</div>
            ${o.description?`<div class="description">${o.description}</div>`:""}
          </div>
        `}),r+="</section>"),s("courses")&&(r+=`
        <section class="section">
          <div class="section-title">Courses & Qualifications</div>
          <div class="description">${e.courses||""}</div>
        </section>
      `),r+="</main></div></div>",r}}class $E extends ch{constructor(){super("plain-professional","Plain Professional","Clean, minimal template suitable for ATS systems")}generateStyles(e,t=!1){const i=this.getColorScheme(e,t);return`
        /* Reset for CV preview - scoped to prevent editor interference */
        .cv-container * {
         font-size: 0.95em;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            text-align: left;
        }

        /* All styles scoped to .cv-container to prevent editor interference */
        .cv-container {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: ${i.primaryText};
            background: ${i.background};
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header styling - always left aligned for consistent layout */
        .cv-container .header {
            text-align: left;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid ${i.borderAccent};
        }

        .cv-container .header h1 {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: ${i.primaryText};
            text-align: left;
        }

        .cv-container .contact-info {
            line-height: 1.4;
            color: ${i.secondaryText};
            text-align: left;
        }

        .cv-container .content {
            max-width: 100%;
        }

        .cv-container .section {
            margin-bottom: 25px;
        }

        .cv-container .section-title {
            font-size: 1.3em;
            font-weight: bold;
            color: ${i.primaryText};
            margin-bottom: 15px;
            text-transform: uppercase;
            border-bottom: 1px solid ${i.borderAccent};
            padding-bottom: 5px;
            text-align: left;
        }

        .cv-container .profile {
            line-height: 1.6;
            text-align: left;
            margin-bottom: 15px;
            white-space: pre-line;
            color: ${i.secondaryText};
        }

        .cv-container .job, 
        .cv-container .project, 
        .cv-container .certificate {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dotted ${i.borderColor};
            text-align: left;
        }

        .cv-container .job:last-child, 
        .cv-container .project:last-child, 
        .cv-container .certificate:last-child {
            border-bottom: none;
        }

        .cv-container .job-title, 
        .cv-container .project-title, 
        .cv-container .certificate-title {
            font-weight: bold;
            color: ${i.primaryText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .job-company, 
        .cv-container .project-tech {
            font-weight: bold;
            color: ${i.mutedText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .job-dates {
            color: ${i.mutedText};
            font-style: italic;
            margin-bottom: 8px;
            text-align: left;
        }

        .cv-container .job-description, 
        .cv-container .certificate-description {
            margin-bottom: 8px;
            color: ${i.secondaryText};
            white-space: pre-line;
            text-align: left;
        }

        .cv-container .responsibilities {
            list-style: disc;
            padding-left: 20px;
            margin: 0;
            text-align: left;
        }

        .cv-container .responsibilities li {
            margin-bottom: 3px;
            color: ${i.secondaryText};
            text-align: left;
        }

        .cv-container .education-item {
            margin-bottom: 15px;
            text-align: left;
        }

        .cv-container .degree {
            font-weight: bold;
            color: ${i.primaryText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .university {
            font-weight: bold;
            color: ${i.mutedText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .education-dates, 
        .cv-container .education-grade {
            color: ${i.mutedText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .courses-content {
            line-height: 1.6;
            white-space: pre-line;
            color: ${i.secondaryText};
            text-align: left;
        }

        /* Print styles - maintain exact same layout as screen */
        @media print {
            .cv-container {
                padding: 10px;
                background: white !important;
                color: #1a202c !important;
                max-width: none !important;
            }

            .cv-container .header {
                border-bottom: 2px solid #4299e1 !important;
                text-align: left !important;
            }

            .cv-container .header h1 {
                color: #1a202c !important;
                text-align: left !important;
            }

            .cv-container .contact-info {
                color: #4a5568 !important;
                text-align: left !important;
            }

            .cv-container .section-title {
                color: #1a202c !important;
                border-bottom: 1px solid #4299e1 !important;
                text-align: left !important;
            }

            .cv-container .job-title, 
            .cv-container .project-title, 
            .cv-container .certificate-title, 
            .cv-container .degree {
                color: #1a202c !important;
                text-align: left !important;
            }

            .cv-container .job-company,
            .cv-container .project-tech,
            .cv-container .university,
            .cv-container .job-dates,
            .cv-container .education-dates,
            .cv-container .education-grade {
                color: #718096 !important;
                text-align: left !important;
            }

            .cv-container .profile,
            .cv-container .job-description,
            .cv-container .certificate-description,
            .cv-container .courses-content,
            .cv-container .responsibilities li {
                color: #4a5568 !important;
                text-align: left !important;
            }

            /* Ensure all elements maintain left alignment in print */
            .cv-container * {
                text-align: left !important;
            }
        }
    `}generateBody(e,t){var s,r,o,a,c,u,h,d,f,p,m,b;let i='<div class="cv-container">';return this.shouldRenderSection("personal",t,e)&&(i+=`
        <div class="header">
          <h1>${((s=e.personalDetails)==null?void 0:s.name)||""}</h1>
          <div class="contact-info">
            ${((r=e.personalDetails)==null?void 0:r.phone)||""}${(o=e.personalDetails)!=null&&o.phone&&((a=e.personalDetails)!=null&&a.email)?" | ":""}
            ${((c=e.personalDetails)==null?void 0:c.email)||""}${((u=e.personalDetails)!=null&&u.phone||(h=e.personalDetails)!=null&&h.email)&&((d=e.personalDetails)!=null&&d.address)?"<br>":""}
            ${((f=e.personalDetails)==null?void 0:f.address)||""}${(p=e.personalDetails)!=null&&p.address&&((m=e.personalDetails)!=null&&m.website)?"<br>":""}
            ${((b=e.personalDetails)==null?void 0:b.website)||""}
          </div>
        </div>
      `),i+='<div class="content">',t.forEach(E=>{var g,y,A,S,P,_,C;switch(E){case"profile":this.shouldRenderSection("profile",t,e)&&(i+=`
              <div class="section">
                <h2 class="section-title">Professional Profile</h2>
                <div class="profile">${e.profile||""}</div>
              </div>
            `);break;case"experience":this.shouldRenderSection("experience",t,e)&&(i+='<div class="section"><h2 class="section-title">Work Experience</h2>',(g=e.workExperience)==null||g.forEach(T=>{var R;i+=`
                <div class="job">
                  <div class="job-title">${T.title||""}</div>
                  <div class="job-company">${T.company||""}</div>
                  <div class="job-dates">${T.dates||""}</div>
                  ${T.description?`<div class="job-description">${T.description}</div>`:""}
                  ${((R=T.responsibilities)==null?void 0:R.length)>0?`
                    <ul class="responsibilities">
                      ${T.responsibilities.map(L=>L.trim()?`<li>${L}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),i+="</div>");break;case"projects":this.shouldRenderSection("projects",t,e)&&(i+='<div class="section"><h2 class="section-title">Personal Projects</h2>',(y=e.personalProjects)==null||y.forEach(T=>{var R;i+=`
                <div class="project">
                  <div class="project-title">${T.title||""}</div>
                  <div class="project-tech">${T.technologies||""}</div>
                  ${((R=T.responsibilities)==null?void 0:R.length)>0?`
                    <ul class="responsibilities">
                      ${T.responsibilities.map(L=>L.trim()?`<li>${L}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),i+="</div>");break;case"education":this.shouldRenderSection("education",t,e)&&(i+=`
              <div class="section">
                <h2 class="section-title">Education</h2>
                <div class="education-item">
                  <div class="degree">${((A=e.education)==null?void 0:A.degree)||""}</div>
                  <div class="university">${((S=e.education)==null?void 0:S.university)||""}</div>
                  <div class="education-dates">${((P=e.education)==null?void 0:P.dates)||""}</div>
                  <div class="education-grade">${((_=e.education)==null?void 0:_.grade)||""}</div>
                </div>
              </div>
            `);break;case"certificates":this.shouldRenderSection("certificates",t,e)&&(i+='<div class="section"><h2 class="section-title">Certificates</h2>',(C=e.certificates)==null||C.forEach(T=>{i+=`
                <div class="certificate">
                  <div class="certificate-title">${T.title||""}</div>
                  <div class="certificate-description">${T.description||""}</div>
                </div>
              `}),i+="</div>");break;case"courses":this.shouldRenderSection("courses",t,e)&&(i+=`
              <div class="section">
                <h2 class="section-title">Additional Courses</h2>
                <div class="courses-content">${e.courses||""}</div>
              </div>
            `);break}}),i+="</div></div>",i}}class zE extends ch{constructor(){super("modern-creative","Modern Creative","Polished, modern layout with strong accents")}generateStyles(e,t=!1){const i=this.getColorScheme(e,t),s=14,r=`
      * {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    `,o=t?`
      .cv-container {
        max-width: 800px !important;   /* match preview exactly */
        width: 100% !important;
        margin: 0 auto !important;
        padding: 24px !important;
        /* keep same background, shadows, radius as preview */
      }
      /* drop blur for PDF reliability (both markups) */
      .cv-container .contact .chip,
      .cv-container .contact-info .contact-item {
        backdrop-filter: none !important;
        background: #eef2ff !important;      /* soft indigo */
        color: #1f2937 !important;           /* slate-800 */
        border: 1px solid #c7d2fe !important;/* indigo-200 */
      }
    `:"";return`
      ${r}

      /* Root container */
      .cv-container {
        font-size: 0.95em;
        text-align: initial; /* fence off app-level alignments */
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        line-height: 1.55;
        color: ${i.primaryText};
        background: ${i.background};
        padding: 24px;
        max-width: 800px;
        margin: 0 auto;
        border-radius: ${s}px;
        overflow: hidden;
      }

      /* Header wrapper card (with border) */
      .cv-container .header {
        border-radius: ${s}px;
        overflow: hidden;
        margin-bottom: 24px;
        border: 1px solid ${i.borderColor};
        background: ${i.cardBackground};
      }

      /* Gradient header bar  support BOTH markups */
      /* New style: .header-bar */
      .cv-container .header-bar {
        background: linear-gradient(135deg, ${i.accentGradientStart}, ${i.accentGradientEnd});
        padding: 18px 20px;
        color: #fff;
        text-align: center;
      }
      .cv-container .header-bar h1 {
        margin: 0;
        font-size: 1.8em;
        font-weight: 800;
        letter-spacing: .2px;
   
        text-shadow: 0 1px 2px rgba(0,0,0,.20);
        display: inline-block;
      }

      /* Old style (no .header-bar): style .header directly */
      .cv-container .header > h1 {
        background: linear-gradient(135deg, ${i.accentGradientStart}, ${i.accentGradientEnd});
        -webkit-background-clip: text;
        background-clip: text;
        display: block;
        text-align: center;
        margin: 18px 20px 0 20px;
        font-size: 1.8em;
        font-weight: 800;
        letter-spacing: .2px;
        text-shadow: 0 1px 2px rgba(0,0,0,.10);
      }

      /* Contact row  support BOTH markups */
      .cv-container .contact,
      .cv-container .contact-info {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 8px 10px;
        padding: 14px 20px 18px;
      }

      /* Contact chips  BOTH markups */
      .cv-container .contact .chip,
      .cv-container .contact-info .contact-item {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,.35);
        background: rgba(255,255,255,.18);
        backdrop-filter: blur(10px); /* pretty in preview; disabled in exportTweaks */
        font-weight: 600;
      }

      /* Sections */
      .cv-container .section {
        border: 1px solid ${i.borderColor};
        border-radius: ${s}px;
        padding: 18px 20px;
        margin-bottom: 18px;
        background: ${i.cardBackground};
      }
      .cv-container .section-title {
        display: inline-block;
        font-size: 1.00em;
        font-weight: 800;
        letter-spacing: .3px;
        text-transform: uppercase;
        color: ${i.primaryText};
        border-bottom: 2px solid ${i.borderAccent};
        padding-bottom: 6px;
        margin-bottom: 12px;
      }

      /* Items & text */
      .cv-container .item { margin-bottom: 30px; }
      .cv-container .item:last-child { margin-bottom: 0; }
      .cv-container .job-title,
      .cv-container .project-title,
      .cv-container .certificate-title,
      .cv-container .degree {
        font-weight: 700; color: ${i.primaryText};
      }
      .cv-container .meta {
        color: ${i.mutedText}; font-weight: 600; margin-top: 2px;
      }
      .cv-container .description {
        margin-top: 6px; color: ${i.secondaryText}; white-space: pre-line;
      }
      .cv-container ul.bullets { margin-top: 6px; margin-bottom: 0; padding-left: 20px; }
      .cv-container ul.bullets li { margin-bottom: 4px; color: ${i.secondaryText}; }

      ${o}

      /* Safety net for print paths that honour @media print */
      @media print {
        .cv-container {
          max-width: 800px !important;
          margin: 0 auto !important;
          border-radius: ${s}px !important;
        }
        .cv-container .header,
        .cv-container .section {
          border-radius: ${s}px !important;
        }
      }
    `}generateBody(e,t){const i=e.personalDetails||{};let s='<div class="cv-container">';if(this.shouldRenderSection("personal",t,e)&&(s+=`
        <div class="header">
          <div class="header-bar">
            <h1>${i.name||""}</h1>
          </div>
          <div class="contact-info">
            ${i.phone?`<span class="contact-item"> ${i.phone}</span>`:""}
            ${i.email?`<span class="contact-item"> ${i.email}</span>`:""}
            ${i.website?`<span class="contact-item"> ${i.website}</span>`:""}
            ${i.address?`<span class="contact-item"> ${i.address}</span>`:""}
          </div>
        </div>
      `),this.shouldRenderSection("profile",t,e)&&(s+=`
        <div class="section">
          <div class="section-title">Professional Profile</div>
          <div class="description">${e.profile||""}</div>
        </div>
      `),this.shouldRenderSection("experience",t,e)&&(s+='<div class="section"><div class="section-title">Work Experience</div>',(e.workExperience||[]).forEach(r=>{s+=`
          <div class="item">
            <div class="job-title">${r.title||""}</div>
            <div class="meta">${[r.company,r.dates].filter(Boolean).join("  ")}</div>
            ${r.description?`<div class="description">${r.description}</div>`:""}
            ${r.responsibilities&&r.responsibilities.length?`<ul class="bullets">${r.responsibilities.map(o=>o!=null&&o.trim()?`<li>${o}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),s+="</div>"),this.shouldRenderSection("projects",t,e)&&(s+='<div class="section"><div class="section-title">Personal Projects</div>',(e.personalProjects||[]).forEach(r=>{s+=`
          <div class="item">
            <div class="project-title">${r.title||""}</div>
            <div class="meta">${r.technologies||""}</div>
            ${r.responsibilities&&r.responsibilities.length?`<ul class="bullets">${r.responsibilities.map(o=>o!=null&&o.trim()?`<li>${o}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),s+="</div>"),this.shouldRenderSection("education",t,e)){const r=e.education||{};s+=`
        <div class="section">
          <div class="section-title">Education</div>
          <div class="item">
            <div class="degree">${r.degree||""}</div>
            <div class="meta">${[r.university,r.dates,r.grade].filter(Boolean).join("  ")}</div>
          </div>
        </div>
      `}return this.shouldRenderSection("certificates",t,e)&&(s+='<div class="section"><div class="section-title">Certificates</div>',(e.certificates||[]).forEach(r=>{s+=`
          <div class="item">
            <div class="certificate-title">${r.title||""}</div>
            ${r.description?`<div class="description">${r.description}</div>`:""}
          </div>
        `}),s+="</div>"),this.shouldRenderSection("courses",t,e)&&(s+=`
        <div class="section">
          <div class="section-title">Additional Courses</div>
          <div class="description">${e.courses||""}</div>
        </div>
      `),s+="</div>",s}}class HE extends ch{constructor(){super("minimal-executive","Minimal Executive","Clean, sophisticated design for executive-level positions")}generateStyles(e){const t=e==="dark";return`
        /* Reset for CV preview - scoped to prevent editor interference */
        .cv-container * {
            font-size: 0.95em;
              text-align: left;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* All styles scoped to .cv-container to prevent editor interference */
        .cv-container {
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            color: ${t?"#f3f4f6":"#1a202c"};
            background: ${t?"#1a202c":"#ffffff"};
    
            max-width: 750px;
            margin: 0 auto;
        }

        .cv-container .header {
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 3px solid ${t?"#4a5568":"#1a202c"};
        }

        .cv-container .header h1 {
            font-size: 2.8em;
            font-weight: normal;
            margin-bottom: 15px;
            color: ${t?"#f7fafc":"#1a202c"};
            letter-spacing: 2px;
        }

        .cv-container .contact-info {
            line-height: 1.8;
            color: ${t?"#cbd5e0":"#4a5568"};
        }

        .cv-container .contact-info div {
            margin-bottom: 5px;
        }

        .cv-container .content {
            max-width: 100%;
        }

        .cv-container .section {
            margin-bottom: 45px;
        }

        .cv-container .section-title {
            font-size: 1.4em;
            font-weight: normal;
            color: ${t?"#f7fafc":"#1a202c"};
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 3px;
            position: relative;
        }

        .cv-container .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 1px;
            background: ${t?"#4a5568":"#1a202c"};
        }

        .cv-container .profile {
            line-height: 1.8;
            margin-bottom: 20px;
            color: ${t?"#cbd5e0":"#2d3748"};
            max-width: 90%;
            white-space: pre-line;
        }

        .cv-container .job, 
        .cv-container .project, 
        .cv-container .certificate {
            margin-bottom: 35px;
            text-align: left;
        }

        .cv-container .job-title, 
        .cv-container .project-title, 
        .cv-container .certificate-title {
            font-weight: bold;
            color: ${t?"#f7fafc":"#1a202c"};
            margin-bottom: 5px;
        }

        .cv-container .job-company, 
        .cv-container .project-tech {
            font-style: italic;
            color: ${t?"#a0aec0":"#4a5568"};
            margin-bottom: 5px;
        }

        .cv-container .job-dates {
            color: ${t?"#a0aec0":"#718096"};
            margin-bottom: 10px;
        }

        .cv-container .job-description, 
        .cv-container .certificate-description {
            color: ${t?"#cbd5e0":"#4a5568"};
            margin-bottom: 10px;
            line-height: 1.7;
            white-space: pre-line;
        }

        .cv-container .responsibilities {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .cv-container .responsibilities li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 6px;
            color: ${t?"#cbd5e0":"#4a5568"};
            line-height: 1.6;
        }

        .cv-container .responsibilities li::before {
            content: '';
            position: absolute;
            left: 0;
            color: ${t?"#a0aec0":"#718096"};
        }

        .cv-container .education-item {
            margin-bottom: 15px;
            text-align: left;
        }

        .cv-container .degree {
            font-weight: bold;
            color: ${t?"#f7fafc":"#1a202c"};
            margin-bottom: 5px;
        }

        .cv-container .university {
            font-style: italic;
            color: ${t?"#a0aec0":"#4a5568"};
            margin-bottom: 5px;
        }

        .cv-container .education-dates, 
        .cv-container .education-grade {
            color: ${t?"#a0aec0":"#718096"};
            margin-bottom: 5px;
        }

        .cv-container .courses-content {
            line-height: 1.7;
            color: ${t?"#cbd5e0":"#4a5568"};
            white-space: pre-line;
            max-width: 90%;
        }

        /* Print styles scoped to cv-container */
        @media print {
            .cv-container {
                padding: 20px;
                background: white;
                color: black;
            }

            .cv-container .header {
                border-bottom: 3px solid #1a202c;
            }

            .cv-container .section-title {
                color: #1a202c;
            }

            .cv-container .section-title::after {
                background: #1a202c;
            }

            .cv-container .job-title, 
            .cv-container .project-title, 
            .cv-container .certificate-title, 
            .cv-container .degree {
                color: #1a202c;
            }
        }
    `}generateBody(e,t){var s,r,o,a,c;let i='<div class="cv-container">';return this.shouldRenderSection("personal",t,e)&&(i+=`
        <div class="header">
          <h1>${((s=e.personalDetails)==null?void 0:s.name)||""}</h1>
          <div class="contact-info">
            ${(r=e.personalDetails)!=null&&r.phone?`<div>${e.personalDetails.phone}</div>`:""}
            ${(o=e.personalDetails)!=null&&o.email?`<div>${e.personalDetails.email}</div>`:""}
            ${(a=e.personalDetails)!=null&&a.address?`<div>${e.personalDetails.address}</div>`:""}
            ${(c=e.personalDetails)!=null&&c.website?`<div>${e.personalDetails.website}</div>`:""}
          </div>
        </div>
      `),i+='<div class="content">',t.forEach(u=>{var h,d,f,p,m,b,E;switch(u){case"profile":this.shouldRenderSection("profile",t,e)&&(i+=`
              <div class="section">
                <h2 class="section-title">Executive Summary</h2>
                <div class="profile">${e.profile||""}</div>
              </div>
            `);break;case"experience":this.shouldRenderSection("experience",t,e)&&(i+='<div class="section"><h2 class="section-title">Professional Experience</h2>',(h=e.workExperience)==null||h.forEach(g=>{var y;i+=`
                <div class="job">
                  <div class="job-title">${g.title||""}</div>
                  <div class="job-company">${g.company||""}</div>
                  <div class="job-dates">${g.dates||""}</div>
                  ${g.description?`<div class="job-description">${g.description}</div>`:""}
                  ${((y=g.responsibilities)==null?void 0:y.length)>0?`
                    <ul class="responsibilities">
                      ${g.responsibilities.map(A=>A.trim()?`<li>${A}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),i+="</div>");break;case"projects":this.shouldRenderSection("projects",t,e)&&(i+='<div class="section"><h2 class="section-title">Key Projects</h2>',(d=e.personalProjects)==null||d.forEach(g=>{var y;i+=`
                <div class="project">
                  <div class="project-title">${g.title||""}</div>
                  <div class="project-tech">${g.technologies||""}</div>
                  ${((y=g.responsibilities)==null?void 0:y.length)>0?`
                    <ul class="responsibilities">
                      ${g.responsibilities.map(A=>A.trim()?`<li>${A}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),i+="</div>");break;case"education":this.shouldRenderSection("education",t,e)&&(i+=`
              <div class="section">
                <h2 class="section-title">Education</h2>
                <div class="education-item">
                  <div class="degree">${((f=e.education)==null?void 0:f.degree)||""}</div>
                  <div class="university">${((p=e.education)==null?void 0:p.university)||""}</div>
                  <div class="education-dates">${((m=e.education)==null?void 0:m.dates)||""}</div>
                  <div class="education-grade">${((b=e.education)==null?void 0:b.grade)||""}</div>
                </div>
              </div>
            `);break;case"certificates":this.shouldRenderSection("certificates",t,e)&&(i+='<div class="section"><h2 class="section-title">Professional Certifications</h2>',(E=e.certificates)==null||E.forEach(g=>{i+=`
                <div class="certificate">
                  <div class="certificate-title">${g.title||""}</div>
                  <div class="certificate-description">${g.description||""}</div>
                </div>
              `}),i+="</div>");break;case"courses":this.shouldRenderSection("courses",t,e)&&(i+=`
              <div class="section">
                <h2 class="section-title">Additional Qualifications</h2>
                <div class="courses-content">${e.courses||""}</div>
              </div>
            `);break}}),i+="</div></div>",i}}const Io=new OE;Io.registerTemplate(new jE);Io.registerTemplate(new $E);Io.registerTemplate(new zE);Io.registerTemplate(new HE);const BE={personalDetails:{name:"Allegra Bourne",phone:"(+44) 7854 943 193",address:"14 Lewis Road, Northallerton, North Yorkshire, UK. DL6 3RX",email:"allegrabourne@gmail.com",website:"allegrabourne.github.io/"},profile:`Software Engineer with 15+ years of experience delivering event driven, AI powered and scalable solutions for local, national and multinational businesses in both the private and public sectors across diverse industries, including finance, supply chain and transportation systems.

Adept at translating business requirements into technical solutions and working with modern development frameworks, cloud services, and enterprise messaging solutions with an emphasis on test-driven development and design patterns.

Advocate of mentoring and collaboration. Seeking to contribute technical expertise to innovative projects.`,workExperience:[{title:"Senior Software Engineer",company:"Ligentia, Leeds, England, United Kingdom",dates:"Jun 2022 - Present",description:"Ligentia is a leading supply chain technology and services provider specialising in manufacturing, consumer brands, pharmaceuticals and the retail sector.",responsibilities:["Development of new Consignment Delivery Management portal with API development utilising Fast Endpoints, messaging via Azure ServiceBus and Angular for UI development.","Worked to develop the new Landed Cost portal, a project which helped to retain Myer; Australia's largest department store, as a customer. Providing Myer with accurate landed cost and end-to-end visibility of their supply chain, from production confirmation, to freight booking, through to delivery to stores spanning Australia.","Azure DevOps / Octopus Deploy for CI and release management, creation and maintenance of deployment pipelines inline with industry practice.","Development of the Ligentix supply chain platform, giving the customer the most cost-effective, efficient version of their supply chain.","Blazor utilised for the developmental concept for the new Client onboarding web application.","Business analysis of legacy processes where knowledge had been lost with a view of replacing them with newer tech stacks."]},{title:"Full Stack Developer",company:"Refract - an Allego company, Newcastle upon Tyne, England, United Kingdom",dates:"Apr 2021 - Jun 2022",description:"Refract utilises AI technology to deliver personalised insight, based on the business and their reps, showing the actions and words that align with top performers and results. Allego sets out to improve onboarding and messaging consistency with high-quality, reliable and secure video learning, communication and collaboration. Engaging new hires quickly, developing critical skills and driving faster results for an organisation.",responsibilities:["Introduced multilingual capabilities to the Refract platform.","Worked on introducing new 'road map' features to the Refract platform such as Call Analytics, Platform Usage and Deal Intelligence dashboards.",".Net, Angular and SQL utilising code first and EF migrations.","Azure development utilising blob containers.","Emphasis on TDD and design patterns to ensure quality of work."]},{title:"Integrations Developer",company:"XCM, York, England, United Kingdom",dates:"Apr 2020 - Apr 2021",description:"XCM are marketing specialists working with some of the biggest retailers in the UK to leverage competitive advantage via the use of specialist data tools, analysis and CRM services.",responsibilities:["Client integration utilising .Net Core and Kafka to ensure real time distributed streaming of big data from Google PubSub.","Docker used for Kafka containerisation.","TSQL / KSQL development.","Google Cloud / PubSub integration.","Apache AVRO for binary serialisation of messages for faster processing.","Data migration and integration.","Single Customer View.","Development of the XCM Horizon data warehouse.","Web Services development using .Net Core hosted in Kestrel."]},{title:"Software Engineer",company:"Cubic Corporation, Stockton-On-Tees, United Kingdom",dates:"Jan 2019 - Apr 2020",description:"Cubic Transportation Systems is one arm of Cubic Corporation that produces public transport solutions, traffic management platforms and fare reading and payment systems.",responsibilities:["Development of ICMP - the traffic management platform utilised by New South Wales, Australia. The platform formed part of TfNSW's $123 million intelligent congestion management program which enabled better traffic management through real-time data and predictive technology.","Frontend development utilising Angular / Typescript / SignalR.","Enterprise messaging conducted utilising NServiceBus / RabbitMQ.","Micro service development utilising AZURE Service Fabric / Topshelf / WebAPI services.","Continuous integration via Jenkins with SonarCube code smells and Octopus.","Development undertaken accordingly with Agile/SCRUM methodologies."]},{title:"Solution Developer",company:"Vianet Group plc, Stockton-On-Tees, United Kingdom",dates:"Jun 2017 - Dec 2018",description:"Vianet are UK leader in providing draught beer quality and waste management services.",responsibilities:["Worked on the IDraught IOT platform on the consumption of data that would empower customer's strategic decisions on metrics and business intelligence, these insights were then used to measure metrics such as wastage, temperature, in identifying missing drinks and improving drink quality.","Frontend development on the new 'Vianet IOT Portal' utilising AngularJS 2 / Typescript.","WebAPI services via the use of .Net Core and hosted using Kestrel.","AZURE web app services and message queueing.","Big data processing via HBASE.","JAVA / Apache SPARK / Hadoop number crunching business logic utilising IntelliJ GUI and taking on a TDD approach.","Introduced an emphasis on TDD and introduced concepts attaining to Agile/SCRUM and mentoring junior members of the team."]},{title:"Lead Software Developer",company:"ZyroFisher, Darlington, United Kingdom",dates:"Apr 2017 - Jun 2017",description:"ZyroFisher are the leading distributor of Parts, Accessories and Clothing to the UK and Irish cycling markets.",responsibilities:["Integrated new Altura Cycling customer facing commercial website with their backend ordering system and payment provider (included implementing Sage/SagePay API) utilising RabbitMQ, RESTful API services and HMAC authentication enabling customers to make online purchases for the first time.","Front-end development utilising NodeJS.","Emphasis on quality test driven development utilising NCrunch and MOQ."]},{title:"Software Developer",company:"Lowell Group, Leeds, United Kingdom",dates:"Apr 2012 - Apr 2017",description:"Lowell are one of Europe's largest credit management companies, operating in the UK and the DACH and Nordic regions.",responsibilities:["RESTful Web API services self hosted utilising Topshelf.","MVC5/Rest/CMS Umbraco - development of the new Lowell website, designed to give customers control over their accounts and manage payments securely through Verifone, similar to leading banking websites. In its first year, the platform saw over 150,000 customer registrations.","Automated deployment via Octopus deploy and continuous builds using TeamCity.","Test driven .Net development. NCrunch, MOQ.","Service Orientated Architecture - development of person matching and address cleansing services utilising WCF and RabbitMQ.","T-SQL utilising CLR functions.","ORM implemented using NHibernate.","Agile software development utilising SCRUM.","Development of LIMA - Lowell's main tracing application.","Provided third line support as required."]},{title:"Collections Development Analyst",company:"Lowell, Leeds, United Kingdom",dates:"Feb 2011 - Apr 2012",description:"",responsibilities:["Core business process mapping and improvement.","Business process automation utilising SSIS, T-SQL and C#/VB.net in order to create dynamic DTSX packages.","Data analysis utilising Crystal Reports and SSAS.","Systems support, project and change management.","Automated de-duping processes for enabling single view of customers with multiple accounts saving Lowell 40k (quoted by system supplier to scope out possible automation).","Mentored colleagues in the use of source control, TFS, .NET and SSIS."]},{title:"Integrated Systems Officer",company:"North Yorkshire County Council, Northallerton, United Kingdom",dates:"Feb 2009 - Feb 2011",description:"",responsibilities:["Project managed the deployment of CACI's 'Children's Centre Management System to the 40 Children's Centres throughout North Yorkshire.","Project managed the deployment of North Yorkshire's new integrated online Admissions system.","Aided in the deployment and integration of IMPULSE; the integrated system for children in North Yorkshire.","Instigated a drive in data quality, this included the creation of a number of XML cleansing macros utilising VBA and xpath to cleanse data received from Schools.","Aided with the implementation and accreditation of the prescribed national child reference system - ContactPoint and took the lead during Instance Accreditation for North Yorkshire and partners.","Provided augmented services when required."]},{title:"Systems Administrative Assistant (Internship)",company:"State Street, Luxembourg",dates:"Sep 2006 - Sep 2007",description:"State Street Corporation is a financial services company that provides investment management services for institutional investors.",responsibilities:["Data warehousing / mining and core applications development for fund compliance.","Java, Oracle and PL/SQL development.","VBA (Contingency macros).","Worked on the development of a data warehousing solution which pooled various assets, funds and investment information from different locations throughout the world. This information would then be used for investment analysis, fund accounting and various other investment strategies."]}],personalProjects:[{title:"AI-Powered Wildlife Health Monitoring Field Lab",technologies:"Python, PyTorch, Raspberry Pi, FastAPI, librosa, Deep Learning, Bioacoustics",responsibilities:["Developed an IoT edge field lab using Python, Raspberry Pi 4, and PyTorch with a custom convolutional neural network to detect hedgehog respiratory illness from acoustic signals, supporting faster interventions and conservation efforts.","Designed a real-time audio analysis pipeline that records 5-second clips, converts them into spectrograms, and classifies breathing patterns using a neural network, achieving ~75% accuracy and 0.91 precision.","Engineered a modular architecture with FastAPI, automated night-time recording, remote inference server on GPU hardware, and Pushbullet alerting.","Applied non-invasive bioacoustic monitoring aligned with UK conservation ethics, demonstrating cross-disciplinary innovation with potential applications in both wildlife conservation and healthcare."]}],certificates:[{title:"IBM Data Science Professional Certificate",description:"A comprehensive, ACE-recommended (12 college credits) and FIBAA-accredited (6 ECTS credits) program covering key data science skills, including Python, regression analysis, statistical modeling, and machine learning."},{title:"IBM AI Developer Professional Certificate",description:"A comprehensive program focused on the essential skills for developing AI applications, including machine learning, deep learning, and natural language processing."}],education:{degree:"BSc (HONS) BUSINESS COMPUTING",university:"University of Teesside",dates:"2004 - 2008",grade:"With Second Class Honours Division One (2:1)"},courses:"Please see LinkedIn for a comprehensive list of completed courses and qualifications"},Hb=["personal","profile","experience","projects","certificates","education","courses"],Xl={personal:{id:"personal",name:"Personal Details",icon:"",required:!0,exportable:!0},profile:{id:"profile",name:"Profile",icon:"",required:!1,exportable:!0},experience:{id:"experience",name:"Work Experience",icon:"",required:!1,exportable:!0},projects:{id:"projects",name:"Personal Projects",icon:"",required:!1,exportable:!0},certificates:{id:"certificates",name:"Certificates",icon:"",required:!1,exportable:!0},education:{id:"education",name:"Education",icon:"",required:!1,exportable:!0},courses:{id:"courses",name:"Additional Courses",icon:"",required:!1,exportable:!0}};class UE{constructor(e=Hb){this.sectionOrder=[...e]}getSectionOrder(){return[...this.sectionOrder]}setSectionOrder(e){if(!Object.values(Xl).filter(s=>s.required).map(s=>s.id).every(s=>e.includes(s)))throw new Error("Missing required sections in new order");return this.sectionOrder=[...e],this.sectionOrder}moveSection(e,t){const i=[...this.sectionOrder],[s]=i.splice(e,1);return i.splice(t,0,s),this.setSectionOrder(i)}getSectionConfig(e){return Xl[e]||null}getAllSectionConfigs(){return this.sectionOrder.map(e=>Xl[e]).filter(Boolean)}getExportableSections(){return this.sectionOrder.map(e=>Xl[e]).filter(e=>e&&e.exportable)}validateSectionData(e,t){if(!this.getSectionConfig(e))return!1;switch(e){case"personal":return t.personalDetails&&(t.personalDetails.name||t.personalDetails.email);case"profile":return typeof t.profile=="string"&&t.profile.trim().length>0;case"experience":return Array.isArray(t.workExperience)&&t.workExperience.some(s=>s.title||s.company);case"projects":return Array.isArray(t.personalProjects)&&t.personalProjects.some(s=>s.title);case"certificates":return Array.isArray(t.certificates)&&t.certificates.some(s=>s.title);case"education":return t.education&&(t.education.degree||t.education.university);case"courses":return typeof t.courses=="string"&&t.courses.trim().length>0;default:return!1}}getVisibleSections(e){return this.sectionOrder.filter(t=>{const i=this.getSectionConfig(t);return i?i.required?!0:this.validateSectionData(t,e):!1})}}const WE=()=>{const[n,e]=U.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||"light"}return"light"});return U.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),{theme:n,toggleTheme:()=>{e(i=>i==="light"?"dark":"light")},isDark:n==="dark"}},VE=(n,e)=>{const[t,i]=U.useState(null),[s,r]=U.useState(null),o=U.useCallback((p,m,b)=>{i({item:m,index:b}),p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML),setTimeout(()=>{p.target.style.opacity="0.5"},0)},[]),a=U.useCallback(p=>{p.target.style.opacity="1",i(null),r(null)},[]),c=U.useCallback((p,m)=>{p.preventDefault(),p.dataTransfer.dropEffect="move",r(m)},[]),u=U.useCallback(p=>{const m=p.currentTarget.getBoundingClientRect(),b=p.clientX,E=p.clientY;(b<m.left||b>m.right||E<m.top||E>m.bottom)&&r(null)},[]),h=U.useCallback((p,m)=>{if(p.preventDefault(),!t||t.index===m){i(null),r(null);return}const b=[...n],[E]=b.splice(t.index,1),g=t.index<m?m-1:m;b.splice(g,0,E),e(b),i(null),r(null)},[t,n,e]),d=U.useCallback((p,m)=>({draggable:!0,onDragStart:b=>o(b,p,m),onDragEnd:a,style:{cursor:"grab",userSelect:"none",...(t==null?void 0:t.index)===m&&{opacity:.5,transform:"scale(0.95)"}}}),[t,o,a]),f=U.useCallback(p=>({onDragOver:m=>c(m,p),onDragLeave:u,onDrop:m=>h(m,p),"data-drop-target":!0,style:{...s===p&&{backgroundColor:"rgba(168, 85, 247, 0.1)",borderColor:"rgba(168, 85, 247, 0.5)",transform:"scale(1.02)"}}}),[s,c,u,h]);return{draggedItem:t,dragOverIndex:s,getDragProps:d,getDropProps:f,isDragging:!!t}},GE=n=>{const[e,t]=U.useState(n),i=U.useCallback((_,C)=>{t(T=>({...T,personalDetails:{...T.personalDetails,[_]:C}}))},[]),s=U.useCallback(_=>{t(C=>({...C,profile:_}))},[]),r=U.useCallback((_,C)=>{t(T=>({...T,education:{...T.education,[_]:C}}))},[]),o=U.useCallback(_=>{t(C=>({...C,courses:_}))},[]),a=U.useCallback(()=>{t(_=>({..._,workExperience:[..._.workExperience,{title:"",company:"",dates:"",description:"",responsibilities:[""]}]}))},[]),c=U.useCallback((_,C,T)=>{t(R=>({...R,workExperience:R.workExperience.map((L,D)=>D===_?{...L,[C]:T}:L)}))},[]),u=U.useCallback(_=>{t(C=>({...C,workExperience:C.workExperience.filter((T,R)=>R!==_)}))},[]),h=U.useCallback(_=>{t(C=>({...C,workExperience:C.workExperience.map((T,R)=>R===_?{...T,responsibilities:[...T.responsibilities,""]}:T)}))},[]),d=U.useCallback((_,C,T)=>{t(R=>({...R,workExperience:R.workExperience.map((L,D)=>D===_?{...L,responsibilities:L.responsibilities.map((q,K)=>K===C?T:q)}:L)}))},[]),f=U.useCallback((_,C)=>{t(T=>({...T,workExperience:T.workExperience.map((R,L)=>L===_?{...R,responsibilities:R.responsibilities.filter((D,q)=>q!==C)}:R)}))},[]),p=U.useCallback(()=>{t(_=>({..._,personalProjects:[..._.personalProjects,{title:"",technologies:"",responsibilities:[""]}]}))},[]),m=U.useCallback((_,C,T)=>{t(R=>({...R,personalProjects:R.personalProjects.map((L,D)=>D===_?{...L,[C]:T}:L)}))},[]),b=U.useCallback(_=>{t(C=>({...C,personalProjects:C.personalProjects.filter((T,R)=>R!==_)}))},[]),E=U.useCallback(_=>{t(C=>({...C,personalProjects:C.personalProjects.map((T,R)=>R===_?{...T,responsibilities:[...T.responsibilities,""]}:T)}))},[]),g=U.useCallback((_,C,T)=>{t(R=>({...R,personalProjects:R.personalProjects.map((L,D)=>D===_?{...L,responsibilities:L.responsibilities.map((q,K)=>K===C?T:q)}:L)}))},[]),y=U.useCallback((_,C)=>{t(T=>({...T,personalProjects:T.personalProjects.map((R,L)=>L===_?{...R,responsibilities:R.responsibilities.filter((D,q)=>q!==C)}:R)}))},[]),A=U.useCallback(()=>{t(_=>({..._,certificates:[..._.certificates,{title:"",description:""}]}))},[]),S=U.useCallback((_,C,T)=>{t(R=>({...R,certificates:R.certificates.map((L,D)=>D===_?{...L,[C]:T}:L)}))},[]),P=U.useCallback(_=>{t(C=>({...C,certificates:C.certificates.filter((T,R)=>R!==_)}))},[]);return{cvData:e,setCvData:t,updatePersonalDetails:i,updateProfile:s,updateEducation:r,updateCourses:o,addWorkExperience:a,updateWorkExperience:c,removeWorkExperience:u,addResponsibility:h,updateResponsibility:d,removeResponsibility:f,addPersonalProject:p,updatePersonalProject:m,removePersonalProject:b,addProjectResponsibility:E,updateProjectResponsibility:g,removeProjectResponsibility:y,addCertificate:A,updateCertificate:S,removeCertificate:P}},XE="modulepreload",qE=function(n){return"/CVEditor/"+n},oy={},Mh=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=qE(c),c in oy)return;oy[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":XE,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var wc={};wc.d=(n,e)=>{for(var t in e)wc.o(e,t)&&!wc.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};wc.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var X=globalThis.pdfjsLib={};wc.d(X,{AbortException:()=>Uo,AnnotationEditorLayer:()=>Tm,AnnotationEditorParamsType:()=>G,AnnotationEditorType:()=>Q,AnnotationEditorUIManager:()=>Do,AnnotationLayer:()=>GC,AnnotationMode:()=>_s,ColorPicker:()=>Jd,DOMSVGFactory:()=>U0,DrawLayer:()=>Mm,FeatureTest:()=>Lt,GlobalWorkerOptions:()=>is,ImageKind:()=>Kh,InvalidPDFException:()=>Ub,MissingPDFException:()=>Bo,OPS:()=>In,OutputScale:()=>Ag,PDFDataRangeTransport:()=>$x,PDFDateString:()=>D0,PDFWorker:()=>xa,PasswordResponses:()=>ZE,PermissionFlag:()=>QE,PixelsPerInch:()=>hr,RenderingCancelledException:()=>I0,TextLayer:()=>zc,UnexpectedResponseException:()=>zf,Util:()=>$,VerbosityLevel:()=>Of,XfaLayer:()=>Hx,build:()=>CC,createValidAbsoluteUrl:()=>n_,fetchData:()=>Bf,getDocument:()=>vC,getFilenameFromUrl:()=>h_,getPdfFilenameFromUrl:()=>d_,getXfaPageViewport:()=>f_,isDataScheme:()=>Uf,isPdfFile:()=>F0,noContextMenu:()=>Rn,normalizeUnicode:()=>l_,setLayerDimensions:()=>Fo,shadow:()=>se,version:()=>_C});const St=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Bb=[1,0,0,1,0,0],yg=[.001,0,0,.001,0,0],YE=1e7,bp=1.35,on={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},KE="pdfjs_internal_editor_",Q={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},G={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},QE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},mt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Kh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},We={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},zl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Of={ERRORS:0,WARNINGS:1,INFOS:5},In={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ZE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let jf=Of.WARNINGS;function JE(n){Number.isInteger(n)&&(jf=n)}function e_(){return jf}function $f(n){jf>=Of.INFOS&&console.log(`Info: ${n}`)}function J(n){jf>=Of.WARNINGS&&console.log(`Warning: ${n}`)}function Ae(n){throw new Error(n)}function Ke(n,e){n||Ae(e)}function t_(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function n_(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=a_(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(t_(i))return i}catch{}return null}function se(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const yr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class wg extends yr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class bg extends yr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ub extends yr{constructor(e){super(e,"InvalidPDFException")}}class Bo extends yr{constructor(e){super(e,"MissingPDFException")}}class zf extends yr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class i_ extends yr{constructor(e){super(e,"FormatError")}}class Uo extends yr{constructor(e){super(e,"AbortException")}}function Wb(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ae("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Hf(n){typeof n!="string"&&Ae("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function s_(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function M0(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function r_(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function o_(){try{return new Function(""),!0}catch{return!1}}class Lt{static get isLittleEndian(){return se(this,"isLittleEndian",r_())}static get isEvalSupported(){return se(this,"isEvalSupported",o_())}static get isOffscreenCanvasSupported(){return se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?se(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):se(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return se(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const xp=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var cs,Qh,xg;class ${static makeHexColor(e,t,i){return`#${xp[e]}${xp[t]}${xp[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,r]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],r[0],o[0]),Math.min(i[1],s[1],r[1],o[1]),Math.max(i[0],s[0],r[0],o[0]),Math.max(i[1],s[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,c=Math.sqrt((i+o)**2-4*(i*o-r*s))/2,u=a+c||1,h=a-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[i,r,s,o]}static bezierBoundingBox(e,t,i,s,r,o,a,c,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,a),Math.min(t,c),Math.max(e,a),Math.max(t,c)],w(this,cs,xg).call(this,e,i,r,a,t,s,o,c,3*(-e+3*(i-r)+a),6*(e-2*i+r),3*(i-e),u),w(this,cs,xg).call(this,e,i,r,a,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),u),u}}cs=new WeakSet,Qh=function(e,t,i,s,r,o,a,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*e+3*u*t)+3*f*i)+p*s,b=d*(d*(d*r+3*u*o)+3*f*a)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],b),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],b)},xg=function(e,t,i,s,r,o,a,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&w(this,cs,Qh).call(this,e,t,i,s,r,o,a,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),b=2*u;w(this,cs,Qh).call(this,e,t,i,s,r,o,a,c,(-h+m)/b,f),w(this,cs,Qh).call(this,e,t,i,s,r,o,a,c,(-h-m)/b,f)},x($,cs);function a_(n){return decodeURIComponent(escape(n))}let Ap=null,ay=null;function l_(n){return Ap||(Ap=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ay=new Map([["","t"]])),n.replaceAll(Ap,(e,t,i)=>t?t.normalize("NFKC"):ay.get(i))}function c_(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return Wb(n)}const N0="pdfjs_internal_id_",Ci={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function u_(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(Wb(n))}const Ti="http://www.w3.org/2000/svg",_r=class _r{};V(_r,"CSS",96),V(_r,"PDF",72),V(_r,"PDF_TO_CSS_UNITS",_r.CSS/_r.PDF);let hr=_r;async function Bf(n,e="text"){if(ql(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class uh{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=r;const a=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,b,E;u===0?(p=Math.abs(c-e[1])*t+s,m=Math.abs(a-e[0])*t+r,b=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(p=Math.abs(a-e[0])*t+s,m=Math.abs(c-e[1])*t+r,b=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,p-u*t*a-d*t*c,m-h*t*a-f*t*c],this.width=b,this.height=E}get rawDims(){const{viewBox:e}=this;return se(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new uh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return $.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=$.applyTransform([e[0],e[1]],this.transform),i=$.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return $.applyInverseTransform([e,t],this.transform)}}class I0 extends yr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Uf(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function F0(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function h_(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function d_(n,e="document.pdf"){if(typeof n!="string")return e;if(Uf(n))return J('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class ly{constructor(){V(this,"started",Object.create(null));V(this,"times",[])}time(e){e in this.started&&J(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||J(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function ql(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Rn(n){n.preventDefault()}function cy(n){console.log("Deprecated API usage: "+n)}var Uc;class D0{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,Uc)||v(this,Uc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,Uc).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(i,s,r,o,a,c))}}Uc=new WeakMap,x(D0,Uc);function f_(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new uh({viewBox:r,scale:e,rotation:t})}function O0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(J(`Not a valid color format: "${n}"`),[0,0,0])}function p_(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,O0(i))}e.remove()}function Re(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform();return[e,t,i,s,r,o]}function ki(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[e,t,i,s,r,o]}function Fo(n,e,t=!1,i=!0){if(e instanceof uh){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=n,a=Lt.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,h=a?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}class Ag{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Cs,Rr,Fn,Lr,Wc,Vc,nf,Vb,Mt,Gb,Xb,Zh,qb,Eg;const Ri=class Ri{constructor(e){x(this,Mt);x(this,Cs,null);x(this,Rr,null);x(this,Fn);x(this,Lr,null);x(this,Wc,null);v(this,Fn,e),l(Ri,Vc)||v(Ri,Vc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=v(this,Cs,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Fn)._uiManager._signal;e.addEventListener("contextmenu",Rn,{signal:t}),e.addEventListener("pointerdown",w(Ri,nf,Vb),{signal:t});const i=v(this,Lr,document.createElement("div"));i.className="buttons",e.append(i);const s=l(this,Fn).toolbarPosition;if(s){const{style:r}=e,o=l(this,Fn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return w(this,Mt,qb).call(this),e}get div(){return l(this,Cs)}hide(){var e;l(this,Cs).classList.add("hidden"),(e=l(this,Rr))==null||e.hideDropdown()}show(){var e;l(this,Cs).classList.remove("hidden"),(e=l(this,Wc))==null||e.shown()}async addAltText(e){const t=await e.render();w(this,Mt,Zh).call(this,t),l(this,Lr).prepend(t,l(this,Mt,Eg)),v(this,Wc,e)}addColorPicker(e){v(this,Rr,e);const t=e.renderButton();w(this,Mt,Zh).call(this,t),l(this,Lr).prepend(t,l(this,Mt,Eg))}remove(){var e;l(this,Cs).remove(),(e=l(this,Rr))==null||e.destroy(),v(this,Rr,null)}};Cs=new WeakMap,Rr=new WeakMap,Fn=new WeakMap,Lr=new WeakMap,Wc=new WeakMap,Vc=new WeakMap,nf=new WeakSet,Vb=function(e){e.stopPropagation()},Mt=new WeakSet,Gb=function(e){l(this,Fn)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},Xb=function(e){l(this,Fn)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Zh=function(e){const t=l(this,Fn)._uiManager._signal;e.addEventListener("focusin",w(this,Mt,Gb).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",w(this,Mt,Xb).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Rn,{signal:t})},qb=function(){const{editorType:e,_uiManager:t}=l(this,Fn),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(Ri,Vc)[e]),w(this,Mt,Zh).call(this,i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,Lr).append(i)},Eg=function(){const e=document.createElement("div");return e.className="divider",e},x(Ri,nf),x(Ri,Vc,null);let Sg=Ri;var Gc,Mr,Nr,fr,Yb,Kb,Qb;class g_{constructor(e){x(this,fr);x(this,Gc,null);x(this,Mr,null);x(this,Nr);v(this,Nr,e)}show(e,t,i){const[s,r]=w(this,fr,Kb).call(this,t,i),{style:o}=l(this,Mr)||v(this,Mr,w(this,fr,Yb).call(this));e.append(l(this,Mr)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Mr).remove()}}Gc=new WeakMap,Mr=new WeakMap,Nr=new WeakMap,fr=new WeakSet,Yb=function(){const e=v(this,Mr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Rn,{signal:l(this,Nr)._signal});const t=v(this,Gc,document.createElement("div"));return t.className="buttons",e.append(t),w(this,fr,Qb).call(this),e},Kb=function(e,t){let i=0,s=0;for(const r of e){const o=r.y+r.height;if(o<i)continue;const a=r.x+(t?r.width:0);if(o>i){s=a,i=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,i]},Qb=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Nr)._signal;e.addEventListener("contextmenu",Rn,{signal:i}),e.addEventListener("click",()=>{l(this,Nr).highlightSelection("floating_button")},{signal:i}),l(this,Gc).append(e)};function Kd(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function m_(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var sf;class v_{constructor(){x(this,sf,0)}get id(){return`${KE}${_t(this,sf)._++}`}}sf=new WeakMap;var Aa,Xc,yt,Sa,Jh;const X0=class X0{constructor(){x(this,Sa);x(this,Aa,c_());x(this,Xc,0);x(this,yt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return se(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return w(this,Sa,Jh).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return w(this,Sa,Jh).call(this,e,e)}async getFromBlob(e,t){const i=await t;return w(this,Sa,Jh).call(this,e,i)}async getFromId(e){l(this,yt)||v(this,yt,new Map);const t=l(this,yt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,yt)||v(this,yt,new Map);let i=l(this,yt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${l(this,Aa)}_${_t(this,Xc)._++}`,refCounter:1,isSvg:!1},l(this,yt).set(e,i),l(this,yt).set(i.id,i),i}getSvgUrl(e){const t=l(this,yt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,yt)||v(this,yt,new Map);const t=l(this,yt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Aa)}_`)}};Aa=new WeakMap,Xc=new WeakMap,yt=new WeakMap,Sa=new WeakSet,Jh=async function(e,t){l(this,yt)||v(this,yt,new Map);let i=l(this,yt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,Aa)}_${_t(this,Xc)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await Bf(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=X0._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return l(this,yt).set(e,i),i&&l(this,yt).set(i.id,i),i};let _g=X0;var Je,ks,qc,et;class y_{constructor(e=128){x(this,Je,[]);x(this,ks,!1);x(this,qc);x(this,et,-1);v(this,qc,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),l(this,ks))return;const c={cmd:e,undo:t,post:i,type:r};if(l(this,et)===-1){l(this,Je).length>0&&(l(this,Je).length=0),v(this,et,0),l(this,Je).push(c);return}if(o&&l(this,Je)[l(this,et)].type===r){a&&(c.undo=l(this,Je)[l(this,et)].undo),l(this,Je)[l(this,et)]=c;return}const u=l(this,et)+1;u===l(this,qc)?l(this,Je).splice(0,1):(v(this,et,u),u<l(this,Je).length&&l(this,Je).splice(u)),l(this,Je).push(c)}undo(){if(l(this,et)===-1)return;v(this,ks,!0);const{undo:e,post:t}=l(this,Je)[l(this,et)];e(),t==null||t(),v(this,ks,!1),v(this,et,l(this,et)-1)}redo(){if(l(this,et)<l(this,Je).length-1){v(this,et,l(this,et)+1),v(this,ks,!0);const{cmd:e,post:t}=l(this,Je)[l(this,et)];e(),t==null||t(),v(this,ks,!1)}}hasSomethingToUndo(){return l(this,et)!==-1}hasSomethingToRedo(){return l(this,et)<l(this,Je).length-1}destroy(){v(this,Je,null)}}Je=new WeakMap,ks=new WeakMap,qc=new WeakMap,et=new WeakMap;var rf,Zb;class hh{constructor(e){x(this,rf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Lt.platform;for(const[i,s,r={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(w(this,rf,Zb).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(s.bind(e,...o,t)(),r||(t.stopPropagation(),t.preventDefault()))}}rf=new WeakSet,Zb=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const of=class of{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return p_(e),se(this,"_colors",e)}convert(e){const t=O0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,o)=>r===t[o]))return of._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?$.makeHexColor(...t):e}};V(of,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Cg=of;var Ea,Qt,Ge,at,_a,Ni,Ca,Dn,Ts,ka,Ir,ii,On,Fr,Yc,Kc,Ta,Qc,si,Ps,Pa,Rs,ri,af,Ls,Zc,Ms,Dr,Jc,eu,tt,de,Ii,Or,tu,nu,Ns,oi,Fi,iu,mn,F,ed,kg,Jb,ex,td,tx,nx,ix,Tg,sx,Pg,Rg,rx,Ct,ws,ox,ax,Lg,lx,Yl,Mg;const fa=class fa{constructor(e,t,i,s,r,o,a,c,u,h,d){x(this,F);x(this,Ea,new AbortController);x(this,Qt,null);x(this,Ge,new Map);x(this,at,new Map);x(this,_a,null);x(this,Ni,null);x(this,Ca,null);x(this,Dn,new y_);x(this,Ts,null);x(this,ka,0);x(this,Ir,new Set);x(this,ii,null);x(this,On,null);x(this,Fr,new Set);x(this,Yc,!1);x(this,Kc,!1);x(this,Ta,!1);x(this,Qc,null);x(this,si,null);x(this,Ps,null);x(this,Pa,null);x(this,Rs,!1);x(this,ri,null);x(this,af,new v_);x(this,Ls,!1);x(this,Zc,!1);x(this,Ms,null);x(this,Dr,null);x(this,Jc,null);x(this,eu,null);x(this,tt,Q.NONE);x(this,de,new Set);x(this,Ii,null);x(this,Or,null);x(this,tu,null);x(this,nu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Ns,[0,0]);x(this,oi,null);x(this,Fi,null);x(this,iu,null);x(this,mn,null);const f=this._signal=l(this,Ea).signal;v(this,Fi,e),v(this,iu,t),v(this,_a,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),w(this,F,tx).call(this),w(this,F,rx).call(this),w(this,F,Tg).call(this),v(this,Ni,r.annotationStorage),v(this,Qc,r.filterFactory),v(this,Or,o),v(this,Pa,a||null),v(this,Yc,c),v(this,Kc,u),v(this,Ta,h),v(this,eu,d||null),this.viewParameters={realScale:hr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=fa.prototype,t=o=>l(o,Fi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return se(this,"_keyboardManager",new hh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Fi).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Fi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,s;(e=l(this,mn))==null||e.resolve(),v(this,mn,null),(t=l(this,Ea))==null||t.abort(),v(this,Ea,null),this._signal=null;for(const r of l(this,at).values())r.destroy();l(this,at).clear(),l(this,Ge).clear(),l(this,Fr).clear(),v(this,Qt,null),l(this,de).clear(),l(this,Dn).destroy(),(i=l(this,_a))==null||i.destroy(),(s=l(this,ri))==null||s.hide(),v(this,ri,null),l(this,si)&&(clearTimeout(l(this,si)),v(this,si,null)),l(this,oi)&&(clearTimeout(l(this,oi)),v(this,oi,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,eu)}get useNewAltTextFlow(){return l(this,Kc)}get useNewAltTextWhenAddingImage(){return l(this,Ta)}get hcmFilter(){return se(this,"hcmFilter",l(this,Or)?l(this,Qc).addHCMFilter(l(this,Or).foreground,l(this,Or).background):"none")}get direction(){return se(this,"direction",getComputedStyle(l(this,Fi)).direction)}get highlightColors(){return se(this,"highlightColors",l(this,Pa)?new Map(l(this,Pa).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){v(this,Jc,e)}editAltText(e,t=!1){var i;(i=l(this,_a))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":v(this,Ta,t);break}}onPageChanging({pageNumber:e}){v(this,ka,e-1)}focusMainContainer(){l(this,Fi).focus()}findParent(e,t){for(const i of l(this,at).values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+a)return i}return null}disableUserSelect(e=!1){l(this,iu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Fr).add(e)}removeShouldRescale(e){l(this,Fr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*hr.PDF_TO_CSS_UNITS;for(const t of l(this,Fr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=t,a=t.toString(),u=w(this,F,ed).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=w(this,F,kg).call(this,u),f=l(this,tt)===Q.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Q.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Ni)&&!l(this,Ni).has(e.id)&&l(this,Ni).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Rs)&&(v(this,Rs,!1),w(this,F,td).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,de))if(t.div.contains(e)){v(this,Dr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Dr))return;const[e,t]=l(this,Dr);v(this,Dr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){w(this,F,Tg).call(this),w(this,F,Pg).call(this)}removeEditListeners(){w(this,F,sx).call(this),w(this,F,Rg).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,On))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,On))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Qt))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,de)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of l(this,On))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){J(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)w(this,F,Lg).call(this,c);w(this,F,Mg).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){J(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,tt)!==Q.NONE&&!this.isEditorHandlingKeyboard&&fa._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Rs)&&(v(this,Rs,!1),w(this,F,td).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(w(this,F,nx).call(this),w(this,F,Pg).call(this),w(this,F,Ct).call(this,{isEditing:l(this,tt)!==Q.NONE,isEmpty:w(this,F,Yl).call(this),hasSomethingToUndo:l(this,Dn).hasSomethingToUndo(),hasSomethingToRedo:l(this,Dn).hasSomethingToRedo(),hasSelectedEditor:!1})):(w(this,F,ix).call(this),w(this,F,Rg).call(this),w(this,F,Ct).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,On)){v(this,On,e);for(const t of l(this,On))w(this,F,ws).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,af).id}get currentLayer(){return l(this,at).get(l(this,ka))}getLayer(e){return l(this,at).get(e)}get currentPageIndex(){return l(this,ka)}addLayer(e){l(this,at).set(e.pageIndex,e),l(this,Ls)?e.enable():e.disable()}removeLayer(e){l(this,at).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,tt)!==e&&!(l(this,mn)&&(await l(this,mn).promise,!l(this,mn)))){if(v(this,mn,Promise.withResolvers()),v(this,tt,e),e===Q.NONE){this.setEditingState(!1),w(this,F,ax).call(this),l(this,mn).resolve();return}this.setEditingState(!0),await w(this,F,ox).call(this),this.unselectAll();for(const s of l(this,at).values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,mn).resolve();return}for(const s of l(this,Ge).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,mn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,tt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,On)){switch(e){case G.CREATE:this.currentLayer.addNewEditor();return;case G.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,Jc))==null||i.updateColor(t);break;case G.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,tu)||v(this,tu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,de))s.updateParams(e,t);for(const s of l(this,On))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const o of l(this,Ge).values())o.editorType===e&&o.show(t);(((r=l(this,tu))==null?void 0:r.get(G.HIGHLIGHT_SHOW_ALL))??!0)!==t&&w(this,F,ws).call(this,[[G.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Zc)!==e){v(this,Zc,e);for(const t of l(this,at).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Ge).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Ge).get(e)}addEditor(e){l(this,Ge).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,si)&&clearTimeout(l(this,si)),v(this,si,setTimeout(()=>{this.focusMainContainer(),v(this,si,null)},0))),l(this,Ge).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Ir).has(e.annotationElementId))&&((t=l(this,Ni))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Ir).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Ir).has(e)}removeDeletedAnnotationElement(e){l(this,Ir).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Qt)!==e&&(v(this,Qt,e),e&&w(this,F,ws).call(this,e.propertiesToUpdate))}updateUI(e){l(this,F,lx)===e&&w(this,F,ws).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,de).has(e)){l(this,de).delete(e),e.unselect(),w(this,F,Ct).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,de).add(e),e.select(),w(this,F,ws).call(this,e.propertiesToUpdate),w(this,F,Ct).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,de))t!==e&&t.unselect();l(this,de).clear(),l(this,de).add(e),e.select(),w(this,F,ws).call(this,e.propertiesToUpdate),w(this,F,Ct).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,de).has(e)}get firstSelectedEditor(){return l(this,de).values().next().value}unselect(e){e.unselect(),l(this,de).delete(e),w(this,F,Ct).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,de).size!==0}get isEnterHandled(){return l(this,de).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Dn).undo(),w(this,F,Ct).call(this,{hasSomethingToUndo:l(this,Dn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:w(this,F,Yl).call(this)})}redo(){l(this,Dn).redo(),w(this,F,Ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Dn).hasSomethingToRedo(),isEmpty:w(this,F,Yl).call(this)})}addCommands(e){l(this,Dn).add(e),w(this,F,Ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:w(this,F,Yl).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,de)],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)w(this,F,Lg).call(this,s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Qt))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Qt)||this.hasSelection}selectAll(){for(const e of l(this,de))e.commit();w(this,F,Mg).call(this,l(this,Ge).values())}unselectAll(){if(!(l(this,Qt)&&(l(this,Qt).commitOrRemove(),l(this,tt)!==Q.NONE))&&this.hasSelection){for(const e of l(this,de))e.unselect();l(this,de).clear(),w(this,F,Ct).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,Ns)[0]+=e,l(this,Ns)[1]+=t;const[s,r]=l(this,Ns),o=[...l(this,de)],a=1e3;l(this,oi)&&clearTimeout(l(this,oi)),v(this,oi,setTimeout(()=>{v(this,oi,null),l(this,Ns)[0]=l(this,Ns)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,Ge).has(c.id)&&c.translateInPage(s,r)},undo:()=>{for(const c of o)l(this,Ge).has(c.id)&&c.translateInPage(-s,-r)},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,ii,new Map);for(const e of l(this,de))l(this,ii).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,ii))return!1;this.disableUserSelect(!1);const e=l(this,ii);v(this,ii,null);let t=!1;for(const[{x:s,y:r,pageIndex:o},a]of e)a.newX=s,a.newY=r,a.newPageIndex=o,t||(t=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const i=(s,r,o,a)=>{if(l(this,Ge).has(s.id)){const c=l(this,at).get(a);c?s._setParentAndPosition(c,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of e)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of e)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,ii))for(const i of l(this,ii).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,de).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Qt)===e}getActive(){return l(this,Qt)}getMode(){return l(this,tt)}get imageManager(){return se(this,"imageManager",new _g)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:b}of d.getClientRects())m===0||b===0||c.push(a(f,p,m,b))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Ca)||v(this,Ca,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Ca))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,Ca))==null?void 0:s.get(e.data.id);if(!t)return;const i=l(this,Ni).getRawValue(t);i&&(l(this,tt)===Q.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};Ea=new WeakMap,Qt=new WeakMap,Ge=new WeakMap,at=new WeakMap,_a=new WeakMap,Ni=new WeakMap,Ca=new WeakMap,Dn=new WeakMap,Ts=new WeakMap,ka=new WeakMap,Ir=new WeakMap,ii=new WeakMap,On=new WeakMap,Fr=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,Ta=new WeakMap,Qc=new WeakMap,si=new WeakMap,Ps=new WeakMap,Pa=new WeakMap,Rs=new WeakMap,ri=new WeakMap,af=new WeakMap,Ls=new WeakMap,Zc=new WeakMap,Ms=new WeakMap,Dr=new WeakMap,Jc=new WeakMap,eu=new WeakMap,tt=new WeakMap,de=new WeakMap,Ii=new WeakMap,Or=new WeakMap,tu=new WeakMap,nu=new WeakMap,Ns=new WeakMap,oi=new WeakMap,Fi=new WeakMap,iu=new WeakMap,mn=new WeakMap,F=new WeakSet,ed=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},kg=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,at).values())if(i.hasTextLayer(e))return i;return null},Jb=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=w(this,F,ed).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(l(this,ri)||v(this,ri,new g_(this)),l(this,ri).show(i,s,this.direction==="ltr"))},ex=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Ii)&&((r=l(this,ri))==null||r.hide(),v(this,Ii,null),w(this,F,Ct).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Ii))return;const s=w(this,F,ed).call(this,e).closest(".textLayer");if(!s){l(this,Ii)&&((o=l(this,ri))==null||o.hide(),v(this,Ii,null),w(this,F,Ct).call(this,{hasSelectedText:!1}));return}if((a=l(this,ri))==null||a.hide(),v(this,Ii,t),w(this,F,Ct).call(this,{hasSelectedText:!0}),!(l(this,tt)!==Q.HIGHLIGHT&&l(this,tt)!==Q.NONE)&&(l(this,tt)===Q.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,Rs,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,tt)===Q.HIGHLIGHT?w(this,F,kg).call(this,s):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&w(this,F,td).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},td=function(e=""){l(this,tt)===Q.HIGHLIGHT?this.highlightSelection(e):l(this,Yc)&&w(this,F,Jb).call(this)},tx=function(){document.addEventListener("selectionchange",w(this,F,ex).bind(this),{signal:this._signal})},nx=function(){if(l(this,Ps))return;v(this,Ps,new AbortController);const e=this.combinedSignal(l(this,Ps));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},ix=function(){var e;(e=l(this,Ps))==null||e.abort(),v(this,Ps,null)},Tg=function(){if(l(this,Ms))return;v(this,Ms,new AbortController);const e=this.combinedSignal(l(this,Ms));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},sx=function(){var e;(e=l(this,Ms))==null||e.abort(),v(this,Ms,null)},Pg=function(){if(l(this,Ts))return;v(this,Ts,new AbortController);const e=this.combinedSignal(l(this,Ts));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Rg=function(){var e;(e=l(this,Ts))==null||e.abort(),v(this,Ts,null)},rx=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ct=function(e){Object.entries(e).some(([i,s])=>l(this,nu)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,nu),e)}),l(this,tt)===Q.HIGHLIGHT&&e.hasSelectedEditor===!1&&w(this,F,ws).call(this,[[G.HIGHLIGHT_FREE,!0]]))},ws=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},ox=async function(){if(!l(this,Ls)){v(this,Ls,!0);const e=[];for(const t of l(this,at).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ge).values())t.enable()}},ax=function(){if(this.unselectAll(),l(this,Ls)){v(this,Ls,!1);for(const e of l(this,at).values())e.disable();for(const e of l(this,Ge).values())e.disable()}},Lg=function(e){const t=l(this,at).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},lx=function(){let e=null;for(e of l(this,de));return e},Yl=function(){if(l(this,Ge).size===0)return!0;if(l(this,Ge).size===1)for(const e of l(this,Ge).values())return e.isEmpty();return!1},Mg=function(e){for(const t of l(this,de))t.unselect();l(this,de).clear();for(const t of e)t.isEmpty()||(l(this,de).add(t),t.select());w(this,F,Ct).call(this,{hasSelectedEditor:this.hasSelection})},V(fa,"TRANSLATE_SMALL",1),V(fa,"TRANSLATE_BIG",10);let Do=fa;var nt,ai,jn,Ra,li,Zt,La,ci,zt,Di,jr,ui,Is,Kn,Kl,nd;const kt=class kt{constructor(e){x(this,Kn);x(this,nt,null);x(this,ai,!1);x(this,jn,null);x(this,Ra,null);x(this,li,null);x(this,Zt,null);x(this,La,!1);x(this,ci,null);x(this,zt,null);x(this,Di,null);x(this,jr,null);x(this,ui,!1);v(this,zt,e),v(this,ui,e._uiManager.useNewAltTextFlow),l(kt,Is)||v(kt,Is,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){kt._l10n??(kt._l10n=e)}async render(){const e=v(this,jn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=v(this,Ra,document.createElement("span"));e.append(t),l(this,ui)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(kt,Is).missing),t.setAttribute("data-l10n-id",l(kt,Is)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,zt)._uiManager._signal;e.addEventListener("contextmenu",Rn,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),l(this,zt)._uiManager.editAltText(l(this,zt)),l(this,ui)&&l(this,zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Kn,Kl)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(v(this,La,!0),s(r))},{signal:i}),await w(this,Kn,nd).call(this),e}finish(){l(this,jn)&&(l(this,jn).focus({focusVisible:l(this,La)}),v(this,La,!1))}isEmpty(){return l(this,ui)?l(this,nt)===null:!l(this,nt)&&!l(this,ai)}hasData(){return l(this,ui)?l(this,nt)!==null||!!l(this,Di):this.isEmpty()}get guessedText(){return l(this,Di)}async setGuessedText(e){l(this,nt)===null&&(v(this,Di,e),v(this,jr,await kt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),w(this,Kn,nd).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,ui)||l(this,nt)){(t=l(this,ci))==null||t.remove(),v(this,ci,null);return}if(!l(this,ci)){const i=v(this,ci,document.createElement("div"));i.className="noAltTextBadge",l(this,zt).div.append(i)}l(this,ci).classList.toggle("hidden",!e)}serialize(e){let t=l(this,nt);return!e&&l(this,Di)===t&&(t=l(this,jr)),{altText:t,decorative:l(this,ai),guessedText:l(this,Di),textWithDisclaimer:l(this,jr)}}get data(){return{altText:l(this,nt),decorative:l(this,ai)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(v(this,Di,i),v(this,jr,s)),!(l(this,nt)===e&&l(this,ai)===t)&&(r||(v(this,nt,e),v(this,ai,t)),w(this,Kn,nd).call(this))}toggle(e=!1){l(this,jn)&&(!e&&l(this,Zt)&&(clearTimeout(l(this,Zt)),v(this,Zt,null)),l(this,jn).disabled=!e)}shown(){l(this,zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Kn,Kl)}})}destroy(){var e,t;(e=l(this,jn))==null||e.remove(),v(this,jn,null),v(this,Ra,null),v(this,li,null),(t=l(this,ci))==null||t.remove(),v(this,ci,null)}};nt=new WeakMap,ai=new WeakMap,jn=new WeakMap,Ra=new WeakMap,li=new WeakMap,Zt=new WeakMap,La=new WeakMap,ci=new WeakMap,zt=new WeakMap,Di=new WeakMap,jr=new WeakMap,ui=new WeakMap,Is=new WeakMap,Kn=new WeakSet,Kl=function(){return l(this,nt)&&"added"||l(this,nt)===null&&this.guessedText&&"review"||"missing"},nd=async function(){var s,r,o;const e=l(this,jn);if(!e)return;if(l(this,ui)){if(e.classList.toggle("done",!!l(this,nt)),e.setAttribute("data-l10n-id",l(kt,Is)[l(this,Kn,Kl)]),(s=l(this,Ra))==null||s.setAttribute("data-l10n-id",l(kt,Is)[`${l(this,Kn,Kl)}-label`]),!l(this,nt)){(r=l(this,li))==null||r.remove();return}}else{if(!l(this,nt)&&!l(this,ai)){e.classList.remove("done"),(o=l(this,li))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,li);if(!t){v(this,li,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,zt).id}`;const a=100,c=l(this,zt)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,Zt)),v(this,Zt,null)},{once:!0}),e.addEventListener("mouseenter",()=>{v(this,Zt,setTimeout(()=>{v(this,Zt,null),l(this,li).classList.add("show"),l(this,zt)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,Zt)&&(clearTimeout(l(this,Zt)),v(this,Zt,null)),(u=l(this,li))==null||u.classList.remove("show")},{signal:c})}l(this,ai)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,nt)),t.parentNode||e.append(t);const i=l(this,zt).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},x(kt,Is,null),V(kt,"_l10n",null);let Qd=kt;var $r,$n,Te,Ma,zr,lt,Hr,Fs,su,Br,Ds,ru,Ur,Oi,hi,Na,Ia,vn,ou,lf,Z,Ng,au,Ig,Fg,cx,ux,Dg,Og,jg,hx,$g,dx,fx,px,zg,Ql;const ue=class ue{constructor(e){x(this,Z);x(this,$r,null);x(this,$n,null);x(this,Te,null);x(this,Ma,!1);x(this,zr,!1);x(this,lt,null);x(this,Hr,null);x(this,Fs,null);x(this,su,"");x(this,Br,!1);x(this,Ds,null);x(this,ru,!1);x(this,Ur,!1);x(this,Oi,!1);x(this,hi,null);x(this,Na,0);x(this,Ia,0);x(this,vn,null);V(this,"_editToolbar",null);V(this,"_initialOptions",Object.create(null));V(this,"_initialData",null);V(this,"_isVisible",!0);V(this,"_uiManager",null);V(this,"_focusEventsAllowed",!0);x(this,ou,!1);x(this,lf,ue._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ue.prototype._resizeWithKeyboard,t=Do.TRANSLATE_SMALL,i=Do.TRANSLATE_BIG;return se(this,"_resizerKeyboardManager",new hh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new w_({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ue._l10n??(ue._l10n=e),ue._l10nResizer||(ue._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ue._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ue._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ae("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,ou)}set _isDraggable(e){var t;v(this,ou,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,lf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):w(this,Z,Ql).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Br)?v(this,Br,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){w(this,Z,Ng).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Ds)||v(this,Ds,[this.x,this.y]),w(this,Z,Ng).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Ds)||v(this,Ds,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,c]=this.getBaseTranslation();r+=a,o+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Ds)&&(l(this,Ds)[0]!==this.x||l(this,Ds)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=ue,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:r,width:o,height:a}=this;if(o*=t,a*=i,s*=t,r*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),r=Math.max(0,Math.min(i-a,r));break;case 90:s=Math.max(0,Math.min(t-a,s)),r=Math.min(i,Math.max(o,r));break;case 180:s=Math.min(t,Math.max(o,s)),r=Math.min(i,Math.max(a,r));break;case 270:s=Math.min(t,Math.max(a,s)),r=Math.max(0,Math.min(i-o,r));break}this.x=s/=t,this.y=r/=i;const[c,u]=this.getBaseTranslation();s+=c,r+=u;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return w(i=ue,au,Ig).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return w(i=ue,au,Ig).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,zr)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!l(this,zr)&&t.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!l(this,zr)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,Te))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,Ur)?this._editToolbar:(this._editToolbar=new Sg(this),this.div.append(this._editToolbar.render()),l(this,Te)&&await this._editToolbar.addAltText(l(this,Te)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Te))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Te)||(Qd.initialize(ue._l10n),v(this,Te,new Qd(this)),l(this,$r)&&(l(this,Te).data=l(this,$r),v(this,$r,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Te))==null?void 0:e.data}set altTextData(e){l(this,Te)&&(l(this,Te).data=e)}get guessedAltText(){var e;return(e=l(this,Te))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Te))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Te))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Te)&&!l(this,Te).isEmpty()}hasAltTextData(){var e;return((e=l(this,Te))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Ma)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),w(this,Z,$g).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Kd(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Lt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(v(this,Br,!0),this._isDraggable){w(this,Z,hx).call(this,e);return}w(this,Z,jg).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,hi)&&clearTimeout(l(this,hi)),v(this,hi,setTimeout(()=>{var e;v(this,hi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/s,h=t/s,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(i){case 0:return[d+u+a,o-f-h-m+c,d+u+p+a,o-f-h+c];case 90:return[d+h+a,o-f+u+c,d+h+m+a,o-f+u+p+c];case 180:return[d-u-p+a,o-f+h+c,d-u+a,o-f+h+m+c];case 270:return[d-h-m+a,o-f-u-p+c,d-h+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,o]=e,a=r-i,c=o-s;switch(this.rotation){case 0:return[i,t-o,a,c];case 90:return[i,t-s,c,a];case 180:return[r,t-s,a,c];case 270:return[r,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){v(this,Ur,!0)}disableEditMode(){v(this,Ur,!1)}isInEditMode(){return l(this,Ur)}shouldGetKeyboardEvents(){return l(this,Oi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){w(this,Z,$g).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ae("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,v(s,$r,e.accessibilityData);const[r,o]=s.pageDimensions,[a,c,u,h]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Fs))==null||e.abort(),v(this,Fs,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,hi)&&(clearTimeout(l(this,hi)),v(this,hi,null)),w(this,Z,Ql).call(this),this.removeEditToolbar(),l(this,vn)){for(const t of l(this,vn).values())clearTimeout(t);v(this,vn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(w(this,Z,cx).call(this),l(this,lt).classList.remove("hidden"),Kd(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),v(this,Hr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,lt).children;if(!l(this,$n)){v(this,$n,Array.from(t));const o=w(this,Z,dx).bind(this),a=w(this,Z,fx).bind(this),c=this._uiManager._signal;for(const u of l(this,$n)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",w(this,Z,px).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ue._l10nResizer[h])}}const i=l(this,$n)[0];let s=0;for(const o of t){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,$n).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)l(this,lt).append(l(this,lt).firstChild);else if(r>s)for(let a=0;a<r-s;a++)l(this,lt).firstChild.before(l(this,lt).lastChild);let o=0;for(const a of t){const u=l(this,$n)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ue._l10nResizer[u])}}w(this,Z,zg).call(this,0),v(this,Oi,!0),l(this,lt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Oi)&&w(this,Z,Og).call(this,l(this,su),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){w(this,Z,Ql).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,Te))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,s,r;(e=l(this,lt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=l(this,Te))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,ru)}set isEditing(e){v(this,ru,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){v(this,zr,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,vn)||v(this,vn,new Map);const{action:i}=e;let s=l(this,vn).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,vn).delete(i),l(this,vn).size===0&&v(this,vn,null)},ue._telemetryTimeout),l(this,vn).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),v(this,Ma,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,Ma,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};$r=new WeakMap,$n=new WeakMap,Te=new WeakMap,Ma=new WeakMap,zr=new WeakMap,lt=new WeakMap,Hr=new WeakMap,Fs=new WeakMap,su=new WeakMap,Br=new WeakMap,Ds=new WeakMap,ru=new WeakMap,Ur=new WeakMap,Oi=new WeakMap,hi=new WeakMap,Na=new WeakMap,Ia=new WeakMap,vn=new WeakMap,ou=new WeakMap,lf=new WeakMap,Z=new WeakSet,Ng=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()},au=new WeakSet,Ig=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Fg=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},cx=function(){if(l(this,lt))return;v(this,lt,document.createElement("div")),l(this,lt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");l(this,lt).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",w(this,Z,ux).bind(this,i),{signal:t}),s.addEventListener("contextmenu",Rn,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,lt))},ux=function(e,t){var m;t.preventDefault();const{isMac:i}=Lt.platform;if(t.button!==0||t.ctrlKey&&i)return;(m=l(this,Te))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",w(this,Z,Og).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",Rn,{signal:o});const a=this.x,c=this.y,u=this.width,h=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var b;r.abort(),this.parent.togglePointerEvents(!0),(b=l(this,Te))==null||b.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=f,w(this,Z,Dg).call(this,a,c,u,h)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},Dg=function(e,t,i,s){const r=this.x,o=this.y,a=this.width,c=this.height;r===e&&o===t&&a===i&&c===s||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=r,this.y=o;const[u,h]=this.parentDimensions;this.setDims(u*a,h*c),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*i,h*s),this.fixAndSetPosition()},mustExec:!0})},Og=function(e,t){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,u=ue.MIN_SIZE/i,h=ue.MIN_SIZE/s,d=H=>Math.round(H*1e4)/1e4,f=w(this,Z,Fg).call(this,this.rotation),p=(H,M)=>[f[0]*H+f[2]*M,f[1]*H+f[3]*M],m=w(this,Z,Fg).call(this,360-this.rotation),b=(H,M)=>[m[0]*H+m[2]*M,m[1]*H+m[3]*M];let E,g,y=!1,A=!1;switch(e){case"topLeft":y=!0,E=(H,M)=>[0,0],g=(H,M)=>[H,M];break;case"topMiddle":E=(H,M)=>[H/2,0],g=(H,M)=>[H/2,M];break;case"topRight":y=!0,E=(H,M)=>[H,0],g=(H,M)=>[0,M];break;case"middleRight":A=!0,E=(H,M)=>[H,M/2],g=(H,M)=>[0,M/2];break;case"bottomRight":y=!0,E=(H,M)=>[H,M],g=(H,M)=>[0,0];break;case"bottomMiddle":E=(H,M)=>[H/2,M],g=(H,M)=>[H/2,0];break;case"bottomLeft":y=!0,E=(H,M)=>[0,M],g=(H,M)=>[H,0];break;case"middleLeft":A=!0,E=(H,M)=>[0,M/2],g=(H,M)=>[H,M/2];break}const S=E(a,c),P=g(a,c);let _=p(...P);const C=d(r+_[0]),T=d(o+_[1]);let R=1,L=1,[D,q]=this.screenToPageTranslation(t.movementX,t.movementY);if([D,q]=b(D/i,q/s),y){const H=Math.hypot(a,c);R=L=Math.max(Math.min(Math.hypot(P[0]-S[0]-D,P[1]-S[1]-q)/H,1/a,1/c),u/a,h/c)}else A?R=Math.max(u,Math.min(1,Math.abs(P[0]-S[0]-D)))/a:L=Math.max(h,Math.min(1,Math.abs(P[1]-S[1]-q)))/c;const K=d(a*R),ae=d(c*L);_=p(...g(K,ae));const ce=C-_[0],me=T-_[1];this.width=K,this.height=ae,this.x=ce,this.y=me,this.setDims(i*K,s*ae),this.fixAndSetPosition()},jg=function(e){const{isMac:t}=Lt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},hx=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,s=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),v(this,Na,e.clientX),v(this,Ia,e.clientY);const o=a=>{const{clientX:c,clientY:u}=a,[h,d]=this.screenToPageTranslation(c-l(this,Na),u-l(this,Ia));v(this,Na,c),v(this,Ia,u),this._uiManager.dragSelectedEditors(h,d)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:s})}const r=()=>{i.abort(),t&&this.div.classList.remove("moving"),v(this,Br,!1),this._uiManager.endDragSession()||w(this,Z,jg).call(this,e)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},$g=function(){if(l(this,Fs)||!this.div)return;v(this,Fs,new AbortController);const e=this._uiManager.combinedSignal(l(this,Fs));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},dx=function(e){ue._resizerKeyboardManager.exec(this,e)},fx=function(e){var t;l(this,Oi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,lt)&&w(this,Z,Ql).call(this)},px=function(e){v(this,su,l(this,Oi)?e:"")},zg=function(e){if(l(this,$n))for(const t of l(this,$n))t.tabIndex=e},Ql=function(){if(v(this,Oi,!1),w(this,Z,zg).call(this,-1),l(this,Hr)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=l(this,Hr);w(this,Z,Dg).call(this,e,t,i,s),v(this,Hr,null)}},x(ue,au),V(ue,"_l10n",null),V(ue,"_l10nResizer",null),V(ue,"_borderLineWidth",-1),V(ue,"_colorManager",new Cg),V(ue,"_zIndex",1),V(ue,"_telemetryTimeout",1e3);let pe=ue;class w_ extends pe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const uy=3285377520,gn=4294901760,ti=65535;class gx{constructor(e){this.h1=e?e&4294967295:uy,this.h2=e?e&4294967295:uy}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let b=0,E=e.length;b<E;b++){const g=e.charCodeAt(b);g<=255?t[i++]=g:(t[i++]=g>>>8,t[i++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&ti,m=f&ti;for(let b=0;b<s;b++)b&1?(a=o[b],a=a*d&gn|a*p&ti,a=a<<15|a>>>17,a=a*f&gn|a*m&ti,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[b],c=c*d&gn|c*p&ti,c=c<<15|c>>>17,c=c*f&gn|c*m&ti,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*d&gn|a*p&ti,a=a<<15|a>>>17,a=a*f&gn|a*m&ti,s&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&gn|e*36045&ti,t=t*4283543511&gn|((t<<16|e>>>16)*2950163797&gn)>>>16,e^=t>>>1,e=e*444984403&gn|e*60499&ti,t=t*3301882366&gn|((t<<16|e>>>16)*3120437893&gn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Hg=Object.freeze({map:null,hash:"",transfer:void 0});var Wr,Vr,it,cf,mx;class j0{constructor(){x(this,cf);x(this,Wr,!1);x(this,Vr,null);x(this,it,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,it).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,it).get(e)}remove(e){if(l(this,it).delete(e),l(this,it).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,it).values())if(t instanceof pe)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,it).get(e);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(t))i[r]!==o&&(s=!0,i[r]=o);else s=!0,l(this,it).set(e,t);s&&w(this,cf,mx).call(this),t instanceof pe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,it).has(e)}getAll(){return l(this,it).size>0?M0(l(this,it)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,it).size}resetModified(){l(this,Wr)&&(v(this,Wr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new vx(this)}get serializable(){if(l(this,it).size===0)return Hg;const e=new Map,t=new gx,i=[],s=Object.create(null);let r=!1;for(const[o,a]of l(this,it)){const c=a instanceof pe?a.serialize(!1,s):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Hg}get editorStats(){let e=null;const t=new Map;for(const i of l(this,it).values()){if(!(i instanceof pe))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,c]of Object.entries(s)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){v(this,Vr,null)}get modifiedIds(){if(l(this,Vr))return l(this,Vr);const e=[];for(const t of l(this,it).values())!(t instanceof pe)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return v(this,Vr,{ids:new Set(e),hash:e.join(",")})}}Wr=new WeakMap,Vr=new WeakMap,it=new WeakMap,cf=new WeakSet,mx=function(){l(this,Wr)||(v(this,Wr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var lu;class vx extends j0{constructor(t){super();x(this,lu);const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);v(this,lu,{map:o,hash:s,transfer:r})}get print(){Ae("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,lu)}get modifiedIds(){return se(this,"modifiedIds",{ids:new Set,hash:""})}}lu=new WeakMap;var Fa;class b_{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,Fa,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Fa).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Fa).has(e.loadedName))){if(Ke(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=e,o=new FontFace(i,s,r);this.addNativeFontFace(o);try{await o.load(),l(this,Fa).add(i),t==null||t(e)}catch{J(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ae("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw J(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return se(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(St||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),se(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ke(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return se(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(S,P){return S.charCodeAt(P)<<24|S.charCodeAt(P+1)<<16|S.charCodeAt(P+2)<<8|S.charCodeAt(P+3)&255}function s(S,P,_,C){const T=S.substring(0,P),R=S.substring(P+_);return T+C+R}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function h(S,P){if(++u>30){J("Load test font never loaded."),P();return}if(c.font="30px "+S,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(h.bind(null,S,P))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const m=16,b=1482184792;let E=i(f,m);for(r=0,o=d.length-3;r<o;r+=4)E=E-b+i(d,r)|0;r<d.length&&(E=E-b+i(d+"XXX",r)|0),f=s(f,m,4,s_(E));const g=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(y);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const S of[e.loadedName,d]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=S,A.append(P)}this._document.body.append(A),h(d,()=>{A.remove(),t.complete()})}}Fa=new WeakMap;class x_{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${u_(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){J(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(r,o){};const s=[];for(let r=0,o=i.length;r<o;)switch(i[r++]){case Ci.BEZIER_CURVE_TO:{const[a,c,u,h,d,f]=i.slice(r,r+6);s.push(p=>p.bezierCurveTo(a,c,u,h,d,f)),r+=6}break;case Ci.MOVE_TO:{const[a,c]=i.slice(r,r+2);s.push(u=>u.moveTo(a,c)),r+=2}break;case Ci.LINE_TO:{const[a,c]=i.slice(r,r+2);s.push(u=>u.lineTo(a,c)),r+=2}break;case Ci.QUADRATIC_CURVE_TO:{const[a,c,u,h]=i.slice(r,r+4);s.push(d=>d.quadraticCurveTo(a,c,u,h)),r+=4}break;case Ci.RESTORE:s.push(a=>a.restore());break;case Ci.SAVE:s.push(a=>a.save());break;case Ci.SCALE:Ke(s.length===2,"Scale command is only valid at the third position.");break;case Ci.TRANSFORM:{const[a,c,u,h,d,f]=i.slice(r,r+6);s.push(p=>p.transform(a,c,u,h,d,f)),r+=6}break;case Ci.TRANSLATE:{const[a,c]=i.slice(r,r+2);s.push(u=>u.translate(a,c)),r+=2}break}return this.compiledGlyphs[t]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let c=2,u=s.length;c<u;c++)s[c](o)}}}var cu;class yx{constructor({enableHWA:e=!1}){x(this,cu,!1);v(this,cu,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,cu)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ae("Abstract method `_createCanvas` called.")}}cu=new WeakMap;class A_ extends yx{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class wx{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ae("Abstract method `_fetch` called.")}}class bx extends wx{async _fetch(e){const t=await Bf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hf(t)}}class xx{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var Gr,Xr,di,ji,wt,uf,qr,O,vt,Xo,qo,id,Yo,Ax,Bg,Ko,Zl,Jl,Ug,ec;class S_ extends xx{constructor({docId:t,ownerDocument:i=globalThis.document}){super();x(this,O);x(this,Gr);x(this,Xr);x(this,di);x(this,ji);x(this,wt);x(this,uf);x(this,qr,0);v(this,ji,t),v(this,wt,i)}addFilter(t){if(!t)return"none";let i=l(this,O,vt).get(t);if(i)return i;const[s,r,o]=w(this,O,id).call(this,t),a=t.length===1?s:`${s}${r}${o}`;if(i=l(this,O,vt).get(a),i)return l(this,O,vt).set(t,i),i;const c=`g_${l(this,ji)}_transfer_map_${_t(this,qr)._++}`,u=w(this,O,Yo).call(this,c);l(this,O,vt).set(t,u),l(this,O,vt).set(a,u);const h=w(this,O,Ko).call(this,c);return w(this,O,Jl).call(this,s,r,o,h),u}addHCMFilter(t,i){var m;const s=`${t}-${i}`,r="base";let o=l(this,O,Xo).get(r);if((o==null?void 0:o.key)===s||(o?((m=o.filter)==null||m.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,O,Xo).set(r,o)),!t||!i))return o.url;const a=w(this,O,ec).call(this,t);t=$.makeHexColor(...a);const c=w(this,O,ec).call(this,i);if(i=$.makeHexColor(...c),l(this,O,qo).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const u=new Array(256);for(let b=0;b<=255;b++){const E=b/255;u[b]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,ji)}_hcm_filter`,f=o.filter=w(this,O,Ko).call(this,d);w(this,O,Jl).call(this,h,h,h,f),w(this,O,Bg).call(this,f);const p=(b,E)=>{const g=a[b]/255,y=c[b]/255,A=new Array(E+1);for(let S=0;S<=E;S++)A[S]=g+S/E*(y-g);return A.join(",")};return w(this,O,Jl).call(this,p(0,5),p(1,5),p(2,5),f),o.url=w(this,O,Yo).call(this,d),o.url}addAlphaFilter(t){let i=l(this,O,vt).get(t);if(i)return i;const[s]=w(this,O,id).call(this,[t]),r=`alpha_${s}`;if(i=l(this,O,vt).get(r),i)return l(this,O,vt).set(t,i),i;const o=`g_${l(this,ji)}_alpha_map_${_t(this,qr)._++}`,a=w(this,O,Yo).call(this,o);l(this,O,vt).set(t,a),l(this,O,vt).set(r,a);const c=w(this,O,Ko).call(this,o);return w(this,O,Ug).call(this,s,c),a}addLuminosityFilter(t){let i=l(this,O,vt).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=w(this,O,id).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=l(this,O,vt).get(r),i)return l(this,O,vt).set(t,i),i;const o=`g_${l(this,ji)}_luminosity_map_${_t(this,qr)._++}`,a=w(this,O,Yo).call(this,o);l(this,O,vt).set(t,a),l(this,O,vt).set(r,a);const c=w(this,O,Ko).call(this,o);return w(this,O,Ax).call(this,c),t&&w(this,O,Ug).call(this,s,c),a}addHighlightHCMFilter(t,i,s,r,o){var y;const a=`${i}-${s}-${r}-${o}`;let c=l(this,O,Xo).get(t);if((c==null?void 0:c.key)===a||(c?((y=c.filter)==null||y.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,O,Xo).set(t,c)),!i||!s))return c.url;const[u,h]=[i,s].map(w(this,O,ec).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(w(this,O,ec).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,O,qo).style.color="";const b=(A,S,P)=>{const _=new Array(256),C=(f-d)/P,T=A/255,R=(S-A)/(255*P);let L=0;for(let D=0;D<=P;D++){const q=Math.round(d+D*C),K=T+D*R;for(let ae=L;ae<=q;ae++)_[ae]=K;L=q+1}for(let D=L;D<256;D++)_[D]=_[L-1];return _.join(",")},E=`g_${l(this,ji)}_hcm_${t}_filter`,g=c.filter=w(this,O,Ko).call(this,E);return w(this,O,Bg).call(this,g),w(this,O,Jl).call(this,b(p[0],m[0],5),b(p[1],m[1],5),b(p[2],m[2],5),g),c.url=w(this,O,Yo).call(this,E),c.url}destroy(t=!1){t&&l(this,O,Xo).size!==0||(l(this,di)&&(l(this,di).parentNode.parentNode.remove(),v(this,di,null)),l(this,Xr)&&(l(this,Xr).clear(),v(this,Xr,null)),v(this,qr,0))}}Gr=new WeakMap,Xr=new WeakMap,di=new WeakMap,ji=new WeakMap,wt=new WeakMap,uf=new WeakMap,qr=new WeakMap,O=new WeakSet,vt=function(){return l(this,Xr)||v(this,Xr,new Map)},Xo=function(){return l(this,uf)||v(this,uf,new Map)},qo=function(){if(!l(this,di)){const t=l(this,wt).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=l(this,wt).createElementNS(Ti,"svg");s.setAttribute("width",0),s.setAttribute("height",0),v(this,di,l(this,wt).createElementNS(Ti,"defs")),t.append(s),s.append(l(this,di)),l(this,wt).body.append(t)}return l(this,di)},id=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,a[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),a.join(","),c.join(",")]},Yo=function(t){if(l(this,Gr)===void 0){v(this,Gr,"");const i=l(this,wt).URL;i!==l(this,wt).baseURI&&(Uf(i)?J('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,Gr,i.split("#",1)[0]))}return`url(${l(this,Gr)}#${t})`},Ax=function(t){const i=l(this,wt).createElementNS(Ti,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Bg=function(t){const i=l(this,wt).createElementNS(Ti,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Ko=function(t){const i=l(this,wt).createElementNS(Ti,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,O,qo).append(i),i},Zl=function(t,i,s){const r=l(this,wt).createElementNS(Ti,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},Jl=function(t,i,s,r){const o=l(this,wt).createElementNS(Ti,"feComponentTransfer");r.append(o),w(this,O,Zl).call(this,o,"feFuncR",t),w(this,O,Zl).call(this,o,"feFuncG",i),w(this,O,Zl).call(this,o,"feFuncB",s)},Ug=function(t,i){const s=l(this,wt).createElementNS(Ti,"feComponentTransfer");i.append(s),w(this,O,Zl).call(this,s,"feFuncA",t)},ec=function(t){return l(this,O,qo).style.color=t,O0(getComputedStyle(l(this,O,qo)).getPropertyValue("color"))};class Sx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ae("Abstract method `_fetch` called.")}}class Ex extends Sx{async _fetch(e){const t=await Bf(e,"arraybuffer");return new Uint8Array(t)}}if(St){var Wg=Promise.withResolvers(),bc=null;(async()=>{const e=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,o;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:r,path2d:o}))})().then(e=>{bc=e,Wg.resolve()},e=>{J(`loadPackages: ${e}`),bc=new Map,Wg.resolve()})}class dr{static get promise(){return Wg.promise}static get(e){return bc==null?void 0:bc.get(e)}}async function _x(n){const t=await dr.get("fs").promises.readFile(n);return new Uint8Array(t)}class E_ extends xx{}class __ extends yx{_createCanvas(e,t){return dr.get("canvas").createCanvas(e,t)}}class C_ extends wx{async _fetch(e){return _x(e)}}class k_ extends Sx{async _fetch(e){return _x(e)}}const Pt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Vg(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class $0{getPattern(){Ae("Abstract method `getPattern` called.")}}class T_ extends $0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Pt.STROKE||s===Pt.FILL){const o=t.current.getClippedPathBoundingBox(s,Re(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=$.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Vg(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else Vg(e,this._bbox),r=this._createGradient(e);return r}}function Sp(n,e,t,i,s,r,o,a){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=o,o=a,a=f),c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,b=(c[i]+e.offsetX)*e.scaleX,E=(c[i+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,y=(c[s+1]+e.offsetY)*e.scaleY;if(m>=y)return;const A=u[r],S=u[r+1],P=u[r+2],_=u[o],C=u[o+1],T=u[o+2],R=u[a],L=u[a+1],D=u[a+2],q=Math.round(m),K=Math.round(y);let ae,ce,me,H,M,B,W,re;for(let ie=q;ie<=K;ie++){if(ie<E){const he=ie<m?0:(m-ie)/(m-E);ae=p-(p-b)*he,ce=A-(A-_)*he,me=S-(S-C)*he,H=P-(P-T)*he}else{let he;ie>y?he=1:E===y?he=0:he=(E-ie)/(E-y),ae=b-(b-g)*he,ce=_-(_-R)*he,me=C-(C-L)*he,H=T-(T-D)*he}let Ee;ie<m?Ee=0:ie>y?Ee=1:Ee=(m-ie)/(m-y),M=p-(p-g)*Ee,B=A-(A-R)*Ee,W=S-(S-L)*Ee,re=P-(P-D)*Ee;const Ot=Math.round(Math.min(ae,M)),_i=Math.round(Math.max(ae,M));let Ie=d*ie+Ot*4;for(let he=Ot;he<=_i;he++)Ee=(ae-he)/(ae-M),Ee<0?Ee=0:Ee>1&&(Ee=1),h[Ie++]=ce-(ce-B)*Ee|0,h[Ie++]=me-(me-W)*Ee|0,h[Ie++]=H-(H-re)*Ee|0,h[Ie++]=255}}function P_(n,e,t){const i=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(i.length/a)-1,u=a-1;for(r=0;r<c;r++){let h=r*a;for(let d=0;d<u;d++,h++)Sp(n,t,i[h],i[h+1],i[h+a],s[h],s[h+1],s[h+a]),Sp(n,t,i[h+a+1],i[h+1],i[h+a],s[h+a+1],s[h+1],s[h+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)Sp(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class R_ extends $0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,m=h/f,b={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/m},E=d+2*2,g=f+2*2,y=i.getCanvas("mesh",E,g),A=y.context,S=A.createImageData(d,f);if(t){const _=S.data;for(let C=0,T=_.length;C<T;C+=4)_[C]=t[0],_[C+1]=t[1],_[C+2]=t[2],_[C+3]=255}for(const _ of this._figures)P_(S,_,b);return A.putImageData(S,2,2),{canvas:y.canvas,offsetX:a-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(e,t,i,s){Vg(e,this._bbox);let r;if(s===Pt.SHADING)r=$.singularValueDecompose2dScale(Re(e));else if(r=$.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=$.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,s===Pt.SHADING?null:this._background,t.cachedCanvases);return s!==Pt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class L_ extends $0{getPattern(){return"hotpink"}}function M_(n){switch(n[0]){case"RadialAxial":return new T_(n);case"Mesh":return new R_(n);case"Dummy":return new L_}throw new Error(`Unknown IR type: ${n[0]}`)}const hy={COLORED:1,UNCOLORED:2},hf=class hf{constructor(e,t,i,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),$f("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],m=f-h,b=p-d,E=$.singularValueDecompose2dScale(this.matrix),g=$.singularValueDecompose2dScale(this.baseTransform),y=E[0]*g[0],A=E[1]*g[1];let S=m,P=b,_=!1,C=!1;const T=Math.ceil(c*y),R=Math.ceil(u*A),L=Math.ceil(m*y),D=Math.ceil(b*A);T>=L?S=c:_=!0,R>=D?P=u:C=!0;const q=this.getSizeAndScale(S,this.ctx.canvas.width,y),K=this.getSizeAndScale(P,this.ctx.canvas.height,A),ae=e.cachedCanvases.getCanvas("pattern",q.size,K.size),ce=ae.context,me=a.createCanvasGraphics(ce);if(me.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(me,s,o),ce.translate(-q.scale*h,-K.scale*d),me.transform(q.scale,0,0,K.scale,0,0),ce.save(),this.clipBbox(me,h,d,f,p),me.baseTransform=Re(me.ctx),me.executeOperatorList(i),me.endDrawing(),ce.restore(),_||C){const H=ae.canvas;_&&(S=c),C&&(P=u);const M=this.getSizeAndScale(S,this.ctx.canvas.width,y),B=this.getSizeAndScale(P,this.ctx.canvas.height,A),W=M.size,re=B.size,ie=e.cachedCanvases.getCanvas("pattern-workaround",W,re),Ee=ie.context,Ot=_?Math.floor(m/c):0,_i=C?Math.floor(b/u):0;for(let Ie=0;Ie<=Ot;Ie++)for(let he=0;he<=_i;he++)Ee.drawImage(H,W*Ie,re*he,W,re,0,0,W,re);return{canvas:ie.canvas,scaleX:M.scale,scaleY:B.scale,offsetX:h,offsetY:d}}return{canvas:ae.canvas,scaleX:q.scale,scaleY:K.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,i){const s=Math.max(hf.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const o=s-t,a=r-i;e.ctx.rect(t,i,o,a),e.current.updateRectMinMax(Re(e.ctx),[t,i,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case hy.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case hy.UNCOLORED:const a=$.makeHexColor(i[0],i[1],i[2]);s.fillStyle=a,s.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new i_(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let r=i;s!==Pt.SHADING&&(r=$.transform(r,t.baseTransform),this.matrix&&(r=$.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};V(hf,"MAX_PATTERN_SIZE",3e3);let Gg=hf;function N_({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Lt.isLittleEndian?4278190080:255,[c,u]=o?[r,a]:[a,r],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<s;m++){for(const E=e+h;e<E;e++){const g=e<f?n[e]:255;t[p++]=g&128?u:c,t[p++]=g&64?u:c,t[p++]=g&32?u:c,t[p++]=g&16?u:c,t[p++]=g&8?u:c,t[p++]=g&4?u:c,t[p++]=g&2?u:c,t[p++]=g&1?u:c}if(d===0)continue;const b=e<f?n[e++]:255;for(let E=0;E<d;E++)t[p++]=b&1<<7-E?u:c}return{srcPos:e,destPos:p}}const dy=16,fy=100,I_=15,py=10,gy=1e3,Ut=16;function F_(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,o,a,c){e.transform(i,s,r,o,a,c),this.__originalTransform(i,s,r,o,a,c)},n.setTransform=function(i,s,r,o,a,c){e.setTransform(i,s,r,o,a,c),this.__originalSetTransform(i,s,r,o,a,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,o,a){e.bezierCurveTo(t,i,s,r,o,a),this.__originalBezierCurveTo(t,i,s,r,o,a)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class D_{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Nh(n,e,t,i,s,r,o,a,c,u){const[h,d,f,p,m,b]=Re(n);if(d===0&&f===0){const y=o*h+m,A=Math.round(y),S=a*p+b,P=Math.round(S),_=(o+c)*h+m,C=Math.abs(Math.round(_)-A)||1,T=(a+u)*p+b,R=Math.abs(Math.round(T)-P)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),A,P),n.drawImage(e,t,i,s,r,0,0,C,R),n.setTransform(h,d,f,p,m,b),[C,R]}if(h===0&&p===0){const y=a*f+m,A=Math.round(y),S=o*d+b,P=Math.round(S),_=(a+u)*f+m,C=Math.abs(Math.round(_)-A)||1,T=(o+c)*d+b,R=Math.abs(Math.round(T)-P)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,A,P),n.drawImage(e,t,i,s,r,0,0,R,C),n.setTransform(h,d,f,p,m,b),[R,C]}n.drawImage(e,t,i,s,r,o,a,c,u);const E=Math.hypot(h,d),g=Math.hypot(f,p);return[E*c,g*u]}function O_(n){const{width:e,height:t}=n;if(e>gy||t>gy)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),a,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const g of n.data){let y=128;for(;y>0;)d[f++]=g&y?0:255,y>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),a=1;a<t;a++){f=a*h,u=a*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let g=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)g=(g>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[g]&&(o[u+c]=s[g],++p),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++p),p>i)return null}for(f=h*(t-1),u=a*r,d[f]!==0&&(o[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+c]=4,++p),p>i)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),b=new Path2D;for(a=0;p&&a<=t;a++){let g=a*r;const y=g+e;for(;g<y&&!o[g];)g++;if(g===y)continue;b.moveTo(g%r,a);const A=g;let S=o[g];do{const P=m[S];do g+=P;while(!o[g]);const _=o[g];_!==5&&_!==10?(S=_,o[g]=0):(S=_&51*S>>4,o[g]&=S>>2|S<<2),b.lineTo(g%r,g/r|0),o[g]||--p}while(A!==g);--a}return d=null,o=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(b),g.beginPath(),g.restore()}}class my{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Bb,this.textMatrixScale=1,this.fontMatrix=yg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=mt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=$.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=$.applyTransform(t,e),s=$.applyTransform(t.slice(2),e),r=$.applyTransform([t[0],t[3]],e),o=$.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],o[1])}updateScalingPathMinMax(e,t){$.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,r,o,a,c,u,h){const d=$.bezierBoundingBox(t,i,s,r,o,a,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Pt.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Pt.STROKE){t||Ae("Stroke bounding box must include transform.");const s=$.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=o,i[2]+=r,i[3]+=o}return i}updateClipFromPath(){const e=$.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Pt.FILL,t=null){return $.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function vy(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%Ut,r=(t-s)/Ut,o=s===0?r:r+1,a=n.createImageData(i,Ut);let c=0,u;const h=e.data,d=a.data;let f,p,m,b;if(e.kind===Kh.GRAYSCALE_1BPP){const E=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),y=g.length,A=i+7>>3,S=4294967295,P=Lt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?Ut:s,u=0,p=0;p<m;p++){const _=E-c;let C=0;const T=_>A?i:_*8-7,R=T&-8;let L=0,D=0;for(;C<R;C+=8)D=h[c++],g[u++]=D&128?S:P,g[u++]=D&64?S:P,g[u++]=D&32?S:P,g[u++]=D&16?S:P,g[u++]=D&8?S:P,g[u++]=D&4?S:P,g[u++]=D&2?S:P,g[u++]=D&1?S:P;for(;C<T;C++)L===0&&(D=h[c++],L=128),g[u++]=D&L?S:P,L>>=1}for(;u<y;)g[u++]=0;n.putImageData(a,0,f*Ut)}}else if(e.kind===Kh.RGBA_32BPP){for(p=0,b=i*Ut*4,f=0;f<r;f++)d.set(h.subarray(c,c+b)),c+=b,n.putImageData(a,0,p),p+=Ut;f<o&&(b=i*s*4,d.set(h.subarray(c,c+b)),n.putImageData(a,0,p))}else if(e.kind===Kh.RGB_24BPP)for(m=Ut,b=i*m,f=0;f<o;f++){for(f>=r&&(m=s,b=i*m),u=0,p=b;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(a,0,f*Ut)}else throw new Error(`bad image kind: ${e.kind}`)}function yy(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%Ut,r=(t-s)/Ut,o=s===0?r:r+1,a=n.createImageData(i,Ut);let c=0;const u=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?Ut:s;({srcPos:c}=N_({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(a,0,d*Ut)}}function Hl(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Ih(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!St){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function wy(n,e){if(e)return!0;const t=$.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*hr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const j_=["butt","round","square"],$_=["miter","round","bevel"],z_={},by={};var pr,Xg,qg;const q0=class q0{constructor(e,t,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},c,u){x(this,pr);this.ctx=e,this.current=new my(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new D_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Re(this.compositeCtx))}this.ctx.save(),Ih(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Re(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,o=e.fnArray;let a=t||0;const c=r.length;if(c===a)return a;const u=c-a>py&&typeof i=="function",h=u?Date.now()+I_:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(m=o[a],m!==In.dependency)this[m].apply(this,r[a]);else for(const b of r[a]){const E=b.startsWith("g_")?f:p;if(!E.has(b))return E.get(b,i),a}if(a++,a===c)return a;if(u&&++d>py){if(Date.now()>h)return i(),a;d=0}}}endDrawing(){w(this,pr,Xg).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),w(this,pr,qg).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,c=s,u="prescale1",h,d;for(;r>2&&a>1||o>2&&c>1;){let f=a,p=c;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,a,c,0,0,f,p),e=h.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,o=this.current.patternFill,a=Re(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(T),c||(c=new Map,this._cachedBitmapsMap.set(T,c));const R=c.get(u);if(R&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),D=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:R,offsetX:L,offsetY:D}}h=R}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),yy(d.context,e));let f=$.transform(a,[1/i,0,0,-1/s,0,0]);f=$.transform(f,[1,0,0,1,0,-s]);const[p,m,b,E]=$.getAxialAlignedBoundingBox([0,0,i,s],f),g=Math.round(b-p)||1,y=Math.round(E-m)||1,A=this.cachedCanvases.getCanvas("fillCanvas",g,y),S=A.context,P=p,_=m;S.translate(-P,-_),S.transform(...f),h||(h=this._scaleImage(d.canvas,ki(S)),h=h.img,c&&o&&c.set(u,h)),S.imageSmoothingEnabled=wy(Re(S),e.interpolate),Nh(S,h,0,0,h.width,h.height,0,0,i,s),S.globalCompositeOperation="source-in";const C=$.transform(ki(S),[1,0,0,1,-P,-_]);return S.fillStyle=o?r.getPattern(t,this,C,Pt.FILL):r,S.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,A.canvas)),{canvas:A.canvas,offsetX:Math.round(P),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=j_[e]}setLineJoin(e){this.ctx.lineJoin=$_[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Re(this.suspendedCtx)),Hl(this.suspendedCtx,r),F_(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Hl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],o=s[1],a=s[2]-r,c=s[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,i,a,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,o,a,c,u,h,d){let f=e.canvas,p=c-h,m=u-d;if(o){const E=$.makeHexColor(...o);if(p<0||m<0||p+i>f.width||m+s>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",i,s),y=g.context;y.drawImage(f,-p,-m),y.globalCompositeOperation="destination-atop",y.fillStyle=E,y.fillRect(0,0,i,s),y.globalCompositeOperation="source-over",f=g.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,m,i,s),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(p,m,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const b=new Path2D;b.rect(c,u,i,s),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,i,s,c,u,i,s),t.restore()}save(){this.inSMaskMode?(Hl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Hl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,r,o){this.ctx.transform(e,t,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,r=this.current;let o=r.x,a=r.y,c,u;const h=Re(s),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let p=0,m=0,b=e.length;p<b;p++)switch(e[p]|0){case In.rectangle:o=t[m++],a=t[m++];const E=t[m++],g=t[m++],y=o+E,A=a+g;s.moveTo(o,a),E===0||g===0?s.lineTo(y,A):(s.lineTo(y,a),s.lineTo(y,A),s.lineTo(o,A)),d||r.updateRectMinMax(h,[o,a,y,A]),s.closePath();break;case In.moveTo:o=t[m++],a=t[m++],s.moveTo(o,a),d||r.updatePathMinMax(h,o,a);break;case In.lineTo:o=t[m++],a=t[m++],s.lineTo(o,a),d||r.updatePathMinMax(h,o,a);break;case In.curveTo:c=o,u=a,o=t[m+4],a=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],t[m+2],t[m+3],o,a,f),m+=6;break;case In.curveTo2:c=o,u=a,s.bezierCurveTo(o,a,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,c,u,o,a,t[m],t[m+1],t[m+2],t[m+3],f),o=t[m+2],a=t[m+3],m+=4;break;case In.curveTo3:c=o,u=a,o=t[m+2],a=t[m+3],s.bezierCurveTo(t[m],t[m+1],o,a,o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],o,a,o,a,f),m+=4;break;case In.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ki(t),Pt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,ki(t),Pt.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=z_}eoClip(){this.pendingClip=by}beginText(){this.current.textMatrix=Bb,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||yg,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&J("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const c=i.italic?"italic":"normal";let u=t;t<dy?u=dy:t>fy&&(u=fy),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,r,o){this.current.textMatrix=[e,t,i,s,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const r=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&mt.FILL_STROKE_MASK,d=!!(c&mt.ADD_TO_PATH_FLAG),f=o.patternFill&&!a.missingFile;let p;(a.disableFontFace||d||f)&&(p=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||f?(r.save(),r.translate(t,i),r.beginPath(),p(r,u),s&&r.setTransform(...s),(h===mt.FILL||h===mt.FILL_STROKE)&&r.fill(),(h===mt.STROKE||h===mt.FILL_STROKE)&&r.stroke(),r.restore()):((h===mt.FILL||h===mt.FILL_STROKE)&&r.fillText(e,t,i),(h===mt.STROKE||h===mt.FILL_STROKE)&&r.strokeText(e,t,i)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Re(r),x:t,y:i,fontSize:u,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return se(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=i.vertical,p=f?1:-1,m=i.defaultVMetrics,b=s*t.fontMatrix[0],E=t.textRenderingMode===mt.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let g;if(t.patternFill){r.save();const _=t.fillColor.getPattern(r,this,ki(r),Pt.FILL);g=Re(r),r.restore(),r.fillStyle=_}let y=t.lineWidth;const A=t.textMatrixScale;if(A===0||y===0){const _=t.textRenderingMode&mt.FILL_STROKE_MASK;(_===mt.STROKE||_===mt.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=A;if(o!==1&&(r.scale(o,o),y/=o),r.lineWidth=y,i.isInvalidPDFjsFont){const _=[];let C=0;for(const T of e)_.push(T.unicode),C+=T.width;r.fillText(_.join(""),0,0),t.x+=C*b*h,r.restore(),this.compose();return}let S=0,P;for(P=0;P<d;++P){const _=e[P];if(typeof _=="number"){S+=p*_*s/1e3;continue}let C=!1;const T=(_.isSpace?c:0)+a,R=_.fontChar,L=_.accent;let D,q,K=_.width;if(f){const ce=_.vmetric||m,me=-(_.vmetric?ce[1]:K*.5)*b,H=ce[2]*b;K=ce?-ce[0]:K,D=me/o,q=(S+H)/o}else D=S/o,q=0;if(i.remeasure&&K>0){const ce=r.measureText(R).width*1e3/s*o;if(K<ce&&this.isFontSubpixelAAEnabled){const me=K/ce;C=!0,r.save(),r.scale(me,1),D/=me}else K!==ce&&(D+=(K-ce)/2e3*s/o)}if(this.contentVisible&&(_.isInFont||i.missingFile)){if(E&&!L)r.fillText(R,D,q);else if(this.paintChar(R,D,q,g),L){const ce=D+s*L.offset.x/o,me=q-s*L.offset.y/o;this.paintChar(L.fontChar,ce,me,g)}}const ae=f?K*b-T*u:K*b+T*u;S+=ae,C&&r.restore()}f?t.y-=S:t.x+=S*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||yg,f=e.length,p=i.textRenderingMode===mt.INVISIBLE;let m,b,E,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,o),m=0;m<f;++m){if(b=e[m],typeof b=="number"){g=a*b*r/1e3,this.ctx.translate(g,0),i.x+=g*h;continue}const y=(b.isSpace?u:0)+c,A=s.charProcOperatorList[b.operatorListId];if(!A){J(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(A),this.restore()),E=$.applyTransform([b.width,0],d)[0]*r+y,t.translate(E,0),i.x+=E*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,o){this.ctx.rect(i,s,r-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||Re(this.ctx),r={createCanvasGraphics:o=>new q0(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Gg(e,i,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=$.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=$.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=M_(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ki(t),Pt.SHADING);const s=ki(t);if(s){const{width:r,height:o}=t.canvas,[a,c,u,h]=$.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(a,c,u-a,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ae("Should not call beginInlineImage")}beginImageData(){Ae("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Re(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(Re(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||$f("TODO: Support non-isolated groups."),e.knockout&&J("Knockout groups not supported.");const i=Re(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=$.getAxialAlignedBoundingBox(e.bbox,Re(t));const r=[0,0,t.canvas.width,t.canvas.height];s=$.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-a),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Hl(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Re(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=$.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(w(this,pr,Xg).call(this),Ih(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[c,u]=$.singularValueDecompose2dScale(Re(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,a*u),Ih(this.ctx)}else Ih(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new my(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),w(this,pr,qg).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=O_(e)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=Re(a);a.transform(t,i,s,r,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=$.transform(c,[t,i,s,r,o[h],o[h+1]]),[p,m]=$.applyTransform([0,0],f);a.drawImage(u.canvas,p,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:o,width:a,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,c),d=h.context;d.save();const f=this.getObject(o,r);yy(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,ki(t),Pt.FILL):i,d.fillRect(0,0,a,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Nh(t,h.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){J("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){J("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let u=0,h=s.length;u<h;u+=2)c.push({transform:[t,0,0,i,s[u],s[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!St){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;vy(c,e),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,ki(s));s.imageSmoothingEnabled=wy(Re(s),e.interpolate),Nh(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;vy(c,e),s=this.applyTransferMapsToCanvas(c)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),Nh(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===by?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Re(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=a=1/c;else{const h=c*e;o=a=h<1?1/h:1}else if(e===0)o=1/c,a=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const c=Math.abs(t*r-i*s),u=Math.hypot(t,i),h=Math.hypot(s,r);if(e===0)o=h/c,a=u/c;else{const d=e*c;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,r),o.length>0){const a=Math.max(s,r);t.setLineDash(o.map(c=>c/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};pr=new WeakSet,Xg=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},qg=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ba=q0;for(const n in In)ba.prototype[n]!==void 0&&(ba.prototype[In[n]]=ba.prototype[n]);var uu,hu;class is{static get workerPort(){return l(this,uu)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");v(this,uu,e)}static get workerSrc(){return l(this,hu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");v(this,hu,e)}}uu=new WeakMap,hu=new WeakMap,x(is,uu,null),x(is,hu,"");const Fh={DATA:1,ERROR:2},ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Kt(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Ae('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Uo(n.message);case"MissingPDFException":return new Bo(n.message);case"PasswordException":return new wg(n.message,n.code);case"UnexpectedResponseException":return new zf(n.message,n.status);case"UnknownErrorException":return new bg(n.message,n.details);default:return new bg(n.message,n.toString())}}var Da,kn,Cx,kx,Tx,sd;class tc{constructor(e,t,i){x(this,kn);x(this,Da,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",w(this,kn,Cx).bind(this),{signal:l(this,Da).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:a,stream:ze.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ke(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:ze.CANCEL,streamId:r,reason:Kt(u)}),h.promise}},i)}destroy(){var e;(e=l(this,Da))==null||e.abort(),v(this,Da,null)}}Da=new WeakMap,kn=new WeakSet,Cx=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){w(this,kn,Tx).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Fh.DATA)s.resolve(e.data);else if(e.callback===Fh.ERROR)s.reject(Kt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:Fh.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:Fh.ERROR,callbackId:e.callbackId,reason:Kt(o)})});return}if(e.streamId){w(this,kn,kx).call(this,e);return}t(e.data)},kx=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:ze.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:ze.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Ke(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:ze.ERROR,streamId:t,reason:Kt(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(a(e.data,c))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ze.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:ze.START_COMPLETE,streamId:t,reason:Kt(u)})})},Tx=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case ze.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Kt(e.reason));break;case ze.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Kt(e.reason));break;case ze.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:ze.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(c){var u;c((u=a.onPull)==null?void 0:u.call(a))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ze.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:ze.PULL_COMPLETE,streamId:t,reason:Kt(c)})});break;case ze.ENQUEUE:if(Ke(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case ze.CLOSE:if(Ke(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),w(this,kn,sd).call(this,o,t);break;case ze.ERROR:Ke(o,"error should have stream controller"),o.controller.error(Kt(e.reason)),w(this,kn,sd).call(this,o,t);break;case ze.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Kt(e.reason)),w(this,kn,sd).call(this,o,t);break;case ze.CANCEL:if(!a)break;new Promise(function(c){var u;c((u=a.onCancel)==null?void 0:u.call(a,Kt(e.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ze.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:ze.CANCEL_COMPLETE,streamId:t,reason:Kt(c)})}),a.sinkCapability.reject(Kt(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},sd=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Yr,du;class H_{constructor({parsedData:e,rawData:t}){x(this,Yr);x(this,du);v(this,Yr,e),v(this,du,t)}getRaw(){return l(this,du)}get(e){return l(this,Yr).get(e)??null}getAll(){return M0(l(this,Yr))}has(e){return l(this,Yr).has(e)}}Yr=new WeakMap,du=new WeakMap;const Qo=Symbol("INTERNAL");var fu,pu,gu,Oa;class B_{constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){x(this,fu,!1);x(this,pu,!1);x(this,gu,!1);x(this,Oa,!0);v(this,fu,!!(e&on.DISPLAY)),v(this,pu,!!(e&on.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(l(this,gu))return l(this,Oa);if(!l(this,Oa))return!1;const{print:e,view:t}=this.usage;return l(this,fu)?(t==null?void 0:t.viewState)!=="OFF":l(this,pu)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Qo&&Ae("Internal method `_setVisible` called."),v(this,gu,i),v(this,Oa,t)}}fu=new WeakMap,pu=new WeakMap,gu=new WeakMap,Oa=new WeakMap;var Os,fe,ja,$a,mu,Yg;class U_{constructor(e,t=on.DISPLAY){x(this,mu);x(this,Os,null);x(this,fe,new Map);x(this,ja,null);x(this,$a,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,v(this,$a,e.order);for(const i of e.groups)l(this,fe).set(i.id,new B_(t,i));if(e.baseState==="OFF")for(const i of l(this,fe).values())i._setVisible(Qo,!1);for(const i of e.on)l(this,fe).get(i)._setVisible(Qo,!0);for(const i of e.off)l(this,fe).get(i)._setVisible(Qo,!1);v(this,ja,this.getHash())}}isVisible(e){if(l(this,fe).size===0)return!0;if(!e)return $f("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,fe).has(e.id)?l(this,fe).get(e.id).visible:(J(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return w(this,mu,Yg).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(l(this,fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(!l(this,fe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(!l(this,fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(l(this,fe).get(t).visible)return!1}return!0}return J(`Unknown optional content policy ${e.policy}.`),!0}return J(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var r;const s=l(this,fe).get(e);if(!s){J(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((r=l(this,fe).get(a))==null||r._setVisible(Qo,!1,!0));s._setVisible(Qo,!!t,!0),v(this,Os,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=l(this,fe).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}v(this,Os,null)}get hasInitialVisibility(){return l(this,ja)===null||this.getHash()===l(this,ja)}getOrder(){return l(this,fe).size?l(this,$a)?l(this,$a).slice():[...l(this,fe).keys()]:null}getGroups(){return l(this,fe).size>0?M0(l(this,fe)):null}getGroup(e){return l(this,fe).get(e)||null}getHash(){if(l(this,Os)!==null)return l(this,Os);const e=new gx;for(const[t,i]of l(this,fe))e.update(`${t}:${i.visible}`);return v(this,Os,e.hexdigest())}}Os=new WeakMap,fe=new WeakMap,ja=new WeakMap,$a=new WeakMap,mu=new WeakSet,Yg=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=w(this,mu,Yg).call(this,r);else if(l(this,fe).has(r))o=l(this,fe).get(r).visible;else return J(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class W_{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Ke(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});Ke(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new V_(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new G_(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class V_{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=F0(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class G_{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function X_(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(n),t){const h=u(t);return r(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=a(t);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Hf(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,b,E,g]=f;if(b=parseInt(b,10),b in d){if(b===0)break;continue}d[b]=[E,g]}const m=[];for(let b=0;b<d.length&&b in d;++b){let[E,g]=d[b];g=a(g),E&&(g=unescape(g),b===0&&(g=c(g))),m.push(g)}return m.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return s(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,E){return String.fromCharCode(parseInt(E,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function z0(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function H0({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function B0(n){const e=n.get("Content-Disposition");if(e){let t=X_(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(F0(t))return t}return null}function Wf(n,e){return n===404||n===0&&e.startsWith("file:")?new Bo('Missing PDF "'+e+'".'):new zf(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function Px(n){return n===200||n===206}function Rx(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Lx(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(J(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class xy{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=z0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new q_(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Y_(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class q_{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,Rx(i,this._withCredentials,this._abortController)).then(r=>{if(!Px(r.status))throw Wf(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=H0({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=B0(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Uo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Lx(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Y_{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const o=s.url;fetch(o,Rx(r,this._withCredentials,this._abortController)).then(a=>{if(!Px(a.status))throw Wf(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:Lx(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Ep=200,_p=206;function K_(n){const e=n.response;return typeof e!="string"?e:Hf(e).buffer}class Q_{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=z0(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const r in i)s[r]=i[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=_p):s.expectedStatus=Ep,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){var c,u,h;const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=i.onError)==null||c.call(i,s.status);return}const r=s.status||Ep;if(!(r===Ep&&i.expectedStatus===_p)&&r!==i.expectedStatus){(u=i.onError)==null||u.call(i,s.status);return}const a=K_(s);if(r===_p){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(f[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(h=i.onError)==null||h.call(i,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Z_{constructor(e){this._source=e,this._manager=new Q_(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new J_(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new eC(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class J_{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...c]=o.split(": ");return[a,c.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=H0({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=B0(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Wf(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class eC{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Wf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const tC=/^[a-z][a-z0-9\-+.]+:/i;function nC(n){if(tC.test(n))return new URL(n);const e=dr.get("url");return new URL(e.pathToFileURL(n))}function Mx(n,e,t){return n.protocol==="http:"?dr.get("http").request(n,{headers:e},t):dr.get("https").request(n,{headers:e},t)}class iC{constructor(e){this.source=e,this.url=nC(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=z0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new oC(this):new sC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new aC(this,e,t):new rC(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Nx{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Uo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ix{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class sC extends Nx{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=s=>{if(s.statusCode===404){const c=new Bo(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=H0({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=B0(r)};this._request=Mx(this._url,t,i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class rC extends Ix{constructor(e,t,i){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${i-1}`;const r=o=>{if(o.statusCode===404){const a=new Bo(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=Mx(this._url,s,r),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class oC extends Nx{constructor(e){super(e);const t=dr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Bo(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class aC extends Ix{constructor(e,t,i){super(e);const s=dr.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}}const lC=1e5,jt=30,cC=.8;var ky,js,Ht,vu,yu,Kr,$i,wu,bu,Qr,za,Ha,$s,Ba,xu,Ua,Zr,Au,Su,Jr,eo,Eu,zs,Wa,gs,Fx,Dx,Kg,hn,rd,Qg,Ox,jx;const Ve=class Ve{constructor({textContentSource:e,container:t,viewport:i}){x(this,gs);x(this,js,Promise.withResolvers());x(this,Ht,null);x(this,vu,!1);x(this,yu,!!((ky=globalThis.FontInspector)!=null&&ky.enabled));x(this,Kr,null);x(this,$i,null);x(this,wu,0);x(this,bu,0);x(this,Qr,null);x(this,za,null);x(this,Ha,0);x(this,$s,0);x(this,Ba,Object.create(null));x(this,xu,[]);x(this,Ua,null);x(this,Zr,[]);x(this,Au,new WeakMap);x(this,Su,null);var c;if(e instanceof ReadableStream)v(this,Ua,e);else if(typeof e=="object")v(this,Ua,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,Ht,v(this,za,t)),v(this,$s,i.scale*(globalThis.devicePixelRatio||1)),v(this,Ha,i.rotation),v(this,$i,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;v(this,Su,[1,0,0,-1,-o,a+r]),v(this,bu,s),v(this,wu,r),w(c=Ve,hn,Ox).call(c),Fo(t,i),l(this,js).promise.finally(()=>{l(Ve,Wa).delete(this),v(this,$i,null),v(this,Ba,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Lt.platform;return se(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Qr).read().then(({value:t,done:i})=>{if(i){l(this,js).resolve();return}l(this,Kr)??v(this,Kr,t.lang),Object.assign(l(this,Ba),t.styles),w(this,gs,Fx).call(this,t.items),e()},l(this,js).reject)};return v(this,Qr,l(this,Ua).getReader()),l(Ve,Wa).add(this),e(),l(this,js).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,Ha)&&(t==null||t(),v(this,Ha,s),Fo(l(this,za),{rotation:s})),i!==l(this,$s)){t==null||t(),v(this,$s,i);const o={div:null,properties:null,ctx:w(r=Ve,hn,rd).call(r,l(this,Kr))};for(const a of l(this,Zr))o.properties=l(this,Au).get(a),o.div=a,w(this,gs,Kg).call(this,o)}}cancel(){var t;const e=new Uo("TextLayer task cancelled.");(t=l(this,Qr))==null||t.cancel(e).catch(()=>{}),v(this,Qr,null),l(this,js).reject(e)}get textDivs(){return l(this,Zr)}get textContentItemsStr(){return l(this,xu)}static cleanup(){if(!(l(this,Wa).size>0)){l(this,Jr).clear();for(const{canvas:e}of l(this,eo).values())e.remove();l(this,eo).clear()}}};js=new WeakMap,Ht=new WeakMap,vu=new WeakMap,yu=new WeakMap,Kr=new WeakMap,$i=new WeakMap,wu=new WeakMap,bu=new WeakMap,Qr=new WeakMap,za=new WeakMap,Ha=new WeakMap,$s=new WeakMap,Ba=new WeakMap,xu=new WeakMap,Ua=new WeakMap,Zr=new WeakMap,Au=new WeakMap,Su=new WeakMap,Jr=new WeakMap,eo=new WeakMap,Eu=new WeakMap,zs=new WeakMap,Wa=new WeakMap,gs=new WeakSet,Fx=function(e){var s,r;if(l(this,vu))return;(r=l(this,$i)).ctx??(r.ctx=w(s=Ve,hn,rd).call(s,l(this,Kr)));const t=l(this,Zr),i=l(this,xu);for(const o of e){if(t.length>lC){J("Ignoring additional textDivs for performance reasons."),v(this,vu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Ht);v(this,Ht,document.createElement("span")),l(this,Ht).classList.add("markedContent"),o.id!==null&&l(this,Ht).setAttribute("id",`${o.id}`),a.append(l(this,Ht))}else o.type==="endMarkedContent"&&v(this,Ht,l(this,Ht).parentNode);continue}i.push(o.str),w(this,gs,Dx).call(this,o)}},Dx=function(e){var b;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Zr).push(t);const s=$.transform(l(this,Su),e.transform);let r=Math.atan2(s[1],s[0]);const o=l(this,Ba)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,yu)&&o.fontSubstitution||o.fontFamily;a=Ve.fontFamilyMap.get(a)||a;const c=Math.hypot(s[2],s[3]),u=c*w(b=Ve,hn,jx).call(b,a,l(this,Kr));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;l(this,Ht)===l(this,za)?(p.left=`${(100*h/l(this,bu)).toFixed(2)}%`,p.top=`${(100*d/l(this,wu)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(Ve,zs)*c).toFixed(2)}px)`,p.fontFamily=a,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,yu)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);E!==g&&Math.max(E,g)/Math.min(E,g)>1.5&&(m=!0)}if(m&&(i.canvasWidth=o.vertical?e.height:e.width),l(this,Au).set(t,i),l(this,$i).div=t,l(this,$i).properties=i,w(this,gs,Kg).call(this,l(this,$i)),i.hasText&&l(this,Ht).append(t),i.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,Ht).append(E)}},Kg=function(e){var a;const{div:t,properties:i,ctx:s}=e,{style:r}=t;let o="";if(l(Ve,zs)>1&&(o=`scale(${1/l(Ve,zs)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=i;w(a=Ve,hn,Qg).call(a,s,h*l(this,$s),c);const{width:d}=s.measureText(t.textContent);d>0&&(o=`scaleX(${u*l(this,$s)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},hn=new WeakSet,rd=function(e=null){let t=l(this,eo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,eo).set(e,t),l(this,Eu).set(t,{size:0,family:""})}return t},Qg=function(e,t,i){const s=l(this,Eu).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},Ox=function(){if(l(this,zs)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),v(this,zs,e.getBoundingClientRect().height),e.remove()},jx=function(e,t){const i=l(this,Jr).get(e);if(i)return i;const s=w(this,hn,rd).call(this,t);s.canvas.width=s.canvas.height=jt,w(this,hn,Qg).call(this,s,jt,e);const r=s.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+a);return l(this,Jr).set(e,h),s.canvas.width=s.canvas.height=0,h}s.strokeStyle="red",s.clearRect(0,0,jt,jt),s.strokeText("g",0,0);let c=s.getImageData(0,0,jt,jt).data;a=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){a=Math.ceil(h/4/jt);break}s.clearRect(0,0,jt,jt),s.strokeText("A",0,jt),c=s.getImageData(0,0,jt,jt).data,o=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){o=jt-Math.floor(h/4/jt);break}s.canvas.width=s.canvas.height=0;const u=o?o/(o+a):cC;return l(this,Jr).set(e,u),u},x(Ve,hn),x(Ve,Jr,new Map),x(Ve,eo,new Map),x(Ve,Eu,new WeakMap),x(Ve,zs,null),x(Ve,Wa,new Set);let zc=Ve;class Hc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(Hc.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const uC=65536,hC=100,dC=5e3,fC=St?__:A_,pC=St?C_:bx,gC=St?E_:S_,mC=St?k_:Ex;function vC(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Zg,{docId:t}=e,i=n.url?yC(n.url):null,s=n.data?wC(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof $x?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:uC;let h=n.worker instanceof xa?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Uf(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,b=n.CMapReaderFactory||pC,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||mC,y=n.stopAtErrors!==!0,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!St,_=typeof n.isChrome=="boolean"?n.isChrome:!Lt.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T=typeof n.disableFontFace=="boolean"?n.disableFontFace:St,R=n.fontExtraProperties===!0,L=n.enableXfa===!0,D=n.ownerDocument||globalThis.document,q=n.disableRange===!0,K=n.disableStream===!0,ae=n.disableAutoFetch===!0,ce=n.pdfBug===!0,me=n.CanvasFactory||fC,H=n.FilterFactory||gC,M=n.enableHWA===!0,B=c?c.length:n.length??NaN,W=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!St&&!T,re=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:b===bx&&g===Ex&&p&&E&&ql(p,document.baseURI)&&ql(E,document.baseURI);n.canvasFactory&&cy("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&cy("`filterFactory`-instance option, please use `FilterFactory` instead.");const ie=null;JE(d);const Ee={canvasFactory:new me({ownerDocument:D,enableHWA:M}),filterFactory:new H({docId:t,ownerDocument:D}),cMapReaderFactory:re?null:new b({baseUrl:p,isCompressed:m}),standardFontDataFactory:re?null:new g({baseUrl:E})};if(!h){const Ie={verbosity:d,port:is.workerPort};h=Ie.port?xa.fromPort(Ie):new xa(Ie),e._worker=h}const Ot={docId:t,apiVersion:"4.8.69",data:s,password:a,disableAutoFetch:ae,rangeChunkSize:u,length:B,docBaseUrl:f,enableXfa:L,evaluatorOptions:{maxImageSize:A,disableFontFace:T,ignoreErrors:y,isEvalSupported:S,isOffscreenCanvasSupported:P,isChrome:_,canvasMaxAreaInBytes:C,fontExtraProperties:R,useSystemFonts:W,cMapUrl:re?p:null,standardFontDataUrl:re?E:null}},_i={disableFontFace:T,fontExtraProperties:R,ownerDocument:D,pdfBug:ce,styleElement:ie,loadingParams:{disableAutoFetch:ae,enableXfa:L}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ie=h.messageHandler.sendWithPromise("GetDocRequest",Ot,s?[s.buffer]:null);let he;if(c)he=new W_(c,{disableRange:q,disableStream:K});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Ll;St?Ll=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&ql(i)?xy:iC:Ll=ql(i)?xy:Z_,he=new Ll({url:i,length:B,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:q,disableStream:K})}return Ie.then(Ll=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Gf=new tc(t,Ll,h.port),qA=new SC(Gf,e,he,_i,Ee);e._transport=qA,Gf.send("Ready",null)})}).catch(e._capability.reject),e}function yC(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(St&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function wC(n){if(St&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Hf(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ay(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var df;const ff=class ff{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${_t(ff,df)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};df=new WeakMap,x(ff,df,0);let Zg=ff;class $x{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ae("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class bC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Hs,zi,Sn,Zo,od;class xC{constructor(e,t,i,s=!1){x(this,Sn);x(this,Hs,null);x(this,zi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new ly:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new zx,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new uh({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=_s.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var S,P;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:p,cacheKey:m}=f;v(this,zi,!1),w(this,Sn,od).call(this),a||(a=this._transport.getOptionalContentConfig(p));let b=this._intentStates.get(m);b||(b=Object.create(null),this._intentStates.set(m,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const E=!!(p&on.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(f));const g=_=>{var C;b.renderTasks.delete(y),(this._maybeCleanupAfterRender||E)&&v(this,zi,!0),w(this,Sn,Zo).call(this,!E),_?(y.capability.reject(_),this._abortOperatorList({intentState:b,reason:_ instanceof Error?_:new Error(_)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(C=globalThis.Stats)!=null&&C.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new em({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(b.renderTasks||(b.renderTasks=new Set)).add(y);const A=y.task;return Promise.all([b.displayReadyCapability.promise,a]).then(([_,C])=>{var T;if(this.destroyed){g();return}if((T=this._stats)==null||T.time("Rendering"),!(C.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:_,optionalContentConfig:C}),y.operatorListChanged()}).catch(g),A}getOperatorList({intent:e="display",annotationMode:t=_s.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,i,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Hc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){o.read().then(function({value:c,done:u}){if(u){i(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),v(this,zi,!1),w(this,Sn,od).call(this),Promise.all(e)}cleanup(e=!1){v(this,zi,!0);const t=w(this,Sn,Zo).call(this,!1);return e&&t&&this._stats&&(this._stats=new ly),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&w(this,Sn,Zo).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();w(this,Sn,Zo).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof I0){let s=hC;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Uo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Hs=new WeakMap,zi=new WeakMap,Sn=new WeakSet,Zo=function(e=!1){if(w(this,Sn,od).call(this),!l(this,zi)||this.destroyed)return!1;if(e)return v(this,Hs,setTimeout(()=>{v(this,Hs,null),w(this,Sn,Zo).call(this,!1)},dC)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,zi,!1),!0},od=function(){l(this,Hs)&&(clearTimeout(l(this,Hs)),v(this,Hs,null))};var Hi,pf;class AC{constructor(){x(this,Hi,new Map);x(this,pf,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,pf).then(()=>{for(const[s]of l(this,Hi))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){J("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,Hi).set(t,s)}removeEventListener(e,t){const i=l(this,Hi).get(t);i==null||i(),l(this,Hi).delete(t)}terminate(){for(const[,e]of l(this,Hi))e==null||e();l(this,Hi).clear()}}Hi=new WeakMap,pf=new WeakMap;var gf,to,no,Va,ad,Ga,ld;const _e=class _e{constructor({name:e=null,port:t=null,verbosity:i=e_()}={}){x(this,Va);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(_e,no))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(_e,no)||v(_e,no,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return St?Promise.all([dr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new tc("main","worker",e),this._messageHandler.on("ready",function(){}),w(this,Va,ad).call(this)}_initialize(){if(l(_e,to)||l(_e,Ga,ld)){this._setupFakeWorker();return}let{workerSrc:e}=_e;try{_e._isSameOrigin(window.location.href,e)||(e=_e._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new tc("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,w(this,Va,ad).call(this)}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{$f("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(_e,to)||(J("Setting up fake worker."),v(_e,to,!0)),_e._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new AC;this._port=t;const i=`fake${_t(_e,gf)._++}`,s=new tc(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new tc(i,i+"_worker",t),w(this,Va,ad).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(_e,no))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,no))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new _e(e)}static get workerSrc(){if(is.workerSrc)return is.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return se(this,"_setupFakeWorkerGlobal",(async()=>l(this,Ga,ld)?l(this,Ga,ld):(await import(this.workerSrc)).WorkerMessageHandler)())}};gf=new WeakMap,to=new WeakMap,no=new WeakMap,Va=new WeakSet,ad=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ga=new WeakSet,ld=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(_e,Ga),x(_e,gf,0),x(_e,to,!1),x(_e,no),St&&(v(_e,to,!0),is.workerSrc||(is.workerSrc="./pdf.worker.mjs")),_e._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},_e._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let xa=_e;var Bi,fi,Xa,qa,pi,io,nc;class SC{constructor(e,t,i,s,r){x(this,io);x(this,Bi,new Map);x(this,fi,new Map);x(this,Xa,new Map);x(this,qa,new Map);x(this,pi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new zx,this.fontLoader=new b_({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return se(this,"annotationStorage",new j0)}getRenderingIntent(e,t=_s.ENABLE,i=null,s=!1,r=!1){let o=on.DISPLAY,a=Hg;switch(e){case"any":o=on.ANY;break;case"display":break;case"print":o=on.PRINT;break;default:J(`getRenderingIntent - invalid intent: ${e}`)}const c=o&on.PRINT&&i instanceof vx?i:this.annotationStorage;switch(t){case _s.DISABLE:o+=on.ANNOTATIONS_DISABLE;break;case _s.ENABLE:break;case _s.ENABLE_FORMS:o+=on.ANNOTATIONS_FORMS;break;case _s.ENABLE_STORAGE:o+=on.ANNOTATIONS_STORAGE,a=c.serializable;break;default:J(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=on.IS_EDITING),r&&(o+=on.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,pi))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,fi).values())e.push(s._destroy());l(this,fi).clear(),l(this,Xa).clear(),l(this,qa).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Bi).clear(),this.filterFactory.destroy(),zc.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Uo("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{Ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}Ke(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(i,s)=>{Ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}Ke(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new bC(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new wg(i.message,i.code);break;case"InvalidPDFException":s=new Ub(i.message);break;case"MissingPDFException":s=new Bo(i.message);break;case"UnexpectedResponseException":s=new zf(i.message,i.status);break;case"UnknownErrorException":s=new bg(i.message,i.details);break;default:Ae("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(v(this,pi,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?l(this,pi).reject(r):l(this,pi).resolve({password:r})};try{t.onPassword(s,i.code)}catch(r){l(this,pi).reject(r)}}else l(this,pi).reject(new wg(i.message,i.code));return l(this,pi).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,fi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;J(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new x_(r,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Ke(f,"The imageRef must be defined.");for(const p of l(this,fi).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,o])=>{var c;if(this.destroyed)return;const a=l(this,fi).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":a.objs.resolve(i,o),(o==null?void 0:o.dataLen)>YE&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&J("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,Xa).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,qa).set(r.refStr,e);const o=new xC(t,r,this,this._params.pdfBug);return l(this,fi).set(t,o),o});return l(this,Xa).set(t,s),s}getPageIndex(e){return Ay(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return w(this,io,nc).call(this,"GetFieldObjects")}hasJSActions(){return w(this,io,nc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return w(this,io,nc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return w(this,io,nc).call(this,"GetOptionalContentConfig").then(t=>new U_(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Bi).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new H_(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,Bi).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,fi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Bi).clear(),this.filterFactory.destroy(!0),zc.cleanup()}}cachedPageNumber(e){if(!Ay(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,qa).get(t)??null}}Bi=new WeakMap,fi=new WeakMap,Xa=new WeakMap,qa=new WeakMap,pi=new WeakMap,io=new WeakSet,nc=function(e,t=null){const i=l(this,Bi).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return l(this,Bi).set(e,s),s};const Dh=Symbol("INITIAL_DATA");var zn,_u,Jg;class zx{constructor(){x(this,_u);x(this,zn,Object.create(null))}get(e,t=null){if(t){const s=w(this,_u,Jg).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=l(this,zn)[e];if(!i||i.data===Dh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,zn)[e];return!!t&&t.data!==Dh}resolve(e,t=null){const i=w(this,_u,Jg).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,zn)){const{data:i}=l(this,zn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}v(this,zn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,zn)){const{data:t}=l(this,zn)[e];t!==Dh&&(yield[e,t])}}}zn=new WeakMap,_u=new WeakSet,Jg=function(e){var t;return(t=l(this,zn))[e]||(t[e]={...Promise.withResolvers(),data:Dh})};var Bs;class EC{constructor(e){x(this,Bs,null);v(this,Bs,e),this.onContinue=null}get promise(){return l(this,Bs).capability.promise}cancel(e=0){l(this,Bs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Bs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Bs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Bs=new WeakMap;var Us,so;const Cr=class Cr{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){x(this,Us,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new EC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(Cr,so).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Cr,so).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new ba(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Us)&&(window.cancelAnimationFrame(l(this,Us)),v(this,Us,null)),l(Cr,so).delete(this._canvas),this.callback(e||new I0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,Us,window.requestAnimationFrame(()=>{v(this,Us,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Cr,so).delete(this._canvas),this.callback())))}};Us=new WeakMap,so=new WeakMap,x(Cr,so,new WeakSet);let em=Cr;const _C="4.8.69",CC="3634dab10";function Sy(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Bl(n){return Math.max(0,Math.min(255,255*n))}class Ey{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Bl(e),[e,e,e]}static G_HTML([e]){const t=Sy(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Bl)}static RGB_HTML(e){return`#${e.map(Sy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[Bl(1-Math.min(1,e+s)),Bl(1-Math.min(1,i+s)),Bl(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class kC{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ae("Abstract method `_createSVG` called.")}}class U0 extends kC{_createSVG(e){return document.createElementNS(Ti,e)}}class Hx{static setupStorage(e,t,i,s,r){const o=s.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&r.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&Hc.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,m,b]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const E=p.children[++h.at(-1)[1]];if(E===null)continue;const{name:g}=E;if(g==="#text"){const A=document.createTextNode(E.value);u.push(A),b.append(A);continue}const y=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,g):document.createElement(g);if(b.append(y),E.attributes&&this.setAttributes({html:y,element:E,storage:t,intent:r,linkService:i}),((f=E.children)==null?void 0:f.length)>0)h.push([E,-1,y]);else if(E.value){const A=document.createTextNode(E.value);a&&Hc.shouldBuildText(g)&&u.push(A),y.append(A)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dh=1e3,TC=9,Oo=new WeakSet;function as(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class PC{static create(e){switch(e.data.annotationType){case We.LINK:return new Bx(e);case We.TEXT:return new RC(e);case We.WIDGET:switch(e.data.fieldType){case"Tx":return new LC(e);case"Btn":return e.data.radioButton?new Vx(e):e.data.checkBox?new NC(e):new IC(e);case"Ch":return new FC(e);case"Sig":return new MC(e)}return new Wo(e);case We.POPUP:return new nm(e);case We.FREETEXT:return new Kx(e);case We.LINE:return new OC(e);case We.SQUARE:return new jC(e);case We.CIRCLE:return new $C(e);case We.POLYLINE:return new Qx(e);case We.CARET:return new HC(e);case We.INK:return new W0(e);case We.POLYGON:return new zC(e);case We.HIGHLIGHT:return new Zx(e);case We.UNDERLINE:return new BC(e);case We.SQUIGGLY:return new UC(e);case We.STRIKEOUT:return new WC(e);case We.STAMP:return new Jx(e);case We.FILEATTACHMENT:return new VC(e);default:return new $e(e)}}}var ro,Ya,Ka,Cu,tm;const Y0=class Y0{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){x(this,Cu);x(this,ro,null);x(this,Ya,!1);x(this,Ka,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Y0._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,ro)||v(this,ro,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&w(this,Cu,tm).call(this,t),(i=l(this,Ka))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,ro)&&(w(this,Cu,tm).call(this,l(this,ro).rect),(e=l(this,Ka))==null||e.popup.resetEdited(),v(this,ro,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Wo||(r.tabIndex=dh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof nm){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,r),r}const{width:a,height:c}=as(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(b>0||E>0){const y=`calc(${b}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;o.borderRadius=y}else if(this instanceof Vx){const y=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=y}switch(t.borderStyle.style){case zl.SOLID:o.borderStyle="solid";break;case zl.DASHED:o.borderStyle="dashed";break;case zl.BEVELED:J("Unimplemented border style: beveled");break;case zl.INSET:J("Unimplemented border style: inset");break;case zl.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(v(this,Ya,!0),o.borderColor=$.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=$.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=as(this.data.rect);let a,c;e%180===0?(a=100*r/i,c=100*o/s):(a=100*o/i,c=100*r/s),t.style.width=`${a}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],o=r[0],a=r.slice(1);s.target.style[i]=Ey[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:Ey[`${o}_rgb`](a)})};return se(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const o=i[s];if(o){const a={detail:{[s]:r},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,E,g,y]=e.subarray(2,6);if(s===b&&r===E&&t===g&&i===y)return}const{style:o}=this.container;let a;if(l(this,Ya)){const{borderColor:b,borderWidth:E}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=s-t,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let b=2,E=e.length;b<E;b+=8){const g=e[b],y=e[b+1],A=e[b+2],S=e[b+3],P=h.createElement("rect"),_=(A-t)/c,C=(r-y)/u,T=(g-A)/c,R=(y-S)/u;P.setAttribute("x",_),P.setAttribute("y",C),P.setAttribute("width",T),P.setAttribute("height",R),p.append(P),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${C}" width="${T}" height="${R}"/>`)}l(this,Ya)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=v(this,Ka,new nm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Ae("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Oo.has(u)){J(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&Oo.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ro=new WeakMap,Ya=new WeakMap,Ka=new WeakMap,Cu=new WeakSet,tm=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:h}=as(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*u/r}%`,t.height=`${100*h/o}%`):this.setRotation(s)};let $e=Y0;var ln,xr,Ux,Wx;class Bx extends $e{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});x(this,ln);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(w(this,ln,Ux).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(w(this,ln,Wx).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&w(this,ln,xr).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),w(this,ln,xr).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),w(this,ln,xr).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),w(this,ln,xr).call(this),!this._fieldObjects){J('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:a}=i,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:b}of m)f.add(b)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;u.setValue(p,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Oo.has(m)){J(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}ln=new WeakSet,xr=function(){this.container.setAttribute("data-internal-link","")},Ux=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},w(this,ln,xr).call(this)},Wx=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),w(this,ln,xr).call(this)};class RC extends $e{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Wo extends $e{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Lt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var a;if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(e,t,i,s){var r,o,a;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":$.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||TC,r=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(bp*s))||1,d=u/h;o=Math.min(s,c(d/bp))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,c(u/bp))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=$.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class LC extends Wo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Oo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=dh,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var b;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(b){h.userValue=b.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:E}=b.detail;h.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E),e.setValue(t,{formattedValue:E})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var A;const{charLimit:E}=b.detail,{target:g}=b;if(E===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",E);let y=h.userValue;!y||y.length<=E||(y=y.slice(0,E),g.value=h.userValue=y,e.setValue(t,{value:y}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),i.addEventListener("keydown",p=>{var E;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:b}=p.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var b,E;if(!h.focused||!p.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",p=>{var P;h.lastCommittedValue=null;const{data:m,target:b}=p,{value:E,selectionStart:g,selectionEnd:y}=b;let A=g,S=y;switch(p.inputType){case"deleteWordBackward":{const _=E.substring(0,g).match(/\w*[^\w]*$/);_&&(A-=_[0].length);break}case"deleteWordForward":{const _=E.substring(g).match(/^[^\w]*\w*/);_&&(S+=_[0].length);break}case"deleteContentBackward":g===y&&(A-=1);break;case"deleteContentForward":g===y&&(S+=1);break}p.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:m||"",willCommit:!1,selStart:A,selEnd:S}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class MC extends Wo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class NC extends Wo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Oo.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=dh,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,i)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Vx extends Wo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Oo.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=dh,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class IC extends Bx{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class FC extends Wo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Oo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=dh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const b of s.options)b.selected=m.has(b.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,E=>E.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:b}=f.detail.insert,E=s.children[p],g=document.createElement("option");g.textContent=m,g.value=b,E?E.before(g):s.append(g),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:b,exportValue:E}=m,g=document.createElement("option");g.textContent=b,g.value=E,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class nm extends $e{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:$e._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new DC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${N0}${i}`).join(",")),this.container}}var Qa,mf,vf,Za,oo,Fe,Ui,Ja,ku,Tu,el,Wi,Hn,Vi,Pu,Gi,Ru,ao,lo,ye,cd,im,Gx,Xx,qx,Yx,ud,hd,sm;class DC{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:u,parentRect:h,open:d}){x(this,ye);x(this,Qa,w(this,ye,qx).bind(this));x(this,mf,w(this,ye,sm).bind(this));x(this,vf,w(this,ye,hd).bind(this));x(this,Za,w(this,ye,ud).bind(this));x(this,oo,null);x(this,Fe,null);x(this,Ui,null);x(this,Ja,null);x(this,ku,null);x(this,Tu,null);x(this,el,null);x(this,Wi,!1);x(this,Hn,null);x(this,Vi,null);x(this,Pu,null);x(this,Gi,null);x(this,Ru,null);x(this,ao,null);x(this,lo,!1);var f;v(this,Fe,e),v(this,Ru,s),v(this,Ui,o),v(this,Gi,a),v(this,Tu,c),v(this,oo,t),v(this,Pu,u),v(this,el,h),v(this,ku,i),v(this,Ja,D0.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,Za)),p.addEventListener("mouseenter",l(this,vf)),p.addEventListener("mouseleave",l(this,mf)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",l(this,Qa));l(this,Fe).hidden=!0,d&&w(this,ye,ud).call(this)}render(){if(l(this,Hn))return;const e=v(this,Hn,document.createElement("div"));if(e.className="popup",l(this,oo)){const r=e.style.outlineColor=$.makeHexColor(...l(this,oo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=$.makeHexColor(...l(this,oo).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,Ru),e.append(t),l(this,Ja)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Ja).valueOf()})),t.append(r)}const s=l(this,ye,cd);if(s)Hx.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,Ui));e.append(r)}l(this,Fe).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,ao)||v(this,ao,{contentsObj:l(this,Ui),richText:l(this,Gi)}),e&&v(this,Vi,null),t&&(v(this,Gi,w(this,ye,Xx).call(this,t)),v(this,Ui,null)),(i=l(this,Hn))==null||i.remove(),v(this,Hn,null)}resetEdited(){var e;l(this,ao)&&({contentsObj:_t(this,Ui)._,richText:_t(this,Gi)._}=l(this,ao),v(this,ao,null),(e=l(this,Hn))==null||e.remove(),v(this,Hn,null),v(this,Vi,null))}forceHide(){v(this,lo,this.isVisible),l(this,lo)&&(l(this,Fe).hidden=!0)}maybeShow(){l(this,lo)&&(l(this,Hn)||w(this,ye,hd).call(this),v(this,lo,!1),l(this,Fe).hidden=!1)}get isVisible(){return l(this,Fe).hidden===!1}}Qa=new WeakMap,mf=new WeakMap,vf=new WeakMap,Za=new WeakMap,oo=new WeakMap,Fe=new WeakMap,Ui=new WeakMap,Ja=new WeakMap,ku=new WeakMap,Tu=new WeakMap,el=new WeakMap,Wi=new WeakMap,Hn=new WeakMap,Vi=new WeakMap,Pu=new WeakMap,Gi=new WeakMap,Ru=new WeakMap,ao=new WeakMap,lo=new WeakMap,ye=new WeakSet,cd=function(){const e=l(this,Gi),t=l(this,Ui);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Gi).html||null},im=function(){var e,t,i;return((i=(t=(e=l(this,ye,cd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},Gx=function(){var e,t,i;return((i=(t=(e=l(this,ye,cd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},Xx=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,ye,Gx),fontSize:l(this,ye,im)?`calc(${l(this,ye,im)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},qx=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Wi))&&w(this,ye,ud).call(this)},Yx=function(){if(l(this,Vi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=l(this,Tu);let o=!!l(this,el),a=o?l(this,el):l(this,Pu);for(const m of l(this,ku))if(!a||$.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=$.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,d=c[0]+h,f=c[1];v(this,Vi,[100*(d-s)/t,100*(f-r)/i]);const{style:p}=l(this,Fe);p.left=`${l(this,Vi)[0]}%`,p.top=`${l(this,Vi)[1]}%`},ud=function(){v(this,Wi,!l(this,Wi)),l(this,Wi)?(w(this,ye,hd).call(this),l(this,Fe).addEventListener("click",l(this,Za)),l(this,Fe).addEventListener("keydown",l(this,Qa))):(w(this,ye,sm).call(this),l(this,Fe).removeEventListener("click",l(this,Za)),l(this,Fe).removeEventListener("keydown",l(this,Qa)))},hd=function(){l(this,Hn)||this.render(),this.isVisible?l(this,Wi)&&l(this,Fe).classList.add("focused"):(w(this,ye,Yx).call(this),l(this,Fe).hidden=!1,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)+1e3)},sm=function(){l(this,Fe).classList.remove("focused"),!(l(this,Wi)||!this.isVisible)&&(l(this,Fe).hidden=!0,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)-1e3)};class Kx extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Q.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Lu;class OC extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Lu,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=as(t.rect),r=this.svgFactory.create(i,s,!0),o=v(this,Lu,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Lu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lu=new WeakMap;var Mu;class jC extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Mu,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=as(t.rect),r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=v(this,Mu,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Mu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mu=new WeakMap;var Nu;class $C extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Nu,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=as(t.rect),r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=v(this,Nu,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Nu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nu=new WeakMap;var Iu;class Qx extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Iu,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:o,height:a}=as(t),c=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-t[0],m=t[3]-i[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=v(this,Iu,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Iu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Iu=new WeakMap;class zC extends Qx{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class HC extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Fu;class W0 extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Fu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Q.HIGHLIGHT:Q.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:s,popupRef:r}}=this,{width:o,height:a}=as(t),c=this.svgFactory.create(o,a,!0);for(const u of i){let h=[];for(let f=0,p=u.length;f<p;f+=2){const m=u[f]-t[0],b=t[3]-u[f+1];h.push(`${m},${b}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,Fu).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,Fu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fu=new WeakMap;class Zx extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Q.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class BC extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class UC extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class WC extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Jx extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Q.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Du,Ou,rm;class VC extends $e{constructor(t){var s;super(t,{isRenderable:!0});x(this,Ou);x(this,Du,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",w(this,Ou,rm).bind(this)),v(this,Du,s);const{isMac:r}=Lt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&w(this,Ou,rm).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Du)}addHighlightArea(){this.container.classList.add("highlightArea")}}Du=new WeakMap,Ou=new WeakSet,rm=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ju,co,uo,$u,jo,eA,om;class GC{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a}){x(this,jo);x(this,ju,null);x(this,co,null);x(this,uo,new Map);x(this,$u,null);this.div=e,v(this,ju,t),v(this,co,i),v(this,$u,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return l(this,uo).size>0}async render(e){var o;const{annotations:t}=e,i=this.div;Fo(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new U0,annotationStorage:e.annotationStorage||new j0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===We.POPUP;if(c){const d=s.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=as(a.rect);if(d<=0||f<=0)continue}r.data=a;const u=PC.create(r);if(!u.isRenderable)continue;if(!c&&a.popupRef){const d=s.get(a.popupRef);d?d.push(u):s.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await w(this,jo,eA).call(this,h,a.id),u._isEditable&&(l(this,uo).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}w(this,jo,om).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Fo(t,{rotation:e.rotation}),w(this,jo,om).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,uo).values())}getEditableAnnotation(e){return l(this,uo).get(e)}}ju=new WeakMap,co=new WeakMap,uo=new WeakMap,$u=new WeakMap,jo=new WeakSet,eA=async function(e,t){var o,a;const i=e.firstChild||e,s=i.id=`${N0}${t}`,r=await((o=l(this,$u))==null?void 0:o.getAriaAttributes(s));if(r)for(const[c,u]of r)i.setAttribute(c,u);this.div.append(e),(a=l(this,ju))==null||a.moveElementInDOM(this.div,e,i,!1)},om=function(){if(!l(this,co))return;const e=this.div;for(const[t,i]of l(this,co)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}l(this,co).clear()};const Oh=/\r\n?|\n/g;var Bn,Jt,zu,ho,en,Ue,tA,nA,iA,dd,us,fd,pd,sA,lm,rA;const we=class we extends pe{constructor(t){super({...t,name:"freeTextEditor"});x(this,Ue);x(this,Bn);x(this,Jt,"");x(this,zu,`${this.id}-editor`);x(this,ho,null);x(this,en);v(this,Bn,t.color||we._defaultColor||pe._defaultLineColor),v(this,en,t.fontSize||we._defaultFontSize)}static get _keyboardManager(){const t=we.prototype,i=o=>o.isEmpty(),s=Do.TRANSLATE_SMALL,r=Do.TRANSLATE_BIG;return se(this,"_keyboardManager",new hh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){pe.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case G.FREETEXT_SIZE:we._defaultFontSize=i;break;case G.FREETEXT_COLOR:we._defaultColor=i;break}}updateParams(t,i){switch(t){case G.FREETEXT_SIZE:w(this,Ue,tA).call(this,i);break;case G.FREETEXT_COLOR:w(this,Ue,nA).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[G.FREETEXT_SIZE,we._defaultFontSize],[G.FREETEXT_COLOR,we._defaultColor||pe._defaultLineColor]]}get propertiesToUpdate(){return[[G.FREETEXT_SIZE,l(this,en)],[G.FREETEXT_COLOR,l(this,Bn)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-we._internalPadding*t,-(we._internalPadding+l(this,en))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Q.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,ho,new AbortController);const t=this._uiManager.combinedSignal(l(this,ho));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,zu)),this._isDraggable=!0,(t=l(this,ho))==null||t.abort(),v(this,ho,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,Jt),i=v(this,Jt,w(this,Ue,iA).call(this).trimEnd());if(t===i)return;const s=r=>{if(v(this,Jt,r),!r){this.remove();return}w(this,Ue,pd).call(this),this._uiManager.rebuild(this),w(this,Ue,dd).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),w(this,Ue,dd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){we._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,zu)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,en)}px * var(--scale-factor))`,s.color=l(this,Bn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Kd(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,b;switch(this.rotation){case 0:m=t+(a[0]-f)/h,b=i+this.height-(a[1]-p)/d;break;case 90:m=t+(a[0]-f)/h,b=i-(a[1]-p)/d,[c,u]=[u,-c];break;case 180:m=t-this.width+(a[0]-f)/h,b=i-(a[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=t+(a[0]-f-this.height*d)/h,b=i+(a[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,b*o,c,u)}else this.setAt(t*r,i*o,this.width*r,this.height*o);w(this,Ue,pd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,b,E;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=w(m=we,us,lm).call(m,i.getData("text")||"").replaceAll(Oh,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Oh,"")),g!==this.editorDiv){let y=h;for(const A of this.editorDiv.childNodes){if(A===g){y=d;continue}y.push(w(b=we,us,fd).call(b,A))}}h.push(c.nodeValue.slice(0,u).replaceAll(Oh,""))}else if(c===this.editorDiv){let g=h,y=0;for(const A of this.editorDiv.childNodes)y++===u&&(g=d),g.push(w(E=we,us,fd).call(E,A))}v(this,Jt,`${h.join(`
`)}${r}${d.join(`
`)}`),w(this,Ue,pd).call(this);const f=new Range;let p=h.reduce((g,y)=>g+y.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const y=g.nodeValue.length;if(p<=y){f.setStart(g,p),f.setEnd(g,p);break}p-=y}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){var a;let r=null;if(t instanceof Kx){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:b,parent:{page:{pageNumber:E}}}=t;if(!m||m.length===0)return null;r=t={annotationType:Q.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:b,pageIndex:E-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,i,s);return v(o,en,t.fontSize),v(o,Bn,$.makeHexColor(...t.color)),v(o,Jt,w(a=we,us,lm).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=we._internalPadding*this.parentScale,s=this.getRect(i,i),r=pe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Bn)),o={annotationType:Q.FREETEXT,color:r,fontSize:l(this,en),value:w(this,Ue,sA).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!w(this,Ue,rA).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${l(this,en)}px * var(--scale-factor))`,s.color=l(this,Bn),i.replaceChildren();for(const o of l(this,Jt).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const r=we._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,Jt)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Bn=new WeakMap,Jt=new WeakMap,zu=new WeakMap,ho=new WeakMap,en=new WeakMap,Ue=new WeakSet,tA=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,en))*this.parentScale),v(this,en,r),w(this,Ue,dd).call(this)},s=l(this,en);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},nA=function(t){const i=r=>{v(this,Bn,this.editorDiv.style.color=r)},s=l(this,Bn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},iA=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(w(s=we,us,fd).call(s,r)),i=r);return t.join(`
`)},dd=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},us=new WeakSet,fd=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Oh,"")},pd=function(){if(this.editorDiv.replaceChildren(),!!l(this,Jt))for(const t of l(this,Jt).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},sA=function(){return l(this,Jt).replaceAll(""," ")},lm=function(t){return t.replaceAll(" ","")},rA=function(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((a,c)=>a!==r[c])||t.pageIndex!==o},x(we,us),V(we,"_freeTextDefaultContent",""),V(we,"_internalPadding",0),V(we,"_defaultColor",null),V(we,"_defaultFontSize",10),V(we,"_type","freetext"),V(we,"_editorType",Q.FREETEXT);let am=we;class oA{toSVGPath(){Ae("Abstract method `toSVGPath` must be implemented.")}get box(){Ae("Abstract getter `box` must be implemented.")}serialize(e,t){Ae("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Ae("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Ae("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var tn,Un,tl,nl,gi,ee,fo,po,Hu,Bu,il,sl,Ws,Uu,yf,wf,Ze,ic,aA,lA,cA,uA,hA,dA;const Li=class Li{constructor({x:e,y:t},i,s,r,o,a=0){x(this,Ze);x(this,tn);x(this,Un,[]);x(this,tl);x(this,nl);x(this,gi,[]);x(this,ee,new Float64Array(18));x(this,fo);x(this,po);x(this,Hu);x(this,Bu);x(this,il);x(this,sl);x(this,Ws,[]);v(this,tn,i),v(this,sl,r*s),v(this,nl,o),l(this,ee).set([NaN,NaN,NaN,NaN,e,t],6),v(this,tl,a),v(this,Bu,l(Li,Uu)*s),v(this,Hu,l(Li,wf)*s),v(this,il,s),l(this,Ws).push(e,t)}isEmpty(){return isNaN(l(this,ee)[8])}add({x:e,y:t}){var R;v(this,fo,e),v(this,po,t);const[i,s,r,o]=l(this,tn);let[a,c,u,h]=l(this,ee).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<l(this,Hu))return!1;const m=p-l(this,Bu),b=m/p,E=b*d,g=b*f;let y=a,A=c;a=u,c=h,u+=E,h+=g,(R=l(this,Ws))==null||R.push(e,t);const S=-g/m,P=E/m,_=S*l(this,sl),C=P*l(this,sl);return l(this,ee).set(l(this,ee).subarray(2,8),0),l(this,ee).set([u+_,h+C],4),l(this,ee).set(l(this,ee).subarray(14,18),12),l(this,ee).set([u-_,h-C],16),isNaN(l(this,ee)[6])?(l(this,gi).length===0&&(l(this,ee).set([a+_,c+C],2),l(this,gi).push(NaN,NaN,NaN,NaN,(a+_-i)/r,(c+C-s)/o),l(this,ee).set([a-_,c-C],14),l(this,Un).push(NaN,NaN,NaN,NaN,(a-_-i)/r,(c-C-s)/o)),l(this,ee).set([y,A,a,c,u,h],6),!this.isEmpty()):(l(this,ee).set([y,A,a,c,u,h],6),Math.abs(Math.atan2(A-c,y-a)-Math.atan2(g,E))<Math.PI/2?([a,c,u,h]=l(this,ee).subarray(2,6),l(this,gi).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/r,((c+h)/2-s)/o),[a,c,y,A]=l(this,ee).subarray(14,18),l(this,Un).push(NaN,NaN,NaN,NaN,((y+a)/2-i)/r,((A+c)/2-s)/o),!0):([y,A,a,c,u,h]=l(this,ee).subarray(0,6),l(this,gi).push(((y+5*a)/6-i)/r,((A+5*c)/6-s)/o,((5*a+u)/6-i)/r,((5*c+h)/6-s)/o,((a+u)/2-i)/r,((c+h)/2-s)/o),[u,h,a,c,y,A]=l(this,ee).subarray(12,18),l(this,Un).push(((y+5*a)/6-i)/r,((A+5*c)/6-s)/o,((5*a+u)/6-i)/r,((5*c+h)/6-s)/o,((a+u)/2-i)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,gi),t=l(this,Un);if(isNaN(l(this,ee)[6])&&!this.isEmpty())return w(this,Ze,aA).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);w(this,Ze,cA).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return w(this,Ze,lA).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,r,o){return new fA(e,t,i,s,r,o)}getOutlines(){var d;const e=l(this,gi),t=l(this,Un),i=l(this,ee),[s,r,o,a]=l(this,tn),c=new Float64Array((((d=l(this,Ws))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,Ws)[f]-s)/o,c[f+1]=(l(this,Ws)[f+1]-r)/a;if(c[c.length-2]=(l(this,fo)-s)/o,c[c.length-1]=(l(this,po)-r)/a,isNaN(i[6])&&!this.isEmpty())return w(this,Ze,uA).call(this,c);const u=new Float64Array(l(this,gi).length+24+l(this,Un).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=w(this,Ze,dA).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return w(this,Ze,hA).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,tn),l(this,il),l(this,tl),l(this,nl))}};tn=new WeakMap,Un=new WeakMap,tl=new WeakMap,nl=new WeakMap,gi=new WeakMap,ee=new WeakMap,fo=new WeakMap,po=new WeakMap,Hu=new WeakMap,Bu=new WeakMap,il=new WeakMap,sl=new WeakMap,Ws=new WeakMap,Uu=new WeakMap,yf=new WeakMap,wf=new WeakMap,Ze=new WeakSet,ic=function(){const e=l(this,ee).subarray(4,6),t=l(this,ee).subarray(16,18),[i,s,r,o]=l(this,tn);return[(l(this,fo)+(e[0]-t[0])/2-i)/r,(l(this,po)+(e[1]-t[1])/2-s)/o,(l(this,fo)+(t[0]-e[0])/2-i)/r,(l(this,po)+(t[1]-e[1])/2-s)/o]},aA=function(){const[e,t,i,s]=l(this,tn),[r,o,a,c]=w(this,Ze,ic).call(this);return`M${(l(this,ee)[2]-e)/i} ${(l(this,ee)[3]-t)/s} L${(l(this,ee)[4]-e)/i} ${(l(this,ee)[5]-t)/s} L${r} ${o} L${a} ${c} L${(l(this,ee)[16]-e)/i} ${(l(this,ee)[17]-t)/s} L${(l(this,ee)[14]-e)/i} ${(l(this,ee)[15]-t)/s} Z`},lA=function(e){const t=l(this,Un);e.push(`L${t[4]} ${t[5]} Z`)},cA=function(e){const[t,i,s,r]=l(this,tn),o=l(this,ee).subarray(4,6),a=l(this,ee).subarray(16,18),[c,u,h,d]=w(this,Ze,ic).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-i)/r} L${c} ${u} L${h} ${d} L${(a[0]-t)/s} ${(a[1]-i)/r}`)},uA=function(e){const t=l(this,ee),[i,s,r,o]=l(this,tn),[a,c,u,h]=w(this,Ze,ic).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/o],0),this.newFreeDrawOutline(d,e,l(this,tn),l(this,il),l(this,tl),l(this,nl))},hA=function(e,t){const i=l(this,Un);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},dA=function(e,t){const i=l(this,ee).subarray(4,6),s=l(this,ee).subarray(16,18),[r,o,a,c]=l(this,tn),[u,h,d,f]=w(this,Ze,ic).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/c],t),t+=24},x(Li,Uu,8),x(Li,yf,2),x(Li,wf,l(Li,Uu)+l(Li,yf));let Zd=Li;var rl,go,Xi,Wu,nn,Vu,Oe,Gt,sc,rc,pA;class fA extends oA{constructor(t,i,s,r,o,a){super();x(this,Gt);x(this,rl);x(this,go,null);x(this,Xi);x(this,Wu);x(this,nn);x(this,Vu);x(this,Oe);v(this,Oe,t),v(this,nn,i),v(this,rl,s),v(this,Vu,r),v(this,Xi,o),v(this,Wu,a),w(this,Gt,pA).call(this,a);const{x:c,y:u,width:h,height:d}=l(this,go);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,Oe)[4]} ${l(this,Oe)[5]}`];for(let i=6,s=l(this,Oe).length;i<s;i+=6){if(isNaN(l(this,Oe)[i])){t.push(`L${l(this,Oe)[i+4]} ${l(this,Oe)[i+5]}`);continue}t.push(`C${l(this,Oe)[i]} ${l(this,Oe)[i+1]} ${l(this,Oe)[i+2]} ${l(this,Oe)[i+3]} ${l(this,Oe)[i+4]} ${l(this,Oe)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const a=s-t,c=r-i;let u,h;switch(o){case 0:u=w(this,Gt,sc).call(this,l(this,Oe),t,r,a,-c),h=w(this,Gt,sc).call(this,l(this,nn),t,r,a,-c);break;case 90:u=w(this,Gt,rc).call(this,l(this,Oe),t,i,a,c),h=w(this,Gt,rc).call(this,l(this,nn),t,i,a,c);break;case 180:u=w(this,Gt,sc).call(this,l(this,Oe),s,i,-a,c),h=w(this,Gt,sc).call(this,l(this,nn),s,i,-a,c);break;case 270:u=w(this,Gt,rc).call(this,l(this,Oe),s,r,-a,-c),h=w(this,Gt,rc).call(this,l(this,nn),s,r,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,go)}newOutliner(t,i,s,r,o,a=0){return new Zd(t,i,s,r,o,a)}getNewOutline(t,i){const{x:s,y:r,width:o,height:a}=l(this,go),[c,u,h,d]=l(this,rl),f=o*h,p=a*d,m=s*h+c,b=r*d+u,E=this.newOutliner({x:l(this,nn)[0]*f+m,y:l(this,nn)[1]*p+b},l(this,rl),l(this,Vu),t,l(this,Wu),i??l(this,Xi));for(let g=2;g<l(this,nn).length;g+=2)E.add({x:l(this,nn)[g]*f+m,y:l(this,nn)[g+1]*p+b});return E.getOutlines()}get mustRemoveSelfIntersections(){return!0}}rl=new WeakMap,go=new WeakMap,Xi=new WeakMap,Wu=new WeakMap,nn=new WeakMap,Vu=new WeakMap,Oe=new WeakMap,Gt=new WeakSet,sc=function(t,i,s,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=i+t[c]*r,a[c+1]=s+t[c+1]*o;return a},rc=function(t,i,s,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=i+t[c+1]*r,a[c+1]=s+t[c]*o;return a},pA=function(t){const i=l(this,Oe);let s=i[4],r=i[5],o=s,a=r,c=s,u=r,h=s,d=r;const f=t?Math.max:Math.min;for(let g=6,y=i.length;g<y;g+=6){if(isNaN(i[g]))o=Math.min(o,i[g+4]),a=Math.min(a,i[g+5]),c=Math.max(c,i[g+4]),u=Math.max(u,i[g+5]),d<i[g+5]?(h=i[g+4],d=i[g+5]):d===i[g+5]&&(h=f(h,i[g+4]));else{const A=$.bezierBoundingBox(s,r,...i.slice(g,g+6));o=Math.min(o,A[0]),a=Math.min(a,A[1]),c=Math.max(c,A[2]),u=Math.max(u,A[3]),d<A[3]?(h=A[2],d=A[3]):d===A[3]&&(h=f(h,A[2]))}s=i[g+4],r=i[g+5]}const p=o-l(this,Xi),m=a-l(this,Xi),b=c-o+2*l(this,Xi),E=u-a+2*l(this,Xi);v(this,go,{x:p,y:m,width:b,height:E,lastPoint:[h,d]})};var Gu,Vs,Wn,Nt,gA,gd,mA,vA,cm;class _y{constructor(e,t=0,i=0,s=!0){x(this,Nt);x(this,Gu);x(this,Vs,[]);x(this,Wn,[]);let r=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:E,y:g,width:y,height:A}of e){const S=Math.floor((E-t)/u)*u,P=Math.ceil((E+y+t)/u)*u,_=Math.floor((g-t)/u)*u,C=Math.ceil((g+A+t)/u)*u,T=[S,_,C,!0],R=[P,_,C,!1];l(this,Vs).push(T,R),r=Math.min(r,S),o=Math.max(o,P),a=Math.min(a,_),c=Math.max(c,C)}const h=o-r+2*i,d=c-a+2*i,f=r-i,p=a-i,m=l(this,Vs).at(s?-1:-2),b=[m[0],m[2]];for(const E of l(this,Vs)){const[g,y,A]=E;E[0]=(g-f)/h,E[1]=(y-p)/d,E[2]=(A-p)/d}v(this,Gu,{x:f,y:p,width:h,height:d,lastPoint:b})}getOutlines(){l(this,Vs).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,Vs))t[3]?(e.push(...w(this,Nt,cm).call(this,t)),w(this,Nt,mA).call(this,t)):(w(this,Nt,vA).call(this,t),e.push(...w(this,Nt,cm).call(this,t)));return w(this,Nt,gA).call(this,e)}}Gu=new WeakMap,Vs=new WeakMap,Wn=new WeakMap,Nt=new WeakSet,gA=function(e){const t=[],i=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,c,u,h,d]=o;i.delete(o);let f=a,p=c;for(r=[a,u],s.push(r);;){let m;if(i.has(h))m=h;else if(i.has(d))m=d;else break;i.delete(m),[a,c,u,h,d]=m,f!==a&&(r.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}r.push(f,p)}return new XC(s,l(this,Gu))},gd=function(e){const t=l(this,Wn);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,o=t[r][0];if(o===e)return r;o<e?i=r+1:s=r-1}return s+1},mA=function([,e,t]){const i=w(this,Nt,gd).call(this,e);l(this,Wn).splice(i,0,[e,t])},vA=function([,e,t]){const i=w(this,Nt,gd).call(this,e);for(let s=i;s<l(this,Wn).length;s++){const[r,o]=l(this,Wn)[s];if(r!==e)break;if(r===e&&o===t){l(this,Wn).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=l(this,Wn)[s];if(r!==e)break;if(r===e&&o===t){l(this,Wn).splice(s,1);return}}},cm=function(e){const[t,i,s]=e,r=[[t,i,s]],o=w(this,Nt,gd).call(this,s);for(let a=0;a<o;a++){const[c,u]=l(this,Wn)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([t,u,p])}}}return r};var Xu,ol;class XC extends oA{constructor(t,i){super();x(this,Xu);x(this,ol);v(this,ol,t),v(this,Xu,i)}toSVGPath(){const t=[];for(const i of l(this,ol)){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const a=i[o],c=i[o+1];a===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const a=[],c=s-t,u=r-i;for(const h of l(this,ol)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return l(this,Xu)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Xu=new WeakMap,ol=new WeakMap;class um extends Zd{newFreeDrawOutline(e,t,i,s,r,o){return new qC(e,t,i,s,r,o)}get classNamesForDrawing(){return["highlight","free"]}}class qC extends fA{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,s,r,o=0){return new um(e,t,i,s,r,o)}}var Vn,mo,al,Xe,qu,ll,Yu,Ku,Gs,Gn,cl,Qu,ve,hm,dm,fm,Ar,yA,bs;const $t=class $t{constructor({editor:e=null,uiManager:t=null}){x(this,ve);x(this,Vn,null);x(this,mo,null);x(this,al);x(this,Xe,null);x(this,qu,!1);x(this,ll,!1);x(this,Yu,null);x(this,Ku);x(this,Gs,null);x(this,Gn,null);x(this,cl);var i;e?(v(this,ll,!1),v(this,cl,G.HIGHLIGHT_COLOR),v(this,Yu,e)):(v(this,ll,!0),v(this,cl,G.HIGHLIGHT_DEFAULT_COLOR)),v(this,Gn,(e==null?void 0:e._uiManager)||t),v(this,Ku,l(this,Gn)._eventBus),v(this,al,(e==null?void 0:e.color)||((i=l(this,Gn))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l($t,Qu)||v($t,Qu,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return se(this,"_keyboardManager",new hh([[["Escape","mac+Escape"],$t.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$t.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$t.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$t.prototype._moveToPrevious],[["Home","mac+Home"],$t.prototype._moveToBeginning],[["End","mac+End"],$t.prototype._moveToEnd]]))}renderButton(){const e=v(this,Vn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Gn)._signal;e.addEventListener("click",w(this,ve,Ar).bind(this),{signal:t}),e.addEventListener("keydown",w(this,ve,fm).bind(this),{signal:t});const i=v(this,mo,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,al),e.append(i),e}renderMainDropdown(){const e=v(this,Xe,w(this,ve,hm).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Vn)){w(this,ve,Ar).call(this,e);return}const t=e.target.getAttribute("data-color");t&&w(this,ve,dm).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,ve,bs)){w(this,ve,Ar).call(this,e);return}if(e.target===l(this,Vn)){(t=l(this,Xe).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,Xe))==null?void 0:t.firstChild)||e.target===l(this,Vn)){l(this,ve,bs)&&this._hideDropdownFromKeyboard();return}l(this,ve,bs)||w(this,ve,Ar).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,ve,bs)){w(this,ve,Ar).call(this,e);return}(t=l(this,Xe).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ve,bs)){w(this,ve,Ar).call(this,e);return}(t=l(this,Xe).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Xe))==null||e.classList.add("hidden"),(t=l(this,Gs))==null||t.abort(),v(this,Gs,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,ll)){if(!l(this,ve,bs)){(e=l(this,Yu))==null||e.unselect();return}this.hideDropdown(),l(this,Vn).focus({preventScroll:!0,focusVisible:l(this,qu)})}}updateColor(e){if(l(this,mo)&&(l(this,mo).style.backgroundColor=e),!l(this,Xe))return;const t=l(this,Gn).highlightColors.values();for(const i of l(this,Xe).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Vn))==null||e.remove(),v(this,Vn,null),v(this,mo,null),(t=l(this,Xe))==null||t.remove(),v(this,Xe,null)}};Vn=new WeakMap,mo=new WeakMap,al=new WeakMap,Xe=new WeakMap,qu=new WeakMap,ll=new WeakMap,Yu=new WeakMap,Ku=new WeakMap,Gs=new WeakMap,Gn=new WeakMap,cl=new WeakMap,Qu=new WeakMap,ve=new WeakSet,hm=function(){const e=document.createElement("div"),t=l(this,Gn)._signal;e.addEventListener("contextmenu",Rn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of l(this,Gn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",l($t,Qu)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===l(this,al)),r.addEventListener("click",w(this,ve,dm).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",w(this,ve,fm).bind(this),{signal:t}),e},dm=function(e,t){t.stopPropagation(),l(this,Ku).dispatch("switchannotationeditorparams",{source:this,type:l(this,cl),value:e})},fm=function(e){$t._keyboardManager.exec(this,e)},Ar=function(e){if(l(this,ve,bs)){this.hideDropdown();return}if(v(this,qu,e.detail===0),l(this,Gs)||(v(this,Gs,new AbortController),window.addEventListener("pointerdown",w(this,ve,yA).bind(this),{signal:l(this,Gn).combinedSignal(l(this,Gs))})),l(this,Xe)){l(this,Xe).classList.remove("hidden");return}const t=v(this,Xe,w(this,ve,hm).call(this));l(this,Vn).append(t)},yA=function(e){var t;(t=l(this,Xe))!=null&&t.contains(e.target)||this.hideDropdown()},bs=function(){return l(this,Xe)&&!l(this,Xe).classList.contains("hidden")},x($t,Qu,null);let Jd=$t;var ul,Zu,qi,vo,hl,yn,Ju,eh,yo,Xn,bt,Bt,dl,Yi,qe,fl,wn,th,Y,pm,md,wA,bA,xA,gm,Sr,En,Jo,AA,vd,oc,SA,EA,_A,CA,kA;const le=class le extends pe{constructor(t){super({...t,name:"highlightEditor"});x(this,Y);x(this,ul,null);x(this,Zu,0);x(this,qi);x(this,vo,null);x(this,hl,null);x(this,yn,null);x(this,Ju,null);x(this,eh,0);x(this,yo,null);x(this,Xn,null);x(this,bt,null);x(this,Bt,!1);x(this,dl,null);x(this,Yi);x(this,qe,null);x(this,fl,"");x(this,wn);x(this,th,"");this.color=t.color||le._defaultColor,v(this,wn,t.thickness||le._defaultThickness),v(this,Yi,t.opacity||le._defaultOpacity),v(this,qi,t.boxes||null),v(this,th,t.methodOfCreation||""),v(this,fl,t.text||""),this._isDraggable=!1,t.highlightId>-1?(v(this,Bt,!0),w(this,Y,md).call(this,t),w(this,Y,Sr).call(this)):l(this,qi)&&(v(this,ul,t.anchorNode),v(this,Zu,t.anchorOffset),v(this,Ju,t.focusNode),v(this,eh,t.focusOffset),w(this,Y,pm).call(this),w(this,Y,Sr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=le.prototype;return se(this,"_keyboardManager",new hh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Bt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,wn),methodOfCreation:l(this,th)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;pe.initialize(t,i),le._defaultColor||(le._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case G.HIGHLIGHT_DEFAULT_COLOR:le._defaultColor=i;break;case G.HIGHLIGHT_THICKNESS:le._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,dl)}updateParams(t,i){switch(t){case G.HIGHLIGHT_COLOR:w(this,Y,wA).call(this,i);break;case G.HIGHLIGHT_THICKNESS:w(this,Y,bA).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[G.HIGHLIGHT_DEFAULT_COLOR,le._defaultColor],[G.HIGHLIGHT_THICKNESS,le._defaultThickness]]}get propertiesToUpdate(){return[[G.HIGHLIGHT_COLOR,this.color||le._defaultColor],[G.HIGHLIGHT_THICKNESS,l(this,wn)||le._defaultThickness],[G.HIGHLIGHT_FREE,l(this,Bt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(v(this,hl,new Jd({editor:this})),t.addColorPicker(l(this,hl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(w(this,Y,oc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,w(this,Y,oc).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){w(this,Y,gm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(w(this,Y,Sr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?w(this,Y,gm).call(this):t&&(w(this,Y,Sr).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,o,a;const{drawLayer:i}=this.parent;let s;l(this,Bt)?(t=(t-this.rotation+360)%360,s=w(r=le,En,Jo).call(r,l(this,Xn).box,t)):s=w(o=le,En,Jo).call(o,this,t),i.rotate(l(this,bt),t),i.rotate(l(this,qe),t),i.updateBox(l(this,bt),s),i.updateBox(l(this,qe),w(a=le,En,Jo).call(a,l(this,yn).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,fl)&&(t.setAttribute("aria-label",l(this,fl)),t.setAttribute("role","mark")),l(this,Bt)?t.classList.add("free"):this.div.addEventListener("keydown",w(this,Y,AA).bind(this),{signal:this._uiManager._signal});const i=v(this,yo,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,vo);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Kd(this,l(this,yo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,qe),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,qe),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:w(this,Y,vd).call(this,!0);break;case 1:case 3:w(this,Y,vd).call(this,!1);break}}select(){var t,i;super.select(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,qe),"selected"))}unselect(){var t;super.unselect(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"selected"),l(this,Bt)||w(this,Y,vd).call(this,!1))}get _mustFixPosition(){return!l(this,Bt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,bt),t),this.parent.drawLayer.show(l(this,qe),t))}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:a,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=b=>{b.preventDefault(),b.stopPropagation()},m=b=>{d.abort(),w(this,En,CA).call(this,t,b)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Rn,{signal:f}),s.addEventListener("pointermove",w(this,En,_A).bind(this,t),{signal:f}),this._freeHighlight=new um({x:r,y:o},[a,c,u,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,s){var b,E,g,y;let r=null;if(t instanceof Zx){const{data:{quadPoints:A,rect:S,rotation:P,id:_,color:C,opacity:T,popupRef:R},parent:{page:{pageNumber:L}}}=t;r=t={annotationType:Q.HIGHLIGHT,color:Array.from(C),opacity:T,quadPoints:A,boxes:null,pageIndex:L-1,rect:S.slice(0),rotation:P,id:_,deleted:!1,popupRef:R}}else if(t instanceof W0){const{data:{inkLists:A,rect:S,rotation:P,id:_,color:C,borderStyle:{rawWidth:T},popupRef:R},parent:{page:{pageNumber:L}}}=t;r=t={annotationType:Q.HIGHLIGHT,color:Array.from(C),thickness:T,inkLists:A,boxes:null,pageIndex:L-1,rect:S.slice(0),rotation:P,id:_,deleted:!1,popupRef:R}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,h=await super.deserialize(t,i,s);h.color=$.makeHexColor(...o),v(h,Yi,u||1),c&&v(h,wn,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(a){const A=v(h,qi,[]);for(let S=0;S<a.length;S+=8)A.push({x:(a[S]-p)/d,y:1-(a[S+1]-m)/f,width:(a[S+2]-a[S])/d,height:(a[S+1]-a[S+5])/f});w(b=h,Y,pm).call(b),w(E=h,Y,Sr).call(E),h.rotate(h.rotation)}else if(c){v(h,Bt,!0);const A=c[0],S={x:A[0]-p,y:f-(A[1]-m)},P=new um(S,[0,0,d,f],1,l(h,wn)/2,!0,.001);for(let T=0,R=A.length;T<R;T+=2)S.x=A[T]-p,S.y=f-(A[T+1]-m),P.add(S);const{id:_,clipPathId:C}=i.drawLayer.draw(P,h.color,h._defaultOpacity,!0);w(g=h,Y,md).call(g,{highlightOutlines:P.getOutlines(),highlightId:_,clipPathId:C}),w(y=h,Y,Sr).call(y)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=pe._colorManager.convert(this.color),r={annotationType:Q.HIGHLIGHT,color:s,opacity:l(this,Yi),thickness:l(this,wn),quadPoints:w(this,Y,SA).call(this),outlines:w(this,Y,EA).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:w(this,Y,oc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!w(this,Y,kA).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ul=new WeakMap,Zu=new WeakMap,qi=new WeakMap,vo=new WeakMap,hl=new WeakMap,yn=new WeakMap,Ju=new WeakMap,eh=new WeakMap,yo=new WeakMap,Xn=new WeakMap,bt=new WeakMap,Bt=new WeakMap,dl=new WeakMap,Yi=new WeakMap,qe=new WeakMap,fl=new WeakMap,wn=new WeakMap,th=new WeakMap,Y=new WeakSet,pm=function(){const t=new _y(l(this,qi),.001);v(this,Xn,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Xn).box;const i=new _y(l(this,qi),.0025,.001,this._uiManager.direction==="ltr");v(this,yn,i.getOutlines());const{lastPoint:s}=l(this,yn).box;v(this,dl,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},md=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var d,f;if(v(this,Xn,t),v(this,yn,t.getNewOutline(l(this,wn)/2+1.5,.0025)),i>=0)v(this,bt,i),v(this,vo,s),this.parent.drawLayer.finalizeLine(i,t),v(this,qe,this.parent.drawLayer.drawOutline(l(this,yn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,bt),t),this.parent.drawLayer.updateBox(l(this,bt),w(d=le,En,Jo).call(d,l(this,Xn).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,qe),l(this,yn)),this.parent.drawLayer.updateBox(l(this,qe),w(f=le,En,Jo).call(f,l(this,yn).box,p))}const{x:o,y:a,width:c,height:u}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=l(this,yn).box;v(this,dl,[(h[0]-o)/c,(h[1]-a)/u])},wA=function(t){const i=(o,a)=>{var c,u,h;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(l(this,bt),o),(u=l(this,hl))==null||u.updateColor(o),v(this,Yi,a),(h=this.parent)==null||h.drawLayer.changeOpacity(l(this,bt),a)},s=this.color,r=l(this,Yi);this.addCommands({cmd:i.bind(this,t,le._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},bA=function(t){const i=l(this,wn),s=r=>{v(this,wn,r),w(this,Y,xA).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},xA=function(t){if(!l(this,Bt))return;w(this,Y,md).call(this,{highlightOutlines:l(this,Xn).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},gm=function(){l(this,bt)===null||!this.parent||(this.parent.drawLayer.remove(l(this,bt)),v(this,bt,null),this.parent.drawLayer.remove(l(this,qe)),v(this,qe,null))},Sr=function(t=this.parent){l(this,bt)===null&&({id:_t(this,bt)._,clipPathId:_t(this,vo)._}=t.drawLayer.draw(l(this,Xn),this.color,l(this,Yi)),v(this,qe,t.drawLayer.drawOutline(l(this,yn))),l(this,yo)&&(l(this,yo).style.clipPath=l(this,vo)))},En=new WeakSet,Jo=function({x:t,y:i,width:s,height:r},o){switch(o){case 90:return{x:1-i-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-t-s,width:r,height:s}}return{x:t,y:i,width:s,height:r}},AA=function(t){le._keyboardManager.exec(this,t)},vd=function(t){if(!l(this,ul))return;const i=window.getSelection();t?i.setPosition(l(this,ul),l(this,Zu)):i.setPosition(l(this,Ju),l(this,eh))},oc=function(){return l(this,Bt)?this.rotation:0},SA=function(){if(l(this,Bt))return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=l(this,qi),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*t+s,m=(1-h-f)*i+r;a[c]=a[c+4]=p,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=p+d*t,a[c+5]=a[c+7]=m+f*i,c+=8}return a},EA=function(t){return l(this,Xn).serialize(t,w(this,Y,oc).call(this))},_A=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},CA=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},kA=function(t){const{color:i}=this._initialData;return t.color.some((s,r)=>s!==i[r])},x(le,En),V(le,"_defaultColor",null),V(le,"_defaultOpacity",1),V(le,"_defaultThickness",12),V(le,"_type","highlight"),V(le,"_editorType",Q.HIGHLIGHT),V(le,"_freeHighlightId",-1),V(le,"_freeHighlight",null),V(le,"_freeHighlightClipId","");let ef=le;var wo,bo,mi,Ki,bn,xo,Ao,So,Qi,pl,Eo,_o,Xs,I,TA,PA,RA,LA,vm,MA,ym,NA,IA,FA,DA,OA,Er,wm,bm,xm,yd,wd,ea,Am,bd,ms,jA,Sm,$A,zA,Em,xd,ac;const ke=class ke extends pe{constructor(t){super({...t,name:"inkEditor"});x(this,I);x(this,wo,0);x(this,bo,0);x(this,mi,null);x(this,Ki,new Path2D);x(this,bn,!1);x(this,xo,null);x(this,Ao,!1);x(this,So,!1);x(this,Qi,null);x(this,pl,null);x(this,Eo,0);x(this,_o,0);x(this,Xs,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){pe.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case G.INK_THICKNESS:ke._defaultThickness=i;break;case G.INK_COLOR:ke._defaultColor=i;break;case G.INK_OPACITY:ke._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case G.INK_THICKNESS:w(this,I,TA).call(this,i);break;case G.INK_COLOR:w(this,I,PA).call(this,i);break;case G.INK_OPACITY:w(this,I,RA).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[G.INK_THICKNESS,ke._defaultThickness],[G.INK_COLOR,ke._defaultColor||pe._defaultLineColor],[G.INK_OPACITY,Math.round(ke._defaultOpacity*100)]]}get propertiesToUpdate(){return[[G.INK_THICKNESS,this.thickness||ke._defaultThickness],[G.INK_COLOR,this.color||ke._defaultColor||pe._defaultLineColor],[G.INK_OPACITY,Math.round(100*(this.opacity??ke._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(w(this,I,yd).call(this),w(this,I,wd).call(this)),this.isAttachedToDOM||(this.parent.add(this),w(this,I,ea).call(this)),w(this,I,ac).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,mi)&&(clearTimeout(l(this,mi)),v(this,mi,null)),(t=l(this,Qi))==null||t.disconnect(),v(this,Qi,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,s=this.width*t,r=this.height*i;this.setDimensions(s,r)}enableEditMode(){l(this,bn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,w(this,I,wm).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),w(this,I,bm).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,bn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),v(this,bn,!0),this.div.classList.add("disabled"),w(this,I,ac).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,bn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),w(this,I,MA).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),w(this,I,ym).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),w(this,I,xm).call(this,t)}canvasPointerleave(t){w(this,I,xm).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,bn)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,o,a]=w(this,I,LA).call(this);if(this.setAt(s,r,0,0),this.setDims(o,a),w(this,I,yd).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(t*c,i*u,this.width*c,this.height*u),v(this,So,!0),w(this,I,ea).call(this),this.setDims(this.width*c,this.height*u),w(this,I,Er).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return w(this,I,wd).call(this),this.div}setDimensions(t,i){const s=Math.round(t),r=Math.round(i);if(l(this,Eo)===s&&l(this,_o)===r)return;v(this,Eo,s),v(this,_o,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=i/a,this.fixAndSetPosition(),l(this,bn)&&w(this,I,Am).call(this,t,i),w(this,I,ea).call(this),w(this,I,Er).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,s){var E,g,y;if(t instanceof W0)return null;const r=await super.deserialize(t,i,s);r.thickness=t.thickness,r.color=$.makeHexColor(...t.color),r.opacity=t.opacity;const[o,a]=r.pageDimensions,c=r.width*o,u=r.height*a,h=r.parentScale,d=t.thickness/2;v(r,bn,!0),v(r,Eo,Math.round(c)),v(r,_o,Math.round(u));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:A}of f){A=w(E=ke,ms,$A).call(E,A,p,m);const S=[];r.paths.push(S);let P=h*(A[0]-d),_=h*(A[1]-d);for(let T=2,R=A.length;T<R;T+=6){const L=h*(A[T]-d),D=h*(A[T+1]-d),q=h*(A[T+2]-d),K=h*(A[T+3]-d),ae=h*(A[T+4]-d),ce=h*(A[T+5]-d);S.push([[P,_],[L,D],[q,K],[ae,ce]]),P=ae,_=ce}const C=w(this,ms,jA).call(this,S);r.bezierPath2D.push(C)}const b=w(g=r,I,Em).call(g);return v(r,bo,Math.max(pe.MIN_SIZE,b[2]-b[0])),v(r,wo,Math.max(pe.MIN_SIZE,b[3]-b[1])),w(y=r,I,Am).call(y,c,u),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=pe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Q.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:w(this,I,zA).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};wo=new WeakMap,bo=new WeakMap,mi=new WeakMap,Ki=new WeakMap,bn=new WeakMap,xo=new WeakMap,Ao=new WeakMap,So=new WeakMap,Qi=new WeakMap,pl=new WeakMap,Eo=new WeakMap,_o=new WeakMap,Xs=new WeakMap,I=new WeakSet,TA=function(t){const i=r=>{this.thickness=r,w(this,I,ac).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},PA=function(t){const i=r=>{this.color=r,w(this,I,Er).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RA=function(t){const i=r=>{this.opacity=r,w(this,I,Er).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},LA=function(){const{parentRotation:t,parentDimensions:[i,s]}=this;switch(t){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},vm=function(){const{ctx:t,color:i,opacity:s,thickness:r,parentScale:o,scaleFactor:a}=this;t.lineWidth=r*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${m_(s)}`},MA=function(t,i){this.canvas.addEventListener("contextmenu",Rn,{signal:this._uiManager._signal}),w(this,I,bm).call(this),v(this,xo,new AbortController);const s=this._uiManager.combinedSignal(l(this,xo));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,l(this,So)||(v(this,So,!0),w(this,I,ea).call(this),this.thickness||(this.thickness=ke._defaultThickness),this.color||(this.color=ke._defaultColor||pe._defaultLineColor),this.opacity??(this.opacity=ke._defaultOpacity)),this.currentPath.push([t,i]),v(this,Ao,!1),w(this,I,vm).call(this),v(this,Xs,()=>{w(this,I,FA).call(this),l(this,Xs)&&window.requestAnimationFrame(l(this,Xs))}),window.requestAnimationFrame(l(this,Xs))},ym=function(t,i){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&i===r)return;const o=this.currentPath;let a=l(this,Ki);if(o.push([t,i]),v(this,Ao,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,i);return}o.length===3&&(v(this,Ki,a=new Path2D),a.moveTo(...o[0])),w(this,I,DA).call(this,a,...o.at(-3),...o.at(-2),t,i)},NA=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,Ki).lineTo(...t)},IA=function(t,i){v(this,Xs,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),w(this,I,ym).call(this,t,i),w(this,I,NA).call(this);let s;if(this.currentPath.length!==1)s=w(this,I,OA).call(this);else{const u=[t,i];s=[[u,u.slice(),u.slice(),u]]}const r=l(this,Ki),o=this.currentPath;this.currentPath=[],v(this,Ki,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(w(this,I,yd).call(this),w(this,I,wd).call(this)),w(this,I,ac).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},FA=function(){if(!l(this,Ao))return;v(this,Ao,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(a=>a[0]),r=i.map(a=>a[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(l(this,Ki)),o.restore()},DA=function(t,i,s,r,o,a,c){const u=(i+r)/2,h=(s+o)/2,d=(r+a)/2,f=(o+c)/2;t.bezierCurveTo(u+2*(r-u)/3,h+2*(o-h)/3,d+2*(r-d)/3,f+2*(o-f)/3,d,f)},OA=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let s,[r,o]=t[0];for(s=1;s<t.length-2;s++){const[p,m]=t[s],[b,E]=t[s+1],g=(p+b)/2,y=(m+E)/2,A=[r+2*(p-r)/3,o+2*(m-o)/3],S=[g+2*(p-g)/3,y+2*(m-y)/3];i.push([[r,o],A,S,[g,y]]),[r,o]=[g,y]}const[a,c]=t[s],[u,h]=t[s+1],d=[r+2*(a-r)/3,o+2*(c-o)/3],f=[u+2*(a-u)/3,h+2*(c-h)/3];return i.push([[r,o],d,f,[u,h]]),i},Er=function(){if(this.isEmpty()){w(this,I,bd).call(this);return}w(this,I,vm).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),w(this,I,bd).call(this);for(const s of this.bezierPath2D)i.stroke(s)},wm=function(){if(l(this,pl))return;v(this,pl,new AbortController);const t=this._uiManager.combinedSignal(l(this,pl));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},bm=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},xm=function(t){var i;(i=l(this,xo))==null||i.abort(),v(this,xo,null),w(this,I,wm).call(this),l(this,mi)&&clearTimeout(l(this,mi)),v(this,mi,setTimeout(()=>{v(this,mi,null),this.canvas.removeEventListener("contextmenu",Rn)},10)),w(this,I,IA).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},yd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},wd=function(){v(this,Qi,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,Qi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Qi))==null||t.disconnect(),v(this,Qi,null)},{once:!0})},ea=function(){if(!l(this,So))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),w(this,I,bd).call(this)},Am=function(t,i){const s=w(this,I,xd).call(this),r=(t-s)/l(this,bo),o=(i-s)/l(this,wo);this.scaleFactor=Math.min(r,o)},bd=function(){const t=w(this,I,xd).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ms=new WeakSet,jA=function(t){const i=new Path2D;for(let s=0,r=t.length;s<r;s++){const[o,a,c,u]=t[s];s===0&&i.moveTo(...o),i.bezierCurveTo(a[0],a[1],c[0],c[1],u[0],u[1])}return i},Sm=function(t,i,s){const[r,o,a,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+r,t[u+1]=d+o}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]+=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=a-t[u+1],t[u+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},$A=function(t,i,s){const[r,o,a,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-o,t[u+1]=d-r}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]-=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=c-t[u+1],t[u+1]=a-d}break;default:throw new Error("Invalid rotation")}return t},zA=function(t,i,s,r){var h,d;const o=[],a=this.thickness/2,c=t*i+a,u=t*s+a;for(const f of this.paths){const p=[],m=[];for(let b=0,E=f.length;b<E;b++){const[g,y,A,S]=f[b];if(g[0]===S[0]&&g[1]===S[1]&&E===1){const K=t*g[0]+c,ae=t*g[1]+u;p.push(K,ae),m.push(K,ae);break}const P=t*g[0]+c,_=t*g[1]+u,C=t*y[0]+c,T=t*y[1]+u,R=t*A[0]+c,L=t*A[1]+u,D=t*S[0]+c,q=t*S[1]+u;b===0&&(p.push(P,_),m.push(P,_)),p.push(C,T,R,L,D,q),m.push(C,T),b===E-1&&m.push(D,q)}o.push({bezier:w(h=ke,ms,Sm).call(h,p,r,this.rotation),points:w(d=ke,ms,Sm).call(d,m,r,this.rotation)})}return o},Em=function(){let t=1/0,i=-1/0,s=1/0,r=-1/0;for(const o of this.paths)for(const[a,c,u,h]of o){const d=$.bezierBoundingBox(...a,...c,...u,...h);t=Math.min(t,d[0]),s=Math.min(s,d[1]),i=Math.max(i,d[2]),r=Math.max(r,d[3])}return[t,s,i,r]},xd=function(){return l(this,bn)?Math.ceil(this.thickness*this.parentScale):0},ac=function(t=!1){if(this.isEmpty())return;if(!l(this,bn)){w(this,I,Er).call(this);return}const i=w(this,I,Em).call(this),s=w(this,I,xd).call(this);v(this,bo,Math.max(pe.MIN_SIZE,i[2]-i[0])),v(this,wo,Math.max(pe.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(s+l(this,bo)*this.scaleFactor),o=Math.ceil(s+l(this,wo)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=r/a,this.height=o/c,this.setAspectRatio(r,o);const u=this.translationX,h=this.translationY;this.translationX=-i[0],this.translationY=-i[1],w(this,I,ea).call(this),w(this,I,Er).call(this),v(this,Eo,r),v(this,_o,o),this.setDims(r,o);const d=t?s/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},x(ke,ms),V(ke,"_defaultColor",null),V(ke,"_defaultOpacity",1),V(ke,"_defaultThickness",1),V(ke,"_type","ink"),V(ke,"_editorType",Q.INK);let mm=ke;var Pe,ct,qs,Zi,Ys,gl,vi,Ji,yi,sn,ml,ne,lc,cc,Ad,Cm,HA,Sd,km,Ed,BA,UA;const Ac=class Ac extends pe{constructor(t){super({...t,name:"stampEditor"});x(this,ne);x(this,Pe,null);x(this,ct,null);x(this,qs,null);x(this,Zi,null);x(this,Ys,null);x(this,gl,"");x(this,vi,null);x(this,Ji,null);x(this,yi,null);x(this,sn,!1);x(this,ml,!1);v(this,Zi,t.bitmapUrl),v(this,Ys,t.bitmapFile)}static initialize(t,i){pe.initialize(t,i)}static get supportedTypes(){return se(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return se(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Q.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,i;l(this,ct)&&(v(this,Pe,null),this._uiManager.imageManager.deleteId(l(this,ct)),(t=l(this,vi))==null||t.remove(),v(this,vi,null),(i=l(this,Ji))==null||i.disconnect(),v(this,Ji,null),l(this,yi)&&(clearTimeout(l(this,yi)),v(this,yi,null))),super.remove()}rebuild(){if(!this.parent){l(this,ct)&&w(this,ne,Ad).call(this);return}super.rebuild(),this.div!==null&&(l(this,ct)&&l(this,vi)===null&&w(this,ne,Ad).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,qs)||l(this,Pe)||l(this,Zi)||l(this,Ys)||l(this,ct))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Pe)?w(this,ne,Cm).call(this):w(this,ne,Ad).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r)}return this.div}copyCanvas(t,i,s=!1){var p;t||(t=224);const{width:r,height:o}=l(this,Pe),a=new Ag;let c=l(this,Pe),u=r,h=o,d=null;if(i){if(r>i||o>i){const T=Math.min(i/r,i/o);u=Math.floor(r*T),h=Math.floor(o*T)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*a.sx),b=d.height=Math.ceil(h*a.sy);l(this,sn)||(c=w(this,ne,Sd).call(this,m,b));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let g="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",y="#42414d");const A=15,S=A*a.sx,P=A*a.sy,_=new OffscreenCanvas(S*2,P*2),C=_.getContext("2d");C.fillStyle=g,C.fillRect(0,0,S*2,P*2),C.fillStyle=y,C.fillRect(0,0,S,P),C.fillRect(S,P,S,P),E.fillStyle=E.createPattern(_,"repeat"),E.fillRect(0,0,m,b),E.drawImage(c,0,0,c.width,c.height,0,0,m,b)}let f=null;if(s){let m,b;if(a.symmetric&&c.width<t&&c.height<t)m=c.width,b=c.height;else if(c=l(this,Pe),r>t||o>t){const y=Math.min(t/r,t/o);m=Math.floor(r*y),b=Math.floor(o*y),l(this,sn)||(c=w(this,ne,Sd).call(this,m,b))}const g=new OffscreenCanvas(m,b).getContext("2d",{willReadFrequently:!0});g.drawImage(c,0,0,c.width,c.height,0,0,m,b),f={width:m,height:b,data:g.getImageData(0,0,m,b).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,vi)}static async deserialize(t,i,s){var b;let r=null;if(t instanceof Jx){const{data:{rect:E,rotation:g,id:y,structParent:A,popupRef:S},container:P,parent:{page:{pageNumber:_}}}=t,C=P.querySelector("canvas"),T=s.imageManager.getFromCanvas(P.id,C);C.remove();const R=((b=await i._structTree.getAriaAttributes(`${N0}${y}`))==null?void 0:b.get("aria-label"))||"";r=t={annotationType:Q.STAMP,bitmapId:T.id,bitmap:T.bitmap,pageIndex:_-1,rect:E.slice(0),rotation:g,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:R},isSvg:!1,structParent:A,popupRef:S}}const o=await super.deserialize(t,i,s),{rect:a,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&s.imageManager.isValidId(h)?(v(o,ct,h),c&&v(o,Pe,c)):v(o,Zi,u),v(o,sn,d);const[p,m]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/m,o.annotationElementId=t.id||null,f&&(o.altTextData=f),o._initialData=r,v(o,ml,!!r),o}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Q.STAMP,bitmapId:l(this,ct),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,sn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=w(this,ne,Ed).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=w(this,ne,UA).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const a=l(this,sn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(l(this,ct)))i.stamps.set(l(this,ct),{area:a,serialized:s}),s.bitmap=w(this,ne,Ed).call(this,!1);else if(l(this,sn)){const c=i.stamps.get(l(this,ct));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=w(this,ne,Ed).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Pe=new WeakMap,ct=new WeakMap,qs=new WeakMap,Zi=new WeakMap,Ys=new WeakMap,gl=new WeakMap,vi=new WeakMap,Ji=new WeakMap,yi=new WeakMap,sn=new WeakMap,ml=new WeakMap,ne=new WeakSet,lc=function(t,i=!1){if(!t){this.remove();return}v(this,Pe,t.bitmap),i||(v(this,ct,t.id),v(this,sn,t.isSvg)),t.file&&v(this,gl,t.file.name),w(this,ne,Cm).call(this)},cc=function(){if(v(this,qs,null),this._uiManager.enableWaiting(!1),!!l(this,vi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Pe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Pe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ad=function(){if(l(this,ct)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,ct)).then(s=>w(this,ne,lc).call(this,s,!0)).finally(()=>w(this,ne,cc).call(this));return}if(l(this,Zi)){const s=l(this,Zi);v(this,Zi,null),this._uiManager.enableWaiting(!0),v(this,qs,this._uiManager.imageManager.getFromUrl(s).then(r=>w(this,ne,lc).call(this,r)).finally(()=>w(this,ne,cc).call(this)));return}if(l(this,Ys)){const s=l(this,Ys);v(this,Ys,null),this._uiManager.enableWaiting(!0),v(this,qs,this._uiManager.imageManager.getFromFile(s).then(r=>w(this,ne,lc).call(this,r)).finally(()=>w(this,ne,cc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Ac.supportedTypesStr;const i=this._uiManager._signal;v(this,qs,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),w(this,ne,lc).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>w(this,ne,cc).call(this))),t.click()},Cm=function(){const{div:t}=this;let{width:i,height:s}=l(this,Pe);const[r,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>a*r||s>a*o){const d=Math.min(a*r/i,a*o/s);i*=d,s*=d}const[c,u]=this.parentDimensions;this.setDims(i*c/r,s*u/o),this._uiManager.enableWaiting(!1);const h=v(this,vi,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),w(this,ne,km).call(this,i,s),w(this,ne,BA).call(this),l(this,ml)||(this.parent.addUndoableEditor(this),v(this,ml,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,gl)&&h.setAttribute("aria-label",l(this,gl))},HA=function(t,i){var a;const[s,r]=this.parentDimensions;this.width=t/s,this.height=i/r,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,yi)!==null&&clearTimeout(l(this,yi)),v(this,yi,setTimeout(()=>{v(this,yi,null),w(this,ne,km).call(this,t,i)},200))},Sd=function(t,i){const{width:s,height:r}=l(this,Pe);let o=s,a=r,c=l(this,Pe);for(;o>2*t||a>2*i;){const u=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,a),c=d.transferToImageBitmap()}return c},km=function(t,i){const s=new Ag,r=Math.ceil(t*s.sx),o=Math.ceil(i*s.sy),a=l(this,vi);if(!a||a.width===r&&a.height===o)return;a.width=r,a.height=o;const c=l(this,sn)?l(this,Pe):w(this,ne,Sd).call(this,r,o),u=a.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,r,o)},Ed=function(t){if(t){if(l(this,sn)){const r=this._uiManager.imageManager.getSvgUrl(l(this,ct));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,Pe),i.getContext("2d").drawImage(l(this,Pe),0,0),i.toDataURL()}if(l(this,sn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*hr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*hr.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,Pe),0,0,l(this,Pe).width,l(this,Pe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,Pe))},BA=function(){this._uiManager._signal&&(v(this,Ji,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&w(this,ne,HA).call(this,i.width,i.height)})),l(this,Ji).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Ji))==null||t.disconnect(),v(this,Ji,null)},{once:!0}))},UA=function(t){var u;const{rect:i,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,o=t.rect.every((h,d)=>Math.abs(h-i[d])<1),a=t.pageIndex===s,c=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:o&&a&&c,isSameAltText:c}},V(Ac,"_type","stamp"),V(Ac,"_editorType",Q.STAMP);let _m=Ac;var Co,vl,wi,Ks,es,rn,Qs,yl,wl,xt,ts,z,Zs,dt,WA,Pm,Rm,Lm,_d;const Mn=class Mn{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:h}){x(this,dt);x(this,Co);x(this,vl,!1);x(this,wi,null);x(this,Ks,null);x(this,es,null);x(this,rn,new Map);x(this,Qs,!1);x(this,yl,!1);x(this,wl,!1);x(this,xt,null);x(this,ts,null);x(this,z);const d=[...l(Mn,Zs).values()];if(!Mn._initialized){Mn._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),v(this,z,e),this.pageIndex=t,this.div=i,v(this,Co,r),v(this,wi,o),this.viewport=u,v(this,xt,c),this.drawLayer=a,this._structTree=s,l(this,z).addLayer(this)}get isEmpty(){return l(this,rn).size===0}get isInvisible(){return this.isEmpty&&l(this,z).getMode()===Q.NONE}updateToolbar(e){l(this,z).updateToolbar(e)}updateMode(e=l(this,z).getMode()){switch(w(this,dt,_d).call(this),e){case Q.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Q.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Q.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(Mn,Zs).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,xt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,z).getMode()!==Q.INK)return;if(!e){for(const i of l(this,rn).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,z).setEditingState(e)}addCommands(e){l(this,z).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,wi))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,rn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,z).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,wi))return;const t=l(this,wi).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,z).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;v(this,wl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,rn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(l(this,wi)){const r=l(this,wi).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,z).isDeletedAnnotationElement(a))continue;let c=t.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(a),c&&(l(this,z).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}w(this,dt,_d).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of l(Mn,Zs).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,wl,!1)}getEditableAnnotation(e){var t;return((t=l(this,wi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,z).getActive()!==e&&l(this,z).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,xt))!=null&&e.div&&!l(this,ts)){v(this,ts,new AbortController);const t=l(this,z).combinedSignal(l(this,ts));l(this,xt).div.addEventListener("pointerdown",w(this,dt,WA).bind(this),{signal:t}),l(this,xt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,xt))!=null&&e.div&&l(this,ts)&&(l(this,ts).abort(),v(this,ts,null),l(this,xt).div.classList.remove("highlighting"))}enableClick(){if(l(this,Ks))return;v(this,Ks,new AbortController);const e=l(this,z).combinedSignal(l(this,Ks));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,Ks))==null||e.abort(),v(this,Ks,null)}attach(e){l(this,rn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,z).isDeletedAnnotationElement(t)&&l(this,z).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,rn).delete(e.id),(t=l(this,Co))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,wl)&&e.annotationElementId&&l(this,z).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,z).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,yl)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,z).addDeletedAnnotationElement(e.annotationElementId),pe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,z).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,z).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,es)&&(e._focusEventsAllowed=!1,v(this,es,setTimeout(()=>{v(this,es,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,z)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,Co))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,z).getId()}combinedSignal(e){return l(this,z).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,dt,Pm))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,z).updateToolbar(e),l(this,z).updateMode(e);const{offsetX:i,offsetY:s}=w(this,dt,Lm).call(this),r=this.getNextId(),o=w(this,dt,Rm).call(this,{parent:this,id:r,x:i,y:s,uiManager:l(this,z),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(Mn,Zs).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,z)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=w(this,dt,Rm).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,z),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(w(this,dt,Lm).call(this),!0)}setSelected(e){l(this,z).setSelected(e)}toggleSelected(e){l(this,z).toggleSelected(e)}unselect(e){l(this,z).unselect(e)}pointerup(e){const{isMac:t}=Lt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Qs)){if(v(this,Qs,!1),!l(this,vl)){v(this,vl,!0);return}if(l(this,z).getMode()===Q.STAMP){l(this,z).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,z).getMode()===Q.HIGHLIGHT&&this.enableTextSelection(),l(this,Qs)){v(this,Qs,!1);return}const{isMac:t}=Lt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;v(this,Qs,!0);const i=l(this,z).getActive();v(this,vl,!i||i.isEmpty())}findNewParent(e,t,i){const s=l(this,z).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,z).getActive())==null?void 0:e.parent)===this&&(l(this,z).commitOrRemove(),l(this,z).setActiveEditor(null)),l(this,es)&&(clearTimeout(l(this,es)),v(this,es,null));for(const i of l(this,rn).values())(t=l(this,Co))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,rn).clear(),l(this,z).removeLayer(this)}render({viewport:e}){this.viewport=e,Fo(this.div,e);for(const t of l(this,z).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,z).commitOrRemove(),w(this,dt,_d).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Fo(this.div,{rotation:i}),t!==i)for(const s of l(this,rn).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,z).viewParameters.realScale}};Co=new WeakMap,vl=new WeakMap,wi=new WeakMap,Ks=new WeakMap,es=new WeakMap,rn=new WeakMap,Qs=new WeakMap,yl=new WeakMap,wl=new WeakMap,xt=new WeakMap,ts=new WeakMap,z=new WeakMap,Zs=new WeakMap,dt=new WeakSet,WA=function(e){l(this,z).unselectAll();const{target:t}=e;if(t===l(this,xt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,xt).div.contains(t)){const{isMac:i}=Lt.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,z).showAllEditors("highlight",!0,!0),l(this,xt).div.classList.add("free"),this.toggleDrawing(),ef.startHighlighting(this,l(this,z).direction==="ltr",{target:l(this,xt).div,x:e.x,y:e.y}),l(this,xt).div.addEventListener("pointerup",()=>{l(this,xt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,z)._signal}),e.preventDefault()}},Pm=function(){return l(Mn,Zs).get(l(this,z).getMode())},Rm=function(e){const t=l(this,dt,Pm);return t?new t.prototype.constructor(e):null},Lm=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+s),u=(r+a)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},_d=function(){v(this,yl,!0);for(const e of l(this,rn).values())e.isEmpty()&&e.remove();v(this,yl,!1)},V(Mn,"_initialized",!1),x(Mn,Zs,new Map([am,mm,_m,ef].map(e=>[e._editorType,e])));let Tm=Mn;var bi,nh,He,ns,ih,Nm,$o,Im,VA;const ot=class ot{constructor({pageIndex:e}){x(this,$o);x(this,bi,null);x(this,nh,0);x(this,He,new Map);x(this,ns,new Map);this.pageIndex=e}setParent(e){if(!l(this,bi)){v(this,bi,e);return}if(l(this,bi)!==e){if(l(this,He).size>0)for(const t of l(this,He).values())t.remove(),e.append(t);v(this,bi,e)}}static get _svgFactory(){return se(this,"_svgFactory",new U0)}draw(e,t,i,s=!1){const r=_t(this,nh)._++,o=w(this,$o,Im).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const a=ot._svgFactory.createElement("defs");o.append(a);const c=ot._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),s&&l(this,ns).set(r,c);const h=w(this,$o,VA).call(this,a,u),d=ot._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",i),d.setAttribute("href",`#${u}`),l(this,He).set(r,o),{id:r,clipPathId:`url(#${h})`}}drawOutline(e){const t=_t(this,nh)._++,i=w(this,$o,Im).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const s=ot._svgFactory.createElement("defs");i.append(s);const r=ot._svgFactory.createElement("path");s.append(r);const o=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",o),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const h=ot._svgFactory.createElement("mask");s.append(h),a=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",a),h.setAttribute("maskUnits","objectBoundingBox");const d=ot._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=ot._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=ot._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),l(this,He).set(t,i),t}finalizeLine(e,t){const i=l(this,ns).get(e);l(this,ns).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,He).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,ns).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;w(i=ot,ih,Nm).call(i,l(this,He).get(e),t)}show(e,t){l(this,He).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,He).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,He).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,He).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,He).get(e).classList.add(t)}removeClass(e,t){l(this,He).get(e).classList.remove(t)}getSVGRoot(e){return l(this,He).get(e)}remove(e){l(this,ns).delete(e),l(this,bi)!==null&&(l(this,He).get(e).remove(),l(this,He).delete(e))}destroy(){v(this,bi,null);for(const e of l(this,He).values())e.remove();l(this,He).clear(),l(this,ns).clear()}};bi=new WeakMap,nh=new WeakMap,He=new WeakMap,ns=new WeakMap,ih=new WeakSet,Nm=function(e,{x:t=0,y:i=0,width:s=1,height:r=1}={}){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},$o=new WeakSet,Im=function(e){var i;const t=ot._svgFactory.create(1,1,!0);return l(this,bi).append(t),t.setAttribute("aria-hidden",!0),w(i=ot,ih,Nm).call(i,t,e),t},VA=function(e,t){const i=ot._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=ot._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},x(ot,ih);let Mm=ot;X.AbortException;X.AnnotationEditorLayer;X.AnnotationEditorParamsType;X.AnnotationEditorType;X.AnnotationEditorUIManager;X.AnnotationLayer;X.AnnotationMode;X.ColorPicker;X.DOMSVGFactory;X.DrawLayer;X.FeatureTest;var YC=X.GlobalWorkerOptions;X.ImageKind;X.InvalidPDFException;X.MissingPDFException;X.OPS;X.OutputScale;X.PDFDataRangeTransport;X.PDFDateString;X.PDFWorker;X.PasswordResponses;X.PermissionFlag;X.PixelsPerInch;X.RenderingCancelledException;X.TextLayer;X.UnexpectedResponseException;X.Util;X.VerbosityLevel;X.XfaLayer;X.build;X.createValidAbsoluteUrl;X.fetchData;var KC=X.getDocument;X.getFilenameFromUrl;X.getPdfFilenameFromUrl;X.getXfaPageViewport;X.isDataScheme;X.isPdfFile;X.noContextMenu;X.normalizeUnicode;X.setLayerDimensions;X.shadow;X.version;const QC="/CVEditor/assets/pdf.worker.min-GB3t0DcA.mjs",ZC=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/i,JC=/\bhttps?:\/\/[^\s]+|(?:www\.)[^\s]+\.[a-z]{2,}\b/i,ek=/\b(?:\+44\s?7\d{3}|\(0?7\d{3}\)|0?7\d{3})\s?\d{3}\s?\d{3}\b/,tk=/\b(?:\+44\s?|\(0\)\s?|0)(?:1\d{3}|2\d{2}|3\d{2}|[58]\d{2})\s?\d{3}\s?\d{3,4}\b/,nk=new RegExp(`${ek.source}|${tk.source}`,"i"),GA=/\b([A-Z]{1,2}\d{1,2}[A-Z]?)\s?(\d[A-Z]{2})\b/i,XA=/\b(street|st|road|rd|avenue|ave|lane|ln|close|cl|drive|dr|way|place|pl|court|ct|terrace|terr|crescent|cres|square|sq|gardens|gdns|hill|park|mews)\b/i,ik=/^[0-9]{1,4}[A-Z]?\s+/,tf="(?:jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)[a-z]*",Vf=new RegExp(`\\b${tf}\\s+\\d{4}\\s*(?:|-|to)\\s*(?:present|current|${tf}\\s+\\d{4})`,"i"),V0=/\b\d{4}\s*(?:|-|to)\s*(?:present|current|\d{4})\b/i,G0=new RegExp(`\\b(?:${tf}\\s+)?\\d{4}(?:\\s*-\\s*(?:${tf}\\s+)?\\d{4})?\\b`,"i"),sk=/\b(senior|lead|principal|manager|director|head|chief|specialist|engineer|developer|analyst|consultant|coordinator|supervisor|assistant|intern|trainee)\b/i,rk=/\b(ltd|limited|inc|incorporated|corp|corporation|llc|plc|group|company|co\.|&|and|solutions|services|systems|technologies|consulting)\b/i,kl=/^\s*(?:[-]|(\d+\.)|([a-z]\.))\s+/,ok=[{key:"profile",re:/^\s*(profile|summary|professional summary|about|overview|career summary|personal profile)\s*$/i,priority:10},{key:"experience",re:/^\s*(work experience|experience|employment history|career history|professional experience|work|jobs)\s*$/i,priority:10},{key:"education",re:/^\s*(education|qualifications|academic background|academic qualifications)\s*$/i,priority:9},{key:"projects",re:/^\s*(projects|personal projects|portfolio|key projects)\s*$/i,priority:8},{key:"certs",re:/^\s*(certificates|certifications|professional certifications)\s*$/i,priority:7},{key:"courses",re:/^\s*(courses|training|additional courses|professional development|continuing education)\s*$/i,priority:6}];function fh(n){return(n??"").replace(/\u00a0/g," ").replace(/\s+/g," ").trim()}function ls(n,e){try{const t=n.match(e);return t?t[0].trim():""}catch{return""}}function ak(n){return(n??"").toString().replace(/\r\n/g,`
`).split(`
`).map(e=>(e??"").trim()).filter(Boolean)}function Cy(n){const e=fh(n).toLowerCase();return sk.test(e)||n.length<100&&!/[@.]/.test(n)&&n.split(" ").length<=6&&n.split(" ").length>=2}function lk(n){const e=fh(n);return rk.test(e)||n.includes(",")&&n.length<120||n.length<100&&!kl.test(n)&&!Vf.test(n)}function ck(n){return Vf.test(n)||V0.test(n)||G0.test(n)}function xc(n){return kl.test(n)}function uk(n){const e=fh(n);return e?GA.test(e)||ik.test(e)&&XA.test(e):!1}function hk(n){const e=n.findIndex(o=>uk(o));if(e===-1)return"";const t=3;let i=e,s=e;const r=o=>GA.test(o)||XA.test(o)||/^[A-Za-z ,.'-]{2,40}$/.test(o);for(let o=e-1;o>=0&&i>e-t&&r(n[o]);o--)i=o;for(let o=e+1;o<n.length&&s<e+t&&r(n[o]);o++)s=o;return n.slice(i,s+1).join(`
`)}function dk(n){const e=n.slice(0,5),t=i=>{if(!i||/[@\d]/.test(i)||i.length>60)return!1;const s=i.split(/\s+/).filter(Boolean);return s.length>=2&&s.length<=4&&s.every(r=>/^[A-Z][a-z''-]+$/.test(r))};return e.find(t)||""}function fk(n){const e=[];return n.forEach((t,i)=>{const s=fh(t);ok.forEach(r=>{r.re.test(s)&&e.push({index:i,key:r.key,priority:r.priority,title:s})})}),e.sort((t,i)=>t.priority!==i.priority?i.priority-t.priority:t.index-i.index)}function Go(n,e,t){const i=e.find(a=>a.key===t);if(!i)return[];const s=i.index+1,r=e.find(a=>a.index>i.index),o=r?r.index:n.length;return n.slice(s,o)}function pk(n){return n.join(" ").slice(0,600)}function gk(n){const e=[];let t=null,i=null;return n.forEach((s,r)=>{const o=fh(s);if(o){if(ck(o)){t&&!t.dates&&(t.dates=ls(o,Vf)||ls(o,V0)||ls(o,G0)),i="dates";return}if(xc(o)){t||(t={title:"",company:"",dates:"",description:"",responsibilities:[]});const a=o.replace(kl,"").trim();a&&t.responsibilities.push(a),i="responsibilities";return}if(Cy(o)&&i!=="responsibilities"){t&&(t.title||t.company||t.responsibilities.length>0)&&e.push(t),t={title:o,company:"",dates:"",description:"",responsibilities:[]},i="title";return}if(lk(o)&&i==="title"){t&&(t.company=o,i="company");return}t?i==="company"||i==="dates"?o.length>30&&!Cy(o)&&(t.description?t.description+=" "+o:t.description=o,i="description"):(!i||i==="description")&&(o.length<200&&!t.title?(t.title=o,i="title"):!t.description&&o.length>30?(t.description=o,i="description"):o.length>20&&t.responsibilities.push(o)):(t={title:o,company:"",dates:"",description:"",responsibilities:[]},i="title")}}),t&&(t.title||t.company||t.responsibilities.length>0)&&e.push(t),e.filter(s=>s.title.trim()||s.company.trim()).map(s=>({...s,title:s.title.trim(),company:s.company.trim(),dates:s.dates.trim(),description:s.description.trim(),responsibilities:s.responsibilities.filter(r=>r.trim()).map(r=>r.trim())}))}function mk(n){const e=n.join(" ");return{degree:n.find(t=>/(BSc|MSc|PhD|Bachelor|Master|Degree|Diploma|Certificate)/i.test(t))||"",university:n.find(t=>/(University|College|Institute|School)/i.test(t))||"",dates:ls(e,Vf)||ls(e,V0)||ls(e,G0),grade:n.find(t=>/(First|Second|Upper|Lower|Honours|Honor|Merit|Distinction|GPA|Grade)/i.test(t))||""}}function vk(n){const e=[];let t=null,i=null;for(let s=0;s<n.length;s++){const r=n[s].trim();if(!r)continue;const o=xc(r),a=/technologies?:/i.test(r);if(!o&&!a&&(!t||i==="complete"))t&&(t.title||t.responsibilities.length>0)&&e.push(t),t={title:r,technologies:"",responsibilities:[]},i="title";else if(a)t&&(t.technologies=r.replace(/^technologies?:\s*/i,"").trim(),i="technologies");else if(o){t||(t={title:"",technologies:"",responsibilities:[]});const c=r.replace(kl,"").trim();c&&t.responsibilities.push(c),i="responsibilities"}else t&&i!=="complete"&&r.length>30&&t.responsibilities.push(r)}return t&&(t.title||t.responsibilities.length>0)&&e.push(t),e.filter(s=>s.title.trim()||s.responsibilities.length>0).map(s=>({title:s.title.trim(),technologies:s.technologies.trim(),responsibilities:s.responsibilities.filter(r=>r.trim()).map(r=>r.trim())}))}function yk(n){const e=[];let t=null;for(let s=0;s<n.length;s++){const r=n[s].trim();if(!r)continue;if(!xc(r))t&&t.title&&e.push(t),t={title:r,description:""};else if(t){const a=r.replace(kl,"").trim();a&&(t.description?t.description+=" "+a:t.description=a)}}t&&t.title&&e.push(t);const i=[];for(let s=0;s<n.length;s++){const r=n[s].trim();if(!r)continue;if(!xc(r)&&!r.startsWith(" ")){const a={title:r,description:""},c=[];for(let u=s+1;u<n.length;u++){const h=n[u].trim();if(!h)continue;if(!xc(h)&&!h.startsWith(" ")&&h.length<200&&!(/(certificate|certification|program|course|training)/i.test(a.title)&&/(A comprehensive|program|skills|including)/i.test(h)))break;const f=h.replace(kl,"").trim();f&&c.push(f),s=u}a.description=c.join(" "),i.push(a)}}return i.length>0?i:e}function wk(){return{personalDetails:{name:"",phone:"",address:"",email:"",website:""},profile:"",education:{degree:"",university:"",dates:"",grade:""},workExperience:[],personalProjects:[],certificates:[],courses:""}}const bk={parseCV(n){const e=wk();try{const t=(n??"").toString(),i=ak(t),s=t;e.personalDetails.email=ls(s,ZC),e.personalDetails.phone=ls(s,nk),e.personalDetails.website=ls(s,JC),e.personalDetails.address=hk(i),e.personalDetails.name=dk(i);const r=fk(i),o=Go(i,r,"profile");o.length&&(e.profile=pk(o));const a=Go(i,r,"experience");a.length&&(e.workExperience=gk(a));const c=Go(i,r,"education");c.length&&(e.education=mk(c));const u=Go(i,r,"projects");u.length&&(e.personalProjects=vk(u));const h=Go(i,r,"certs");h.length&&(e.certificates=yk(h));const d=Go(i,r,"courses");return d.length&&(e.courses=d.join("; ")),{success:!0,data:e,message:`Successfully parsed CV. Found ${e.workExperience.length} work experience entries, ${e.personalProjects.length} projects, ${e.certificates.length} certificates.`,debug:{sectionsFound:r.map(f=>({key:f.key,title:f.title})),linesProcessed:i.length}}}catch(t){return console.error("CV parsing error:",t),{success:!0,data:e,message:"Parsed with defaults due to error.",error:t.message}}}};YC.workerSrc=QC;const xk=(n,e,t,i,s,r,o,a)=>{const c=U.useCallback(async d=>{const f=d instanceof ArrayBuffer?d:await d.arrayBuffer(),p=await KC({data:f}).promise,m=[];for(let b=1;b<=p.numPages;b++){const g=await(await p.getPage(b)).getTextContent(),y=new Map,A=2;for(const _ of g.items){const C=(_.str||"").trim();if(!C)continue;const T=_.transform||_.matrix||[],R=typeof T[5]=="number"?T[5]:0,L=Math.round(R/A)*A;y.has(L)||y.set(L,[]),y.get(L).push(C)}const P=Array.from(y.keys()).sort((_,C)=>C-_).map(_=>y.get(_).join(" "));m.push(P.join(`
`))}return m.join(`

`)},[]),u=U.useCallback(()=>{const d=t.filter(E=>!i.includes(E)),f=JSON.stringify({cvData:n,sectionOrder:t,hiddenSections:i,selectedTemplate:e}),p=window.open("","_blank"),b=Io.generateExportHTML(e,n,d).replace("</body>",`<!-- CV_DATA:${btoa(f)}:CV_DATA --></body>`);p.document.open(),p.document.write(b),p.document.close(),p.onload=()=>{p.focus(),p.print()}},[n,e,t,i]);return{importFromFile:U.useCallback(async d=>{var p,m;const f=(m=(p=d==null?void 0:d.target)==null?void 0:p.files)==null?void 0:m[0];if(f)try{let b="";if(f.type==="application/pdf"||f.name.toLowerCase().endsWith(".pdf")){const g=await c(f),y=/CV_DATA:([A-Za-z0-9+/=]+):CV_DATA/,A=g.match(y);if(A)try{const S=JSON.parse(atob(A[1]));if(S.cvData){s(S.cvData),S.sectionOrder&&r(S.sectionOrder),S.hiddenSections&&o(S.hiddenSections),S.selectedTemplate&&a(S.selectedTemplate),alert("CV data imported successfully from exported PDF!"),d.target.value="";return}}catch(S){console.warn("Failed to parse embedded JSON data:",S)}if(b=g,!b||b.trim().length<10){alert("This PDF has no selectable text. Try exporting with selectable text or import a .json/.txt file instead."),d.target.value="";return}}else if(f.type==="text/plain"||f.name.toLowerCase().endsWith(".txt"))b=await f.text();else if(f.name.toLowerCase().endsWith(".json"))try{const g=JSON.parse(await f.text());g.cvData?(s(g.cvData),g.sectionOrder&&r(g.sectionOrder),g.hiddenSections&&o(g.hiddenSections),g.selectedTemplate&&a(g.selectedTemplate)):s(g),alert("CV data imported from JSON file."),d.target.value="";return}catch{alert("Invalid JSON file format."),d.target.value="";return}else{alert("Please upload a PDF, TXT, or JSON file."),d.target.value="";return}const E=bk.parseCV(b);s(E.data),E.message&&alert(`Import completed: ${E.message}`)}catch(b){console.error("Import error:",b),alert(`Error reading file: ${(b==null?void 0:b.message)??"Unknown error"}`)}finally{d!=null&&d.target&&(d.target.value="")}},[c,s,r,o,a]),exportToPDF:u}},Ak=({isDark:n,toggleTheme:e,selectedTemplate:t,setSelectedTemplate:i,availableTemplates:s,editMode:r,setEditMode:o,importFromFile:a,exportToPDF:c})=>k.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[k.jsx("button",{onClick:e,className:`p-2.5 lg:p-3 rounded-lg lg:rounded-xl transition-colors ${n?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,title:`Switch to ${n?"light":"dark"} theme`,children:n?k.jsx(FE,{className:"h-4 w-4 lg:h-5 lg:w-5"}):k.jsx(LE,{className:"h-4 w-4 lg:h-5 lg:w-5"})}),k.jsxs("div",{className:`flex items-center gap-2 rounded-lg lg:rounded-xl px-2.5 lg:px-3 py-2 ${n?"bg-gray-700":"bg-gray-100"}`,children:[k.jsx(ME,{className:`h-4 w-4 ${n?"text-purple-400":"text-purple-600"}`}),k.jsx("select",{value:t,onChange:u=>i(u.target.value),className:`bg-transparent text-xs lg:text-sm font-medium focus:outline-none cursor-pointer min-w-0 ${n?"text-gray-200":"text-gray-700"}`,children:s.map(u=>k.jsx("option",{value:u.value,children:u.label},u.value))})]}),k.jsxs("button",{onClick:()=>o(!r),className:`flex items-center gap-1.5 lg:gap-2 px-3 lg:px-6 py-2.5 lg:py-3 rounded-lg lg:rounded-xl text-xs lg:text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl ${r?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":`bg-gradient-to-r ${n?"from-gray-600 to-gray-700 text-gray-200 hover:from-gray-500 hover:to-gray-600":"from-gray-200 to-gray-300 text-gray-700 hover:from-gray-300 hover:to-gray-400"}`}`,children:[r?k.jsx(P0,{className:"h-3.5 w-3.5 lg:h-4 lg:w-4"}):k.jsx(NE,{className:"h-3.5 w-3.5 lg:h-4 lg:w-4"}),k.jsx("span",{className:"hidden lg:inline",children:r?"Preview Mode":"Edit Mode"})]}),k.jsxs("label",{className:"flex items-center gap-1.5 lg:gap-2 px-2.5 lg:px-6 py-2.5 lg:py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg lg:rounded-xl text-xs lg:text-sm font-medium hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl cursor-pointer min-w-0",children:[k.jsx(DE,{className:"h-3.5 w-3.5 lg:h-4 lg:w-4 flex-shrink-0"}),k.jsx("span",{className:"hidden lg:inline",children:"Import"}),k.jsx("input",{type:"file",accept:".pdf,.txt,.json",onChange:a,className:"hidden"})]}),k.jsxs("button",{onClick:c,className:"flex items-center gap-1.5 lg:gap-2 px-2.5 lg:px-6 py-2.5 lg:py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg lg:rounded-xl text-xs lg:text-sm font-medium hover:from-green-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl min-w-0",children:[k.jsx(TE,{className:"h-3.5 w-3.5 lg:h-4 lg:w-4 flex-shrink-0"}),k.jsx("span",{className:"hidden lg:inline",children:"Export PDF"})]})]}),Sk=({isDark:n,sectionOrder:e,sectionManager:t,visibleSections:i,activeSection:s,setActiveSection:r,toggleSectionVisibility:o,dragDropHook:a,cvData:c})=>{var b,E;const[u,h]=U.useState(!1),d=t.getAllSectionConfigs().map(g=>({id:g.id,name:g.name,icon:g.icon})),f=(g,y)=>{switch(g){case"personal":return y.personalDetails&&(y.personalDetails.name||y.personalDetails.email);case"profile":return typeof y.profile=="string"&&y.profile.trim().length>0;case"experience":return Array.isArray(y.workExperience)&&y.workExperience.length>0;case"projects":return Array.isArray(y.personalProjects)&&y.personalProjects.length>0;case"certificates":return Array.isArray(y.certificates)&&y.certificates.length>0;case"education":return y.education&&(y.education.degree||y.education.university);case"courses":return typeof y.courses=="string"&&y.courses.trim().length>0;default:return!1}},p=e.filter(g=>f(g,c)).length,m=()=>{h(!u)};return k.jsxs("div",{className:`rounded-2xl shadow-xl border transition-all duration-300 ${n?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"} ${u?"p-4":"p-6"}`,children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsxs("h2",{className:`text-lg font-semibold flex items-center gap-2 ${n?"text-gray-100":"text-gray-900"}`,children:[k.jsx(IE,{className:"h-5 w-5"}),"Edit Sections",u&&k.jsxs("span",{className:`text-sm font-normal ${n?"text-gray-400":"text-gray-600"}`,children:["(",p,"/",e.length," sections)"]})]}),k.jsx("button",{onClick:m,className:`p-2 rounded-lg transition-all duration-200 ${n?"hover:bg-gray-700 text-gray-300 hover:text-gray-100":"hover:bg-gray-100 text-gray-600 hover:text-gray-900"}`,title:u?"Expand sections panel":"Collapse sections panel",children:u?k.jsx(CE,{className:"h-5 w-5"}):k.jsx(kE,{className:"h-5 w-5"})})]}),k.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${u?"max-h-0 opacity-0":"max-h-[800px] opacity-100"}`,children:[k.jsx("div",{className:"space-y-2",children:e.map((g,y)=>{var T,R;const A=d.find(L=>L.id===g);if(!A)return null;const S=i.includes(g),P=f(g,c),_=(T=Xl[g])==null?void 0:T.required,C=s===g;return k.jsxs("div",{...a.getDropProps(y),className:`
                  relative transition-all duration-300
                  ${a.dragOverIndex===y?`transform scale-105 ${n?"bg-purple-900/20":"bg-purple-50"}`:""}
                `,children:[k.jsxs("div",{...a.getDragProps(g,y),className:`
                    flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 cursor-move
                    ${C?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":`${n?"bg-gray-700/80 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`}
                    ${S?"":"opacity-60"}
                    ${P?"":"border-l-4 border-orange-400"}
                    ${((R=a.draggedItem)==null?void 0:R.index)===y?"opacity-50 scale-95":""}
                  `,onClick:()=>r(g),children:[k.jsx(Df,{className:"h-4 w-4 text-current opacity-60"}),k.jsx("span",{className:"text-base",children:A.icon}),k.jsx("div",{className:"flex-1",children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{children:A.name}),!P&&!C&&k.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-600"}`,children:"Empty"}),_&&!C&&k.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600"}`,children:"Required"})]})}),k.jsx("button",{onClick:L=>{L.stopPropagation(),o(g)},disabled:_,className:`
                      p-1 rounded-lg transition-colors
                      ${_?"opacity-50 cursor-not-allowed":"hover:bg-white/20"}
                      ${S?"text-green-400":"text-gray-400"}
                    `,title:_?"Required section cannot be hidden":S?"Hide section":"Show section",children:S?k.jsx(P0,{className:"h-4 w-4"}):k.jsx(PE,{className:"h-4 w-4"})})]}),a.dragOverIndex===y&&k.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-dashed border-purple-500 pointer-events-none"})]},g)})}),k.jsx("div",{className:`mt-4 p-3 rounded-lg border ${n?"bg-blue-900/20 border-blue-700 text-blue-300":"bg-blue-50 border-blue-200 text-blue-700"}`,children:k.jsx("p",{className:"text-sm",children:"Drag sections to reorder  Orange border = empty section  Eye icon = show/hide"})})]}),u&&k.jsx("div",{className:`mt-2 text-sm ${n?"text-gray-400":"text-gray-600"}`,children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"text-base",children:(b=d.find(g=>g.id===s))==null?void 0:b.icon}),k.jsxs("span",{children:["Currently editing: ",(E=d.find(g=>g.id===s))==null?void 0:E.name]})]})})]})},Ai=(n=!1)=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 text-sm ${n?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,Bc=(n=!1)=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-sm ${n?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,ph=()=>document.documentElement.classList.contains("dark"),Ek=({workExperience:n,onAdd:e,onUpdate:t,onRemove:i,onAddResponsibility:s,onUpdateResponsibility:r,onRemoveResponsibility:o})=>{const a=ph();return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Work Experience"}),k.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[k.jsx(R0,{className:"h-4 w-4"}),"Add Job"]})]}),n.map((c,u)=>k.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${a?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Df,{className:"h-5 w-5 text-gray-400"}),k.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Job #",u+1]})]}),k.jsx("button",{onClick:()=>i(u),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:k.jsx(L0,{className:"h-4 w-4"})})]}),k.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[k.jsx("input",{type:"text",value:c.title,onChange:h=>t(u,"title",h.target.value),placeholder:"Job Title",className:Ai(a)}),k.jsx("input",{type:"text",value:c.company,onChange:h=>t(u,"company",h.target.value),placeholder:"Company",className:Ai(a)}),k.jsx("input",{type:"text",value:c.dates,onChange:h=>t(u,"dates",h.target.value),placeholder:"Employment Dates",className:Ai(a)}),k.jsx("textarea",{value:c.description,onChange:h=>t(u,"description",h.target.value),placeholder:"Company Description",rows:"2",className:Bc(a)})]}),k.jsxs("div",{className:"mt-4",children:[k.jsxs("div",{className:"flex items-center justify-between mb-3",children:[k.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Responsibilities:"}),k.jsx("button",{onClick:()=>s(u),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),c.responsibilities.map((h,d)=>k.jsxs("div",{className:"flex gap-2 mb-3",children:[k.jsx("textarea",{value:h,onChange:f=>r(u,d,f.target.value),placeholder:"Responsibility description...",rows:"2",className:Bc(a)+" text-sm"}),k.jsx("button",{onClick:()=>o(u,d),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},d))]})]},u))]})},_k=({personalProjects:n,onAdd:e,onUpdate:t,onRemove:i,onAddResponsibility:s,onUpdateResponsibility:r,onRemoveResponsibility:o})=>{const a=ph();return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Projects"}),k.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[k.jsx(R0,{className:"h-4 w-4"}),"Add Project"]})]}),n.map((c,u)=>k.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${a?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Df,{className:"h-5 w-5 text-gray-400"}),k.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Project #",u+1]})]}),k.jsx("button",{onClick:()=>i(u),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:k.jsx(L0,{className:"h-4 w-4"})})]}),k.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[k.jsx("input",{type:"text",value:c.title,onChange:h=>t(u,"title",h.target.value),placeholder:"Project Title",className:Ai(a)}),k.jsx("input",{type:"text",value:c.technologies,onChange:h=>t(u,"technologies",h.target.value),placeholder:"Technologies Used",className:Ai(a)})]}),k.jsxs("div",{className:"mt-4",children:[k.jsxs("div",{className:"flex items-center justify-between mb-3",children:[k.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Project Details:"}),k.jsx("button",{onClick:()=>s(u),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),c.responsibilities.map((h,d)=>k.jsxs("div",{className:"flex gap-2 mb-3",children:[k.jsx("textarea",{value:h,onChange:f=>r(u,d,f.target.value),placeholder:"Project detail description...",rows:"2",className:Bc(a)+" text-sm"}),k.jsx("button",{onClick:()=>o(u,d),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},d))]})]},u))]})},Ck=({certificates:n,onAdd:e,onUpdate:t,onRemove:i})=>{const s=ph();return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Certificates"}),k.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[k.jsx(R0,{className:"h-4 w-4"}),"Add Certificate"]})]}),n.map((r,o)=>k.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${s?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Df,{className:"h-5 w-5 text-gray-400"}),k.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Certificate #",o+1]})]}),k.jsx("button",{onClick:()=>i(o),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:k.jsx(L0,{className:"h-4 w-4"})})]}),k.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[k.jsx("input",{type:"text",value:r.title,onChange:a=>t(o,"title",a.target.value),placeholder:"Certificate Title",className:Ai(s)}),k.jsx("textarea",{value:r.description,onChange:a=>t(o,"description",a.target.value),placeholder:"Certificate Description",rows:"3",className:Bc(s)})]})]},o))]})},kk=({education:n,onUpdate:e})=>{const t=ph();return k.jsxs("div",{className:"space-y-6",children:[k.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Education"}),k.jsx("div",{className:`p-6 rounded-2xl border shadow-lg ${t?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:k.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Degree"}),k.jsx("input",{type:"text",value:n.degree,onChange:i=>e("degree",i.target.value),placeholder:"Degree Title",className:Ai(t)})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"University"}),k.jsx("input",{type:"text",value:n.university,onChange:i=>e("university",i.target.value),placeholder:"University Name",className:Ai(t)})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dates"}),k.jsx("input",{type:"text",value:n.dates,onChange:i=>e("dates",i.target.value),placeholder:"Study Period",className:Ai(t)})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grade/Classification"}),k.jsx("input",{type:"text",value:n.grade,onChange:i=>e("grade",i.target.value),placeholder:"Grade or Classification",className:Ai(t)})]})]})})]})},Tk=({courses:n,onUpdate:e})=>{const t=ph();return k.jsxs("div",{className:"space-y-6",children:[k.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Additional Courses"}),k.jsx("div",{className:`p-6 rounded-2xl border shadow-lg ${t?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Courses Information"}),k.jsx("textarea",{value:n,onChange:i=>e(i.target.value),rows:"4",className:Bc(t),placeholder:"Information about additional courses, training, or qualifications..."})]})})]})},Pk=({personalDetails:n,onUpdate:e,isDark:t})=>{const i=()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 text-base ${t?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,s=()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-base ${t?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`;return k.jsxs("div",{className:"space-y-6",children:[k.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Details"}),k.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),k.jsx("input",{type:"text",value:n.name,onChange:r=>e("name",r.target.value),className:i()})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),k.jsx("input",{type:"text",value:n.phone,onChange:r=>e("phone",r.target.value),className:i()})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address"}),k.jsx("textarea",{value:n.address,onChange:r=>e("address",r.target.value),rows:"3",className:s()})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),k.jsx("input",{type:"email",value:n.email,onChange:r=>e("email",r.target.value),className:i()})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),k.jsx("input",{type:"text",value:n.website,onChange:r=>e("website",r.target.value),className:i()})]})]})]})},Rk=({profile:n,onUpdate:e,isDark:t})=>{const i=()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-base ${t?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`;return k.jsxs("div",{className:"space-y-6",children:[k.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Professional Profile"}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Profile Description"}),k.jsx("textarea",{value:n,onChange:s=>e(s.target.value),rows:"8",className:i(),placeholder:"Write your professional profile here..."})]})]})},Lk=({isDark:n,activeSection:e,cvData:t,cvDataActions:i})=>{const s=()=>{switch(e){case"personal":return k.jsx(Pk,{personalDetails:t.personalDetails,onUpdate:i.updatePersonalDetails,isDark:n});case"profile":return k.jsx(Rk,{profile:t.profile,onUpdate:i.updateProfile,isDark:n});case"experience":return k.jsx(Ek,{workExperience:t.workExperience,onAdd:i.addWorkExperience,onUpdate:i.updateWorkExperience,onRemove:i.removeWorkExperience,onAddResponsibility:i.addResponsibility,onUpdateResponsibility:i.updateResponsibility,onRemoveResponsibility:i.removeResponsibility});case"projects":return k.jsx(_k,{personalProjects:t.personalProjects,onAdd:i.addPersonalProject,onUpdate:i.updatePersonalProject,onRemove:i.removePersonalProject,onAddResponsibility:i.addProjectResponsibility,onUpdateResponsibility:i.updateProjectResponsibility,onRemoveResponsibility:i.removeProjectResponsibility});case"certificates":return k.jsx(Ck,{certificates:t.certificates,onAdd:i.addCertificate,onUpdate:i.updateCertificate,onRemove:i.removeCertificate});case"education":return k.jsx(kk,{education:t.education,onUpdate:i.updateEducation});case"courses":return k.jsx(Tk,{courses:t.courses,onUpdate:i.updateCourses});default:return k.jsx("div",{className:"text-center py-8",children:k.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Select a section to edit"})})}};return k.jsx("div",{className:`rounded-2xl shadow-xl p-6 border ${n?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:s()})},Mk=({isDark:n,generatePreviewHTML:e})=>k.jsxs("div",{className:`rounded-2xl shadow-xl border overflow-hidden ${n?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:[k.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-4",children:k.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[k.jsx(P0,{className:"h-5 w-5"}),"Live Preview"]})}),k.jsx("div",{className:"max-h-screen overflow-y-auto",children:k.jsx("div",{className:`cv-preview ${n?"dark-theme":"light-theme"} transition-colors duration-300`,style:{width:"100%",maxWidth:"100%"},dangerouslySetInnerHTML:{__html:e()}})})]}),Nk=()=>{const[n,e]=U.useState(!0),[t,i]=U.useState("plain-professional"),[s,r]=U.useState("personal"),[o,a]=U.useState(Hb),[c,u]=U.useState([]),{toggleTheme:h,isDark:d}=WE();U.useRef();const f=U.useMemo(()=>new UE(o),[o]),{cvData:p,...m}=GE(BE),{importFromFile:b,exportToPDF:E}=xk(p,t,o,c,m.setCvData,a,u,i),g=U.useMemo(()=>Io.getTemplateOptions(),[]),A=VE(o,C=>{a(C)}),S=U.useMemo(()=>o.filter(C=>!c.includes(C)),[o,c]),P=C=>{const T=f.getSectionConfig(C);T!=null&&T.required||u(R=>R.includes(C)?R.filter(L=>L!==C):[...R,C])},_=()=>{const C=Io.generateHTML(t,p,d?"dark":"light",S),T=C.match(/<style[^>]*>([\s\S]*?)<\/style>/),R=C.match(/<body[^>]*>([\s\S]*?)<\/body>/),L=T?T[1]:"",D=R?R[1]:C;return`
      <style>
        /* --- Neutral preview baseline (scoped to preview only) --- */
        .cv-preview .cv-container {
          box-sizing: border-box !important;
          margin: 0 auto !important;  
          text-align: initial !important; /* fence off any global alignments */
        }
      </style>
  
      <style>
        ${L}  /* template CSS overrides the neutral baseline */
      </style>
  
     ${D}
    `};return k.jsxs("div",{className:`min-h-screen w-full transition-colors duration-300 ${d?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:[k.jsx("div",{className:`shadow-xl border-b sticky top-0 z-50 backdrop-blur-xl ${d?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:k.jsx("div",{className:"w-full max-w-none px-6 py-4",children:k.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[k.jsxs("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center gap-3",children:[k.jsx(RE,{className:"h-8 w-8 text-purple-600"}),"CV Editor Pro"]}),k.jsx(Ak,{isDark:d,toggleTheme:h,selectedTemplate:t,setSelectedTemplate:i,availableTemplates:g,editMode:n,setEditMode:e,importFromFile:b,exportToPDF:E})]})})}),k.jsx("div",{className:"w-full max-w-none px-6 py-8",children:k.jsxs("div",{className:`grid gap-8 ${n?"grid-cols-1 lg:grid-cols-12":"grid-cols-1"}`,children:[n&&k.jsxs("div",{className:"col-span-1 lg:col-span-5 space-y-6",children:[k.jsx(Sk,{isDark:d,sectionOrder:o,sectionManager:f,visibleSections:S,activeSection:s,setActiveSection:r,toggleSectionVisibility:P,dragDropHook:A,cvData:p}),k.jsx(Lk,{isDark:d,activeSection:s,cvData:p,cvDataActions:m})]}),k.jsx("div",{className:`${n?"hidden lg:block lg:col-span-7":"lg:col-span-12"}`,children:k.jsx(Mk,{isDark:d,generatePreviewHTML:_})})]})})]})};function Ik(){return k.jsx("div",{className:"App",children:k.jsx(Nk,{})})}zb(document.getElementById("root")).render(k.jsx(U.StrictMode,{children:k.jsx(Ik,{})}));
