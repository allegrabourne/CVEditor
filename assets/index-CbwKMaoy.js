var Ux=Object.defineProperty;var H0=n=>{throw TypeError(n)};var $x=(n,e,t)=>e in n?Ux(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>$x(n,typeof e!="symbol"?e+"":e,t),Of=(n,e,t)=>e.has(n)||H0("Cannot "+t);var l=(n,e,t)=>(Of(n,e,"read from private field"),t?t.call(n):e.get(n)),b=(n,e,t)=>e.has(n)?H0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),m=(n,e,t,i)=>(Of(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),y=(n,e,t)=>(Of(n,e,"access private method"),t);var Et=(n,e,t,i)=>({set _(s){m(n,e,s,t)},get _(){return l(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var xv={exports:{}},df={},Sv={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=Symbol.for("react.element"),Wx=Symbol.for("react.portal"),Vx=Symbol.for("react.fragment"),Gx=Symbol.for("react.strict_mode"),Xx=Symbol.for("react.profiler"),qx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),Kx=Symbol.for("react.forward_ref"),Qx=Symbol.for("react.suspense"),Zx=Symbol.for("react.memo"),Jx=Symbol.for("react.lazy"),B0=Symbol.iterator;function e1(n){return n===null||typeof n!="object"?null:(n=B0&&n[B0]||n["@@iterator"],typeof n=="function"?n:null)}var _v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ev=Object.assign,kv={};function Cl(n,e,t){this.props=n,this.context=e,this.refs=kv,this.updater=t||_v}Cl.prototype.isReactComponent={};Cl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Cl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Cv(){}Cv.prototype=Cl.prototype;function Rm(n,e,t){this.props=n,this.context=e,this.refs=kv,this.updater=t||_v}var Lm=Rm.prototype=new Cv;Lm.constructor=Rm;Ev(Lm,Cl.prototype);Lm.isPureReactComponent=!0;var U0=Array.isArray,Tv=Object.prototype.hasOwnProperty,Mm={current:null},Pv={key:!0,ref:!0,__self:!0,__source:!0};function Rv(n,e,t){var i,s={},r=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)Tv.call(e,i)&&!Pv.hasOwnProperty(i)&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return{$$typeof:Ju,type:n,key:r,ref:a,props:s,_owner:Mm.current}}function t1(n,e){return{$$typeof:Ju,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Im(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ju}function n1(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $0=/\/+/g;function jf(n,e){return typeof n=="object"&&n!==null&&n.key!=null?n1(""+n.key):e.toString(36)}function Lh(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Ju:case Wx:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+jf(a,0):i,U0(s)?(t="",n!=null&&(t=n.replace($0,"$&/")+"/"),Lh(s,e,t,"",function(u){return u})):s!=null&&(Im(s)&&(s=t1(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace($0,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",U0(n))for(var o=0;o<n.length;o++){r=n[o];var c=i+jf(r,o);a+=Lh(r,e,t,c,s)}else if(c=e1(n),typeof c=="function")for(n=c.call(n),o=0;!(r=n.next()).done;)r=r.value,c=i+jf(r,o++),a+=Lh(r,e,t,c,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function lh(n,e,t){if(n==null)return n;var i=[],s=0;return Lh(n,i,"","",function(r){return e.call(t,r,s++)}),i}function i1(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Nt={current:null},Mh={transition:null},s1={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Mh,ReactCurrentOwner:Mm};function Lv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:lh,forEach:function(n,e,t){lh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return lh(n,function(){e++}),e},toArray:function(n){return lh(n,function(e){return e})||[]},only:function(n){if(!Im(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ne.Component=Cl;ne.Fragment=Vx;ne.Profiler=Xx;ne.PureComponent=Rm;ne.StrictMode=Gx;ne.Suspense=Qx;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s1;ne.act=Lv;ne.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Ev({},n.props),s=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=Mm.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in e)Tv.call(e,c)&&!Pv.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:Ju,type:n.type,key:s,ref:r,props:i,_owner:a}};ne.createContext=function(n){return n={$$typeof:Yx,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:qx,_context:n},n.Consumer=n};ne.createElement=Rv;ne.createFactory=function(n){var e=Rv.bind(null,n);return e.type=n,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(n){return{$$typeof:Kx,render:n}};ne.isValidElement=Im;ne.lazy=function(n){return{$$typeof:Jx,_payload:{_status:-1,_result:n},_init:i1}};ne.memo=function(n,e){return{$$typeof:Zx,type:n,compare:e===void 0?null:e}};ne.startTransition=function(n){var e=Mh.transition;Mh.transition={};try{n()}finally{Mh.transition=e}};ne.unstable_act=Lv;ne.useCallback=function(n,e){return Nt.current.useCallback(n,e)};ne.useContext=function(n){return Nt.current.useContext(n)};ne.useDebugValue=function(){};ne.useDeferredValue=function(n){return Nt.current.useDeferredValue(n)};ne.useEffect=function(n,e){return Nt.current.useEffect(n,e)};ne.useId=function(){return Nt.current.useId()};ne.useImperativeHandle=function(n,e,t){return Nt.current.useImperativeHandle(n,e,t)};ne.useInsertionEffect=function(n,e){return Nt.current.useInsertionEffect(n,e)};ne.useLayoutEffect=function(n,e){return Nt.current.useLayoutEffect(n,e)};ne.useMemo=function(n,e){return Nt.current.useMemo(n,e)};ne.useReducer=function(n,e,t){return Nt.current.useReducer(n,e,t)};ne.useRef=function(n){return Nt.current.useRef(n)};ne.useState=function(n){return Nt.current.useState(n)};ne.useSyncExternalStore=function(n,e,t){return Nt.current.useSyncExternalStore(n,e,t)};ne.useTransition=function(){return Nt.current.useTransition()};ne.version="18.3.1";Sv.exports=ne;var Kn=Sv.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1=Kn,a1=Symbol.for("react.element"),o1=Symbol.for("react.fragment"),l1=Object.prototype.hasOwnProperty,c1=r1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u1={key:!0,ref:!0,__self:!0,__source:!0};function Mv(n,e,t){var i,s={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)l1.call(e,i)&&!u1.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:a1,type:n,key:r,ref:a,props:s,_owner:c1.current}}df.Fragment=o1;df.jsx=Mv;df.jsxs=Mv;xv.exports=df;var P=xv.exports,Iv={exports:{}},fn={},Nv={exports:{}},Fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(E,M){var I=E.length;E.push(M);e:for(;0<I;){var z=I-1>>>1,V=E[z];if(0<s(V,M))E[z]=M,E[I]=V,I=z;else break e}}function t(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var M=E[0],I=E.pop();if(I!==M){E[0]=I;e:for(var z=0,V=E.length,Q=V>>>1;z<Q;){var de=2*(z+1)-1,Dt=E[de],be=de+1,oe=E[be];if(0>s(Dt,I))be<V&&0>s(oe,Dt)?(E[z]=oe,E[be]=I,z=be):(E[z]=Dt,E[de]=I,z=de);else if(be<V&&0>s(oe,I))E[z]=oe,E[be]=I,z=be;else break e}}return M}function s(E,M){var I=E.sortIndex-M.sortIndex;return I!==0?I:E.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,f=3,p=!1,v=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(E){for(var M=t(u);M!==null;){if(M.callback===null)i(u);else if(M.startTime<=E)i(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=t(u)}}function S(E){if(A=!1,x(E),!v)if(t(c)!==null)v=!0,he(k);else{var M=t(u);M!==null&&T(S,M.startTime-E)}}function k(E,M){v=!1,A&&(A=!1,g(L),L=-1),p=!0;var I=f;try{for(x(M),d=t(c);d!==null&&(!(d.expirationTime>M)||E&&!U());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var V=z(d.expirationTime<=M);M=n.unstable_now(),typeof V=="function"?d.callback=V:d===t(c)&&i(c),x(M)}else i(c);d=t(c)}if(d!==null)var Q=!0;else{var de=t(u);de!==null&&T(S,de.startTime-M),Q=!1}return Q}finally{d=null,f=I,p=!1}}var C=!1,R=null,L=-1,D=5,j=-1;function U(){return!(n.unstable_now()-j<D)}function ie(){if(R!==null){var E=n.unstable_now();j=E;var M=!0;try{M=R(!0,E)}finally{M?J():(C=!1,R=null)}}else C=!1}var J;if(typeof w=="function")J=function(){w(ie)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ce=ae.port2;ae.port1.onmessage=ie,J=function(){ce.postMessage(null)}}else J=function(){_(ie,0)};function he(E){R=E,C||(C=!0,J())}function T(E,M){L=_(function(){E(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(E){E.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,he(k))},n.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<E?Math.floor(1e3/E):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(E){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var I=f;f=M;try{return E()}finally{f=I}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(E,M){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var I=f;f=E;try{return M()}finally{f=I}},n.unstable_scheduleCallback=function(E,M,I){var z=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?z+I:z):I=z,E){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=I+V,E={id:h++,callback:M,priorityLevel:E,startTime:I,expirationTime:V,sortIndex:-1},I>z?(E.sortIndex=I,e(u,E),t(c)===null&&E===t(u)&&(A?(g(L),L=-1):A=!0,T(S,I-z))):(E.sortIndex=V,e(c,E),v||p||(v=!0,he(k))),E},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(E){var M=f;return function(){var I=f;f=M;try{return E.apply(this,arguments)}finally{f=I}}}})(Fv);Nv.exports=Fv;var h1=Nv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1=Kn,dn=h1;function N(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dv=new Set,wc={};function za(n,e){bl(n,e),bl(n+"Capture",e)}function bl(n,e){for(wc[n]=e,n=0;n<e.length;n++)Dv.add(e[n])}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wp=Object.prototype.hasOwnProperty,f1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W0={},V0={};function p1(n){return wp.call(V0,n)?!0:wp.call(W0,n)?!1:f1.test(n)?V0[n]=!0:(W0[n]=!0,!1)}function g1(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function m1(n,e,t,i){if(e===null||typeof e>"u"||g1(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(n,e,t,i,s,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ft[n]=new Ft(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ft[e]=new Ft(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ft[n]=new Ft(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ft[n]=new Ft(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ft[n]=new Ft(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ft[n]=new Ft(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ft[n]=new Ft(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ft[n]=new Ft(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ft[n]=new Ft(n,5,!1,n.toLowerCase(),null,!1,!1)});var Nm=/[\-:]([a-z])/g;function Fm(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Nm,Fm);ft[e]=new Ft(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Nm,Fm);ft[e]=new Ft(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Nm,Fm);ft[e]=new Ft(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ft[n]=new Ft(n,1,!1,n.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ft[n]=new Ft(n,1,!1,n.toLowerCase(),null,!0,!0)});function Dm(n,e,t,i){var s=ft.hasOwnProperty(e)?ft[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(m1(e,t,s,i)&&(t=null),i||s===null?p1(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var gs=d1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ch=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),Om=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),Ov=Symbol.for("react.provider"),jv=Symbol.for("react.context"),jm=Symbol.for("react.forward_ref"),Ap=Symbol.for("react.suspense"),xp=Symbol.for("react.suspense_list"),zm=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),zv=Symbol.for("react.offscreen"),G0=Symbol.iterator;function Rl(n){return n===null||typeof n!="object"?null:(n=G0&&n[G0]||n["@@iterator"],typeof n=="function"?n:null)}var Ne=Object.assign,zf;function Bl(n){if(zf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);zf=e&&e[1]||""}return`
`+zf+n}var Hf=!1;function Bf(n,e){if(!n||Hf)return"";Hf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==r[o]){var c=`
`+s[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{Hf=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Bl(n):""}function y1(n){switch(n.tag){case 5:return Bl(n.type);case 16:return Bl("Lazy");case 13:return Bl("Suspense");case 19:return Bl("SuspenseList");case 0:case 2:case 15:return n=Bf(n.type,!1),n;case 11:return n=Bf(n.type.render,!1),n;case 1:return n=Bf(n.type,!0),n;default:return""}}function Sp(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case to:return"Fragment";case eo:return"Portal";case bp:return"Profiler";case Om:return"StrictMode";case Ap:return"Suspense";case xp:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case jv:return(n.displayName||"Context")+".Consumer";case Ov:return(n._context.displayName||"Context")+".Provider";case jm:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case zm:return e=n.displayName||null,e!==null?e:Sp(n.type)||"Memo";case bs:e=n._payload,n=n._init;try{return Sp(n(e))}catch{}}return null}function v1(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sp(e);case 8:return e===Om?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hv(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w1(n){var e=Hv(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function uh(n){n._valueTracker||(n._valueTracker=w1(n))}function Bv(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Hv(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function wd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function _p(n,e){var t=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function X0(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=lr(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Uv(n,e){e=e.checked,e!=null&&Dm(n,"checked",e,!1)}function Ep(n,e){Uv(n,e);var t=lr(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?kp(n,e.type,t):e.hasOwnProperty("defaultValue")&&kp(n,e.type,lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function q0(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function kp(n,e,t){(e!=="number"||wd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ul=Array.isArray;function po(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+lr(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Cp(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Y0(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(N(92));if(Ul(t)){if(1<t.length)throw Error(N(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:lr(t)}}function $v(n,e){var t=lr(e.value),i=lr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function K0(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Wv(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tp(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Wv(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hh,Vv=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(hh=hh||document.createElement("div"),hh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function bc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var oc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b1=["Webkit","ms","Moz","O"];Object.keys(oc).forEach(function(n){b1.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),oc[e]=oc[n]})});function Gv(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||oc.hasOwnProperty(n)&&oc[n]?(""+e).trim():e+"px"}function Xv(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=Gv(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var A1=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pp(n,e){if(e){if(A1[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Rp(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lp=null;function Hm(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mp=null,go=null,mo=null;function Q0(n){if(n=nh(n)){if(typeof Mp!="function")throw Error(N(280));var e=n.stateNode;e&&(e=yf(e),Mp(n.stateNode,n.type,e))}}function qv(n){go?mo?mo.push(n):mo=[n]:go=n}function Yv(){if(go){var n=go,e=mo;if(mo=go=null,Q0(n),e)for(n=0;n<e.length;n++)Q0(e[n])}}function Kv(n,e){return n(e)}function Qv(){}var Uf=!1;function Zv(n,e,t){if(Uf)return n(e,t);Uf=!0;try{return Kv(n,e,t)}finally{Uf=!1,(go!==null||mo!==null)&&(Qv(),Yv())}}function Ac(n,e){var t=n.stateNode;if(t===null)return null;var i=yf(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(N(231,e,typeof t));return t}var Ip=!1;if(cs)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){Ip=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{Ip=!1}function x1(n,e,t,i,s,r,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var lc=!1,bd=null,Ad=!1,Np=null,S1={onError:function(n){lc=!0,bd=n}};function _1(n,e,t,i,s,r,a,o,c){lc=!1,bd=null,x1.apply(S1,arguments)}function E1(n,e,t,i,s,r,a,o,c){if(_1.apply(this,arguments),lc){if(lc){var u=bd;lc=!1,bd=null}else throw Error(N(198));Ad||(Ad=!0,Np=u)}}function Ha(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Jv(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Z0(n){if(Ha(n)!==n)throw Error(N(188))}function k1(n){var e=n.alternate;if(!e){if(e=Ha(n),e===null)throw Error(N(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return Z0(s),n;if(r===i)return Z0(s),e;r=r.sibling}throw Error(N(188))}if(t.return!==i.return)t=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a)throw Error(N(189))}}if(t.alternate!==i)throw Error(N(190))}if(t.tag!==3)throw Error(N(188));return t.stateNode.current===t?n:e}function ew(n){return n=k1(n),n!==null?tw(n):null}function tw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=tw(n);if(e!==null)return e;n=n.sibling}return null}var nw=dn.unstable_scheduleCallback,J0=dn.unstable_cancelCallback,C1=dn.unstable_shouldYield,T1=dn.unstable_requestPaint,je=dn.unstable_now,P1=dn.unstable_getCurrentPriorityLevel,Bm=dn.unstable_ImmediatePriority,iw=dn.unstable_UserBlockingPriority,xd=dn.unstable_NormalPriority,R1=dn.unstable_LowPriority,sw=dn.unstable_IdlePriority,ff=null,Si=null;function L1(n){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(ff,n,void 0,(n.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:N1,M1=Math.log,I1=Math.LN2;function N1(n){return n>>>=0,n===0?32:31-(M1(n)/I1|0)|0}var dh=64,fh=4194304;function $l(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Sd(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?i=$l(o):(r&=a,r!==0&&(i=$l(r)))}else a=t&~s,a!==0?i=$l(a):r!==0&&(i=$l(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Zn(e),s=1<<t,i|=n[t],e&=~s;return i}function F1(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D1(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-Zn(r),o=1<<a,c=s[a];c===-1?(!(o&t)||o&i)&&(s[a]=F1(o,e)):c<=e&&(n.expiredLanes|=o),r&=~o}}function Fp(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function rw(){var n=dh;return dh<<=1,!(dh&4194240)&&(dh=64),n}function $f(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function eh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Zn(e),n[e]=t}function O1(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Zn(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function Um(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Zn(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var ye=0;function aw(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ow,$m,lw,cw,uw,Dp=!1,ph=[],er=null,tr=null,nr=null,xc=new Map,Sc=new Map,xs=[],j1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ey(n,e){switch(n){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":xc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(e.pointerId)}}function Ml(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=nh(e),e!==null&&$m(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function z1(n,e,t,i,s){switch(e){case"focusin":return er=Ml(er,n,e,t,i,s),!0;case"dragenter":return tr=Ml(tr,n,e,t,i,s),!0;case"mouseover":return nr=Ml(nr,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return xc.set(r,Ml(xc.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Sc.set(r,Ml(Sc.get(r)||null,n,e,t,i,s)),!0}return!1}function hw(n){var e=Cr(n.target);if(e!==null){var t=Ha(e);if(t!==null){if(e=t.tag,e===13){if(e=Jv(t),e!==null){n.blockedOn=e,uw(n.priority,function(){lw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ih(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Op(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Lp=i,t.target.dispatchEvent(i),Lp=null}else return e=nh(t),e!==null&&$m(e),n.blockedOn=t,!1;e.shift()}return!0}function ty(n,e,t){Ih(n)&&t.delete(e)}function H1(){Dp=!1,er!==null&&Ih(er)&&(er=null),tr!==null&&Ih(tr)&&(tr=null),nr!==null&&Ih(nr)&&(nr=null),xc.forEach(ty),Sc.forEach(ty)}function Il(n,e){n.blockedOn===e&&(n.blockedOn=null,Dp||(Dp=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,H1)))}function _c(n){function e(s){return Il(s,n)}if(0<ph.length){Il(ph[0],n);for(var t=1;t<ph.length;t++){var i=ph[t];i.blockedOn===n&&(i.blockedOn=null)}}for(er!==null&&Il(er,n),tr!==null&&Il(tr,n),nr!==null&&Il(nr,n),xc.forEach(e),Sc.forEach(e),t=0;t<xs.length;t++)i=xs[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<xs.length&&(t=xs[0],t.blockedOn===null);)hw(t),t.blockedOn===null&&xs.shift()}var yo=gs.ReactCurrentBatchConfig,_d=!0;function B1(n,e,t,i){var s=ye,r=yo.transition;yo.transition=null;try{ye=1,Wm(n,e,t,i)}finally{ye=s,yo.transition=r}}function U1(n,e,t,i){var s=ye,r=yo.transition;yo.transition=null;try{ye=4,Wm(n,e,t,i)}finally{ye=s,yo.transition=r}}function Wm(n,e,t,i){if(_d){var s=Op(n,e,t,i);if(s===null)Jf(n,e,i,Ed,t),ey(n,i);else if(z1(s,n,e,t,i))i.stopPropagation();else if(ey(n,i),e&4&&-1<j1.indexOf(n)){for(;s!==null;){var r=nh(s);if(r!==null&&ow(r),r=Op(n,e,t,i),r===null&&Jf(n,e,i,Ed,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else Jf(n,e,i,null,t)}}var Ed=null;function Op(n,e,t,i){if(Ed=null,n=Hm(i),n=Cr(n),n!==null)if(e=Ha(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Jv(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ed=n,null}function dw(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P1()){case Bm:return 1;case iw:return 4;case xd:case R1:return 16;case sw:return 536870912;default:return 16}default:return 16}}var Zs=null,Vm=null,Nh=null;function fw(){if(Nh)return Nh;var n,e=Vm,t=e.length,i,s="value"in Zs?Zs.value:Zs.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===s[r-i];i++);return Nh=s.slice(n,1<i?1-i:void 0)}function Fh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function gh(){return!0}function ny(){return!1}function pn(n){function e(t,i,s,r,a){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?gh:ny,this.isPropagationStopped=ny,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=gh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=gh)},persist:function(){},isPersistent:gh}),e}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gm=pn(Tl),th=Ne({},Tl,{view:0,detail:0}),$1=pn(th),Wf,Vf,Nl,pf=Ne({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xm,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nl&&(Nl&&n.type==="mousemove"?(Wf=n.screenX-Nl.screenX,Vf=n.screenY-Nl.screenY):Vf=Wf=0,Nl=n),Wf)},movementY:function(n){return"movementY"in n?n.movementY:Vf}}),iy=pn(pf),W1=Ne({},pf,{dataTransfer:0}),V1=pn(W1),G1=Ne({},th,{relatedTarget:0}),Gf=pn(G1),X1=Ne({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),q1=pn(X1),Y1=Ne({},Tl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),K1=pn(Y1),Q1=Ne({},Tl,{data:0}),sy=pn(Q1),Z1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tS(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=eS[n])?!!e[n]:!1}function Xm(){return tS}var nS=Ne({},th,{key:function(n){if(n.key){var e=Z1[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Fh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?J1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xm,charCode:function(n){return n.type==="keypress"?Fh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),iS=pn(nS),sS=Ne({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ry=pn(sS),rS=Ne({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xm}),aS=pn(rS),oS=Ne({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),lS=pn(oS),cS=Ne({},pf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uS=pn(cS),hS=[9,13,27,32],qm=cs&&"CompositionEvent"in window,cc=null;cs&&"documentMode"in document&&(cc=document.documentMode);var dS=cs&&"TextEvent"in window&&!cc,pw=cs&&(!qm||cc&&8<cc&&11>=cc),ay=" ",oy=!1;function gw(n,e){switch(n){case"keyup":return hS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function fS(n,e){switch(n){case"compositionend":return mw(e);case"keypress":return e.which!==32?null:(oy=!0,ay);case"textInput":return n=e.data,n===ay&&oy?null:n;default:return null}}function pS(n,e){if(no)return n==="compositionend"||!qm&&gw(n,e)?(n=fw(),Nh=Vm=Zs=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pw&&e.locale!=="ko"?null:e.data;default:return null}}var gS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ly(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!gS[n.type]:e==="textarea"}function yw(n,e,t,i){qv(i),e=kd(e,"onChange"),0<e.length&&(t=new Gm("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var uc=null,Ec=null;function mS(n){Tw(n,0)}function gf(n){var e=ro(n);if(Bv(e))return n}function yS(n,e){if(n==="change")return e}var vw=!1;if(cs){var Xf;if(cs){var qf="oninput"in document;if(!qf){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),qf=typeof cy.oninput=="function"}Xf=qf}else Xf=!1;vw=Xf&&(!document.documentMode||9<document.documentMode)}function uy(){uc&&(uc.detachEvent("onpropertychange",ww),Ec=uc=null)}function ww(n){if(n.propertyName==="value"&&gf(Ec)){var e=[];yw(e,Ec,n,Hm(n)),Zv(mS,e)}}function vS(n,e,t){n==="focusin"?(uy(),uc=e,Ec=t,uc.attachEvent("onpropertychange",ww)):n==="focusout"&&uy()}function wS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gf(Ec)}function bS(n,e){if(n==="click")return gf(e)}function AS(n,e){if(n==="input"||n==="change")return gf(e)}function xS(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ei=typeof Object.is=="function"?Object.is:xS;function kc(n,e){if(ei(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!wp.call(e,s)||!ei(n[s],e[s]))return!1}return!0}function hy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dy(n,e){var t=hy(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=hy(t)}}function bw(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?bw(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Aw(){for(var n=window,e=wd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=wd(n.document)}return e}function Ym(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function SS(n){var e=Aw(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&bw(t.ownerDocument.documentElement,t)){if(i!==null&&Ym(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=dy(t,r);var a=dy(t,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _S=cs&&"documentMode"in document&&11>=document.documentMode,io=null,jp=null,hc=null,zp=!1;function fy(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;zp||io==null||io!==wd(i)||(i=io,"selectionStart"in i&&Ym(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hc&&kc(hc,i)||(hc=i,i=kd(jp,"onSelect"),0<i.length&&(e=new Gm("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=io)))}function mh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var so={animationend:mh("Animation","AnimationEnd"),animationiteration:mh("Animation","AnimationIteration"),animationstart:mh("Animation","AnimationStart"),transitionend:mh("Transition","TransitionEnd")},Yf={},xw={};cs&&(xw=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function mf(n){if(Yf[n])return Yf[n];if(!so[n])return n;var e=so[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in xw)return Yf[n]=e[t];return n}var Sw=mf("animationend"),_w=mf("animationiteration"),Ew=mf("animationstart"),kw=mf("transitionend"),Cw=new Map,py="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(n,e){Cw.set(n,e),za(e,[n])}for(var Kf=0;Kf<py.length;Kf++){var Qf=py[Kf],ES=Qf.toLowerCase(),kS=Qf[0].toUpperCase()+Qf.slice(1);pr(ES,"on"+kS)}pr(Sw,"onAnimationEnd");pr(_w,"onAnimationIteration");pr(Ew,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(kw,"onTransitionEnd");bl("onMouseEnter",["mouseout","mouseover"]);bl("onMouseLeave",["mouseout","mouseover"]);bl("onPointerEnter",["pointerout","pointerover"]);bl("onPointerLeave",["pointerout","pointerover"]);za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));za("onBeforeInput",["compositionend","keypress","textInput","paste"]);za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function gy(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,E1(i,e,void 0,n),n.currentTarget=null}function Tw(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&s.isPropagationStopped())break e;gy(s,o,u),r=c}else for(a=0;a<i.length;a++){if(o=i[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&s.isPropagationStopped())break e;gy(s,o,u),r=c}}}if(Ad)throw n=Np,Ad=!1,Np=null,n}function Se(n,e){var t=e[Wp];t===void 0&&(t=e[Wp]=new Set);var i=n+"__bubble";t.has(i)||(Pw(e,n,2,!1),t.add(i))}function Zf(n,e,t){var i=0;e&&(i|=4),Pw(t,n,i,e)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Cc(n){if(!n[yh]){n[yh]=!0,Dv.forEach(function(t){t!=="selectionchange"&&(CS.has(t)||Zf(t,!1,n),Zf(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[yh]||(e[yh]=!0,Zf("selectionchange",!1,e))}}function Pw(n,e,t,i){switch(dw(e)){case 1:var s=B1;break;case 4:s=U1;break;default:s=Wm}t=s.bind(null,e,t,n),s=void 0,!Ip||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Jf(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Cr(o),a===null)return;if(c=a.tag,c===5||c===6){i=r=a;continue e}o=o.parentNode}}i=i.return}Zv(function(){var u=r,h=Hm(t),d=[];e:{var f=Cw.get(n);if(f!==void 0){var p=Gm,v=n;switch(n){case"keypress":if(Fh(t)===0)break e;case"keydown":case"keyup":p=iS;break;case"focusin":v="focus",p=Gf;break;case"focusout":v="blur",p=Gf;break;case"beforeblur":case"afterblur":p=Gf;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=V1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=aS;break;case Sw:case _w:case Ew:p=q1;break;case kw:p=lS;break;case"scroll":p=$1;break;case"wheel":p=uS;break;case"copy":case"cut":case"paste":p=K1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ry}var A=(e&4)!==0,_=!A&&n==="scroll",g=A?f!==null?f+"Capture":null:f;A=[];for(var w=u,x;w!==null;){x=w;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,g!==null&&(S=Ac(w,g),S!=null&&A.push(Tc(w,S,x)))),_)break;w=w.return}0<A.length&&(f=new p(f,v,null,t,h),d.push({event:f,listeners:A}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==Lp&&(v=t.relatedTarget||t.fromElement)&&(Cr(v)||v[us]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=t.relatedTarget||t.toElement,p=u,v=v?Cr(v):null,v!==null&&(_=Ha(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(A=iy,S="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(A=ry,S="onPointerLeave",g="onPointerEnter",w="pointer"),_=p==null?f:ro(p),x=v==null?f:ro(v),f=new A(S,w+"leave",p,t,h),f.target=_,f.relatedTarget=x,S=null,Cr(h)===u&&(A=new A(g,w+"enter",v,t,h),A.target=x,A.relatedTarget=_,S=A),_=S,p&&v)t:{for(A=p,g=v,w=0,x=A;x;x=Wa(x))w++;for(x=0,S=g;S;S=Wa(S))x++;for(;0<w-x;)A=Wa(A),w--;for(;0<x-w;)g=Wa(g),x--;for(;w--;){if(A===g||g!==null&&A===g.alternate)break t;A=Wa(A),g=Wa(g)}A=null}else A=null;p!==null&&my(d,f,p,A,!1),v!==null&&_!==null&&my(d,_,v,A,!0)}}e:{if(f=u?ro(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=yS;else if(ly(f))if(vw)k=AS;else{k=wS;var C=vS}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=bS);if(k&&(k=k(n,u))){yw(d,k,t,h);break e}C&&C(n,f,u),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&kp(f,"number",f.value)}switch(C=u?ro(u):window,n){case"focusin":(ly(C)||C.contentEditable==="true")&&(io=C,jp=u,hc=null);break;case"focusout":hc=jp=io=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,fy(d,t,h);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":fy(d,t,h)}var R;if(qm)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else no?gw(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(pw&&t.locale!=="ko"&&(no||L!=="onCompositionStart"?L==="onCompositionEnd"&&no&&(R=fw()):(Zs=h,Vm="value"in Zs?Zs.value:Zs.textContent,no=!0)),C=kd(u,L),0<C.length&&(L=new sy(L,n,null,t,h),d.push({event:L,listeners:C}),R?L.data=R:(R=mw(t),R!==null&&(L.data=R)))),(R=dS?fS(n,t):pS(n,t))&&(u=kd(u,"onBeforeInput"),0<u.length&&(h=new sy("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=R))}Tw(d,e)})}function Tc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function kd(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Ac(n,t),r!=null&&i.unshift(Tc(n,r,s)),r=Ac(n,e),r!=null&&i.push(Tc(n,r,s))),n=n.return}return i}function Wa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function my(n,e,t,i,s){for(var r=e._reactName,a=[];t!==null&&t!==i;){var o=t,c=o.alternate,u=o.stateNode;if(c!==null&&c===i)break;o.tag===5&&u!==null&&(o=u,s?(c=Ac(t,r),c!=null&&a.unshift(Tc(t,c,o))):s||(c=Ac(t,r),c!=null&&a.push(Tc(t,c,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var TS=/\r\n?/g,PS=/\u0000|\uFFFD/g;function yy(n){return(typeof n=="string"?n:""+n).replace(TS,`
`).replace(PS,"")}function vh(n,e,t){if(e=yy(e),yy(n)!==e&&t)throw Error(N(425))}function Cd(){}var Hp=null,Bp=null;function Up(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $p=typeof setTimeout=="function"?setTimeout:void 0,RS=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,LS=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(n){return vy.resolve(null).then(n).catch(MS)}:$p;function MS(n){setTimeout(function(){throw n})}function ep(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),_c(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);_c(e)}function ir(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function wy(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Pl=Math.random().toString(36).slice(2),xi="__reactFiber$"+Pl,Pc="__reactProps$"+Pl,us="__reactContainer$"+Pl,Wp="__reactEvents$"+Pl,IS="__reactListeners$"+Pl,NS="__reactHandles$"+Pl;function Cr(n){var e=n[xi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[us]||t[xi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=wy(n);n!==null;){if(t=n[xi])return t;n=wy(n)}return e}n=t,t=n.parentNode}return null}function nh(n){return n=n[xi]||n[us],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ro(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(N(33))}function yf(n){return n[Pc]||null}var Vp=[],ao=-1;function gr(n){return{current:n}}function Ee(n){0>ao||(n.current=Vp[ao],Vp[ao]=null,ao--)}function xe(n,e){ao++,Vp[ao]=n.current,n.current=e}var cr={},_t=gr(cr),Gt=gr(!1),Pa=cr;function Al(n,e){var t=n.type.contextTypes;if(!t)return cr;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(n){return n=n.childContextTypes,n!=null}function Td(){Ee(Gt),Ee(_t)}function by(n,e,t){if(_t.current!==cr)throw Error(N(168));xe(_t,e),xe(Gt,t)}function Rw(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(N(108,v1(n)||"Unknown",s));return Ne({},t,i)}function Pd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||cr,Pa=_t.current,xe(_t,n),xe(Gt,Gt.current),!0}function Ay(n,e,t){var i=n.stateNode;if(!i)throw Error(N(169));t?(n=Rw(n,e,Pa),i.__reactInternalMemoizedMergedChildContext=n,Ee(Gt),Ee(_t),xe(_t,n)):Ee(Gt),xe(Gt,t)}var Li=null,vf=!1,tp=!1;function Lw(n){Li===null?Li=[n]:Li.push(n)}function FS(n){vf=!0,Lw(n)}function mr(){if(!tp&&Li!==null){tp=!0;var n=0,e=ye;try{var t=Li;for(ye=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Li=null,vf=!1}catch(s){throw Li!==null&&(Li=Li.slice(n+1)),nw(Bm,mr),s}finally{ye=e,tp=!1}}return null}var oo=[],lo=0,Rd=null,Ld=0,An=[],xn=0,Ra=null,is=1,ss="";function wr(n,e){oo[lo++]=Ld,oo[lo++]=Rd,Rd=n,Ld=e}function Mw(n,e,t){An[xn++]=is,An[xn++]=ss,An[xn++]=Ra,Ra=n;var i=is;n=ss;var s=32-Zn(i)-1;i&=~(1<<s),t+=1;var r=32-Zn(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,is=1<<32-Zn(e)+s|t<<s|i,ss=r+n}else is=1<<r|t<<s|i,ss=n}function Km(n){n.return!==null&&(wr(n,1),Mw(n,1,0))}function Qm(n){for(;n===Rd;)Rd=oo[--lo],oo[lo]=null,Ld=oo[--lo],oo[lo]=null;for(;n===Ra;)Ra=An[--xn],An[xn]=null,ss=An[--xn],An[xn]=null,is=An[--xn],An[xn]=null}var un=null,cn=null,Ce=!1,Yn=null;function Iw(n,e){var t=En(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function xy(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,un=n,cn=ir(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,un=n,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ra!==null?{id:is,overflow:ss}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=En(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,un=n,cn=null,!0):!1;default:return!1}}function Gp(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Xp(n){if(Ce){var e=cn;if(e){var t=e;if(!xy(n,e)){if(Gp(n))throw Error(N(418));e=ir(t.nextSibling);var i=un;e&&xy(n,e)?Iw(i,t):(n.flags=n.flags&-4097|2,Ce=!1,un=n)}}else{if(Gp(n))throw Error(N(418));n.flags=n.flags&-4097|2,Ce=!1,un=n}}}function Sy(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function wh(n){if(n!==un)return!1;if(!Ce)return Sy(n),Ce=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Up(n.type,n.memoizedProps)),e&&(e=cn)){if(Gp(n))throw Nw(),Error(N(418));for(;e;)Iw(n,e),e=ir(e.nextSibling)}if(Sy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(N(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){cn=ir(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}cn=null}}else cn=un?ir(n.stateNode.nextSibling):null;return!0}function Nw(){for(var n=cn;n;)n=ir(n.nextSibling)}function xl(){cn=un=null,Ce=!1}function Zm(n){Yn===null?Yn=[n]:Yn.push(n)}var DS=gs.ReactCurrentBatchConfig;function Fl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(N(309));var i=t.stateNode}if(!i)throw Error(N(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=s.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(N(284));if(!t._owner)throw Error(N(290,n))}return n}function bh(n,e){throw n=Object.prototype.toString.call(e),Error(N(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _y(n){var e=n._init;return e(n._payload)}function Fw(n){function e(g,w){if(n){var x=g.deletions;x===null?(g.deletions=[w],g.flags|=16):x.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function i(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function s(g,w){return g=or(g,w),g.index=0,g.sibling=null,g}function r(g,w,x){return g.index=x,n?(x=g.alternate,x!==null?(x=x.index,x<w?(g.flags|=2,w):x):(g.flags|=2,w)):(g.flags|=1048576,w)}function a(g){return n&&g.alternate===null&&(g.flags|=2),g}function o(g,w,x,S){return w===null||w.tag!==6?(w=lp(x,g.mode,S),w.return=g,w):(w=s(w,x),w.return=g,w)}function c(g,w,x,S){var k=x.type;return k===to?h(g,w,x.props.children,S,x.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===bs&&_y(k)===w.type)?(S=s(w,x.props),S.ref=Fl(g,w,x),S.return=g,S):(S=Uh(x.type,x.key,x.props,null,g.mode,S),S.ref=Fl(g,w,x),S.return=g,S)}function u(g,w,x,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=cp(x,g.mode,S),w.return=g,w):(w=s(w,x.children||[]),w.return=g,w)}function h(g,w,x,S,k){return w===null||w.tag!==7?(w=Ca(x,g.mode,S,k),w.return=g,w):(w=s(w,x),w.return=g,w)}function d(g,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=lp(""+w,g.mode,x),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ch:return x=Uh(w.type,w.key,w.props,null,g.mode,x),x.ref=Fl(g,null,w),x.return=g,x;case eo:return w=cp(w,g.mode,x),w.return=g,w;case bs:var S=w._init;return d(g,S(w._payload),x)}if(Ul(w)||Rl(w))return w=Ca(w,g.mode,x,null),w.return=g,w;bh(g,w)}return null}function f(g,w,x,S){var k=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:o(g,w,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ch:return x.key===k?c(g,w,x,S):null;case eo:return x.key===k?u(g,w,x,S):null;case bs:return k=x._init,f(g,w,k(x._payload),S)}if(Ul(x)||Rl(x))return k!==null?null:h(g,w,x,S,null);bh(g,x)}return null}function p(g,w,x,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(x)||null,o(w,g,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ch:return g=g.get(S.key===null?x:S.key)||null,c(w,g,S,k);case eo:return g=g.get(S.key===null?x:S.key)||null,u(w,g,S,k);case bs:var C=S._init;return p(g,w,x,C(S._payload),k)}if(Ul(S)||Rl(S))return g=g.get(x)||null,h(w,g,S,k,null);bh(w,S)}return null}function v(g,w,x,S){for(var k=null,C=null,R=w,L=w=0,D=null;R!==null&&L<x.length;L++){R.index>L?(D=R,R=null):D=R.sibling;var j=f(g,R,x[L],S);if(j===null){R===null&&(R=D);break}n&&R&&j.alternate===null&&e(g,R),w=r(j,w,L),C===null?k=j:C.sibling=j,C=j,R=D}if(L===x.length)return t(g,R),Ce&&wr(g,L),k;if(R===null){for(;L<x.length;L++)R=d(g,x[L],S),R!==null&&(w=r(R,w,L),C===null?k=R:C.sibling=R,C=R);return Ce&&wr(g,L),k}for(R=i(g,R);L<x.length;L++)D=p(R,g,L,x[L],S),D!==null&&(n&&D.alternate!==null&&R.delete(D.key===null?L:D.key),w=r(D,w,L),C===null?k=D:C.sibling=D,C=D);return n&&R.forEach(function(U){return e(g,U)}),Ce&&wr(g,L),k}function A(g,w,x,S){var k=Rl(x);if(typeof k!="function")throw Error(N(150));if(x=k.call(x),x==null)throw Error(N(151));for(var C=k=null,R=w,L=w=0,D=null,j=x.next();R!==null&&!j.done;L++,j=x.next()){R.index>L?(D=R,R=null):D=R.sibling;var U=f(g,R,j.value,S);if(U===null){R===null&&(R=D);break}n&&R&&U.alternate===null&&e(g,R),w=r(U,w,L),C===null?k=U:C.sibling=U,C=U,R=D}if(j.done)return t(g,R),Ce&&wr(g,L),k;if(R===null){for(;!j.done;L++,j=x.next())j=d(g,j.value,S),j!==null&&(w=r(j,w,L),C===null?k=j:C.sibling=j,C=j);return Ce&&wr(g,L),k}for(R=i(g,R);!j.done;L++,j=x.next())j=p(R,g,L,j.value,S),j!==null&&(n&&j.alternate!==null&&R.delete(j.key===null?L:j.key),w=r(j,w,L),C===null?k=j:C.sibling=j,C=j);return n&&R.forEach(function(ie){return e(g,ie)}),Ce&&wr(g,L),k}function _(g,w,x,S){if(typeof x=="object"&&x!==null&&x.type===to&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ch:e:{for(var k=x.key,C=w;C!==null;){if(C.key===k){if(k=x.type,k===to){if(C.tag===7){t(g,C.sibling),w=s(C,x.props.children),w.return=g,g=w;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===bs&&_y(k)===C.type){t(g,C.sibling),w=s(C,x.props),w.ref=Fl(g,C,x),w.return=g,g=w;break e}t(g,C);break}else e(g,C);C=C.sibling}x.type===to?(w=Ca(x.props.children,g.mode,S,x.key),w.return=g,g=w):(S=Uh(x.type,x.key,x.props,null,g.mode,S),S.ref=Fl(g,w,x),S.return=g,g=S)}return a(g);case eo:e:{for(C=x.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){t(g,w.sibling),w=s(w,x.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=cp(x,g.mode,S),w.return=g,g=w}return a(g);case bs:return C=x._init,_(g,w,C(x._payload),S)}if(Ul(x))return v(g,w,x,S);if(Rl(x))return A(g,w,x,S);bh(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(t(g,w.sibling),w=s(w,x),w.return=g,g=w):(t(g,w),w=lp(x,g.mode,S),w.return=g,g=w),a(g)):t(g,w)}return _}var Sl=Fw(!0),Dw=Fw(!1),Md=gr(null),Id=null,co=null,Jm=null;function e0(){Jm=co=Id=null}function t0(n){var e=Md.current;Ee(Md),n._currentValue=e}function qp(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function vo(n,e){Id=n,Jm=co=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Wt=!0),n.firstContext=null)}function Tn(n){var e=n._currentValue;if(Jm!==n)if(n={context:n,memoizedValue:e,next:null},co===null){if(Id===null)throw Error(N(308));co=n,Id.dependencies={lanes:0,firstContext:n}}else co=co.next=n;return e}var Tr=null;function n0(n){Tr===null?Tr=[n]:Tr.push(n)}function Ow(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,n0(e)):(t.next=s.next,s.next=t),e.interleaved=t,hs(n,i)}function hs(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var As=!1;function i0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jw(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function rs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function sr(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,le&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,hs(n,t)}return s=i.interleaved,s===null?(e.next=e,n0(i)):(e.next=s.next,s.next=e),i.interleaved=e,hs(n,t)}function Dh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Um(n,t)}}function Ey(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Nd(n,e,t,i){var s=n.updateQueue;As=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;a=0,h=u=c=null,o=r;do{var f=o.lane,p=o.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=n,A=o;switch(f=e,p=t,A.tag){case 1:if(v=A.payload,typeof v=="function"){d=v.call(p,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=A.payload,f=typeof v=="function"?v.call(p,d,f):v,f==null)break e;d=Ne({},d,f);break e;case 2:As=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Ma|=a,n.lanes=a,n.memoizedState=d}}function ky(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(N(191,s));s.call(i)}}}var ih={},_i=gr(ih),Rc=gr(ih),Lc=gr(ih);function Pr(n){if(n===ih)throw Error(N(174));return n}function s0(n,e){switch(xe(Lc,e),xe(Rc,n),xe(_i,ih),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tp(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Tp(e,n)}Ee(_i),xe(_i,e)}function _l(){Ee(_i),Ee(Rc),Ee(Lc)}function zw(n){Pr(Lc.current);var e=Pr(_i.current),t=Tp(e,n.type);e!==t&&(xe(Rc,n),xe(_i,t))}function r0(n){Rc.current===n&&(Ee(_i),Ee(Rc))}var Me=gr(0);function Fd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var np=[];function a0(){for(var n=0;n<np.length;n++)np[n]._workInProgressVersionPrimary=null;np.length=0}var Oh=gs.ReactCurrentDispatcher,ip=gs.ReactCurrentBatchConfig,La=0,Ie=null,Ye=null,st=null,Dd=!1,dc=!1,Mc=0,OS=0;function pt(){throw Error(N(321))}function o0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ei(n[t],e[t]))return!1;return!0}function l0(n,e,t,i,s,r){if(La=r,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oh.current=n===null||n.memoizedState===null?BS:US,n=t(i,s),dc){r=0;do{if(dc=!1,Mc=0,25<=r)throw Error(N(301));r+=1,st=Ye=null,e.updateQueue=null,Oh.current=$S,n=t(i,s)}while(dc)}if(Oh.current=Od,e=Ye!==null&&Ye.next!==null,La=0,st=Ye=Ie=null,Dd=!1,e)throw Error(N(300));return n}function c0(){var n=Mc!==0;return Mc=0,n}function ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ie.memoizedState=st=n:st=st.next=n,st}function Pn(){if(Ye===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=Ye.next;var e=st===null?Ie.memoizedState:st.next;if(e!==null)st=e,Ye=n;else{if(n===null)throw Error(N(310));Ye=n,n={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},st===null?Ie.memoizedState=st=n:st=st.next=n}return st}function Ic(n,e){return typeof e=="function"?e(n):e}function sp(n){var e=Pn(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=n;var i=Ye,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var o=a=null,c=null,u=r;do{var h=u.lane;if((La&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=i):c=c.next=d,Ie.lanes|=h,Ma|=h}u=u.next}while(u!==null&&u!==r);c===null?a=i:c.next=o,ei(i,e.memoizedState)||(Wt=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Ie.lanes|=r,Ma|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function rp(n){var e=Pn(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do r=n(r,a.action),a=a.next;while(a!==s);ei(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function Hw(){}function Bw(n,e){var t=Ie,i=Pn(),s=e(),r=!ei(i.memoizedState,s);if(r&&(i.memoizedState=s,Wt=!0),i=i.queue,u0(Ww.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||st!==null&&st.memoizedState.tag&1){if(t.flags|=2048,Nc(9,$w.bind(null,t,i,s,e),void 0,null),rt===null)throw Error(N(349));La&30||Uw(t,e,s)}return s}function Uw(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function $w(n,e,t,i){e.value=t,e.getSnapshot=i,Vw(e)&&Gw(n)}function Ww(n,e,t){return t(function(){Vw(e)&&Gw(n)})}function Vw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ei(n,t)}catch{return!0}}function Gw(n){var e=hs(n,1);e!==null&&Jn(e,n,1,-1)}function Cy(n){var e=ii();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ic,lastRenderedState:n},e.queue=n,n=n.dispatch=HS.bind(null,Ie,n),[e.memoizedState,n]}function Nc(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Xw(){return Pn().memoizedState}function jh(n,e,t,i){var s=ii();Ie.flags|=n,s.memoizedState=Nc(1|e,t,void 0,i===void 0?null:i)}function wf(n,e,t,i){var s=Pn();i=i===void 0?null:i;var r=void 0;if(Ye!==null){var a=Ye.memoizedState;if(r=a.destroy,i!==null&&o0(i,a.deps)){s.memoizedState=Nc(e,t,r,i);return}}Ie.flags|=n,s.memoizedState=Nc(1|e,t,r,i)}function Ty(n,e){return jh(8390656,8,n,e)}function u0(n,e){return wf(2048,8,n,e)}function qw(n,e){return wf(4,2,n,e)}function Yw(n,e){return wf(4,4,n,e)}function Kw(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Qw(n,e,t){return t=t!=null?t.concat([n]):null,wf(4,4,Kw.bind(null,e,n),t)}function h0(){}function Zw(n,e){var t=Pn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&o0(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Jw(n,e){var t=Pn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&o0(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function eb(n,e,t){return La&21?(ei(t,e)||(t=rw(),Ie.lanes|=t,Ma|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Wt=!0),n.memoizedState=t)}function jS(n,e){var t=ye;ye=t!==0&&4>t?t:4,n(!0);var i=ip.transition;ip.transition={};try{n(!1),e()}finally{ye=t,ip.transition=i}}function tb(){return Pn().memoizedState}function zS(n,e,t){var i=ar(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},nb(n))ib(e,t);else if(t=Ow(n,e,t,i),t!==null){var s=Rt();Jn(t,n,i,s),sb(t,e,i)}}function HS(n,e,t){var i=ar(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(nb(n))ib(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(s.hasEagerState=!0,s.eagerState=o,ei(o,a)){var c=e.interleaved;c===null?(s.next=s,n0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=Ow(n,e,s,i),t!==null&&(s=Rt(),Jn(t,n,i,s),sb(t,e,i))}}function nb(n){var e=n.alternate;return n===Ie||e!==null&&e===Ie}function ib(n,e){dc=Dd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function sb(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Um(n,t)}}var Od={readContext:Tn,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},BS={readContext:Tn,useCallback:function(n,e){return ii().memoizedState=[n,e===void 0?null:e],n},useContext:Tn,useEffect:Ty,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,jh(4194308,4,Kw.bind(null,e,n),t)},useLayoutEffect:function(n,e){return jh(4194308,4,n,e)},useInsertionEffect:function(n,e){return jh(4,2,n,e)},useMemo:function(n,e){var t=ii();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=ii();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=zS.bind(null,Ie,n),[i.memoizedState,n]},useRef:function(n){var e=ii();return n={current:n},e.memoizedState=n},useState:Cy,useDebugValue:h0,useDeferredValue:function(n){return ii().memoizedState=n},useTransition:function(){var n=Cy(!1),e=n[0];return n=jS.bind(null,n[1]),ii().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Ie,s=ii();if(Ce){if(t===void 0)throw Error(N(407));t=t()}else{if(t=e(),rt===null)throw Error(N(349));La&30||Uw(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,Ty(Ww.bind(null,i,r,n),[n]),i.flags|=2048,Nc(9,$w.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=ii(),e=rt.identifierPrefix;if(Ce){var t=ss,i=is;t=(i&~(1<<32-Zn(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Mc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=OS++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},US={readContext:Tn,useCallback:Zw,useContext:Tn,useEffect:u0,useImperativeHandle:Qw,useInsertionEffect:qw,useLayoutEffect:Yw,useMemo:Jw,useReducer:sp,useRef:Xw,useState:function(){return sp(Ic)},useDebugValue:h0,useDeferredValue:function(n){var e=Pn();return eb(e,Ye.memoizedState,n)},useTransition:function(){var n=sp(Ic)[0],e=Pn().memoizedState;return[n,e]},useMutableSource:Hw,useSyncExternalStore:Bw,useId:tb,unstable_isNewReconciler:!1},$S={readContext:Tn,useCallback:Zw,useContext:Tn,useEffect:u0,useImperativeHandle:Qw,useInsertionEffect:qw,useLayoutEffect:Yw,useMemo:Jw,useReducer:rp,useRef:Xw,useState:function(){return rp(Ic)},useDebugValue:h0,useDeferredValue:function(n){var e=Pn();return Ye===null?e.memoizedState=n:eb(e,Ye.memoizedState,n)},useTransition:function(){var n=rp(Ic)[0],e=Pn().memoizedState;return[n,e]},useMutableSource:Hw,useSyncExternalStore:Bw,useId:tb,unstable_isNewReconciler:!1};function In(n,e){if(n&&n.defaultProps){e=Ne({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Yp(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Ne({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var bf={isMounted:function(n){return(n=n._reactInternals)?Ha(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Rt(),s=ar(n),r=rs(i,s);r.payload=e,t!=null&&(r.callback=t),e=sr(n,r,s),e!==null&&(Jn(e,n,s,i),Dh(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Rt(),s=ar(n),r=rs(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=sr(n,r,s),e!==null&&(Jn(e,n,s,i),Dh(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Rt(),i=ar(n),s=rs(t,i);s.tag=2,e!=null&&(s.callback=e),e=sr(n,s,i),e!==null&&(Jn(e,n,i,t),Dh(e,n,i))}};function Py(n,e,t,i,s,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!kc(t,i)||!kc(s,r):!0}function rb(n,e,t){var i=!1,s=cr,r=e.contextType;return typeof r=="object"&&r!==null?r=Tn(r):(s=Xt(e)?Pa:_t.current,i=e.contextTypes,r=(i=i!=null)?Al(n,s):cr),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bf,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function Ry(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&bf.enqueueReplaceState(e,e.state,null)}function Kp(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},i0(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Tn(r):(r=Xt(e)?Pa:_t.current,s.context=Al(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Yp(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bf.enqueueReplaceState(s,s.state,null),Nd(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function El(n,e){try{var t="",i=e;do t+=y1(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function ap(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Qp(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var WS=typeof WeakMap=="function"?WeakMap:Map;function ab(n,e,t){t=rs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){zd||(zd=!0,og=i),Qp(n,e)},t}function ob(n,e,t){t=rs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){Qp(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Qp(n,e),typeof i!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function Ly(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new WS;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=s_.bind(null,n,e,t),e.then(n,n))}function My(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Iy(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=rs(-1,1),e.tag=2,sr(t,e,1))),t.lanes|=1),n)}var VS=gs.ReactCurrentOwner,Wt=!1;function Tt(n,e,t,i){e.child=n===null?Dw(e,null,t,i):Sl(e,n.child,t,i)}function Ny(n,e,t,i,s){t=t.render;var r=e.ref;return vo(e,s),i=l0(n,e,t,i,r,s),t=c0(),n!==null&&!Wt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ds(n,e,s)):(Ce&&t&&Km(e),e.flags|=1,Tt(n,e,i,s),e.child)}function Fy(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!w0(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,lb(n,e,r,i,s)):(n=Uh(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:kc,t(a,i)&&n.ref===e.ref)return ds(n,e,s)}return e.flags|=1,n=or(r,i),n.ref=e.ref,n.return=e,e.child=n}function lb(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(kc(r,i)&&n.ref===e.ref)if(Wt=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Wt=!0);else return e.lanes=n.lanes,ds(n,e,s)}return Zp(n,e,t,i,s)}function cb(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(ho,on),on|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,xe(ho,on),on|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,xe(ho,on),on|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,xe(ho,on),on|=i;return Tt(n,e,s,t),e.child}function ub(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Zp(n,e,t,i,s){var r=Xt(t)?Pa:_t.current;return r=Al(e,r),vo(e,s),t=l0(n,e,t,i,r,s),i=c0(),n!==null&&!Wt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ds(n,e,s)):(Ce&&i&&Km(e),e.flags|=1,Tt(n,e,t,s),e.child)}function Dy(n,e,t,i,s){if(Xt(t)){var r=!0;Pd(e)}else r=!1;if(vo(e,s),e.stateNode===null)zh(n,e),rb(e,t,i),Kp(e,t,i,s),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Tn(u):(u=Xt(t)?Pa:_t.current,u=Al(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||c!==u)&&Ry(e,a,i,u),As=!1;var f=e.memoizedState;a.state=f,Nd(e,i,a,s),c=e.memoizedState,o!==i||f!==c||Gt.current||As?(typeof h=="function"&&(Yp(e,t,h,i),c=e.memoizedState),(o=As||Py(e,t,o,i,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,jw(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:In(e.type,o),a.props=u,d=e.pendingProps,f=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=Xt(t)?Pa:_t.current,c=Al(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==c)&&Ry(e,a,i,c),As=!1,f=e.memoizedState,a.state=f,Nd(e,i,a,s);var v=e.memoizedState;o!==d||f!==v||Gt.current||As?(typeof p=="function"&&(Yp(e,t,p,i),v=e.memoizedState),(u=As||Py(e,t,u,i,f,v,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),a.props=i,a.state=v,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return Jp(n,e,t,i,r,s)}function Jp(n,e,t,i,s,r){ub(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&Ay(e,t,!1),ds(n,e,r);i=e.stateNode,VS.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Sl(e,n.child,null,r),e.child=Sl(e,null,o,r)):Tt(n,e,o,r),e.memoizedState=i.state,s&&Ay(e,t,!0),e.child}function hb(n){var e=n.stateNode;e.pendingContext?by(n,e.pendingContext,e.pendingContext!==e.context):e.context&&by(n,e.context,!1),s0(n,e.containerInfo)}function Oy(n,e,t,i,s){return xl(),Zm(s),e.flags|=256,Tt(n,e,t,i),e.child}var eg={dehydrated:null,treeContext:null,retryLane:0};function tg(n){return{baseLanes:n,cachePool:null,transitions:null}}function db(n,e,t){var i=e.pendingProps,s=Me.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),xe(Me,s&1),n===null)return Xp(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,r?(i=e.mode,r=e.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Sf(a,i,0,null),n=Ca(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=tg(t),e.memoizedState=eg,n):d0(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return GS(n,e,a,i,o,s,t);if(r){r=i.fallback,a=e.mode,s=n.child,o=s.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=or(s,c),i.subtreeFlags=s.subtreeFlags&14680064),o!==null?r=or(o,r):(r=Ca(r,a,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=n.child.memoizedState,a=a===null?tg(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=eg,i}return r=n.child,n=r.sibling,i=or(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function d0(n,e){return e=Sf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ah(n,e,t,i){return i!==null&&Zm(i),Sl(e,n.child,null,t),n=d0(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function GS(n,e,t,i,s,r,a){if(t)return e.flags&256?(e.flags&=-257,i=ap(Error(N(422))),Ah(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Sf({mode:"visible",children:i.children},s,0,null),r=Ca(r,s,a,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Sl(e,n.child,null,a),e.child.memoizedState=tg(a),e.memoizedState=eg,r);if(!(e.mode&1))return Ah(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(N(419)),i=ap(r,i,void 0),Ah(n,e,a,i)}if(o=(a&n.childLanes)!==0,Wt||o){if(i=rt,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,hs(n,s),Jn(i,n,s,-1))}return v0(),i=ap(Error(N(421))),Ah(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=r_.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,cn=ir(s.nextSibling),un=e,Ce=!0,Yn=null,n!==null&&(An[xn++]=is,An[xn++]=ss,An[xn++]=Ra,is=n.id,ss=n.overflow,Ra=e),e=d0(e,i.children),e.flags|=4096,e)}function jy(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),qp(n.return,e,t)}function op(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function fb(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Tt(n,e,i.children,t),i=Me.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jy(n,t,e);else if(n.tag===19)jy(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(xe(Me,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Fd(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),op(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Fd(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}op(e,!0,t,null,r);break;case"together":op(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ds(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ma|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(N(153));if(e.child!==null){for(n=e.child,t=or(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=or(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function XS(n,e,t){switch(e.tag){case 3:hb(e),xl();break;case 5:zw(e);break;case 1:Xt(e.type)&&Pd(e);break;case 4:s0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;xe(Md,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(xe(Me,Me.current&1),e.flags|=128,null):t&e.child.childLanes?db(n,e,t):(xe(Me,Me.current&1),n=ds(n,e,t),n!==null?n.sibling:null);xe(Me,Me.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return fb(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Me,Me.current),i)break;return null;case 22:case 23:return e.lanes=0,cb(n,e,t)}return ds(n,e,t)}var pb,ng,gb,mb;pb=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ng=function(){};gb=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Pr(_i.current);var r=null;switch(t){case"input":s=_p(n,s),i=_p(n,i),r=[];break;case"select":s=Ne({},s,{value:void 0}),i=Ne({},i,{value:void 0}),r=[];break;case"textarea":s=Cp(n,s),i=Cp(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Cd)}Pp(t,i);var a;t=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wc.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(o=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Se("scroll",n),r||o===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};mb=function(n,e,t,i){t!==i&&(e.flags|=4)};function Dl(n,e){if(!Ce)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function gt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function qS(n,e,t){var i=e.pendingProps;switch(Qm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Xt(e.type)&&Td(),gt(e),null;case 3:return i=e.stateNode,_l(),Ee(Gt),Ee(_t),a0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(wh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(ug(Yn),Yn=null))),ng(n,e),gt(e),null;case 5:r0(e);var s=Pr(Lc.current);if(t=e.type,n!==null&&e.stateNode!=null)gb(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(N(166));return gt(e),null}if(n=Pr(_i.current),wh(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[xi]=e,i[Pc]=r,n=(e.mode&1)!==0,t){case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":case"embed":Se("load",i);break;case"video":case"audio":for(s=0;s<Wl.length;s++)Se(Wl[s],i);break;case"source":Se("error",i);break;case"img":case"image":case"link":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"input":X0(i,r),Se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Se("invalid",i);break;case"textarea":Y0(i,r),Se("invalid",i)}Pp(t,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&vh(i.textContent,o,n),s=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&vh(i.textContent,o,n),s=["children",""+o]):wc.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Se("scroll",i)}switch(t){case"input":uh(i),q0(i,r,!0);break;case"textarea":uh(i),K0(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Cd)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Wv(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[xi]=e,n[Pc]=i,pb(n,e,!1,!1),e.stateNode=n;e:{switch(a=Rp(t,i),t){case"dialog":Se("cancel",n),Se("close",n),s=i;break;case"iframe":case"object":case"embed":Se("load",n),s=i;break;case"video":case"audio":for(s=0;s<Wl.length;s++)Se(Wl[s],n);s=i;break;case"source":Se("error",n),s=i;break;case"img":case"image":case"link":Se("error",n),Se("load",n),s=i;break;case"details":Se("toggle",n),s=i;break;case"input":X0(n,i),s=_p(n,i),Se("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ne({},i,{value:void 0}),Se("invalid",n);break;case"textarea":Y0(n,i),s=Cp(n,i),Se("invalid",n);break;default:s=i}Pp(t,s),o=s;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?Xv(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Vv(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&bc(n,c):typeof c=="number"&&bc(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(wc.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Se("scroll",n):c!=null&&Dm(n,r,c,a))}switch(t){case"input":uh(n),q0(n,i,!1);break;case"textarea":uh(n),K0(n);break;case"option":i.value!=null&&n.setAttribute("value",""+lr(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?po(n,!!i.multiple,r,!1):i.defaultValue!=null&&po(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Cd)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(n&&e.stateNode!=null)mb(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(N(166));if(t=Pr(Lc.current),Pr(_i.current),wh(e)){if(i=e.stateNode,t=e.memoizedProps,i[xi]=e,(r=i.nodeValue!==t)&&(n=un,n!==null))switch(n.tag){case 3:vh(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&vh(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[xi]=e,e.stateNode=i}return gt(e),null;case 13:if(Ee(Me),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ce&&cn!==null&&e.mode&1&&!(e.flags&128))Nw(),xl(),e.flags|=98560,r=!1;else if(r=wh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(N(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(N(317));r[xi]=e}else xl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),r=!1}else Yn!==null&&(ug(Yn),Yn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Me.current&1?Qe===0&&(Qe=3):v0())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return _l(),ng(n,e),n===null&&Cc(e.stateNode.containerInfo),gt(e),null;case 10:return t0(e.type._context),gt(e),null;case 17:return Xt(e.type)&&Td(),gt(e),null;case 19:if(Ee(Me),r=e.memoizedState,r===null)return gt(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Dl(r,!1);else{if(Qe!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Fd(n),a!==null){for(e.flags|=128,Dl(r,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return xe(Me,Me.current&1|2),e.child}n=n.sibling}r.tail!==null&&je()>kl&&(e.flags|=128,i=!0,Dl(r,!1),e.lanes=4194304)}else{if(!i)if(n=Fd(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Dl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Ce)return gt(e),null}else 2*je()-r.renderingStartTime>kl&&t!==1073741824&&(e.flags|=128,i=!0,Dl(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=je(),e.sibling=null,t=Me.current,xe(Me,i?t&1|2:t&1),e):(gt(e),null);case 22:case 23:return y0(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?on&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function YS(n,e){switch(Qm(e),e.tag){case 1:return Xt(e.type)&&Td(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return _l(),Ee(Gt),Ee(_t),a0(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return r0(e),null;case 13:if(Ee(Me),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(N(340));xl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ee(Me),null;case 4:return _l(),null;case 10:return t0(e.type._context),null;case 22:case 23:return y0(),null;case 24:return null;default:return null}}var xh=!1,xt=!1,KS=typeof WeakSet=="function"?WeakSet:Set,B=null;function uo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){De(n,e,i)}else t.current=null}function ig(n,e,t){try{t()}catch(i){De(n,e,i)}}var zy=!1;function QS(n,e){if(Hp=_d,n=Aw(),Ym(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(o=a+s),d!==r||i!==0&&d.nodeType!==3||(c=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===s&&(o=a),f===r&&++h===i&&(c=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(Bp={focusedElem:n,selectionRange:t},_d=!1,B=e;B!==null;)if(e=B,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,B=n;else for(;B!==null;){e=B;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,_=v.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:In(e.type,A),_);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(S){De(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}return v=zy,zy=!1,v}function fc(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&ig(e,t,r)}s=s.next}while(s!==i)}}function Af(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function sg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function yb(n){var e=n.alternate;e!==null&&(n.alternate=null,yb(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[xi],delete e[Pc],delete e[Wp],delete e[IS],delete e[NS])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function vb(n){return n.tag===5||n.tag===3||n.tag===4}function Hy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Cd));else if(i!==4&&(n=n.child,n!==null))for(rg(n,e,t),n=n.sibling;n!==null;)rg(n,e,t),n=n.sibling}function ag(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ag(n,e,t),n=n.sibling;n!==null;)ag(n,e,t),n=n.sibling}var ut=null,qn=!1;function ys(n,e,t){for(t=t.child;t!==null;)wb(n,e,t),t=t.sibling}function wb(n,e,t){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(ff,t)}catch{}switch(t.tag){case 5:xt||uo(t,e);case 6:var i=ut,s=qn;ut=null,ys(n,e,t),ut=i,qn=s,ut!==null&&(qn?(n=ut,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ut.removeChild(t.stateNode));break;case 18:ut!==null&&(qn?(n=ut,t=t.stateNode,n.nodeType===8?ep(n.parentNode,t):n.nodeType===1&&ep(n,t),_c(n)):ep(ut,t.stateNode));break;case 4:i=ut,s=qn,ut=t.stateNode.containerInfo,qn=!0,ys(n,e,t),ut=i,qn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&ig(t,e,a),s=s.next}while(s!==i)}ys(n,e,t);break;case 1:if(!xt&&(uo(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){De(t,e,o)}ys(n,e,t);break;case 21:ys(n,e,t);break;case 22:t.mode&1?(xt=(i=xt)||t.memoizedState!==null,ys(n,e,t),xt=i):ys(n,e,t);break;default:ys(n,e,t)}}function By(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new KS),e.forEach(function(i){var s=a_.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Ln(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ut=o.stateNode,qn=!1;break e;case 3:ut=o.stateNode.containerInfo,qn=!0;break e;case 4:ut=o.stateNode.containerInfo,qn=!0;break e}o=o.return}if(ut===null)throw Error(N(160));wb(r,a,s),ut=null,qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){De(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bb(e,n),e=e.sibling}function bb(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ln(e,n),ti(n),i&4){try{fc(3,n,n.return),Af(3,n)}catch(A){De(n,n.return,A)}try{fc(5,n,n.return)}catch(A){De(n,n.return,A)}}break;case 1:Ln(e,n),ti(n),i&512&&t!==null&&uo(t,t.return);break;case 5:if(Ln(e,n),ti(n),i&512&&t!==null&&uo(t,t.return),n.flags&32){var s=n.stateNode;try{bc(s,"")}catch(A){De(n,n.return,A)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&Uv(s,r),Rp(o,a);var u=Rp(o,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?Xv(s,d):h==="dangerouslySetInnerHTML"?Vv(s,d):h==="children"?bc(s,d):Dm(s,h,d,u)}switch(o){case"input":Ep(s,r);break;case"textarea":$v(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?po(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?po(s,!!r.multiple,r.defaultValue,!0):po(s,!!r.multiple,r.multiple?[]:"",!1))}s[Pc]=r}catch(A){De(n,n.return,A)}}break;case 6:if(Ln(e,n),ti(n),i&4){if(n.stateNode===null)throw Error(N(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(A){De(n,n.return,A)}}break;case 3:if(Ln(e,n),ti(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{_c(e.containerInfo)}catch(A){De(n,n.return,A)}break;case 4:Ln(e,n),ti(n);break;case 13:Ln(e,n),ti(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(g0=je())),i&4&&By(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(xt=(u=xt)||h,Ln(e,n),xt=u):Ln(e,n),ti(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(B=n,h=n.child;h!==null;){for(d=B=h;B!==null;){switch(f=B,p=f.child,f.tag){case 0:case 11:case 14:case 15:fc(4,f,f.return);break;case 1:uo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(A){De(i,t,A)}}break;case 5:uo(f,f.return);break;case 22:if(f.memoizedState!==null){$y(d);continue}}p!==null?(p.return=f,B=p):$y(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Gv("display",a))}catch(A){De(n,n.return,A)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(A){De(n,n.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,n),ti(n),i&4&&By(n);break;case 21:break;default:Ln(e,n),ti(n)}}function ti(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(vb(t)){var i=t;break e}t=t.return}throw Error(N(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(bc(s,""),i.flags&=-33);var r=Hy(n);ag(n,r,s);break;case 3:case 4:var a=i.stateNode.containerInfo,o=Hy(n);rg(n,o,a);break;default:throw Error(N(161))}}catch(c){De(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function ZS(n,e,t){B=n,Ab(n)}function Ab(n,e,t){for(var i=(n.mode&1)!==0;B!==null;){var s=B,r=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||xh;if(!a){var o=s.alternate,c=o!==null&&o.memoizedState!==null||xt;o=xh;var u=xt;if(xh=a,(xt=c)&&!u)for(B=s;B!==null;)a=B,c=a.child,a.tag===22&&a.memoizedState!==null?Wy(s):c!==null?(c.return=a,B=c):Wy(s);for(;r!==null;)B=r,Ab(r),r=r.sibling;B=s,xh=o,xt=u}Uy(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,B=r):Uy(n)}}function Uy(n){for(;B!==null;){var e=B;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||Af(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!xt)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:In(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&ky(e,r,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ky(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&_c(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}xt||e.flags&512&&sg(e)}catch(f){De(e,e.return,f)}}if(e===n){B=null;break}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}}function $y(n){for(;B!==null;){var e=B;if(e===n){B=null;break}var t=e.sibling;if(t!==null){t.return=e.return,B=t;break}B=e.return}}function Wy(n){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Af(4,e)}catch(c){De(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(c){De(e,s,c)}}var r=e.return;try{sg(e)}catch(c){De(e,r,c)}break;case 5:var a=e.return;try{sg(e)}catch(c){De(e,a,c)}}}catch(c){De(e,e.return,c)}if(e===n){B=null;break}var o=e.sibling;if(o!==null){o.return=e.return,B=o;break}B=e.return}}var JS=Math.ceil,jd=gs.ReactCurrentDispatcher,f0=gs.ReactCurrentOwner,kn=gs.ReactCurrentBatchConfig,le=0,rt=null,Ue=null,ht=0,on=0,ho=gr(0),Qe=0,Fc=null,Ma=0,xf=0,p0=0,pc=null,$t=null,g0=0,kl=1/0,Ti=null,zd=!1,og=null,rr=null,Sh=!1,Js=null,Hd=0,gc=0,lg=null,Hh=-1,Bh=0;function Rt(){return le&6?je():Hh!==-1?Hh:Hh=je()}function ar(n){return n.mode&1?le&2&&ht!==0?ht&-ht:DS.transition!==null?(Bh===0&&(Bh=rw()),Bh):(n=ye,n!==0||(n=window.event,n=n===void 0?16:dw(n.type)),n):1}function Jn(n,e,t,i){if(50<gc)throw gc=0,lg=null,Error(N(185));eh(n,t,i),(!(le&2)||n!==rt)&&(n===rt&&(!(le&2)&&(xf|=t),Qe===4&&Ss(n,ht)),qt(n,i),t===1&&le===0&&!(e.mode&1)&&(kl=je()+500,vf&&mr()))}function qt(n,e){var t=n.callbackNode;D1(n,e);var i=Sd(n,n===rt?ht:0);if(i===0)t!==null&&J0(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&J0(t),e===1)n.tag===0?FS(Vy.bind(null,n)):Lw(Vy.bind(null,n)),LS(function(){!(le&6)&&mr()}),t=null;else{switch(aw(i)){case 1:t=Bm;break;case 4:t=iw;break;case 16:t=xd;break;case 536870912:t=sw;break;default:t=xd}t=Pb(t,xb.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function xb(n,e){if(Hh=-1,Bh=0,le&6)throw Error(N(327));var t=n.callbackNode;if(wo()&&n.callbackNode!==t)return null;var i=Sd(n,n===rt?ht:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Bd(n,i);else{e=i;var s=le;le|=2;var r=_b();(rt!==n||ht!==e)&&(Ti=null,kl=je()+500,ka(n,e));do try{n_();break}catch(o){Sb(n,o)}while(!0);e0(),jd.current=r,le=s,Ue!==null?e=0:(rt=null,ht=0,e=Qe)}if(e!==0){if(e===2&&(s=Fp(n),s!==0&&(i=s,e=cg(n,s))),e===1)throw t=Fc,ka(n,0),Ss(n,i),qt(n,je()),t;if(e===6)Ss(n,i);else{if(s=n.current.alternate,!(i&30)&&!e_(s)&&(e=Bd(n,i),e===2&&(r=Fp(n),r!==0&&(i=r,e=cg(n,r))),e===1))throw t=Fc,ka(n,0),Ss(n,i),qt(n,je()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(N(345));case 2:br(n,$t,Ti);break;case 3:if(Ss(n,i),(i&130023424)===i&&(e=g0+500-je(),10<e)){if(Sd(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Rt(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=$p(br.bind(null,n,$t,Ti),e);break}br(n,$t,Ti);break;case 4:if(Ss(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-Zn(i);r=1<<a,a=e[a],a>s&&(s=a),i&=~r}if(i=s,i=je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*JS(i/1960))-i,10<i){n.timeoutHandle=$p(br.bind(null,n,$t,Ti),i);break}br(n,$t,Ti);break;case 5:br(n,$t,Ti);break;default:throw Error(N(329))}}}return qt(n,je()),n.callbackNode===t?xb.bind(null,n):null}function cg(n,e){var t=pc;return n.current.memoizedState.isDehydrated&&(ka(n,e).flags|=256),n=Bd(n,e),n!==2&&(e=$t,$t=t,e!==null&&ug(e)),n}function ug(n){$t===null?$t=n:$t.push.apply($t,n)}function e_(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!ei(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ss(n,e){for(e&=~p0,e&=~xf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Zn(e),i=1<<t;n[t]=-1,e&=~i}}function Vy(n){if(le&6)throw Error(N(327));wo();var e=Sd(n,0);if(!(e&1))return qt(n,je()),null;var t=Bd(n,e);if(n.tag!==0&&t===2){var i=Fp(n);i!==0&&(e=i,t=cg(n,i))}if(t===1)throw t=Fc,ka(n,0),Ss(n,e),qt(n,je()),t;if(t===6)throw Error(N(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,br(n,$t,Ti),qt(n,je()),null}function m0(n,e){var t=le;le|=1;try{return n(e)}finally{le=t,le===0&&(kl=je()+500,vf&&mr())}}function Ia(n){Js!==null&&Js.tag===0&&!(le&6)&&wo();var e=le;le|=1;var t=kn.transition,i=ye;try{if(kn.transition=null,ye=1,n)return n()}finally{ye=i,kn.transition=t,le=e,!(le&6)&&mr()}}function y0(){on=ho.current,Ee(ho)}function ka(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,RS(t)),Ue!==null)for(t=Ue.return;t!==null;){var i=t;switch(Qm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Td();break;case 3:_l(),Ee(Gt),Ee(_t),a0();break;case 5:r0(i);break;case 4:_l();break;case 13:Ee(Me);break;case 19:Ee(Me);break;case 10:t0(i.type._context);break;case 22:case 23:y0()}t=t.return}if(rt=n,Ue=n=or(n.current,null),ht=on=e,Qe=0,Fc=null,p0=xf=Ma=0,$t=pc=null,Tr!==null){for(e=0;e<Tr.length;e++)if(t=Tr[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var a=r.next;r.next=s,i.next=a}t.pending=i}Tr=null}return n}function Sb(n,e){do{var t=Ue;try{if(e0(),Oh.current=Od,Dd){for(var i=Ie.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Dd=!1}if(La=0,st=Ye=Ie=null,dc=!1,Mc=0,f0.current=null,t===null||t.return===null){Qe=1,Fc=e,Ue=null;break}e:{var r=n,a=t.return,o=t,c=e;if(e=ht,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=My(a);if(p!==null){p.flags&=-257,Iy(p,a,o,r,e),p.mode&1&&Ly(r,u,e),e=p,c=u;var v=e.updateQueue;if(v===null){var A=new Set;A.add(c),e.updateQueue=A}else v.add(c);break e}else{if(!(e&1)){Ly(r,u,e),v0();break e}c=Error(N(426))}}else if(Ce&&o.mode&1){var _=My(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Iy(_,a,o,r,e),Zm(El(c,o));break e}}r=c=El(c,o),Qe!==4&&(Qe=2),pc===null?pc=[r]:pc.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=ab(r,c,e);Ey(r,g);break e;case 1:o=c;var w=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(rr===null||!rr.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=ob(r,o,e);Ey(r,S);break e}}r=r.return}while(r!==null)}kb(t)}catch(k){e=k,Ue===t&&t!==null&&(Ue=t=t.return);continue}break}while(!0)}function _b(){var n=jd.current;return jd.current=Od,n===null?Od:n}function v0(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),rt===null||!(Ma&268435455)&&!(xf&268435455)||Ss(rt,ht)}function Bd(n,e){var t=le;le|=2;var i=_b();(rt!==n||ht!==e)&&(Ti=null,ka(n,e));do try{t_();break}catch(s){Sb(n,s)}while(!0);if(e0(),le=t,jd.current=i,Ue!==null)throw Error(N(261));return rt=null,ht=0,Qe}function t_(){for(;Ue!==null;)Eb(Ue)}function n_(){for(;Ue!==null&&!C1();)Eb(Ue)}function Eb(n){var e=Tb(n.alternate,n,on);n.memoizedProps=n.pendingProps,e===null?kb(n):Ue=e,f0.current=null}function kb(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=YS(t,e),t!==null){t.flags&=32767,Ue=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Qe=6,Ue=null;return}}else if(t=qS(t,e,on),t!==null){Ue=t;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=n}while(e!==null);Qe===0&&(Qe=5)}function br(n,e,t){var i=ye,s=kn.transition;try{kn.transition=null,ye=1,i_(n,e,t,i)}finally{kn.transition=s,ye=i}return null}function i_(n,e,t,i){do wo();while(Js!==null);if(le&6)throw Error(N(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(N(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(O1(n,r),n===rt&&(Ue=rt=null,ht=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Sh||(Sh=!0,Pb(xd,function(){return wo(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=kn.transition,kn.transition=null;var a=ye;ye=1;var o=le;le|=4,f0.current=null,QS(n,t),bb(t,n),SS(Bp),_d=!!Hp,Bp=Hp=null,n.current=t,ZS(t),T1(),le=o,ye=a,kn.transition=r}else n.current=t;if(Sh&&(Sh=!1,Js=n,Hd=s),r=n.pendingLanes,r===0&&(rr=null),L1(t.stateNode),qt(n,je()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(zd)throw zd=!1,n=og,og=null,n;return Hd&1&&n.tag!==0&&wo(),r=n.pendingLanes,r&1?n===lg?gc++:(gc=0,lg=n):gc=0,mr(),null}function wo(){if(Js!==null){var n=aw(Hd),e=kn.transition,t=ye;try{if(kn.transition=null,ye=16>n?16:n,Js===null)var i=!1;else{if(n=Js,Js=null,Hd=0,le&6)throw Error(N(331));var s=le;for(le|=4,B=n.current;B!==null;){var r=B,a=r.child;if(B.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(B=u;B!==null;){var h=B;switch(h.tag){case 0:case 11:case 15:fc(8,h,r)}var d=h.child;if(d!==null)d.return=h,B=d;else for(;B!==null;){h=B;var f=h.sibling,p=h.return;if(yb(h),h===u){B=null;break}if(f!==null){f.return=p,B=f;break}B=p}}}var v=r.alternate;if(v!==null){var A=v.child;if(A!==null){v.child=null;do{var _=A.sibling;A.sibling=null,A=_}while(A!==null)}}B=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,B=a;else e:for(;B!==null;){if(r=B,r.flags&2048)switch(r.tag){case 0:case 11:case 15:fc(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,B=g;break e}B=r.return}}var w=n.current;for(B=w;B!==null;){a=B;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,B=x;else e:for(a=w;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Af(9,o)}}catch(k){De(o,o.return,k)}if(o===a){B=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,B=S;break e}B=o.return}}if(le=s,mr(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(ff,n)}catch{}i=!0}return i}finally{ye=t,kn.transition=e}}return!1}function Gy(n,e,t){e=El(t,e),e=ab(n,e,1),n=sr(n,e,1),e=Rt(),n!==null&&(eh(n,1,e),qt(n,e))}function De(n,e,t){if(n.tag===3)Gy(n,n,t);else for(;e!==null;){if(e.tag===3){Gy(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rr===null||!rr.has(i))){n=El(t,n),n=ob(e,n,1),e=sr(e,n,1),n=Rt(),e!==null&&(eh(e,1,n),qt(e,n));break}}e=e.return}}function s_(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Rt(),n.pingedLanes|=n.suspendedLanes&t,rt===n&&(ht&t)===t&&(Qe===4||Qe===3&&(ht&130023424)===ht&&500>je()-g0?ka(n,0):p0|=t),qt(n,e)}function Cb(n,e){e===0&&(n.mode&1?(e=fh,fh<<=1,!(fh&130023424)&&(fh=4194304)):e=1);var t=Rt();n=hs(n,e),n!==null&&(eh(n,e,t),qt(n,t))}function r_(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Cb(n,t)}function a_(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(N(314))}i!==null&&i.delete(e),Cb(n,t)}var Tb;Tb=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gt.current)Wt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Wt=!1,XS(n,e,t);Wt=!!(n.flags&131072)}else Wt=!1,Ce&&e.flags&1048576&&Mw(e,Ld,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;zh(n,e),n=e.pendingProps;var s=Al(e,_t.current);vo(e,t),s=l0(null,e,i,n,s,t);var r=c0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(i)?(r=!0,Pd(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,i0(e),s.updater=bf,e.stateNode=s,s._reactInternals=e,Kp(e,i,n,t),e=Jp(null,e,i,!0,r,t)):(e.tag=0,Ce&&r&&Km(e),Tt(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(zh(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=l_(i),n=In(i,n),s){case 0:e=Zp(null,e,i,n,t);break e;case 1:e=Dy(null,e,i,n,t);break e;case 11:e=Ny(null,e,i,n,t);break e;case 14:e=Fy(null,e,i,In(i.type,n),t);break e}throw Error(N(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:In(i,s),Zp(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:In(i,s),Dy(n,e,i,s,t);case 3:e:{if(hb(e),n===null)throw Error(N(387));i=e.pendingProps,r=e.memoizedState,s=r.element,jw(n,e),Nd(e,i,null,t);var a=e.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=El(Error(N(423)),e),e=Oy(n,e,i,t,s);break e}else if(i!==s){s=El(Error(N(424)),e),e=Oy(n,e,i,t,s);break e}else for(cn=ir(e.stateNode.containerInfo.firstChild),un=e,Ce=!0,Yn=null,t=Dw(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xl(),i===s){e=ds(n,e,t);break e}Tt(n,e,i,t)}e=e.child}return e;case 5:return zw(e),n===null&&Xp(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,a=s.children,Up(i,s)?a=null:r!==null&&Up(i,r)&&(e.flags|=32),ub(n,e),Tt(n,e,a,t),e.child;case 6:return n===null&&Xp(e),null;case 13:return db(n,e,t);case 4:return s0(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Sl(e,null,i,t):Tt(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:In(i,s),Ny(n,e,i,s,t);case 7:return Tt(n,e,e.pendingProps,t),e.child;case 8:return Tt(n,e,e.pendingProps.children,t),e.child;case 12:return Tt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,a=s.value,xe(Md,i._currentValue),i._currentValue=a,r!==null)if(ei(r.value,a)){if(r.children===s.children&&!Gt.current){e=ds(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=rs(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),qp(r.return,t,e),o.lanes|=t;break}c=c.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(N(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),qp(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Tt(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,vo(e,t),s=Tn(s),i=i(s),e.flags|=1,Tt(n,e,i,t),e.child;case 14:return i=e.type,s=In(i,e.pendingProps),s=In(i.type,s),Fy(n,e,i,s,t);case 15:return lb(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:In(i,s),zh(n,e),e.tag=1,Xt(i)?(n=!0,Pd(e)):n=!1,vo(e,t),rb(e,i,s),Kp(e,i,s,t),Jp(null,e,i,!0,n,t);case 19:return fb(n,e,t);case 22:return cb(n,e,t)}throw Error(N(156,e.tag))};function Pb(n,e){return nw(n,e)}function o_(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,e,t,i){return new o_(n,e,t,i)}function w0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function l_(n){if(typeof n=="function")return w0(n)?1:0;if(n!=null){if(n=n.$$typeof,n===jm)return 11;if(n===zm)return 14}return 2}function or(n,e){var t=n.alternate;return t===null?(t=En(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Uh(n,e,t,i,s,r){var a=2;if(i=n,typeof n=="function")w0(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case to:return Ca(t.children,s,r,e);case Om:a=8,s|=8;break;case bp:return n=En(12,t,e,s|2),n.elementType=bp,n.lanes=r,n;case Ap:return n=En(13,t,e,s),n.elementType=Ap,n.lanes=r,n;case xp:return n=En(19,t,e,s),n.elementType=xp,n.lanes=r,n;case zv:return Sf(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ov:a=10;break e;case jv:a=9;break e;case jm:a=11;break e;case zm:a=14;break e;case bs:a=16,i=null;break e}throw Error(N(130,n==null?n:typeof n,""))}return e=En(a,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Ca(n,e,t,i){return n=En(7,n,i,e),n.lanes=t,n}function Sf(n,e,t,i){return n=En(22,n,i,e),n.elementType=zv,n.lanes=t,n.stateNode={isHidden:!1},n}function lp(n,e,t){return n=En(6,n,null,e),n.lanes=t,n}function cp(n,e,t){return e=En(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function c_(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$f(0),this.expirationTimes=$f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function b0(n,e,t,i,s,r,a,o,c){return n=new c_(n,e,t,o,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=En(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},i0(r),n}function u_(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function Rb(n){if(!n)return cr;n=n._reactInternals;e:{if(Ha(n)!==n||n.tag!==1)throw Error(N(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(n.tag===1){var t=n.type;if(Xt(t))return Rw(n,t,e)}return e}function Lb(n,e,t,i,s,r,a,o,c){return n=b0(t,i,!0,n,s,r,a,o,c),n.context=Rb(null),t=n.current,i=Rt(),s=ar(t),r=rs(i,s),r.callback=e??null,sr(t,r,s),n.current.lanes=s,eh(n,s,i),qt(n,i),n}function _f(n,e,t,i){var s=e.current,r=Rt(),a=ar(s);return t=Rb(t),e.context===null?e.context=t:e.pendingContext=t,e=rs(r,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=sr(s,e,a),n!==null&&(Jn(n,s,a,r),Dh(n,s,a)),a}function Ud(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Xy(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function A0(n,e){Xy(n,e),(n=n.alternate)&&Xy(n,e)}function h_(){return null}var Mb=typeof reportError=="function"?reportError:function(n){console.error(n)};function x0(n){this._internalRoot=n}Ef.prototype.render=x0.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(N(409));_f(n,e,null,null)};Ef.prototype.unmount=x0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ia(function(){_f(null,n,null,null)}),e[us]=null}};function Ef(n){this._internalRoot=n}Ef.prototype.unstable_scheduleHydration=function(n){if(n){var e=cw();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xs.length&&e!==0&&e<xs[t].priority;t++);xs.splice(t,0,n),t===0&&hw(n)}};function S0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function kf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function qy(){}function d_(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=Ud(a);r.call(u)}}var a=Lb(e,i,n,0,null,!1,!1,"",qy);return n._reactRootContainer=a,n[us]=a.current,Cc(n.nodeType===8?n.parentNode:n),Ia(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var o=i;i=function(){var u=Ud(c);o.call(u)}}var c=b0(n,0,!1,null,null,!1,!1,"",qy);return n._reactRootContainer=c,n[us]=c.current,Cc(n.nodeType===8?n.parentNode:n),Ia(function(){_f(e,c,t,i)}),c}function Cf(n,e,t,i,s){var r=t._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var o=s;s=function(){var c=Ud(a);o.call(c)}}_f(e,a,n,s)}else a=d_(t,e,n,s,i);return Ud(a)}ow=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=$l(e.pendingLanes);t!==0&&(Um(e,t|1),qt(e,je()),!(le&6)&&(kl=je()+500,mr()))}break;case 13:Ia(function(){var i=hs(n,1);if(i!==null){var s=Rt();Jn(i,n,1,s)}}),A0(n,1)}};$m=function(n){if(n.tag===13){var e=hs(n,134217728);if(e!==null){var t=Rt();Jn(e,n,134217728,t)}A0(n,134217728)}};lw=function(n){if(n.tag===13){var e=ar(n),t=hs(n,e);if(t!==null){var i=Rt();Jn(t,n,e,i)}A0(n,e)}};cw=function(){return ye};uw=function(n,e){var t=ye;try{return ye=n,e()}finally{ye=t}};Mp=function(n,e,t){switch(e){case"input":if(Ep(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=yf(i);if(!s)throw Error(N(90));Bv(i),Ep(i,s)}}}break;case"textarea":$v(n,t);break;case"select":e=t.value,e!=null&&po(n,!!t.multiple,e,!1)}};Kv=m0;Qv=Ia;var f_={usingClientEntryPoint:!1,Events:[nh,ro,yf,qv,Yv,m0]},Ol={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p_={bundleType:Ol.bundleType,version:Ol.version,rendererPackageName:Ol.rendererPackageName,rendererConfig:Ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ew(n),n===null?null:n.stateNode},findFiberByHostInstance:Ol.findFiberByHostInstance||h_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{ff=_h.inject(p_),Si=_h}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f_;fn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S0(e))throw Error(N(200));return u_(n,e,null,t)};fn.createRoot=function(n,e){if(!S0(n))throw Error(N(299));var t=!1,i="",s=Mb;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=b0(n,1,!1,null,null,t,!1,i,s),n[us]=e.current,Cc(n.nodeType===8?n.parentNode:n),new x0(e)};fn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(N(188)):(n=Object.keys(n).join(","),Error(N(268,n)));return n=ew(e),n=n===null?null:n.stateNode,n};fn.flushSync=function(n){return Ia(n)};fn.hydrate=function(n,e,t){if(!kf(e))throw Error(N(200));return Cf(null,n,e,!0,t)};fn.hydrateRoot=function(n,e,t){if(!S0(n))throw Error(N(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",a=Mb;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Lb(e,null,n,1,t??null,s,!1,r,a),n[us]=e.current,Cc(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Ef(e)};fn.render=function(n,e,t){if(!kf(e))throw Error(N(200));return Cf(null,n,e,!1,t)};fn.unmountComponentAtNode=function(n){if(!kf(n))throw Error(N(40));return n._reactRootContainer?(Ia(function(){Cf(null,null,n,!1,function(){n._reactRootContainer=null,n[us]=null})}),!0):!1};fn.unstable_batchedUpdates=m0;fn.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!kf(t))throw Error(N(200));if(n==null||n._reactInternals===void 0)throw Error(N(38));return Cf(n,e,t,!1,i)};fn.version="18.3.1-next-f1338f8080-20240426";function Ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ib)}catch(n){console.error(n)}}Ib(),Iv.exports=fn;var g_=Iv.exports,Nb,Yy=g_;Nb=Yy.createRoot,Yy.hydrateRoot;var m_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const y_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v_=(n,e)=>{const t=Kn.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,children:o,...c},u)=>Kn.createElement("svg",{ref:u,...m_,width:s,height:s,stroke:i,strokeWidth:a?Number(r)*24/Number(s):r,className:`lucide lucide-${y_(n)}`,...c},[...e.map(([h,d])=>Kn.createElement(h,d)),...(Array.isArray(o)?o:[o])||[]]));return t.displayName=`${n}`,t};var yr=v_;const w_=yr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ky=yr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Qy=yr("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),up=yr("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),b_=yr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),A_=yr("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),hp=yr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),dp=yr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),x_=`
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    color: #333;
    background: white;
    font-size: 12px;
  }
  .header {
    text-align: center;
    padding-bottom: 20px;
    margin-bottom: 30px;
    border-bottom: 2px solid #667eea;
  }
  .header h1 {
    font-size: 2em;
    margin: 0;
    color: #2c5aa0;
    font-weight: bold;
  }
  .personal-details {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 25px;
    border: 1px solid #e9ecef;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }
  .personal-details h2 {
    color: #2c5aa0;
    font-size: 1.2em;
    margin-top: 0;
    padding-bottom: 5px;
    border-bottom: 1px solid #667eea;
  }
  .contact-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  .contact-item {
    margin: 2px 0;
    display: flex;
    align-items: center;
  }
  .contact-item strong {
    color: #2c5aa0;
    min-width: 70px;
  }
  .section {
    margin-bottom: 30px;
    position: relative;
  }
  .section h2 {
    color: #2c5aa0;
    font-size: 1.3em;
    padding-bottom: 8px;
    margin-bottom: 20px;
    border-bottom: 2px solid #667eea;
    background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), transparent);
    padding-left: 10px;
    margin-left: -10px;
    border-radius: 5px 0 0 0;
  }
  .profile {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    padding: 25px;
    border-radius: 12px;
    font-size: 1.05em;
    line-height: 1.7;
    border-left: 4px solid #667eea;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }
  .job {
    margin-bottom: 25px;
    border-left: 4px solid #667eea;
    padding-left: 20px;
    position: relative;
    background: linear-gradient(90deg, rgba(102, 126, 234, 0.03), transparent);
    padding-top: 15px;
    padding-bottom: 15px;
    border-radius: 0 8px 8px 0;
    margin-left: -5px;
    padding-left: 25px;
  }
  .job::before {
    content: '';
    position: absolute;
    left: -6px;
    top: 15px;
    width: 8px;
    height: 8px;
    background: #667eea;
    border-radius: 50%;
    box-shadow: 0 0 0 3px white, 0 0 0 6px #667eea;
  }
  .job-title {
    font-size: 1.1em;
    font-weight: bold;
    color: #2c5aa0;
    margin-bottom: 5px;
  }
  .company {
    font-weight: bold;
    font-size: 1em;
    margin-bottom: 3px;
    color: #333;
  }
  .dates {
    font-style: italic;
    color: #666;
    margin-bottom: 8px;
    font-size: 0.95em;
  }
  .company-description {
    font-style: italic;
    color: #666;
    margin-bottom: 12px;
    background: rgba(102, 126, 234, 0.08);
    padding: 10px;
    border-radius: 6px;
    border-left: 2px solid #667eea;
  }
  .project {
    margin-bottom: 25px;
    border-left: 4px solid #764ba2;
    padding-left: 20px;
    position: relative;
    background: linear-gradient(90deg, rgba(118, 75, 162, 0.03), transparent);
    padding-top: 15px;
    padding-bottom: 15px;
    border-radius: 0 8px 8px 0;
    margin-left: -5px;
    padding-left: 25px;
  }
  .project::before {
    content: '';
    position: absolute;
    left: -6px;
    top: 15px;
    width: 8px;
    height: 8px;
    background: #764ba2;
    border-radius: 50%;
    box-shadow: 0 0 0 3px white, 0 0 0 6px #764ba2;
  }
  .technologies {
    font-style: italic;
    color: #764ba2;
    margin-bottom: 8px;
    font-size: 0.95em;
    font-weight: 500;
  }
  .certificate {
    margin-bottom: 20px;
    padding: 15px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    border-radius: 8px;
    border-left: 4px solid #667eea;
  }
  .certificate .job-title {
    color: #667eea;
    margin-bottom: 10px;
  }
  ul {
    margin: 0;
    padding-left: 18px;
  }
  li {
    margin-bottom: 6px;
    line-height: 1.6;
  }
`,S_=`
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    color: #000;
    background: white;
    font-size: 12px;
  }
  .header h1 {
    font-size: 1.8em;
    margin: 0 0 20px 0;
    font-weight: bold;
    text-align: center;
  }
  .section h2 {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 10px;
    margin-top: 20px;
  }
  .job-title {
    font-weight: bold;
    margin-bottom: 5px;
  }
  .company {
    font-weight: bold;
    margin-bottom: 3px;
  }
  .dates {
    font-style: italic;
    margin-bottom: 8px;
  }
  .contact-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 5px;
    margin-bottom: 15px;
  }
  .contact-item strong {
    font-weight: bold;
  }
  .personal-details h2 {
    font-weight: bold;
    margin-top: 0;
    margin-bottom: 10px;
  }
  .job, .project {
    margin-bottom: 15px;
  }
  .company-description {
    font-style: italic;
    margin-bottom: 10px;
  }
  .technologies {
    font-style: italic;
    margin-bottom: 8px;
  }
  .certificate {
    margin-bottom: 15px;
  }
`,__=`
  @media print {
    body { font-size: 11px; }
    .no-print { display: none; }
  }
`,Zy=(n,e)=>{const t=e==="styled"?x_:S_;return`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="UTF-8">
        <title>${n.personalDetails.name} - CV</title>
        <style>
          ${t}
          ${__}
        </style>
      </head>
      <body>
        <div class="header">
          <h1>${n.personalDetails.name}</h1>
        </div>
        
        <div class="personal-details">
          <h2>CONTACT DETAILS</h2>
          <div class="contact-info">
            <div class="contact-item"><strong>Phone:</strong> ${n.personalDetails.phone}</div>
            <div class="contact-item"><strong>Address:</strong> ${n.personalDetails.address}</div>
            <div class="contact-item"><strong>Email:</strong> ${n.personalDetails.email}</div>
            <div class="contact-item"><strong>Website:</strong> ${n.personalDetails.website}</div>
          </div>
        </div>
        
        <div class="section">
          <h2>PROFILE</h2>
          <div class="profile">
            ${n.profile.split(`
`).map(i=>i.trim()).filter(i=>i).join("<br><br>")}
          </div>
        </div>
        
        <div class="section">
          <h2>WORK EXPERIENCE</h2>
          ${n.workExperience.map(i=>`
            <div class="job">
              <div class="job-title">${i.title}</div>
              <div class="company">${i.company}</div>
              <div class="dates">${i.dates}</div>
              ${i.description?`<div class="company-description">${i.description}</div>`:""}
              <ul>
                ${i.responsibilities.map(s=>`<li>${s}</li>`).join("")}
              </ul>
            </div>
          `).join("")}
        </div>
        
        ${n.personalProjects.length>0?`
          <div class="section">
            <h2>PERSONAL PROJECTS</h2>
            ${n.personalProjects.map(i=>`
              <div class="project">
                <div class="job-title">${i.title}</div>
                <div class="technologies">Technologies: ${i.technologies}</div>
                <ul>
                  ${i.responsibilities.map(s=>`<li>${s}</li>`).join("")}
                </ul>
              </div>
            `).join("")}
          </div>
        `:""}
        
        ${n.certificates.length>0?`
          <div class="section">
            <h2>CERTIFICATES</h2>
            ${n.certificates.map(i=>`
              <div class="certificate">
                <div class="job-title">${i.title}</div>
                <p>${i.description}</p>
              </div>
            `).join("")}
          </div>
        `:""}
        
        <div class="section">
          <h2>EDUCATION</h2>
          <div class="job">
            <div class="job-title">${n.education.degree}</div>
            <div class="company">${n.education.university}</div>
            <div class="dates">${n.education.dates}</div>
            <p>${n.education.grade}</p>
          </div>
        </div>

        ${n.courses?`
          <div class="section">
            <h2>ADDITIONAL COURSES</h2>
            <p>${n.courses}</p>
          </div>
        `:""}
      </body>
    </html>
  `},E_={personalDetails:{name:"Allegra Bourne",phone:"(+44) 7854 943 193",address:"14 Lewis Road, Northallerton, North Yorkshire, UK. DL6 3RX",email:"allegrabourne@gmail.com",website:"allegrabourne.github.io/"},profile:`Software Engineer with 15+ years of experience delivering event driven, AI powered and scalable solutions for local, national and multinational businesses in both the private and public sectors across diverse industries, including finance, supply chain and transportation systems.

Adept at translating business requirements into technical solutions and working with modern development frameworks, cloud services, and enterprise messaging solutions with an emphasis on test-driven development and design patterns.

Advocate of mentoring and collaboration. Seeking to contribute technical expertise to innovative projects.`,workExperience:[{title:"Senior Software Engineer",company:"Ligentia, Leeds, England, United Kingdom",dates:"Jun 2022 - Present",description:"Ligentia is a leading supply chain technology and services provider specialising in manufacturing, consumer brands, pharmaceuticals and the retail sector.",responsibilities:["Development of new Consignment Delivery Management portal with API development utilising Fast Endpoints, messaging via Azure ServiceBus and Angular for UI development.","Worked to develop the new Landed Cost portal, a project which helped to retain Myer; Australia's largest department store, as a customer. Providing Myer with accurate landed cost and end-to-end visibility of their supply chain, from production confirmation, to freight booking, through to delivery to stores spanning Australia.","Azure DevOps / Octopus Deploy for CI and release management, creation and maintenance of deployment pipelines inline with industry practice.","Blazor utilised for the developmental concept for the new Client onboarding web application.","Business analysis of legacy processes where knowledge had been lost with a view of replacing them with newer tech stacks."]},{title:"Full Stack Developer",company:"Refract - an Allego company, Newcastle upon Tyne, England, United Kingdom",dates:"Apr 2021 - Jun 2022",description:"Refract utilises AI technology to deliver personalised insight, based on the business and their reps, showing the actions and words that align with top performers and results. Allego sets out to improve onboarding and messaging consistency with high-quality, reliable and secure video learning, communication and collaboration. Engaging new hires quickly, developing critical skills and driving faster results for an organisation.",responsibilities:["Introduced multilingual capabilities to the Refract platform.","Worked on introducing new 'road map' features to the Refract platform such as Call Analytics, Platform Usage and Deal Intelligence dashboards.",".Net, Angular and SQL utilising code first and EF migrations.","Azure development utilising blob containers.","Emphasis on TDD and design patterns to ensure quality of work."]},{title:"Integrations Developer",company:"XCM, York, England, United Kingdom",dates:"Apr 2020 - Apr 2021",description:"XCM are marketing specialists working with some of the biggest retailers in the UK to leverage competitive advantage via the use of specialist data tools, analysis and CRM services.",responsibilities:["Client integration utilising .Net Core and Kafka to ensure real time distributed streaming of big data from Google PubSub.","Docker used for Kafka containerisation.","TSQL / KSQL development.","Google Cloud / PubSub integration.","Apache AVRO for binary serialisation of messages for faster processing.","Data migration and integration.","Single Customer View.","Development of the XCM Horizon data warehouse.","Web Services development using .Net Core hosted in Kestrel."]},{title:"Software Engineer",company:"Cubic Corporation, Stockton-On-Tees, United Kingdom",dates:"Jan 2019 - Apr 2020",description:"Cubic Transportation Systems is one arm of Cubic Corporation that produces public transport solutions, traffic management platforms and fare reading and payment systems.",responsibilities:["Development of ICMP - the traffic management platform utilised by New South Wales, Australia. The platform formed part of TfNSW's $123 million intelligent congestion management program which enabled better traffic management through real-time data and predictive technology.","Frontend development utilising Angular / Typescript / SignalR.","Enterprise messaging conducted utilising NServiceBus / RabbitMQ.","Micro service development utilising AZURE Service Fabric / Topshelf / WebAPI services.","Continuous integration via Jenkins with SonarCube code smells and Octopus.","Development undertaken accordingly with Agile/SCRUM methodologies."]},{title:"Solution Developer",company:"Vianet Group plc, Stockton-On-Tees, United Kingdom",dates:"Jun 2017 - Dec 2018",description:"Vianet are UK leader in providing draught beer quality and waste management services.",responsibilities:["Worked on the IDraught IOT platform on the consumption of data that would empower customer's strategic decisions on metrics and business intelligence, these insights were then used to measure metrics such as wastage, temperature, in identifying missing drinks and improving drink quality.","Frontend development on the new 'Vianet IOT Portal' utilising AngularJS 2 / Typescript.","WebAPI services via the use of .Net Core and hosted using Kestrel.","AZURE web app services and message queueing.","Big data processing via HBASE.","JAVA / Apache SPARK / Hadoop number crunching business logic utilising IntelliJ GUI and taking on a TDD approach.","Introduced an emphasis on TDD and introduced concepts attaining to Agile/SCRUM and mentoring junior members of the team."]},{title:"Lead Software Developer",company:"ZyroFisher, Darlington, United Kingdom",dates:"Apr 2017 - Jun 2017",description:"ZyroFisher are the leading distributor of Parts, Accessories and Clothing to the UK and Irish cycling markets.",responsibilities:["Integrated new Altura Cycling customer facing commercial website with their backend ordering system and payment provider (included implementing Sage/SagePay API) utilising RabbitMQ, RESTful API services and HMAC authentication enabling customers to make online purchases for the first time.","Front-end development utilising NodeJS.","Emphasis on quality test driven development utilising NCrunch and MOQ."]},{title:"Software Developer",company:"Lowell Group, Leeds, United Kingdom",dates:"Apr 2012 - Apr 2017",description:"Lowell are one of Europe's largest credit management companies, operating in the UK and the DACH and Nordic regions.",responsibilities:["RESTful Web API services self hosted utilising Topshelf.","MVC5/Rest/CMS Umbraco - development of the new Lowell website, designed to give customers control over their accounts and manage payments securely through Verifone, similar to leading banking websites. In its first year, the platform saw over 150,000 customer registrations.","Automated deployment via Octopus deploy and continuous builds using TeamCity.","Test driven .Net development. NCrunch, MOQ.","Service Orientated Architecture - development of person matching and address cleansing services utilising WCF and RabbitMQ.","T-SQL utilising CLR functions.","ORM implemented using NHibernate.","Agile software development utilising SCRUM.","Development of LIMA - Lowell's main tracing application.","Provided third line support as required."]},{title:"Collections Development Analyst",company:"Lowell, Leeds, United Kingdom",dates:"Feb 2011 - Apr 2012",description:"",responsibilities:["Core business process mapping and improvement.","Business process automation utilising SSIS, T-SQL and C#/VB.net in order to create dynamic DTSX packages.","Data analysis utilising Crystal Reports and SSAS.","Systems support, project and change management.","Automated de-duping processes for enabling single view of customers with multiple accounts saving Lowell 40k (quoted by system supplier to scope out possible automation).","Mentored colleagues in the use of source control, TFS, .NET and SSIS."]},{title:"Integrated Systems Officer",company:"North Yorkshire County Council, Northallerton, United Kingdom",dates:"Feb 2009 - Feb 2011",description:"",responsibilities:["Project managed the deployment of CACI's 'Children's Centre Management System to the 40 Children's Centres throughout North Yorkshire.","Project managed the deployment of North Yorkshire's new integrated online Admissions system.","Aided in the deployment and integration of IMPULSE; the integrated system for children in North Yorkshire.","Instigated a drive in data quality, this included the creation of a number of XML cleansing macros utilising VBA and xpath to cleanse data received from Schools.","Aided with the implementation and accreditation of the prescribed national child reference system - ContactPoint and took the lead during Instance Accreditation for North Yorkshire and partners.","Provided augmented services when required."]},{title:"Systems Administrative Assistant (Internship)",company:"State Street, Luxembourg",dates:"Sep 2006 - Sep 2007",description:"State Street Corporation is a financial services company that provides investment management services for institutional investors.",responsibilities:["Data warehousing / mining and core applications development for fund compliance.","Java, Oracle and PL/SQL development.","VBA (Contingency macros).","Worked on the development of a data warehousing solution which pooled various assets, funds and investment information from different locations throughout the world. This information would then be used for investment analysis, fund accounting and various other investment strategies."]}],personalProjects:[{title:"AI-Powered Wildlife Health Monitoring Field Lab",technologies:"Python, PyTorch, Raspberry Pi, FastAPI, librosa, Deep Learning, Bioacoustics",responsibilities:["Developed an IoT edge field lab using Python, Raspberry Pi 4, and PyTorch with a custom convolutional neural network to detect hedgehog respiratory illness from acoustic signals, supporting faster interventions and conservation efforts.","Designed a real-time audio analysis pipeline that records 5-second clips, converts them into spectrograms, and classifies breathing patterns using a neural network, achieving ~75% accuracy and 0.91 precision.","Engineered a modular architecture with FastAPI, automated night-time recording, remote inference server on GPU hardware, and Pushbullet alerting.","Applied non-invasive bioacoustic monitoring aligned with UK conservation ethics, demonstrating cross-disciplinary innovation with potential applications in both wildlife conservation and healthcare."]}],certificates:[{title:"IBM Data Science Professional Certificate",description:"A comprehensive, ACE-recommended (12 college credits) and FIBAA-accredited (6 ECTS credits) program covering key data science skills, including Python, regression analysis, statistical modeling, and machine learning."},{title:"IBM AI Developer Professional Certificate",description:"A comprehensive program focused on the essential skills for developing AI applications, including machine learning, deep learning, and natural language processing."}],education:{degree:"BSc (HONS) BUSINESS COMPUTING",university:"University of Teesside",dates:"2004 - 2008",grade:"With Second Class Honours Division One (2:1)"},courses:"Please see LinkedIn for a comprehensive list of completed courses and qualifications"},k_=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/i,C_=/\bhttps?:\/\/[^\s]+|(?:www\.)[^\s]+\.[a-z]{2,}\b/i,T_=/\b(?:\+44\s?7\d{3}|\(0?7\d{3}\)|0?7\d{3})\s?\d{3}\s?\d{3}\b/,P_=/\b(?:\+44\s?|\(0\)\s?|0)(?:1\d{3}|2\d{2}|3\d{2}|[58]\d{2})\s?\d{3}\s?\d{3,4}\b/,R_=new RegExp(`${T_.source}|${P_.source}`,"i"),Fb=/\b([A-Z]{1,2}\d{1,2}[A-Z]?)\s?(\d[A-Z]{2})\b/i,Db=/\b(street|st|road|rd|avenue|ave|lane|ln|close|cl|drive|dr|way|place|pl|court|ct|terrace|terr|crescent|cres|square|sq|gardens|gdns|hill|park|mews)\b/i,L_=/^[0-9]{1,4}[A-Z]?\s+/,hg=/\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)[a-z]*\s+\d{4}\s*(?:|-|to)\s*(?:present|\d{4})/i,dg=/\b\d{4}\s*(?:|-|to)\s*(?:present|\d{4})\b/i,Jy=/^\s*(?:[-]|(\d+\.))\s+/;function M_(n){return(n??"").replace(/\u00a0/g," ").replace(/\s+/g," ").trim()}function Ta(n,e){try{const t=n.match(e);return t?t[0]:""}catch{return""}}function I_(n){return(n??"").toString().replace(/\r\n/g,`
`).split(`
`).map(e=>(e??"").trim()).filter(Boolean)}function N_(n){const e=M_(n);return e?Fb.test(e)||L_.test(e)&&Db.test(e):!1}function F_(n){const e=n.findIndex(a=>N_(a));if(e===-1)return"";const t=3;let i=e,s=e;const r=a=>Fb.test(a)||Db.test(a)||/^[A-Za-z ,.'-]{2,40}$/.test(a);for(let a=e-1;a>=0&&i>e-t&&r(n[a]);a--)i=a;for(let a=e+1;a<n.length&&s<e+t&&r(n[a]);a++)s=a;return n.slice(i,s+1).join(`
`)}function D_(n){const e=n.slice(0,5),t=i=>{if(!i||/[@\d]/.test(i)||i.length>60)return!1;const s=i.split(/\s+/).filter(Boolean);return s.length>=2&&s.length<=4&&s.every(r=>/^[A-Z][a-z'-]+$/.test(r))};return e.find(t)||""}const O_=[{key:"profile",re:/^\s*(profile|summary|professional summary)\s*$/i},{key:"experience",re:/^\s*(work experience|experience|employment history)\s*$/i},{key:"education",re:/^\s*(education|qualifications)\s*$/i},{key:"projects",re:/^\s*(projects|personal projects)\s*$/i},{key:"certs",re:/^\s*(certificates|certifications)\s*$/i},{key:"courses",re:/^\s*(courses|training|additional courses)\s*$/i}];function j_(n){return n.map((e,t)=>{const i=O_.find(s=>s.re.test(e));return i?{i:t,key:i.key}:null}).filter(Boolean)}function Va(n,e,t){const i=e.find(a=>a.key===t);if(!i)return[];const s=i.i+1,r=e.find(a=>a.i>i.i);return n.slice(s,r?r.i:n.length)}function z_(n){return n.join(" ").slice(0,600)}function H_(n){const e=[];let t=null;for(const i of n)hg.test(i)||dg.test(i)?(t&&e.push(t),t={title:"",company:"",dates:Ta(i,hg)||Ta(i,dg),description:"",responsibilities:[]}):Jy.test(i)?(t||(t={title:"",company:"",dates:"",description:"",responsibilities:[]}),t.responsibilities.push(i.replace(Jy,"").trim())):t?t.description?t.description+=" "+i:t.description=i:t={title:i,company:"",dates:"",description:"",responsibilities:[]};return t&&e.push(t),e}function B_(n){const e=n.join(" ");return{degree:n.find(t=>/(BSc|MSc|PhD|Bachelor|Master|Degree)/i.test(t))||"",university:n.find(t=>/(University|College|Institute|School)/i.test(t))||"",dates:Ta(e,hg)||Ta(e,dg),grade:n.find(t=>/(First|Second|Upper|Lower|Honours|Merit|Distinction)/i.test(t))||""}}function ev(n,e){return n.map(t=>e==="cert"?{title:t,description:""}:{title:t,technologies:"",responsibilities:[]})}function U_(){return{personalDetails:{name:"",phone:"",address:"",email:"",website:""},profile:"",education:{degree:"",university:"",dates:"",grade:""},workExperience:[],personalProjects:[],certificates:[],courses:""}}const $_={parseCV(n){const e=U_();try{const t=(n??"").toString(),i=I_(t),s=t;e.personalDetails.email=Ta(s,k_),e.personalDetails.phone=Ta(s,R_),e.personalDetails.website=Ta(s,C_),e.personalDetails.address=F_(i),e.personalDetails.name=D_(i);const r=j_(i),a=Va(i,r,"profile");a.length&&(e.profile=z_(a));const o=Va(i,r,"experience");o.length&&(e.workExperience=H_(o));const c=Va(i,r,"education");c.length&&(e.education=B_(c));const u=Va(i,r,"projects");u.length&&(e.personalProjects=ev(u,"proj"));const h=Va(i,r,"certs");h.length&&(e.certificates=ev(h,"cert"));const d=Va(i,r,"courses");return d.length&&(e.courses=d.join("; ")),{success:!0,data:e,message:"Parsed CV data."}}catch(t){return{success:!0,data:e,message:"Parsed with defaults due to error.",error:t}}}},W_="modulepreload",V_=function(n){return"/CVEditor/"+n},tv={},Eh=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=V_(c),c in tv)return;tv[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":W_,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};var mc={};mc.d=(n,e)=>{for(var t in e)mc.o(e,t)&&!mc.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};mc.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var q=globalThis.pdfjsLib={};mc.d(q,{AbortException:()=>Ua,AnnotationEditorLayer:()=>Sm,AnnotationEditorParamsType:()=>X,AnnotationEditorType:()=>K,AnnotationEditorUIManager:()=>Fa,AnnotationLayer:()=>$k,AnnotationMode:()=>_s,ColorPicker:()=>Gd,DOMSVGFactory:()=>F0,DrawLayer:()=>Cm,FeatureTest:()=>Lt,GlobalWorkerOptions:()=>ns,ImageKind:()=>$h,InvalidPDFException:()=>jb,MissingPDFException:()=>Ba,OPS:()=>Nn,OutputScale:()=>yg,PDFDataRangeTransport:()=>NA,PDFDateString:()=>T0,PDFWorker:()=>Ao,PasswordResponses:()=>Y_,PermissionFlag:()=>q_,PixelsPerInch:()=>ur,RenderingCancelledException:()=>k0,TextLayer:()=>Dc,UnexpectedResponseException:()=>Lf,Util:()=>$,VerbosityLevel:()=>Tf,XfaLayer:()=>DA,build:()=>Sk,createValidAbsoluteUrl:()=>J_,fetchData:()=>If,getDocument:()=>pk,getFilenameFromUrl:()=>lE,getPdfFilenameFromUrl:()=>cE,getXfaPageViewport:()=>uE,isDataScheme:()=>Nf,isPdfFile:()=>C0,noContextMenu:()=>Rn,normalizeUnicode:()=>rE,setLayerDimensions:()=>Na,shadow:()=>re,version:()=>xk});const St=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Ob=[1,0,0,1,0,0],fg=[.001,0,0,.001,0,0],G_=1e7,fp=1.35,an={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},X_="pdfjs_internal_editor_",K={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},X={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},q_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},mt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},$h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},We={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},jl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Tf={ERRORS:0,WARNINGS:1,INFOS:5},Nn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Y_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Pf=Tf.WARNINGS;function K_(n){Number.isInteger(n)&&(Pf=n)}function Q_(){return Pf}function Rf(n){Pf>=Tf.INFOS&&console.log(`Info: ${n}`)}function ee(n){Pf>=Tf.WARNINGS&&console.log(`Warning: ${n}`)}function _e(n){throw new Error(n)}function Ke(n,e){n||_e(e)}function Z_(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function J_(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=sE(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(Z_(i))return i}catch{}return null}function re(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const vr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class pg extends vr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class gg extends vr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class jb extends vr{constructor(e){super(e,"InvalidPDFException")}}class Ba extends vr{constructor(e){super(e,"MissingPDFException")}}class Lf extends vr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class eE extends vr{constructor(e){super(e,"FormatError")}}class Ua extends vr{constructor(e){super(e,"AbortException")}}function zb(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&_e("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),a=n.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Mf(n){typeof n!="string"&&_e("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function tE(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function _0(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function nE(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function iE(){try{return new Function(""),!0}catch{return!1}}class Lt{static get isLittleEndian(){return re(this,"isLittleEndian",nE())}static get isEvalSupported(){return re(this,"isEvalSupported",iE())}static get isOffscreenCanvasSupported(){return re(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?re(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):re(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return re(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const pp=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var os,Wh,mg;class ${static makeHexColor(e,t,i){return`#${pp[e]}${pp[t]}${pp[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,r]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],r[0],a[0]),Math.min(i[1],s[1],r[1],a[1]),Math.max(i[0],s[0],r[0],a[0]),Math.max(i[1],s[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,c=Math.sqrt((i+a)**2-4*(i*a-r*s))/2,u=o+c||1,h=o-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,s,a]}static bezierBoundingBox(e,t,i,s,r,a,o,c,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],y(this,os,mg).call(this,e,i,r,o,t,s,a,c,3*(-e+3*(i-r)+o),6*(e-2*i+r),3*(i-e),u),y(this,os,mg).call(this,e,i,r,o,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),u),u}}os=new WeakSet,Wh=function(e,t,i,s,r,a,o,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,v=d*(d*(d*e+3*u*t)+3*f*i)+p*s,A=d*(d*(d*r+3*u*a)+3*f*o)+p*c;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],A),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],A)},mg=function(e,t,i,s,r,a,o,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&y(this,os,Wh).call(this,e,t,i,s,r,a,o,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const v=Math.sqrt(p),A=2*u;y(this,os,Wh).call(this,e,t,i,s,r,a,o,c,(-h+v)/A,f),y(this,os,Wh).call(this,e,t,i,s,r,a,o,c,(-h-v)/A,f)},b($,os);function sE(n){return decodeURIComponent(escape(n))}let gp=null,nv=null;function rE(n){return gp||(gp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,nv=new Map([["","t"]])),n.replaceAll(gp,(e,t,i)=>t?t.normalize("NFKC"):nv.get(i))}function aE(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return zb(n)}const E0="pdfjs_internal_id_",Ei={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function oE(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(zb(n))}const Ci="http://www.w3.org/2000/svg",Er=class Er{};G(Er,"CSS",96),G(Er,"PDF",72),G(Er,"PDF_TO_CSS_UNITS",Er.CSS/Er.PDF);let ur=Er;async function If(n,e="text"){if(Vl(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class sh{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=r;const o=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,f=-f);let p,v,A,_;u===0?(p=Math.abs(c-e[1])*t+s,v=Math.abs(o-e[0])*t+r,A=(e[3]-e[1])*t,_=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+s,v=Math.abs(c-e[1])*t+r,A=(e[2]-e[0])*t,_=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,p-u*t*o-d*t*c,v-h*t*o-f*t*c],this.width=A,this.height=_}get rawDims(){const{viewBox:e}=this;return re(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new sh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return $.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=$.applyTransform([e[0],e[1]],this.transform),i=$.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return $.applyInverseTransform([e,t],this.transform)}}class k0 extends vr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Nf(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function C0(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function lE(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function cE(n,e="document.pdf"){if(typeof n!="string")return e;if(Nf(n))return ee('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class iv{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&ee(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ee(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Vl(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Rn(n){n.preventDefault()}function sv(n){console.log("Deprecated API usage: "+n)}var jc;class T0{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,jc)||m(this,jc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,jc).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,o+=d):u==="+"&&(a-=h,o-=d),new Date(Date.UTC(i,s,r,a,o,c))}}jc=new WeakMap,b(T0,jc);function uE(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new sh({viewBox:r,scale:e,rotation:t})}function P0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ee(`Not a valid color format: "${n}"`),[0,0,0])}function hE(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,P0(i))}e.remove()}function Le(n){const{a:e,b:t,c:i,d:s,e:r,f:a}=n.getTransform();return[e,t,i,s,r,a]}function ki(n){const{a:e,b:t,c:i,d:s,e:r,f:a}=n.getTransform().invertSelf();return[e,t,i,s,r,a]}function Na(n,e,t=!1,i=!0){if(e instanceof sh){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:a}=n,o=Lt.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,h=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}class yg{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Es,Rr,Fn,Lr,zc,Hc,qd,Hb,Mt,Bb,Ub,Vh,$b,wg;const Pi=class Pi{constructor(e){b(this,Mt);b(this,Es,null);b(this,Rr,null);b(this,Fn);b(this,Lr,null);b(this,zc,null);m(this,Fn,e),l(Pi,Hc)||m(Pi,Hc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=m(this,Es,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Fn)._uiManager._signal;e.addEventListener("contextmenu",Rn,{signal:t}),e.addEventListener("pointerdown",y(Pi,qd,Hb),{signal:t});const i=m(this,Lr,document.createElement("div"));i.className="buttons",e.append(i);const s=l(this,Fn).toolbarPosition;if(s){const{style:r}=e,a=l(this,Fn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return y(this,Mt,$b).call(this),e}get div(){return l(this,Es)}hide(){var e;l(this,Es).classList.add("hidden"),(e=l(this,Rr))==null||e.hideDropdown()}show(){var e;l(this,Es).classList.remove("hidden"),(e=l(this,zc))==null||e.shown()}async addAltText(e){const t=await e.render();y(this,Mt,Vh).call(this,t),l(this,Lr).prepend(t,l(this,Mt,wg)),m(this,zc,e)}addColorPicker(e){m(this,Rr,e);const t=e.renderButton();y(this,Mt,Vh).call(this,t),l(this,Lr).prepend(t,l(this,Mt,wg))}remove(){var e;l(this,Es).remove(),(e=l(this,Rr))==null||e.destroy(),m(this,Rr,null)}};Es=new WeakMap,Rr=new WeakMap,Fn=new WeakMap,Lr=new WeakMap,zc=new WeakMap,Hc=new WeakMap,qd=new WeakSet,Hb=function(e){e.stopPropagation()},Mt=new WeakSet,Bb=function(e){l(this,Fn)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},Ub=function(e){l(this,Fn)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Vh=function(e){const t=l(this,Fn)._uiManager._signal;e.addEventListener("focusin",y(this,Mt,Bb).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",y(this,Mt,Ub).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Rn,{signal:t})},$b=function(){const{editorType:e,_uiManager:t}=l(this,Fn),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(Pi,Hc)[e]),y(this,Mt,Vh).call(this,i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,Lr).append(i)},wg=function(){const e=document.createElement("div");return e.className="divider",e},b(Pi,qd),b(Pi,Hc,null);let vg=Pi;var Bc,Mr,Ir,dr,Wb,Vb,Gb;class dE{constructor(e){b(this,dr);b(this,Bc,null);b(this,Mr,null);b(this,Ir);m(this,Ir,e)}show(e,t,i){const[s,r]=y(this,dr,Vb).call(this,t,i),{style:a}=l(this,Mr)||m(this,Mr,y(this,dr,Wb).call(this));e.append(l(this,Mr)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Mr).remove()}}Bc=new WeakMap,Mr=new WeakMap,Ir=new WeakMap,dr=new WeakSet,Wb=function(){const e=m(this,Mr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Rn,{signal:l(this,Ir)._signal});const t=m(this,Bc,document.createElement("div"));return t.className="buttons",e.append(t),y(this,dr,Gb).call(this),e},Vb=function(e,t){let i=0,s=0;for(const r of e){const a=r.y+r.height;if(a<i)continue;const o=r.x+(t?r.width:0);if(a>i){s=o,i=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,i]},Gb=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Ir)._signal;e.addEventListener("contextmenu",Rn,{signal:i}),e.addEventListener("click",()=>{l(this,Ir).highlightSelection("floating_button")},{signal:i}),l(this,Bc).append(e)};function $d(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function fE(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var Yd;class pE{constructor(){b(this,Yd,0)}get id(){return`${X_}${Et(this,Yd)._++}`}}Yd=new WeakMap;var xo,Uc,vt,So,Gh;const O0=class O0{constructor(){b(this,So);b(this,xo,aE());b(this,Uc,0);b(this,vt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return re(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return y(this,So,Gh).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return y(this,So,Gh).call(this,e,e)}async getFromBlob(e,t){const i=await t;return y(this,So,Gh).call(this,e,i)}async getFromId(e){l(this,vt)||m(this,vt,new Map);const t=l(this,vt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,vt)||m(this,vt,new Map);let i=l(this,vt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${l(this,xo)}_${Et(this,Uc)._++}`,refCounter:1,isSvg:!1},l(this,vt).set(e,i),l(this,vt).set(i.id,i),i}getSvgUrl(e){const t=l(this,vt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,vt)||m(this,vt,new Map);const t=l(this,vt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,xo)}_`)}};xo=new WeakMap,Uc=new WeakMap,vt=new WeakMap,So=new WeakSet,Gh=async function(e,t){l(this,vt)||m(this,vt,new Map);let i=l(this,vt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,xo)}_${Et(this,Uc)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await If(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=O0._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((u,h)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const d=i.svgUrl=a.result;o.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return l(this,vt).set(e,i),i&&l(this,vt).set(i.id,i),i};let bg=O0;var Je,ks,$c,et;class gE{constructor(e=128){b(this,Je,[]);b(this,ks,!1);b(this,$c);b(this,et,-1);m(this,$c,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),l(this,ks))return;const c={cmd:e,undo:t,post:i,type:r};if(l(this,et)===-1){l(this,Je).length>0&&(l(this,Je).length=0),m(this,et,0),l(this,Je).push(c);return}if(a&&l(this,Je)[l(this,et)].type===r){o&&(c.undo=l(this,Je)[l(this,et)].undo),l(this,Je)[l(this,et)]=c;return}const u=l(this,et)+1;u===l(this,$c)?l(this,Je).splice(0,1):(m(this,et,u),u<l(this,Je).length&&l(this,Je).splice(u)),l(this,Je).push(c)}undo(){if(l(this,et)===-1)return;m(this,ks,!0);const{undo:e,post:t}=l(this,Je)[l(this,et)];e(),t==null||t(),m(this,ks,!1),m(this,et,l(this,et)-1)}redo(){if(l(this,et)<l(this,Je).length-1){m(this,et,l(this,et)+1),m(this,ks,!0);const{cmd:e,post:t}=l(this,Je)[l(this,et)];e(),t==null||t(),m(this,ks,!1)}}hasSomethingToUndo(){return l(this,et)!==-1}hasSomethingToRedo(){return l(this,et)<l(this,Je).length-1}destroy(){m(this,Je,null)}}Je=new WeakMap,ks=new WeakMap,$c=new WeakMap,et=new WeakMap;var Kd,Xb;class rh{constructor(e){b(this,Kd);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Lt.platform;for(const[i,s,r={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(y(this,Kd,Xb).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(s.bind(e,...a,t)(),r||(t.stopPropagation(),t.preventDefault()))}}Kd=new WeakSet,Xb=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Qd=class Qd{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return hE(e),re(this,"_colors",e)}convert(e){const t=P0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,a)=>r===t[a]))return Qd._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?$.makeHexColor(...t):e}};G(Qd,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ag=Qd;var _o,Qt,Ge,ot,Eo,Mi,ko,Dn,Cs,Co,Nr,si,On,Fr,Wc,Vc,To,Gc,ri,Ts,Po,Ps,ai,Zd,Rs,Xc,Ls,Dr,qc,Yc,tt,pe,Ii,Or,Kc,Qc,Ms,oi,Ni,Zc,mn,O,Xh,xg,qb,Yb,qh,Kb,Qb,Zb,Sg,Jb,_g,Eg,eA,kt,vs,tA,nA,kg,iA,Gl,Cg;const fo=class fo{constructor(e,t,i,s,r,a,o,c,u,h,d){b(this,O);b(this,_o,new AbortController);b(this,Qt,null);b(this,Ge,new Map);b(this,ot,new Map);b(this,Eo,null);b(this,Mi,null);b(this,ko,null);b(this,Dn,new gE);b(this,Cs,null);b(this,Co,0);b(this,Nr,new Set);b(this,si,null);b(this,On,null);b(this,Fr,new Set);b(this,Wc,!1);b(this,Vc,!1);b(this,To,!1);b(this,Gc,null);b(this,ri,null);b(this,Ts,null);b(this,Po,null);b(this,Ps,!1);b(this,ai,null);b(this,Zd,new pE);b(this,Rs,!1);b(this,Xc,!1);b(this,Ls,null);b(this,Dr,null);b(this,qc,null);b(this,Yc,null);b(this,tt,K.NONE);b(this,pe,new Set);b(this,Ii,null);b(this,Or,null);b(this,Kc,null);b(this,Qc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,Ms,[0,0]);b(this,oi,null);b(this,Ni,null);b(this,Zc,null);b(this,mn,null);const f=this._signal=l(this,_o).signal;m(this,Ni,e),m(this,Zc,t),m(this,Eo,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),y(this,O,Kb).call(this),y(this,O,eA).call(this),y(this,O,Sg).call(this),m(this,Mi,r.annotationStorage),m(this,Gc,r.filterFactory),m(this,Or,a),m(this,Po,o||null),m(this,Wc,c),m(this,Vc,u),m(this,To,h),m(this,Yc,d||null),this.viewParameters={realScale:ur.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=fo.prototype,t=a=>l(a,Ni).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return re(this,"_keyboardManager",new rh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Ni).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Ni).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,s;(e=l(this,mn))==null||e.resolve(),m(this,mn,null),(t=l(this,_o))==null||t.abort(),m(this,_o,null),this._signal=null;for(const r of l(this,ot).values())r.destroy();l(this,ot).clear(),l(this,Ge).clear(),l(this,Fr).clear(),m(this,Qt,null),l(this,pe).clear(),l(this,Dn).destroy(),(i=l(this,Eo))==null||i.destroy(),(s=l(this,ai))==null||s.hide(),m(this,ai,null),l(this,ri)&&(clearTimeout(l(this,ri)),m(this,ri,null)),l(this,oi)&&(clearTimeout(l(this,oi)),m(this,oi,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Yc)}get useNewAltTextFlow(){return l(this,Vc)}get useNewAltTextWhenAddingImage(){return l(this,To)}get hcmFilter(){return re(this,"hcmFilter",l(this,Or)?l(this,Gc).addHCMFilter(l(this,Or).foreground,l(this,Or).background):"none")}get direction(){return re(this,"direction",getComputedStyle(l(this,Ni)).direction)}get highlightColors(){return re(this,"highlightColors",l(this,Po)?new Map(l(this,Po).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return re(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){m(this,qc,e)}editAltText(e,t=!1){var i;(i=l(this,Eo))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":m(this,To,t);break}}onPageChanging({pageNumber:e}){m(this,Co,e-1)}focusMainContainer(){l(this,Ni).focus()}findParent(e,t){for(const i of l(this,ot).values()){const{x:s,y:r,width:a,height:o}=i.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=r&&t<=r+o)return i}return null}disableUserSelect(e=!1){l(this,Zc).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Fr).add(e)}removeShouldRescale(e){l(this,Fr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ur.PDF_TO_CSS_UNITS;for(const t of l(this,Fr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a}=t,o=t.toString(),u=y(this,O,Xh).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=y(this,O,xg).call(this,u),f=l(this,tt)===K.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(K.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Mi)&&!l(this,Mi).has(e.id)&&l(this,Mi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Ps)&&(m(this,Ps,!1),y(this,O,qh).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,pe))if(t.div.contains(e)){m(this,Dr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Dr))return;const[e,t]=l(this,Dr);m(this,Dr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){y(this,O,Sg).call(this),y(this,O,_g).call(this)}removeEditListeners(){y(this,O,Jb).call(this),y(this,O,Eg).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,On))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,On))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Qt))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,pe)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of l(this,On))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){ee(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const a=()=>{for(const c of r)y(this,O,kg).call(this,c);y(this,O,Cg).call(this,r)},o=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){ee(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,tt)!==K.NONE&&!this.isEditorHandlingKeyboard&&fo._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ps)&&(m(this,Ps,!1),y(this,O,qh).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(y(this,O,Qb).call(this),y(this,O,_g).call(this),y(this,O,kt).call(this,{isEditing:l(this,tt)!==K.NONE,isEmpty:y(this,O,Gl).call(this),hasSomethingToUndo:l(this,Dn).hasSomethingToUndo(),hasSomethingToRedo:l(this,Dn).hasSomethingToRedo(),hasSelectedEditor:!1})):(y(this,O,Zb).call(this),y(this,O,Eg).call(this),y(this,O,kt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,On)){m(this,On,e);for(const t of l(this,On))y(this,O,vs).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Zd).id}get currentLayer(){return l(this,ot).get(l(this,Co))}getLayer(e){return l(this,ot).get(e)}get currentPageIndex(){return l(this,Co)}addLayer(e){l(this,ot).set(e.pageIndex,e),l(this,Rs)?e.enable():e.disable()}removeLayer(e){l(this,ot).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,tt)!==e&&!(l(this,mn)&&(await l(this,mn).promise,!l(this,mn)))){if(m(this,mn,Promise.withResolvers()),m(this,tt,e),e===K.NONE){this.setEditingState(!1),y(this,O,nA).call(this),l(this,mn).resolve();return}this.setEditingState(!0),await y(this,O,tA).call(this),this.unselectAll();for(const s of l(this,ot).values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,mn).resolve();return}for(const s of l(this,Ge).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,mn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,tt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,On)){switch(e){case X.CREATE:this.currentLayer.addNewEditor();return;case X.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,qc))==null||i.updateColor(t);break;case X.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Kc)||m(this,Kc,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,pe))s.updateParams(e,t);for(const s of l(this,On))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const a of l(this,Ge).values())a.editorType===e&&a.show(t);(((r=l(this,Kc))==null?void 0:r.get(X.HIGHLIGHT_SHOW_ALL))??!0)!==t&&y(this,O,vs).call(this,[[X.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Xc)!==e){m(this,Xc,e);for(const t of l(this,ot).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Ge).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Ge).get(e)}addEditor(e){l(this,Ge).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,ri)&&clearTimeout(l(this,ri)),m(this,ri,setTimeout(()=>{this.focusMainContainer(),m(this,ri,null)},0))),l(this,Ge).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Nr).has(e.annotationElementId))&&((t=l(this,Mi))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Nr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Nr).has(e)}removeDeletedAnnotationElement(e){l(this,Nr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Qt)!==e&&(m(this,Qt,e),e&&y(this,O,vs).call(this,e.propertiesToUpdate))}updateUI(e){l(this,O,iA)===e&&y(this,O,vs).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,pe).has(e)){l(this,pe).delete(e),e.unselect(),y(this,O,kt).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,pe).add(e),e.select(),y(this,O,vs).call(this,e.propertiesToUpdate),y(this,O,kt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,pe))t!==e&&t.unselect();l(this,pe).clear(),l(this,pe).add(e),e.select(),y(this,O,vs).call(this,e.propertiesToUpdate),y(this,O,kt).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,pe).has(e)}get firstSelectedEditor(){return l(this,pe).values().next().value}unselect(e){e.unselect(),l(this,pe).delete(e),y(this,O,kt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,pe).size!==0}get isEnterHandled(){return l(this,pe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Dn).undo(),y(this,O,kt).call(this,{hasSomethingToUndo:l(this,Dn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:y(this,O,Gl).call(this)})}redo(){l(this,Dn).redo(),y(this,O,kt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Dn).hasSomethingToRedo(),isEmpty:y(this,O,Gl).call(this)})}addCommands(e){l(this,Dn).add(e),y(this,O,kt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:y(this,O,Gl).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,pe)],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)y(this,O,kg).call(this,s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Qt))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Qt)||this.hasSelection}selectAll(){for(const e of l(this,pe))e.commit();y(this,O,Cg).call(this,l(this,Ge).values())}unselectAll(){if(!(l(this,Qt)&&(l(this,Qt).commitOrRemove(),l(this,tt)!==K.NONE))&&this.hasSelection){for(const e of l(this,pe))e.unselect();l(this,pe).clear(),y(this,O,kt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,Ms)[0]+=e,l(this,Ms)[1]+=t;const[s,r]=l(this,Ms),a=[...l(this,pe)],o=1e3;l(this,oi)&&clearTimeout(l(this,oi)),m(this,oi,setTimeout(()=>{m(this,oi,null),l(this,Ms)[0]=l(this,Ms)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,Ge).has(c.id)&&c.translateInPage(s,r)},undo:()=>{for(const c of a)l(this,Ge).has(c.id)&&c.translateInPage(-s,-r)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),m(this,si,new Map);for(const e of l(this,pe))l(this,si).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,si))return!1;this.disableUserSelect(!1);const e=l(this,si);m(this,si,null);let t=!1;for(const[{x:s,y:r,pageIndex:a},o]of e)o.newX=s,o.newY=r,o.newPageIndex=a,t||(t=s!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const i=(s,r,a,o)=>{if(l(this,Ge).has(s.id)){const c=l(this,ot).get(o);c?s._setParentAndPosition(c,r,a):(s.pageIndex=o,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:o}]of e)i(s,r,a,o)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:o}]of e)i(s,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,si))for(const i of l(this,si).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,pe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Qt)===e}getActive(){return l(this,Qt)}getMode(){return l(this,tt)}get imageManager(){return re(this,"imageManager",new bg)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,d,f)=>({x:(h-s)/a,y:1-(u+d-i)/r,width:f/a,height:d/r});break;case"180":o=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/a,width:d/r,height:f/a});break;case"270":o=(u,h,d,f)=>({x:1-(h+f-s)/a,y:(u-i)/r,width:f/a,height:d/r});break;default:o=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/a,width:d/r,height:f/a});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:v,height:A}of d.getClientRects())v===0||A===0||c.push(o(f,p,v,A))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,ko)||m(this,ko,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,ko))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,ko))==null?void 0:s.get(e.data.id);if(!t)return;const i=l(this,Mi).getRawValue(t);i&&(l(this,tt)===K.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};_o=new WeakMap,Qt=new WeakMap,Ge=new WeakMap,ot=new WeakMap,Eo=new WeakMap,Mi=new WeakMap,ko=new WeakMap,Dn=new WeakMap,Cs=new WeakMap,Co=new WeakMap,Nr=new WeakMap,si=new WeakMap,On=new WeakMap,Fr=new WeakMap,Wc=new WeakMap,Vc=new WeakMap,To=new WeakMap,Gc=new WeakMap,ri=new WeakMap,Ts=new WeakMap,Po=new WeakMap,Ps=new WeakMap,ai=new WeakMap,Zd=new WeakMap,Rs=new WeakMap,Xc=new WeakMap,Ls=new WeakMap,Dr=new WeakMap,qc=new WeakMap,Yc=new WeakMap,tt=new WeakMap,pe=new WeakMap,Ii=new WeakMap,Or=new WeakMap,Kc=new WeakMap,Qc=new WeakMap,Ms=new WeakMap,oi=new WeakMap,Ni=new WeakMap,Zc=new WeakMap,mn=new WeakMap,O=new WeakSet,Xh=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},xg=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,ot).values())if(i.hasTextLayer(e))return i;return null},qb=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=y(this,O,Xh).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(l(this,ai)||m(this,ai,new dE(this)),l(this,ai).show(i,s,this.direction==="ltr"))},Yb=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Ii)&&((r=l(this,ai))==null||r.hide(),m(this,Ii,null),y(this,O,kt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Ii))return;const s=y(this,O,Xh).call(this,e).closest(".textLayer");if(!s){l(this,Ii)&&((a=l(this,ai))==null||a.hide(),m(this,Ii,null),y(this,O,kt).call(this,{hasSelectedText:!1}));return}if((o=l(this,ai))==null||o.hide(),m(this,Ii,t),y(this,O,kt).call(this,{hasSelectedText:!0}),!(l(this,tt)!==K.HIGHLIGHT&&l(this,tt)!==K.NONE)&&(l(this,tt)===K.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),m(this,Ps,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,tt)===K.HIGHLIGHT?y(this,O,xg).call(this,s):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&y(this,O,qh).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},qh=function(e=""){l(this,tt)===K.HIGHLIGHT?this.highlightSelection(e):l(this,Wc)&&y(this,O,qb).call(this)},Kb=function(){document.addEventListener("selectionchange",y(this,O,Yb).bind(this),{signal:this._signal})},Qb=function(){if(l(this,Ts))return;m(this,Ts,new AbortController);const e=this.combinedSignal(l(this,Ts));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Zb=function(){var e;(e=l(this,Ts))==null||e.abort(),m(this,Ts,null)},Sg=function(){if(l(this,Ls))return;m(this,Ls,new AbortController);const e=this.combinedSignal(l(this,Ls));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Jb=function(){var e;(e=l(this,Ls))==null||e.abort(),m(this,Ls,null)},_g=function(){if(l(this,Cs))return;m(this,Cs,new AbortController);const e=this.combinedSignal(l(this,Cs));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Eg=function(){var e;(e=l(this,Cs))==null||e.abort(),m(this,Cs,null)},eA=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},kt=function(e){Object.entries(e).some(([i,s])=>l(this,Qc)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Qc),e)}),l(this,tt)===K.HIGHLIGHT&&e.hasSelectedEditor===!1&&y(this,O,vs).call(this,[[X.HIGHLIGHT_FREE,!0]]))},vs=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},tA=async function(){if(!l(this,Rs)){m(this,Rs,!0);const e=[];for(const t of l(this,ot).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ge).values())t.enable()}},nA=function(){if(this.unselectAll(),l(this,Rs)){m(this,Rs,!1);for(const e of l(this,ot).values())e.disable();for(const e of l(this,Ge).values())e.disable()}},kg=function(e){const t=l(this,ot).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},iA=function(){let e=null;for(e of l(this,pe));return e},Gl=function(){if(l(this,Ge).size===0)return!0;if(l(this,Ge).size===1)for(const e of l(this,Ge).values())return e.isEmpty();return!1},Cg=function(e){for(const t of l(this,pe))t.unselect();l(this,pe).clear();for(const t of e)t.isEmpty()||(l(this,pe).add(t),t.select());y(this,O,kt).call(this,{hasSelectedEditor:this.hasSelection})},G(fo,"TRANSLATE_SMALL",1),G(fo,"TRANSLATE_BIG",10);let Fa=fo;var nt,li,jn,Ro,ci,Zt,Lo,ui,zt,Fi,jr,hi,Is,Qn,Xl,Yh;const Ct=class Ct{constructor(e){b(this,Qn);b(this,nt,null);b(this,li,!1);b(this,jn,null);b(this,Ro,null);b(this,ci,null);b(this,Zt,null);b(this,Lo,!1);b(this,ui,null);b(this,zt,null);b(this,Fi,null);b(this,jr,null);b(this,hi,!1);m(this,zt,e),m(this,hi,e._uiManager.useNewAltTextFlow),l(Ct,Is)||m(Ct,Is,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ct._l10n??(Ct._l10n=e)}async render(){const e=m(this,jn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=m(this,Ro,document.createElement("span"));e.append(t),l(this,hi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Ct,Is).missing),t.setAttribute("data-l10n-id",l(Ct,Is)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,zt)._uiManager._signal;e.addEventListener("contextmenu",Rn,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),l(this,zt)._uiManager.editAltText(l(this,zt)),l(this,hi)&&l(this,zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Qn,Xl)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(m(this,Lo,!0),s(r))},{signal:i}),await y(this,Qn,Yh).call(this),e}finish(){l(this,jn)&&(l(this,jn).focus({focusVisible:l(this,Lo)}),m(this,Lo,!1))}isEmpty(){return l(this,hi)?l(this,nt)===null:!l(this,nt)&&!l(this,li)}hasData(){return l(this,hi)?l(this,nt)!==null||!!l(this,Fi):this.isEmpty()}get guessedText(){return l(this,Fi)}async setGuessedText(e){l(this,nt)===null&&(m(this,Fi,e),m(this,jr,await Ct._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),y(this,Qn,Yh).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,hi)||l(this,nt)){(t=l(this,ui))==null||t.remove(),m(this,ui,null);return}if(!l(this,ui)){const i=m(this,ui,document.createElement("div"));i.className="noAltTextBadge",l(this,zt).div.append(i)}l(this,ui).classList.toggle("hidden",!e)}serialize(e){let t=l(this,nt);return!e&&l(this,Fi)===t&&(t=l(this,jr)),{altText:t,decorative:l(this,li),guessedText:l(this,Fi),textWithDisclaimer:l(this,jr)}}get data(){return{altText:l(this,nt),decorative:l(this,li)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(m(this,Fi,i),m(this,jr,s)),!(l(this,nt)===e&&l(this,li)===t)&&(r||(m(this,nt,e),m(this,li,t)),y(this,Qn,Yh).call(this))}toggle(e=!1){l(this,jn)&&(!e&&l(this,Zt)&&(clearTimeout(l(this,Zt)),m(this,Zt,null)),l(this,jn).disabled=!e)}shown(){l(this,zt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Qn,Xl)}})}destroy(){var e,t;(e=l(this,jn))==null||e.remove(),m(this,jn,null),m(this,Ro,null),m(this,ci,null),(t=l(this,ui))==null||t.remove(),m(this,ui,null)}};nt=new WeakMap,li=new WeakMap,jn=new WeakMap,Ro=new WeakMap,ci=new WeakMap,Zt=new WeakMap,Lo=new WeakMap,ui=new WeakMap,zt=new WeakMap,Fi=new WeakMap,jr=new WeakMap,hi=new WeakMap,Is=new WeakMap,Qn=new WeakSet,Xl=function(){return l(this,nt)&&"added"||l(this,nt)===null&&this.guessedText&&"review"||"missing"},Yh=async function(){var s,r,a;const e=l(this,jn);if(!e)return;if(l(this,hi)){if(e.classList.toggle("done",!!l(this,nt)),e.setAttribute("data-l10n-id",l(Ct,Is)[l(this,Qn,Xl)]),(s=l(this,Ro))==null||s.setAttribute("data-l10n-id",l(Ct,Is)[`${l(this,Qn,Xl)}-label`]),!l(this,nt)){(r=l(this,ci))==null||r.remove();return}}else{if(!l(this,nt)&&!l(this,li)){e.classList.remove("done"),(a=l(this,ci))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,ci);if(!t){m(this,ci,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,zt).id}`;const o=100,c=l(this,zt)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,Zt)),m(this,Zt,null)},{once:!0}),e.addEventListener("mouseenter",()=>{m(this,Zt,setTimeout(()=>{m(this,Zt,null),l(this,ci).classList.add("show"),l(this,zt)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,Zt)&&(clearTimeout(l(this,Zt)),m(this,Zt,null)),(u=l(this,ci))==null||u.classList.remove("show")},{signal:c})}l(this,li)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,nt)),t.parentNode||e.append(t);const i=l(this,zt).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},b(Ct,Is,null),G(Ct,"_l10n",null);let Wd=Ct;var zr,zn,Pe,Mo,Hr,lt,Br,Ns,Jc,Ur,Fs,eu,$r,Di,di,Io,No,yn,tu,Jd,Z,Tg,nu,Pg,Rg,sA,rA,Lg,Mg,Ig,aA,Ng,oA,lA,cA,Fg,ql;const fe=class fe{constructor(e){b(this,Z);b(this,zr,null);b(this,zn,null);b(this,Pe,null);b(this,Mo,!1);b(this,Hr,!1);b(this,lt,null);b(this,Br,null);b(this,Ns,null);b(this,Jc,"");b(this,Ur,!1);b(this,Fs,null);b(this,eu,!1);b(this,$r,!1);b(this,Di,!1);b(this,di,null);b(this,Io,0);b(this,No,0);b(this,yn,null);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);b(this,tu,!1);b(this,Jd,fe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=fe.prototype._resizeWithKeyboard,t=Fa.TRANSLATE_SMALL,i=Fa.TRANSLATE_BIG;return re(this,"_resizerKeyboardManager",new rh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],fe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return re(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new mE({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(fe._l10n??(fe._l10n=e),fe._l10nResizer||(fe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),fe._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);fe._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,tu)}set _isDraggable(e){var t;m(this,tu,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Jd)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):y(this,Z,ql).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Ur)?m(this,Ur,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){y(this,Z,Tg).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Fs)||m(this,Fs,[this.x,this.y]),y(this,Z,Tg).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Fs)||m(this,Fs,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,c]=this.getBaseTranslation();r+=o,a+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Fs)&&(l(this,Fs)[0]!==this.x||l(this,Fs)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=fe,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:r,width:a,height:o}=this;if(a*=t,o*=i,s*=t,r*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),r=Math.max(0,Math.min(i-o,r));break;case 90:s=Math.max(0,Math.min(t-o,s)),r=Math.min(i,Math.max(a,r));break;case 180:s=Math.min(t,Math.max(a,s)),r=Math.min(i,Math.max(o,r));break;case 270:s=Math.min(t,Math.max(o,s)),r=Math.max(0,Math.min(i-a,r));break}this.x=s/=t,this.y=r/=i;const[c,u]=this.getBaseTranslation();s+=c,r+=u;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return y(i=fe,nu,Pg).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return y(i=fe,nu,Pg).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,Hr)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!l(this,Hr)&&t.endsWith("%");if(s&&r)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!l(this,Hr)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,Pe))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,$r)?this._editToolbar:(this._editToolbar=new vg(this),this.div.append(this._editToolbar.render()),l(this,Pe)&&await this._editToolbar.addAltText(l(this,Pe)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Pe))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Pe)||(Wd.initialize(fe._l10n),m(this,Pe,new Wd(this)),l(this,zr)&&(l(this,Pe).data=l(this,zr),m(this,zr,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Pe))==null?void 0:e.data}set altTextData(e){l(this,Pe)&&(l(this,Pe).data=e)}get guessedAltText(){var e;return(e=l(this,Pe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Pe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Pe))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Pe)&&!l(this,Pe).isEmpty()}hasAltTextData(){var e;return((e=l(this,Pe))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Mo)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),y(this,Z,Ng).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),$d(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Lt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(m(this,Ur,!0),this._isDraggable){y(this,Z,aA).call(this,e);return}y(this,Z,Ig).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,di)&&clearTimeout(l(this,di)),m(this,di,setTimeout(()=>{var e;m(this,di,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,u=e/s,h=t/s,d=this.x*r,f=this.y*a,p=this.width*r,v=this.height*a;switch(i){case 0:return[d+u+o,a-f-h-v+c,d+u+p+o,a-f-h+c];case 90:return[d+h+o,a-f+u+c,d+h+v+o,a-f+u+p+c];case 180:return[d-u-p+o,a-f+h+c,d-u+o,a-f+h+v+c];case 270:return[d-h-v+o,a-f-u-p+c,d-h+o,a-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,a]=e,o=r-i,c=a-s;switch(this.rotation){case 0:return[i,t-a,o,c];case 90:return[i,t-s,c,o];case 180:return[r,t-s,o,c];case 270:return[r,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){m(this,$r,!0)}disableEditMode(){m(this,$r,!1)}isInEditMode(){return l(this,$r)}shouldGetKeyboardEvents(){return l(this,Di)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){y(this,Z,Ng).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){_e("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,m(s,zr,e.accessibilityData);const[r,a]=s.pageDimensions,[o,c,u,h]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/r,s.y=c/a,s.width=u/r,s.height=h/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Ns))==null||e.abort(),m(this,Ns,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,di)&&(clearTimeout(l(this,di)),m(this,di,null)),y(this,Z,ql).call(this),this.removeEditToolbar(),l(this,yn)){for(const t of l(this,yn).values())clearTimeout(t);m(this,yn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(y(this,Z,sA).call(this),l(this,lt).classList.remove("hidden"),$d(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),m(this,Br,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,lt).children;if(!l(this,zn)){m(this,zn,Array.from(t));const a=y(this,Z,oA).bind(this),o=y(this,Z,lA).bind(this),c=this._uiManager._signal;for(const u of l(this,zn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",y(this,Z,cA).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",fe._l10nResizer[h])}}const i=l(this,zn)[0];let s=0;for(const a of t){if(a===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,zn).length/4);if(r!==s){if(r<s)for(let o=0;o<s-r;o++)l(this,lt).append(l(this,lt).firstChild);else if(r>s)for(let o=0;o<r-s;o++)l(this,lt).firstChild.before(l(this,lt).lastChild);let a=0;for(const o of t){const u=l(this,zn)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",fe._l10nResizer[u])}}y(this,Z,Fg).call(this,0),m(this,Di,!0),l(this,lt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Di)&&y(this,Z,Mg).call(this,l(this,Jc),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){y(this,Z,ql).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,Pe))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,s,r;(e=l(this,lt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=l(this,Pe))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,eu)}set isEditing(e){m(this,eu,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){m(this,Hr,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,yn)||m(this,yn,new Map);const{action:i}=e;let s=l(this,yn).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,yn).delete(i),l(this,yn).size===0&&m(this,yn,null)},fe._telemetryTimeout),l(this,yn).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),m(this,Mo,!1)}disable(){this.div&&(this.div.tabIndex=-1),m(this,Mo,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};zr=new WeakMap,zn=new WeakMap,Pe=new WeakMap,Mo=new WeakMap,Hr=new WeakMap,lt=new WeakMap,Br=new WeakMap,Ns=new WeakMap,Jc=new WeakMap,Ur=new WeakMap,Fs=new WeakMap,eu=new WeakMap,$r=new WeakMap,Di=new WeakMap,di=new WeakMap,Io=new WeakMap,No=new WeakMap,yn=new WeakMap,tu=new WeakMap,Jd=new WeakMap,Z=new WeakSet,Tg=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()},nu=new WeakSet,Pg=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Rg=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},sA=function(){if(l(this,lt))return;m(this,lt,document.createElement("div")),l(this,lt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");l(this,lt).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",y(this,Z,rA).bind(this,i),{signal:t}),s.addEventListener("contextmenu",Rn,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,lt))},rA=function(e,t){var v;t.preventDefault();const{isMac:i}=Lt.platform;if(t.button!==0||t.ctrlKey&&i)return;(v=l(this,Pe))==null||v.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",y(this,Z,Mg).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Rn,{signal:a});const o=this.x,c=this.y,u=this.width,h=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var A;r.abort(),this.parent.togglePointerEvents(!0),(A=l(this,Pe))==null||A.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=f,y(this,Z,Lg).call(this,o,c,u,h)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})},Lg=function(e,t,i,s){const r=this.x,a=this.y,o=this.width,c=this.height;r===e&&a===t&&o===i&&c===s||this.addCommands({cmd:()=>{this.width=o,this.height=c,this.x=r,this.y=a;const[u,h]=this.parentDimensions;this.setDims(u*o,h*c),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*i,h*s),this.fixAndSetPosition()},mustExec:!0})},Mg=function(e,t){const[i,s]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,u=fe.MIN_SIZE/i,h=fe.MIN_SIZE/s,d=T=>Math.round(T*1e4)/1e4,f=y(this,Z,Rg).call(this,this.rotation),p=(T,E)=>[f[0]*T+f[2]*E,f[1]*T+f[3]*E],v=y(this,Z,Rg).call(this,360-this.rotation),A=(T,E)=>[v[0]*T+v[2]*E,v[1]*T+v[3]*E];let _,g,w=!1,x=!1;switch(e){case"topLeft":w=!0,_=(T,E)=>[0,0],g=(T,E)=>[T,E];break;case"topMiddle":_=(T,E)=>[T/2,0],g=(T,E)=>[T/2,E];break;case"topRight":w=!0,_=(T,E)=>[T,0],g=(T,E)=>[0,E];break;case"middleRight":x=!0,_=(T,E)=>[T,E/2],g=(T,E)=>[0,E/2];break;case"bottomRight":w=!0,_=(T,E)=>[T,E],g=(T,E)=>[0,0];break;case"bottomMiddle":_=(T,E)=>[T/2,E],g=(T,E)=>[T/2,0];break;case"bottomLeft":w=!0,_=(T,E)=>[0,E],g=(T,E)=>[T,0];break;case"middleLeft":x=!0,_=(T,E)=>[0,E/2],g=(T,E)=>[T,E/2];break}const S=_(o,c),k=g(o,c);let C=p(...k);const R=d(r+C[0]),L=d(a+C[1]);let D=1,j=1,[U,ie]=this.screenToPageTranslation(t.movementX,t.movementY);if([U,ie]=A(U/i,ie/s),w){const T=Math.hypot(o,c);D=j=Math.max(Math.min(Math.hypot(k[0]-S[0]-U,k[1]-S[1]-ie)/T,1/o,1/c),u/o,h/c)}else x?D=Math.max(u,Math.min(1,Math.abs(k[0]-S[0]-U)))/o:j=Math.max(h,Math.min(1,Math.abs(k[1]-S[1]-ie)))/c;const J=d(o*D),ae=d(c*j);C=p(...g(J,ae));const ce=R-C[0],he=L-C[1];this.width=J,this.height=ae,this.x=ce,this.y=he,this.setDims(i*J,s*ae),this.fixAndSetPosition()},Ig=function(e){const{isMac:t}=Lt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},aA=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,s=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),m(this,Io,e.clientX),m(this,No,e.clientY);const a=o=>{const{clientX:c,clientY:u}=o,[h,d]=this.screenToPageTranslation(c-l(this,Io),u-l(this,No));m(this,Io,c),m(this,No,u),this._uiManager.dragSelectedEditors(h,d)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{i.abort(),t&&this.div.classList.remove("moving"),m(this,Ur,!1),this._uiManager.endDragSession()||y(this,Z,Ig).call(this,e)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},Ng=function(){if(l(this,Ns)||!this.div)return;m(this,Ns,new AbortController);const e=this._uiManager.combinedSignal(l(this,Ns));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},oA=function(e){fe._resizerKeyboardManager.exec(this,e)},lA=function(e){var t;l(this,Di)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,lt)&&y(this,Z,ql).call(this)},cA=function(e){m(this,Jc,l(this,Di)?e:"")},Fg=function(e){if(l(this,zn))for(const t of l(this,zn))t.tabIndex=e},ql=function(){if(m(this,Di,!1),y(this,Z,Fg).call(this,-1),l(this,Br)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=l(this,Br);y(this,Z,Lg).call(this,e,t,i,s),m(this,Br,null)}},b(fe,nu),G(fe,"_l10n",null),G(fe,"_l10nResizer",null),G(fe,"_borderLineWidth",-1),G(fe,"_colorManager",new Ag),G(fe,"_zIndex",1),G(fe,"_telemetryTimeout",1e3);let me=fe;class mE extends me{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const rv=3285377520,gn=4294901760,ni=65535;class uA{constructor(e){this.h1=e?e&4294967295:rv,this.h2=e?e&4294967295:rv}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let A=0,_=e.length;A<_;A++){const g=e.charCodeAt(A);g<=255?t[i++]=g:(t[i++]=g>>>8,t[i++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&ni,v=f&ni;for(let A=0;A<s;A++)A&1?(o=a[A],o=o*d&gn|o*p&ni,o=o<<15|o>>>17,o=o*f&gn|o*v&ni,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[A],c=c*d&gn|c*p&ni,c=c<<15|c>>>17,c=c*f&gn|c*v&ni,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,r){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*d&gn|o*p&ni,o=o<<15|o>>>17,o=o*f&gn|o*v&ni,s&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&gn|e*36045&ni,t=t*4283543511&gn|((t<<16|e>>>16)*2950163797&gn)>>>16,e^=t>>>1,e=e*444984403&gn|e*60499&ni,t=t*3301882366&gn|((t<<16|e>>>16)*3120437893&gn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Dg=Object.freeze({map:null,hash:"",transfer:void 0});var Wr,Vr,it,ef,hA;class R0{constructor(){b(this,ef);b(this,Wr,!1);b(this,Vr,null);b(this,it,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,it).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,it).get(e)}remove(e){if(l(this,it).delete(e),l(this,it).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,it).values())if(t instanceof me)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,it).get(e);let s=!1;if(i!==void 0)for(const[r,a]of Object.entries(t))i[r]!==a&&(s=!0,i[r]=a);else s=!0,l(this,it).set(e,t);s&&y(this,ef,hA).call(this),t instanceof me&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,it).has(e)}getAll(){return l(this,it).size>0?_0(l(this,it)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,it).size}resetModified(){l(this,Wr)&&(m(this,Wr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dA(this)}get serializable(){if(l(this,it).size===0)return Dg;const e=new Map,t=new uA,i=[],s=Object.create(null);let r=!1;for(const[a,o]of l(this,it)){const c=o instanceof me?o.serialize(!1,s):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Dg}get editorStats(){let e=null;const t=new Map;for(const i of l(this,it).values()){if(!(i instanceof me))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,c]of Object.entries(s)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){m(this,Vr,null)}get modifiedIds(){if(l(this,Vr))return l(this,Vr);const e=[];for(const t of l(this,it).values())!(t instanceof me)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return m(this,Vr,{ids:new Set(e),hash:e.join(",")})}}Wr=new WeakMap,Vr=new WeakMap,it=new WeakMap,ef=new WeakSet,hA=function(){l(this,Wr)||(m(this,Wr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var iu;class dA extends R0{constructor(t){super();b(this,iu);const{map:i,hash:s,transfer:r}=t.serializable,a=structuredClone(i,r?{transfer:r}:null);m(this,iu,{map:a,hash:s,transfer:r})}get print(){_e("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,iu)}get modifiedIds(){return re(this,"modifiedIds",{ids:new Set,hash:""})}}iu=new WeakMap;var Fo;class yE{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){b(this,Fo,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Fo).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Fo).has(e.loadedName))){if(Ke(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=e,a=new FontFace(i,s,r);this.addNativeFontFace(a);try{await a.load(),l(this,Fo).add(i),t==null||t(e)}catch{ee(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}_e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw ee(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return re(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(St||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),re(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ke(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return re(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(S,k){return S.charCodeAt(k)<<24|S.charCodeAt(k+1)<<16|S.charCodeAt(k+2)<<8|S.charCodeAt(k+3)&255}function s(S,k,C,R){const L=S.substring(0,k),D=S.substring(k+C);return L+R+D}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function h(S,k){if(++u>30){ee("Load test font never loaded."),k();return}if(c.font="30px "+S,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(h.bind(null,S,k))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const v=16,A=1482184792;let _=i(f,v);for(r=0,a=d.length-3;r<a;r+=4)_=_-A+i(d,r)|0;r<d.length&&(_=_-A+i(d+"XXX",r)|0),f=s(f,v,4,tE(_));const g=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(w);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const S of[e.loadedName,d]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=S,x.append(k)}this._document.body.append(x),h(d,()=>{x.remove(),t.complete()})}}Fo=new WeakMap;class vE{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${oE(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){ee(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(r,a){};const s=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case Ei.BEZIER_CURVE_TO:{const[o,c,u,h,d,f]=i.slice(r,r+6);s.push(p=>p.bezierCurveTo(o,c,u,h,d,f)),r+=6}break;case Ei.MOVE_TO:{const[o,c]=i.slice(r,r+2);s.push(u=>u.moveTo(o,c)),r+=2}break;case Ei.LINE_TO:{const[o,c]=i.slice(r,r+2);s.push(u=>u.lineTo(o,c)),r+=2}break;case Ei.QUADRATIC_CURVE_TO:{const[o,c,u,h]=i.slice(r,r+4);s.push(d=>d.quadraticCurveTo(o,c,u,h)),r+=4}break;case Ei.RESTORE:s.push(o=>o.restore());break;case Ei.SAVE:s.push(o=>o.save());break;case Ei.SCALE:Ke(s.length===2,"Scale command is only valid at the third position.");break;case Ei.TRANSFORM:{const[o,c,u,h,d,f]=i.slice(r,r+6);s.push(p=>p.transform(o,c,u,h,d,f)),r+=6}break;case Ei.TRANSLATE:{const[o,c]=i.slice(r,r+2);s.push(u=>u.translate(o,c)),r+=2}break}return this.compiledGlyphs[t]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let c=2,u=s.length;c<u;c++)s[c](a)}}}var su;class fA{constructor({enableHWA:e=!1}){b(this,su,!1);m(this,su,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,su)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_e("Abstract method `_createCanvas` called.")}}su=new WeakMap;class wE extends fA{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class pA{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class gA extends pA{async _fetch(e){const t=await If(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Mf(t)}}class mA{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var Gr,Xr,fi,Oi,wt,tf,qr,H,yt,Ga,Xa,Kh,qa,yA,Og,Ya,Yl,Kl,jg,Ql;class bE extends mA{constructor({docId:t,ownerDocument:i=globalThis.document}){super();b(this,H);b(this,Gr);b(this,Xr);b(this,fi);b(this,Oi);b(this,wt);b(this,tf);b(this,qr,0);m(this,Oi,t),m(this,wt,i)}addFilter(t){if(!t)return"none";let i=l(this,H,yt).get(t);if(i)return i;const[s,r,a]=y(this,H,Kh).call(this,t),o=t.length===1?s:`${s}${r}${a}`;if(i=l(this,H,yt).get(o),i)return l(this,H,yt).set(t,i),i;const c=`g_${l(this,Oi)}_transfer_map_${Et(this,qr)._++}`,u=y(this,H,qa).call(this,c);l(this,H,yt).set(t,u),l(this,H,yt).set(o,u);const h=y(this,H,Ya).call(this,c);return y(this,H,Kl).call(this,s,r,a,h),u}addHCMFilter(t,i){var v;const s=`${t}-${i}`,r="base";let a=l(this,H,Ga).get(r);if((a==null?void 0:a.key)===s||(a?((v=a.filter)==null||v.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},l(this,H,Ga).set(r,a)),!t||!i))return a.url;const o=y(this,H,Ql).call(this,t);t=$.makeHexColor(...o);const c=y(this,H,Ql).call(this,i);if(i=$.makeHexColor(...c),l(this,H,Xa).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const u=new Array(256);for(let A=0;A<=255;A++){const _=A/255;u[A]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,Oi)}_hcm_filter`,f=a.filter=y(this,H,Ya).call(this,d);y(this,H,Kl).call(this,h,h,h,f),y(this,H,Og).call(this,f);const p=(A,_)=>{const g=o[A]/255,w=c[A]/255,x=new Array(_+1);for(let S=0;S<=_;S++)x[S]=g+S/_*(w-g);return x.join(",")};return y(this,H,Kl).call(this,p(0,5),p(1,5),p(2,5),f),a.url=y(this,H,qa).call(this,d),a.url}addAlphaFilter(t){let i=l(this,H,yt).get(t);if(i)return i;const[s]=y(this,H,Kh).call(this,[t]),r=`alpha_${s}`;if(i=l(this,H,yt).get(r),i)return l(this,H,yt).set(t,i),i;const a=`g_${l(this,Oi)}_alpha_map_${Et(this,qr)._++}`,o=y(this,H,qa).call(this,a);l(this,H,yt).set(t,o),l(this,H,yt).set(r,o);const c=y(this,H,Ya).call(this,a);return y(this,H,jg).call(this,s,c),o}addLuminosityFilter(t){let i=l(this,H,yt).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=y(this,H,Kh).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=l(this,H,yt).get(r),i)return l(this,H,yt).set(t,i),i;const a=`g_${l(this,Oi)}_luminosity_map_${Et(this,qr)._++}`,o=y(this,H,qa).call(this,a);l(this,H,yt).set(t,o),l(this,H,yt).set(r,o);const c=y(this,H,Ya).call(this,a);return y(this,H,yA).call(this,c),t&&y(this,H,jg).call(this,s,c),o}addHighlightHCMFilter(t,i,s,r,a){var w;const o=`${i}-${s}-${r}-${a}`;let c=l(this,H,Ga).get(t);if((c==null?void 0:c.key)===o||(c?((w=c.filter)==null||w.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,H,Ga).set(t,c)),!i||!s))return c.url;const[u,h]=[i,s].map(y(this,H,Ql).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,v]=[r,a].map(y(this,H,Ql).bind(this));f<d&&([d,f,p,v]=[f,d,v,p]),l(this,H,Xa).style.color="";const A=(x,S,k)=>{const C=new Array(256),R=(f-d)/k,L=x/255,D=(S-x)/(255*k);let j=0;for(let U=0;U<=k;U++){const ie=Math.round(d+U*R),J=L+U*D;for(let ae=j;ae<=ie;ae++)C[ae]=J;j=ie+1}for(let U=j;U<256;U++)C[U]=C[j-1];return C.join(",")},_=`g_${l(this,Oi)}_hcm_${t}_filter`,g=c.filter=y(this,H,Ya).call(this,_);return y(this,H,Og).call(this,g),y(this,H,Kl).call(this,A(p[0],v[0],5),A(p[1],v[1],5),A(p[2],v[2],5),g),c.url=y(this,H,qa).call(this,_),c.url}destroy(t=!1){t&&l(this,H,Ga).size!==0||(l(this,fi)&&(l(this,fi).parentNode.parentNode.remove(),m(this,fi,null)),l(this,Xr)&&(l(this,Xr).clear(),m(this,Xr,null)),m(this,qr,0))}}Gr=new WeakMap,Xr=new WeakMap,fi=new WeakMap,Oi=new WeakMap,wt=new WeakMap,tf=new WeakMap,qr=new WeakMap,H=new WeakSet,yt=function(){return l(this,Xr)||m(this,Xr,new Map)},Ga=function(){return l(this,tf)||m(this,tf,new Map)},Xa=function(){if(!l(this,fi)){const t=l(this,wt).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=l(this,wt).createElementNS(Ci,"svg");s.setAttribute("width",0),s.setAttribute("height",0),m(this,fi,l(this,wt).createElementNS(Ci,"defs")),t.append(s),s.append(l(this,fi)),l(this,wt).body.append(t)}return l(this,fi)},Kh=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=i[u]/255,o[u]=s[u]/255,c[u]=r[u]/255;return[a.join(","),o.join(","),c.join(",")]},qa=function(t){if(l(this,Gr)===void 0){m(this,Gr,"");const i=l(this,wt).URL;i!==l(this,wt).baseURI&&(Nf(i)?ee('#createUrl: ignore "data:"-URL for performance reasons.'):m(this,Gr,i.split("#",1)[0]))}return`url(${l(this,Gr)}#${t})`},yA=function(t){const i=l(this,wt).createElementNS(Ci,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Og=function(t){const i=l(this,wt).createElementNS(Ci,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Ya=function(t){const i=l(this,wt).createElementNS(Ci,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,H,Xa).append(i),i},Yl=function(t,i,s){const r=l(this,wt).createElementNS(Ci,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},Kl=function(t,i,s,r){const a=l(this,wt).createElementNS(Ci,"feComponentTransfer");r.append(a),y(this,H,Yl).call(this,a,"feFuncR",t),y(this,H,Yl).call(this,a,"feFuncG",i),y(this,H,Yl).call(this,a,"feFuncB",s)},jg=function(t,i){const s=l(this,wt).createElementNS(Ci,"feComponentTransfer");i.append(s),y(this,H,Yl).call(this,s,"feFuncA",t)},Ql=function(t){return l(this,H,Xa).style.color=t,P0(getComputedStyle(l(this,H,Xa)).getPropertyValue("color"))};class vA{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){_e("Abstract method `_fetch` called.")}}class wA extends vA{async _fetch(e){const t=await If(e,"arraybuffer");return new Uint8Array(t)}}if(St){var zg=Promise.withResolvers(),yc=null;(async()=>{const e=await Eh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Eh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Eh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Eh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:r,path2d:a}))})().then(e=>{yc=e,zg.resolve()},e=>{ee(`loadPackages: ${e}`),yc=new Map,zg.resolve()})}class hr{static get promise(){return zg.promise}static get(e){return yc==null?void 0:yc.get(e)}}async function bA(n){const t=await hr.get("fs").promises.readFile(n);return new Uint8Array(t)}class AE extends mA{}class xE extends fA{_createCanvas(e,t){return hr.get("canvas").createCanvas(e,t)}}class SE extends pA{async _fetch(e){return bA(e)}}class _E extends vA{async _fetch(e){return bA(e)}}const Pt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Hg(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class L0{getPattern(){_e("Abstract method `getPattern` called.")}}class EE extends L0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Pt.STROKE||s===Pt.FILL){const a=t.current.getClippedPathBoundingBox(s,Le(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=$.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Hg(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else Hg(e,this._bbox),r=this._createGradient(e);return r}}function mp(n,e,t,i,s,r,a,o){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=a,a=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=a,a=o,o=f),c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=a,a=f);const p=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,A=(c[i]+e.offsetX)*e.scaleX,_=(c[i+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,w=(c[s+1]+e.offsetY)*e.scaleY;if(v>=w)return;const x=u[r],S=u[r+1],k=u[r+2],C=u[a],R=u[a+1],L=u[a+2],D=u[o],j=u[o+1],U=u[o+2],ie=Math.round(v),J=Math.round(w);let ae,ce,he,T,E,M,I,z;for(let V=ie;V<=J;V++){if(V<_){const oe=V<v?0:(v-V)/(v-_);ae=p-(p-A)*oe,ce=x-(x-C)*oe,he=S-(S-R)*oe,T=k-(k-L)*oe}else{let oe;V>w?oe=1:_===w?oe=0:oe=(_-V)/(_-w),ae=A-(A-g)*oe,ce=C-(C-D)*oe,he=R-(R-j)*oe,T=L-(L-U)*oe}let Q;V<v?Q=0:V>w?Q=1:Q=(v-V)/(v-w),E=p-(p-g)*Q,M=x-(x-D)*Q,I=S-(S-j)*Q,z=k-(k-U)*Q;const de=Math.round(Math.min(ae,E)),Dt=Math.round(Math.max(ae,E));let be=d*V+de*4;for(let oe=de;oe<=Dt;oe++)Q=(ae-oe)/(ae-E),Q<0?Q=0:Q>1&&(Q=1),h[be++]=ce-(ce-M)*Q|0,h[be++]=he-(he-I)*Q|0,h[be++]=T-(T-z)*Q|0,h[be++]=255}}function kE(n,e,t){const i=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(i.length/o)-1,u=o-1;for(r=0;r<c;r++){let h=r*o;for(let d=0;d<u;d++,h++)mp(n,t,i[h],i[h+1],i[h+o],s[h],s[h+1],s[h+o]),mp(n,t,i[h+o+1],i[h+1],i[h+o],s[h+o+1],s[h+1],s[h+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)mp(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class CE extends L0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,v=h/f,A={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/v},_=d+2*2,g=f+2*2,w=i.getCanvas("mesh",_,g),x=w.context,S=x.createImageData(d,f);if(t){const C=S.data;for(let R=0,L=C.length;R<L;R+=4)C[R]=t[0],C[R+1]=t[1],C[R+2]=t[2],C[R+3]=255}for(const C of this._figures)kE(S,C,A);return x.putImageData(S,2,2),{canvas:w.canvas,offsetX:o-2*p,offsetY:c-2*v,scaleX:p,scaleY:v}}getPattern(e,t,i,s){Hg(e,this._bbox);let r;if(s===Pt.SHADING)r=$.singularValueDecompose2dScale(Le(e));else if(r=$.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=$.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,s===Pt.SHADING?null:this._background,t.cachedCanvases);return s!==Pt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class TE extends L0{getPattern(){return"hotpink"}}function PE(n){switch(n[0]){case"RadialAxial":return new EE(n);case"Mesh":return new CE(n);case"Dummy":return new TE}throw new Error(`Unknown IR type: ${n[0]}`)}const av={COLORED:1,UNCOLORED:2},nf=class nf{constructor(e,t,i,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Rf("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],v=f-h,A=p-d,_=$.singularValueDecompose2dScale(this.matrix),g=$.singularValueDecompose2dScale(this.baseTransform),w=_[0]*g[0],x=_[1]*g[1];let S=v,k=A,C=!1,R=!1;const L=Math.ceil(c*w),D=Math.ceil(u*x),j=Math.ceil(v*w),U=Math.ceil(A*x);L>=j?S=c:C=!0,D>=U?k=u:R=!0;const ie=this.getSizeAndScale(S,this.ctx.canvas.width,w),J=this.getSizeAndScale(k,this.ctx.canvas.height,x),ae=e.cachedCanvases.getCanvas("pattern",ie.size,J.size),ce=ae.context,he=o.createCanvasGraphics(ce);if(he.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(he,s,a),ce.translate(-ie.scale*h,-J.scale*d),he.transform(ie.scale,0,0,J.scale,0,0),ce.save(),this.clipBbox(he,h,d,f,p),he.baseTransform=Le(he.ctx),he.executeOperatorList(i),he.endDrawing(),ce.restore(),C||R){const T=ae.canvas;C&&(S=c),R&&(k=u);const E=this.getSizeAndScale(S,this.ctx.canvas.width,w),M=this.getSizeAndScale(k,this.ctx.canvas.height,x),I=E.size,z=M.size,V=e.cachedCanvases.getCanvas("pattern-workaround",I,z),Q=V.context,de=C?Math.floor(v/c):0,Dt=R?Math.floor(A/u):0;for(let be=0;be<=de;be++)for(let oe=0;oe<=Dt;oe++)Q.drawImage(T,I*be,z*oe,I,z,0,0,I,z);return{canvas:V.canvas,scaleX:E.scale,scaleY:M.scale,offsetX:h,offsetY:d}}return{canvas:ae.canvas,scaleX:ie.scale,scaleY:J.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,i){const s=Math.max(nf.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const a=s-t,o=r-i;e.ctx.rect(t,i,a,o),e.current.updateRectMinMax(Le(e.ctx),[t,i,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case av.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case av.UNCOLORED:const o=$.makeHexColor(i[0],i[1],i[2]);s.fillStyle=o,s.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new eE(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let r=i;s!==Pt.SHADING&&(r=$.transform(r,t.baseTransform),this.matrix&&(r=$.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};G(nf,"MAX_PATTERN_SIZE",3e3);let Bg=nf;function RE({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=Lt.isLittleEndian?4278190080:255,[c,u]=a?[r,o]:[o,r],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let v=0;v<s;v++){for(const _=e+h;e<_;e++){const g=e<f?n[e]:255;t[p++]=g&128?u:c,t[p++]=g&64?u:c,t[p++]=g&32?u:c,t[p++]=g&16?u:c,t[p++]=g&8?u:c,t[p++]=g&4?u:c,t[p++]=g&2?u:c,t[p++]=g&1?u:c}if(d===0)continue;const A=e<f?n[e++]:255;for(let _=0;_<d;_++)t[p++]=A&1<<7-_?u:c}return{srcPos:e,destPos:p}}const ov=16,lv=100,LE=15,cv=10,uv=1e3,Ut=16;function ME(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,a,o,c){e.transform(i,s,r,a,o,c),this.__originalTransform(i,s,r,a,o,c)},n.setTransform=function(i,s,r,a,o,c){e.setTransform(i,s,r,a,o,c),this.__originalSetTransform(i,s,r,a,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,a,o){e.bezierCurveTo(t,i,s,r,a,o),this.__originalBezierCurveTo(t,i,s,r,a,o)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class IE{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function kh(n,e,t,i,s,r,a,o,c,u){const[h,d,f,p,v,A]=Le(n);if(d===0&&f===0){const w=a*h+v,x=Math.round(w),S=o*p+A,k=Math.round(S),C=(a+c)*h+v,R=Math.abs(Math.round(C)-x)||1,L=(o+u)*p+A,D=Math.abs(Math.round(L)-k)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),x,k),n.drawImage(e,t,i,s,r,0,0,R,D),n.setTransform(h,d,f,p,v,A),[R,D]}if(h===0&&p===0){const w=o*f+v,x=Math.round(w),S=a*d+A,k=Math.round(S),C=(o+u)*f+v,R=Math.abs(Math.round(C)-x)||1,L=(a+c)*d+A,D=Math.abs(Math.round(L)-k)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,x,k),n.drawImage(e,t,i,s,r,0,0,D,R),n.setTransform(h,d,f,p,v,A),[D,R]}n.drawImage(e,t,i,s,r,a,o,c,u);const _=Math.hypot(h,d),g=Math.hypot(f,p);return[_*c,g*u]}function NE(n){const{width:e,height:t}=n;if(e>uv||t>uv)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const g of n.data){let w=128;for(;w>0;)d[f++]=g&w?0:255,w>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[c]=2,++p),o=1;o<t;o++){f=o*h,u=o*r,d[f-h]!==d[f]&&(a[u]=d[f]?1:8,++p);let g=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)g=(g>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[g]&&(a[u+c]=s[g],++p),f++;if(d[f-h]!==d[f]&&(a[u+c]=d[f]?2:4,++p),p>i)return null}for(f=h*(t-1),u=o*r,d[f]!==0&&(a[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[u+c]=4,++p),p>i)return null;const v=new Int32Array([0,r,-1,0,-r,0,0,0,1]),A=new Path2D;for(o=0;p&&o<=t;o++){let g=o*r;const w=g+e;for(;g<w&&!a[g];)g++;if(g===w)continue;A.moveTo(g%r,o);const x=g;let S=a[g];do{const k=v[S];do g+=k;while(!a[g]);const C=a[g];C!==5&&C!==10?(S=C,a[g]=0):(S=C&51*S>>4,a[g]&=S>>2|S<<2),A.lineTo(g%r,g/r|0),a[g]||--p}while(x!==g);--o}return d=null,a=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(A),g.beginPath(),g.restore()}}class hv{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ob,this.textMatrixScale=1,this.fontMatrix=fg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=mt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=$.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=$.applyTransform(t,e),s=$.applyTransform(t.slice(2),e),r=$.applyTransform([t[0],t[3]],e),a=$.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],a[1])}updateScalingPathMinMax(e,t){$.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,r,a,o,c,u,h){const d=$.bezierBoundingBox(t,i,s,r,a,o,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Pt.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Pt.STROKE){t||_e("Stroke bounding box must include transform.");const s=$.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const e=$.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Pt.FILL,t=null){return $.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function dv(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%Ut,r=(t-s)/Ut,a=s===0?r:r+1,o=n.createImageData(i,Ut);let c=0,u;const h=e.data,d=o.data;let f,p,v,A;if(e.kind===$h.GRAYSCALE_1BPP){const _=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),w=g.length,x=i+7>>3,S=4294967295,k=Lt.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(v=f<r?Ut:s,u=0,p=0;p<v;p++){const C=_-c;let R=0;const L=C>x?i:C*8-7,D=L&-8;let j=0,U=0;for(;R<D;R+=8)U=h[c++],g[u++]=U&128?S:k,g[u++]=U&64?S:k,g[u++]=U&32?S:k,g[u++]=U&16?S:k,g[u++]=U&8?S:k,g[u++]=U&4?S:k,g[u++]=U&2?S:k,g[u++]=U&1?S:k;for(;R<L;R++)j===0&&(U=h[c++],j=128),g[u++]=U&j?S:k,j>>=1}for(;u<w;)g[u++]=0;n.putImageData(o,0,f*Ut)}}else if(e.kind===$h.RGBA_32BPP){for(p=0,A=i*Ut*4,f=0;f<r;f++)d.set(h.subarray(c,c+A)),c+=A,n.putImageData(o,0,p),p+=Ut;f<a&&(A=i*s*4,d.set(h.subarray(c,c+A)),n.putImageData(o,0,p))}else if(e.kind===$h.RGB_24BPP)for(v=Ut,A=i*v,f=0;f<a;f++){for(f>=r&&(v=s,A=i*v),u=0,p=A;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(o,0,f*Ut)}else throw new Error(`bad image kind: ${e.kind}`)}function fv(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%Ut,r=(t-s)/Ut,a=s===0?r:r+1,o=n.createImageData(i,Ut);let c=0;const u=e.data,h=o.data;for(let d=0;d<a;d++){const f=d<r?Ut:s;({srcPos:c}=RE({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(o,0,d*Ut)}}function zl(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Ch(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!St){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function pv(n,e){if(e)return!0;const t=$.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*ur.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const FE=["butt","round","square"],DE=["miter","round","bevel"],OE={},gv={};var fr,Ug,$g;const j0=class j0{constructor(e,t,i,s,r,{optionalContentConfig:a,markedContentStack:o=null},c,u){b(this,fr);this.ctx=e,this.current=new hv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new IE(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Le(this.compositeCtx))}this.ctx.save(),Ch(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Le(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,a=e.fnArray;let o=t||0;const c=r.length;if(c===o)return o;const u=c-o>cv&&typeof i=="function",h=u?Date.now()+LE:0;let d=0;const f=this.commonObjs,p=this.objs;let v;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,i),o;if(v=a[o],v!==Nn.dependency)this[v].apply(this,r[o]);else for(const A of r[o]){const _=A.startsWith("g_")?f:p;if(!_.has(A))return _.get(A,i),o}if(o++,o===c)return o;if(u&&++d>cv){if(Date.now()>h)return i(),o;d=0}}}endDrawing(){y(this,fr,Ug).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),y(this,fr,$g).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,c=s,u="prescale1",h,d;for(;r>2&&o>1||a>2&&c>1;){let f=o,p=c;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,c,0,0,f,p),e=h.canvas,o=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,a=this.current.patternFill,o=Le(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const L=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),c=this._cachedBitmapsMap.get(L),c||(c=new Map,this._cachedBitmapsMap.set(L,c));const D=c.get(u);if(D&&!a){const j=Math.round(Math.min(o[0],o[2])+o[4]),U=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:D,offsetX:j,offsetY:U}}h=D}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),fv(d.context,e));let f=$.transform(o,[1/i,0,0,-1/s,0,0]);f=$.transform(f,[1,0,0,1,0,-s]);const[p,v,A,_]=$.getAxialAlignedBoundingBox([0,0,i,s],f),g=Math.round(A-p)||1,w=Math.round(_-v)||1,x=this.cachedCanvases.getCanvas("fillCanvas",g,w),S=x.context,k=p,C=v;S.translate(-k,-C),S.transform(...f),h||(h=this._scaleImage(d.canvas,ki(S)),h=h.img,c&&a&&c.set(u,h)),S.imageSmoothingEnabled=pv(Le(S),e.interpolate),kh(S,h,0,0,h.width,h.height,0,0,i,s),S.globalCompositeOperation="source-in";const R=$.transform(ki(S),[1,0,0,1,-k,-C]);return S.fillStyle=a?r.getPattern(t,this,R,Pt.FILL):r,S.fillRect(0,0,i,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),{canvas:x.canvas,offsetX:Math.round(k),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=FE[e]}setLineJoin(e){this.ctx.lineJoin=DE[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Le(this.suspendedCtx)),zl(this.suspendedCtx,r),ME(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],a=s[1],o=s[2]-r,c=s[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,i,o,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,a,o,c,u,h,d){let f=e.canvas,p=c-h,v=u-d;if(a){const _=$.makeHexColor(...a);if(p<0||v<0||p+i>f.width||v+s>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",i,s),w=g.context;w.drawImage(f,-p,-v),w.globalCompositeOperation="destination-atop",w.fillStyle=_,w.fillRect(0,0,i,s),w.globalCompositeOperation="source-over",f=g.canvas,p=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,v,i,s),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=_,e.fillRect(p,v,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const A=new Path2D;A.rect(c,u,i,s),t.clip(A),t.globalCompositeOperation="destination-in",t.drawImage(f,p,v,i,s,c,u,i,s),t.restore()}save(){this.inSMaskMode?(zl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),zl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,r,a){this.ctx.transform(e,t,i,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,r=this.current;let a=r.x,o=r.y,c,u;const h=Le(s),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let p=0,v=0,A=e.length;p<A;p++)switch(e[p]|0){case Nn.rectangle:a=t[v++],o=t[v++];const _=t[v++],g=t[v++],w=a+_,x=o+g;s.moveTo(a,o),_===0||g===0?s.lineTo(w,x):(s.lineTo(w,o),s.lineTo(w,x),s.lineTo(a,x)),d||r.updateRectMinMax(h,[a,o,w,x]),s.closePath();break;case Nn.moveTo:a=t[v++],o=t[v++],s.moveTo(a,o),d||r.updatePathMinMax(h,a,o);break;case Nn.lineTo:a=t[v++],o=t[v++],s.lineTo(a,o),d||r.updatePathMinMax(h,a,o);break;case Nn.curveTo:c=a,u=o,a=t[v+4],o=t[v+5],s.bezierCurveTo(t[v],t[v+1],t[v+2],t[v+3],a,o),r.updateCurvePathMinMax(h,c,u,t[v],t[v+1],t[v+2],t[v+3],a,o,f),v+=6;break;case Nn.curveTo2:c=a,u=o,s.bezierCurveTo(a,o,t[v],t[v+1],t[v+2],t[v+3]),r.updateCurvePathMinMax(h,c,u,a,o,t[v],t[v+1],t[v+2],t[v+3],f),a=t[v+2],o=t[v+3],v+=4;break;case Nn.curveTo3:c=a,u=o,a=t[v+2],o=t[v+3],s.bezierCurveTo(t[v],t[v+1],a,o,a,o),r.updateCurvePathMinMax(h,c,u,t[v],t[v+1],a,o,a,o,f),v+=4;break;case Nn.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ki(t),Pt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,ki(t),Pt.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=OE}eoClip(){this.pendingClip=gv}beginText(){this.current.textMatrix=Ob,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||fg,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ee("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const c=i.italic?"italic":"normal";let u=t;t<ov?u=ov:t>lv&&(u=lv),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,r,a){this.current.textMatrix=[e,t,i,s,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const r=this.ctx,a=this.current,o=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,h=c&mt.FILL_STROKE_MASK,d=!!(c&mt.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||f)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f?(r.save(),r.translate(t,i),r.beginPath(),p(r,u),s&&r.setTransform(...s),(h===mt.FILL||h===mt.FILL_STROKE)&&r.fill(),(h===mt.STROKE||h===mt.FILL_STROKE)&&r.stroke(),r.restore()):((h===mt.FILL||h===mt.FILL_STROKE)&&r.fillText(e,t,i),(h===mt.STROKE||h===mt.FILL_STROKE)&&r.strokeText(e,t,i)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Le(r),x:t,y:i,fontSize:u,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return re(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=i.vertical,p=f?1:-1,v=i.defaultVMetrics,A=s*t.fontMatrix[0],_=t.textRenderingMode===mt.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let g;if(t.patternFill){r.save();const C=t.fillColor.getPattern(r,this,ki(r),Pt.FILL);g=Le(r),r.restore(),r.fillStyle=C}let w=t.lineWidth;const x=t.textMatrixScale;if(x===0||w===0){const C=t.textRenderingMode&mt.FILL_STROKE_MASK;(C===mt.STROKE||C===mt.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=x;if(a!==1&&(r.scale(a,a),w/=a),r.lineWidth=w,i.isInvalidPDFjsFont){const C=[];let R=0;for(const L of e)C.push(L.unicode),R+=L.width;r.fillText(C.join(""),0,0),t.x+=R*A*h,r.restore(),this.compose();return}let S=0,k;for(k=0;k<d;++k){const C=e[k];if(typeof C=="number"){S+=p*C*s/1e3;continue}let R=!1;const L=(C.isSpace?c:0)+o,D=C.fontChar,j=C.accent;let U,ie,J=C.width;if(f){const ce=C.vmetric||v,he=-(C.vmetric?ce[1]:J*.5)*A,T=ce[2]*A;J=ce?-ce[0]:J,U=he/a,ie=(S+T)/a}else U=S/a,ie=0;if(i.remeasure&&J>0){const ce=r.measureText(D).width*1e3/s*a;if(J<ce&&this.isFontSubpixelAAEnabled){const he=J/ce;R=!0,r.save(),r.scale(he,1),U/=he}else J!==ce&&(U+=(J-ce)/2e3*s/a)}if(this.contentVisible&&(C.isInFont||i.missingFile)){if(_&&!j)r.fillText(D,U,ie);else if(this.paintChar(D,U,ie,g),j){const ce=U+s*j.offset.x/a,he=ie-s*j.offset.y/a;this.paintChar(j.fontChar,ce,he,g)}}const ae=f?J*A-L*u:J*A+L*u;S+=ae,R&&r.restore()}f?t.y-=S:t.x+=S*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,a=i.fontDirection,o=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,h=i.textHScale*a,d=i.fontMatrix||fg,f=e.length,p=i.textRenderingMode===mt.INVISIBLE;let v,A,_,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,a),v=0;v<f;++v){if(A=e[v],typeof A=="number"){g=o*A*r/1e3,this.ctx.translate(g,0),i.x+=g*h;continue}const w=(A.isSpace?u:0)+c,x=s.charProcOperatorList[A.operatorListId];if(!x){ee(`Type3 character "${A.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=A,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(x),this.restore()),_=$.applyTransform([A.width,0],d)[0]*r+w,t.translate(_,0),i.x+=_*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,a){this.ctx.rect(i,s,r-i,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||Le(this.ctx),r={createCanvasGraphics:a=>new j0(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Bg(e,i,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=$.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=$.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=PE(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ki(t),Pt.SHADING);const s=ki(t);if(s){const{width:r,height:a}=t.canvas,[o,c,u,h]=$.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(o,c,u-o,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){_e("Should not call beginInlineImage")}beginImageData(){_e("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Le(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(Le(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Rf("TODO: Support non-isolated groups."),e.knockout&&ee("Knockout groups not supported.");const i=Le(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=$.getAxialAlignedBoundingBox(e.bbox,Le(t));const r=[0,0,t.canvas.width,t.canvas.height];s=$.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-a,-o),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),zl(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Le(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=$.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(y(this,fr,Ug).call(this),Ch(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,u]=$.singularValueDecompose2dScale(Le(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,o*u),Ch(this.ctx)}else Ch(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new hv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),y(this,fr,$g).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=NE(e)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=Le(o);o.transform(t,i,s,r,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=a.length;h<d;h+=2){const f=$.transform(c,[t,i,s,r,a[h],a[h+1]]),[p,v]=$.applyTransform([0,0],f);o.drawImage(u.canvas,p,v)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:a,width:o,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",o,c),d=h.context;d.save();const f=this.getObject(a,r);fv(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,ki(t),Pt.FILL):i,d.fillRect(0,0,o,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),kh(t,h.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ee("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){ee("Dependent image isn't ready yet");return}const a=r.width,o=r.height,c=[];for(let u=0,h=s.length;u<h;u+=2)c.push({transform:[t,0,0,i,s[u],s[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!St){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;dv(c,e),r=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(r,ki(s));s.imageSmoothingEnabled=pv(Le(s),e.interpolate),kh(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;dv(c,e),s=this.applyTransferMapsToCanvas(c)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),kh(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===gv?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Le(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let a,o;if(i===0&&s===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)a=o=1/c;else{const h=c*e;a=o=h<1?1/h:1}else if(e===0)a=1/c,o=1/u;else{const h=c*e,d=u*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const c=Math.abs(t*r-i*s),u=Math.hypot(t,i),h=Math.hypot(s,r);if(e===0)a=h/c,o=u/c;else{const d=e*c;a=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,r),a.length>0){const o=Math.max(s,r);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};fr=new WeakSet,Ug=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$g=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let bo=j0;for(const n in Nn)bo.prototype[n]!==void 0&&(bo.prototype[Nn[n]]=bo.prototype[n]);var ru,au;class ns{static get workerPort(){return l(this,ru)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");m(this,ru,e)}static get workerSrc(){return l(this,au)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");m(this,au,e)}}ru=new WeakMap,au=new WeakMap,b(ns,ru,null),b(ns,au,"");const Th={DATA:1,ERROR:2},He={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Kt(n){switch(n instanceof Error||typeof n=="object"&&n!==null||_e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ua(n.message);case"MissingPDFException":return new Ba(n.message);case"PasswordException":return new pg(n.message,n.code);case"UnexpectedResponseException":return new Lf(n.message,n.status);case"UnknownErrorException":return new gg(n.message,n.details);default:return new gg(n.message,n.toString())}}var Do,Cn,AA,xA,SA,Qh;class Zl{constructor(e,t,i){b(this,Cn);b(this,Do,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",y(this,Cn,AA).bind(this),{signal:l(this,Do).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:He.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ke(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:He.CANCEL,streamId:r,reason:Kt(u)}),h.promise}},i)}destroy(){var e;(e=l(this,Do))==null||e.abort(),m(this,Do,null)}}Do=new WeakMap,Cn=new WeakSet,AA=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){y(this,Cn,SA).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Th.DATA)s.resolve(e.data);else if(e.callback===Th.ERROR)s.reject(Kt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){r.postMessage({sourceName:i,targetName:s,callback:Th.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:i,targetName:s,callback:Th.ERROR,callbackId:e.callbackId,reason:Kt(a)})});return}if(e.streamId){y(this,Cn,xA).call(this,e);return}t(e.data)},xA=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:He.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:He.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Ke(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:He.ERROR,streamId:t,reason:Kt(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(o(e.data,c))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:He.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:He.START_COMPLETE,streamId:t,reason:Kt(u)})})},SA=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case He.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Kt(e.reason));break;case He.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Kt(e.reason));break;case He.PULL:if(!o){r.postMessage({sourceName:i,targetName:s,stream:He.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(c){var u;c((u=o.onPull)==null?void 0:u.call(o))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:He.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:He.PULL_COMPLETE,streamId:t,reason:Kt(c)})});break;case He.ENQUEUE:if(Ke(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case He.CLOSE:if(Ke(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),y(this,Cn,Qh).call(this,a,t);break;case He.ERROR:Ke(a,"error should have stream controller"),a.controller.error(Kt(e.reason)),y(this,Cn,Qh).call(this,a,t);break;case He.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Kt(e.reason)),y(this,Cn,Qh).call(this,a,t);break;case He.CANCEL:if(!o)break;new Promise(function(c){var u;c((u=o.onCancel)==null?void 0:u.call(o,Kt(e.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:He.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:He.CANCEL_COMPLETE,streamId:t,reason:Kt(c)})}),o.sinkCapability.reject(Kt(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Qh=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Yr,ou;class jE{constructor({parsedData:e,rawData:t}){b(this,Yr);b(this,ou);m(this,Yr,e),m(this,ou,t)}getRaw(){return l(this,ou)}get(e){return l(this,Yr).get(e)??null}getAll(){return _0(l(this,Yr))}has(e){return l(this,Yr).has(e)}}Yr=new WeakMap,ou=new WeakMap;const Ka=Symbol("INTERNAL");var lu,cu,uu,Oo;class zE{constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){b(this,lu,!1);b(this,cu,!1);b(this,uu,!1);b(this,Oo,!0);m(this,lu,!!(e&an.DISPLAY)),m(this,cu,!!(e&an.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(l(this,uu))return l(this,Oo);if(!l(this,Oo))return!1;const{print:e,view:t}=this.usage;return l(this,lu)?(t==null?void 0:t.viewState)!=="OFF":l(this,cu)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Ka&&_e("Internal method `_setVisible` called."),m(this,uu,i),m(this,Oo,t)}}lu=new WeakMap,cu=new WeakMap,uu=new WeakMap,Oo=new WeakMap;var Ds,ge,jo,zo,hu,Wg;class HE{constructor(e,t=an.DISPLAY){b(this,hu);b(this,Ds,null);b(this,ge,new Map);b(this,jo,null);b(this,zo,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,m(this,zo,e.order);for(const i of e.groups)l(this,ge).set(i.id,new zE(t,i));if(e.baseState==="OFF")for(const i of l(this,ge).values())i._setVisible(Ka,!1);for(const i of e.on)l(this,ge).get(i)._setVisible(Ka,!0);for(const i of e.off)l(this,ge).get(i)._setVisible(Ka,!1);m(this,jo,this.getHash())}}isVisible(e){if(l(this,ge).size===0)return!0;if(!e)return Rf("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,ge).has(e.id)?l(this,ge).get(e.id).visible:(ee(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return y(this,hu,Wg).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,ge).has(t))return ee(`Optional content group not found: ${t}`),!0;if(l(this,ge).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,ge).has(t))return ee(`Optional content group not found: ${t}`),!0;if(!l(this,ge).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,ge).has(t))return ee(`Optional content group not found: ${t}`),!0;if(!l(this,ge).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,ge).has(t))return ee(`Optional content group not found: ${t}`),!0;if(l(this,ge).get(t).visible)return!1}return!0}return ee(`Unknown optional content policy ${e.policy}.`),!0}return ee(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var r;const s=l(this,ge).get(e);if(!s){ee(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((r=l(this,ge).get(o))==null||r._setVisible(Ka,!1,!0));s._setVisible(Ka,!!t,!0),m(this,Ds,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=l(this,ge).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}m(this,Ds,null)}get hasInitialVisibility(){return l(this,jo)===null||this.getHash()===l(this,jo)}getOrder(){return l(this,ge).size?l(this,zo)?l(this,zo).slice():[...l(this,ge).keys()]:null}getGroups(){return l(this,ge).size>0?_0(l(this,ge)):null}getGroup(e){return l(this,ge).get(e)||null}getHash(){if(l(this,Ds)!==null)return l(this,Ds);const e=new uA;for(const[t,i]of l(this,ge))e.update(`${t}:${i.visible}`);return m(this,Ds,e.hexdigest())}}Ds=new WeakMap,ge=new WeakMap,jo=new WeakMap,zo=new WeakMap,hu=new WeakSet,Wg=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let a;if(Array.isArray(r))a=y(this,hu,Wg).call(this,r);else if(l(this,ge).has(r))a=l(this,ge).get(r).visible;else return ee(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class BE{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Ke(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});Ke(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new UE(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new $E(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class UE{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=C0(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class $E{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function WE(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=a(n),t){const h=u(t);return r(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Mf(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,A,_,g]=f;if(A=parseInt(A,10),A in d){if(A===0)break;continue}d[A]=[_,g]}const v=[];for(let A=0;A<d.length&&A in d;++A){let[_,g]=d[A];g=o(g),_&&(g=unescape(g),A===0&&(g=c(g))),v.push(g)}return v.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),v=h.slice(d+1).replace(/^[^']*'/,"");return s(f,v)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,_){return String.fromCharCode(parseInt(_,16))}),s(f,v);try{v=atob(v)}catch{}return s(f,v)})}return""}function M0(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function I0({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function N0(n){const e=n.get("Content-Disposition");if(e){let t=WE(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(C0(t))return t}return null}function Ff(n,e){return n===404||n===0&&e.startsWith("file:")?new Ba('Missing PDF "'+e+'".'):new Lf(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function _A(n){return n===200||n===206}function EA(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function kA(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ee(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class mv{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=M0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new VE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new GE(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class VE{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,EA(i,this._withCredentials,this._abortController)).then(r=>{if(!_A(r.status))throw Ff(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:c}=I0({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=N0(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ua("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:kA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class GE{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const a=s.url;fetch(a,EA(r,this._withCredentials,this._abortController)).then(o=>{if(!_A(o.status))throw Ff(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:kA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const yp=200,vp=206;function XE(n){const e=n.response;return typeof e!="string"?e:Mf(e).buffer}class qE{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=M0(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const r in i)s[r]=i[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=vp):s.expectedStatus=yp,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){var c,u,h;const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=i.onError)==null||c.call(i,s.status);return}const r=s.status||yp;if(!(r===yp&&i.expectedStatus===vp)&&r!==i.expectedStatus){(u=i.onError)==null||u.call(i,s.status);return}const o=XE(s);if(r===vp){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(f[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):(h=i.onError)==null||h.call(i,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class YE{constructor(e){this._source=e,this._manager=new qE(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new KE(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new QE(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class KE{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...c]=a.split(": ");return[o,c.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=I0({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=N0(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ff(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class QE{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Ff(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ZE=/^[a-z][a-z0-9\-+.]+:/i;function JE(n){if(ZE.test(n))return new URL(n);const e=hr.get("url");return new URL(e.pathToFileURL(n))}function CA(n,e,t){return n.protocol==="http:"?hr.get("http").request(n,{headers:e},t):hr.get("https").request(n,{headers:e},t)}class ek{constructor(e){this.source=e,this.url=JE(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=M0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ik(this):new tk(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new sk(this,e,t):new nk(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class TA{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ua("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PA{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class tk extends TA{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=s=>{if(s.statusCode===404){const c=new Ba(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=I0({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=N0(r)};this._request=CA(this._url,t,i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class nk extends PA{constructor(e,t,i){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${i-1}`;const r=a=>{if(a.statusCode===404){const o=new Ba(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=CA(this._url,s,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class ik extends TA{constructor(e){super(e);const t=hr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Ba(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class sk extends PA{constructor(e,t,i){super(e);const s=hr.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}}const rk=1e5,Ot=30,ak=.8;var Av,Os,Ht,du,fu,Kr,ji,pu,gu,Qr,Ho,Bo,js,Uo,mu,$o,Zr,yu,vu,Jr,ea,wu,zs,Wo,fs,RA,LA,Vg,hn,Zh,Gg,MA,IA;const Ve=class Ve{constructor({textContentSource:e,container:t,viewport:i}){b(this,fs);b(this,Os,Promise.withResolvers());b(this,Ht,null);b(this,du,!1);b(this,fu,!!((Av=globalThis.FontInspector)!=null&&Av.enabled));b(this,Kr,null);b(this,ji,null);b(this,pu,0);b(this,gu,0);b(this,Qr,null);b(this,Ho,null);b(this,Bo,0);b(this,js,0);b(this,Uo,Object.create(null));b(this,mu,[]);b(this,$o,null);b(this,Zr,[]);b(this,yu,new WeakMap);b(this,vu,null);var c;if(e instanceof ReadableStream)m(this,$o,e);else if(typeof e=="object")m(this,$o,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');m(this,Ht,m(this,Ho,t)),m(this,js,i.scale*(globalThis.devicePixelRatio||1)),m(this,Bo,i.rotation),m(this,ji,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=i.rawDims;m(this,vu,[1,0,0,-1,-a,o+r]),m(this,gu,s),m(this,pu,r),y(c=Ve,hn,MA).call(c),Na(t,i),l(this,Os).promise.finally(()=>{l(Ve,Wo).delete(this),m(this,ji,null),m(this,Uo,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Lt.platform;return re(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Qr).read().then(({value:t,done:i})=>{if(i){l(this,Os).resolve();return}l(this,Kr)??m(this,Kr,t.lang),Object.assign(l(this,Uo),t.styles),y(this,fs,RA).call(this,t.items),e()},l(this,Os).reject)};return m(this,Qr,l(this,$o).getReader()),l(Ve,Wo).add(this),e(),l(this,Os).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,Bo)&&(t==null||t(),m(this,Bo,s),Na(l(this,Ho),{rotation:s})),i!==l(this,js)){t==null||t(),m(this,js,i);const a={div:null,properties:null,ctx:y(r=Ve,hn,Zh).call(r,l(this,Kr))};for(const o of l(this,Zr))a.properties=l(this,yu).get(o),a.div=o,y(this,fs,Vg).call(this,a)}}cancel(){var t;const e=new Ua("TextLayer task cancelled.");(t=l(this,Qr))==null||t.cancel(e).catch(()=>{}),m(this,Qr,null),l(this,Os).reject(e)}get textDivs(){return l(this,Zr)}get textContentItemsStr(){return l(this,mu)}static cleanup(){if(!(l(this,Wo).size>0)){l(this,Jr).clear();for(const{canvas:e}of l(this,ea).values())e.remove();l(this,ea).clear()}}};Os=new WeakMap,Ht=new WeakMap,du=new WeakMap,fu=new WeakMap,Kr=new WeakMap,ji=new WeakMap,pu=new WeakMap,gu=new WeakMap,Qr=new WeakMap,Ho=new WeakMap,Bo=new WeakMap,js=new WeakMap,Uo=new WeakMap,mu=new WeakMap,$o=new WeakMap,Zr=new WeakMap,yu=new WeakMap,vu=new WeakMap,Jr=new WeakMap,ea=new WeakMap,wu=new WeakMap,zs=new WeakMap,Wo=new WeakMap,fs=new WeakSet,RA=function(e){var s,r;if(l(this,du))return;(r=l(this,ji)).ctx??(r.ctx=y(s=Ve,hn,Zh).call(s,l(this,Kr)));const t=l(this,Zr),i=l(this,mu);for(const a of e){if(t.length>rk){ee("Ignoring additional textDivs for performance reasons."),m(this,du,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,Ht);m(this,Ht,document.createElement("span")),l(this,Ht).classList.add("markedContent"),a.id!==null&&l(this,Ht).setAttribute("id",`${a.id}`),o.append(l(this,Ht))}else a.type==="endMarkedContent"&&m(this,Ht,l(this,Ht).parentNode);continue}i.push(a.str),y(this,fs,LA).call(this,a)}},LA=function(e){var A;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Zr).push(t);const s=$.transform(l(this,vu),e.transform);let r=Math.atan2(s[1],s[0]);const a=l(this,Uo)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=l(this,fu)&&a.fontSubstitution||a.fontFamily;o=Ve.fontFamilyMap.get(o)||o;const c=Math.hypot(s[2],s[3]),u=c*y(A=Ve,hn,IA).call(A,o,l(this,Kr));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;l(this,Ht)===l(this,Ho)?(p.left=`${(100*h/l(this,gu)).toFixed(2)}%`,p.top=`${(100*d/l(this,pu)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(Ve,zs)*c).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,fu)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);_!==g&&Math.max(_,g)/Math.min(_,g)>1.5&&(v=!0)}if(v&&(i.canvasWidth=a.vertical?e.height:e.width),l(this,yu).set(t,i),l(this,ji).div=t,l(this,ji).properties=i,y(this,fs,Vg).call(this,l(this,ji)),i.hasText&&l(this,Ht).append(t),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),l(this,Ht).append(_)}},Vg=function(e){var o;const{div:t,properties:i,ctx:s}=e,{style:r}=t;let a="";if(l(Ve,zs)>1&&(a=`scale(${1/l(Ve,zs)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=i;y(o=Ve,hn,Gg).call(o,s,h*l(this,js),c);const{width:d}=s.measureText(t.textContent);d>0&&(a=`scaleX(${u*l(this,js)/d}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(r.transform=a)},hn=new WeakSet,Zh=function(e=null){let t=l(this,ea).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,ea).set(e,t),l(this,wu).set(t,{size:0,family:""})}return t},Gg=function(e,t,i){const s=l(this,wu).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},MA=function(){if(l(this,zs)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),m(this,zs,e.getBoundingClientRect().height),e.remove()},IA=function(e,t){const i=l(this,Jr).get(e);if(i)return i;const s=y(this,hn,Zh).call(this,t);s.canvas.width=s.canvas.height=Ot,y(this,hn,Gg).call(this,s,Ot,e);const r=s.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const h=a/(a+o);return l(this,Jr).set(e,h),s.canvas.width=s.canvas.height=0,h}s.strokeStyle="red",s.clearRect(0,0,Ot,Ot),s.strokeText("g",0,0);let c=s.getImageData(0,0,Ot,Ot).data;o=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){o=Math.ceil(h/4/Ot);break}s.clearRect(0,0,Ot,Ot),s.strokeText("A",0,Ot),c=s.getImageData(0,0,Ot,Ot).data,a=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){a=Ot-Math.floor(h/4/Ot);break}s.canvas.width=s.canvas.height=0;const u=a?a/(a+o):ak;return l(this,Jr).set(e,u),u},b(Ve,hn),b(Ve,Jr,new Map),b(Ve,ea,new Map),b(Ve,wu,new WeakMap),b(Ve,zs,null),b(Ve,Wo,new Set);let Dc=Ve;class Oc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var c;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Oc.shouldBuildText(o))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const u of r.children)s(u)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const ok=65536,lk=100,ck=5e3,uk=St?xE:wE,hk=St?SE:gA,dk=St?AE:bE,fk=St?_E:wA;function pk(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Xg,{docId:t}=e,i=n.url?gk(n.url):null,s=n.data?mk(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof NA?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:ok;let h=n.worker instanceof Ao?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Nf(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,v=n.cMapPacked!==!1,A=n.CMapReaderFactory||hk,_=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||fk,w=n.stopAtErrors!==!0,x=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=n.isEvalSupported!==!1,k=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!St,C=typeof n.isChrome=="boolean"?n.isChrome:!Lt.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,L=typeof n.disableFontFace=="boolean"?n.disableFontFace:St,D=n.fontExtraProperties===!0,j=n.enableXfa===!0,U=n.ownerDocument||globalThis.document,ie=n.disableRange===!0,J=n.disableStream===!0,ae=n.disableAutoFetch===!0,ce=n.pdfBug===!0,he=n.CanvasFactory||uk,T=n.FilterFactory||dk,E=n.enableHWA===!0,M=c?c.length:n.length??NaN,I=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!St&&!L,z=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:A===gA&&g===wA&&p&&_&&Vl(p,document.baseURI)&&Vl(_,document.baseURI);n.canvasFactory&&sv("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&sv("`filterFactory`-instance option, please use `FilterFactory` instead.");const V=null;K_(d);const Q={canvasFactory:new he({ownerDocument:U,enableHWA:E}),filterFactory:new T({docId:t,ownerDocument:U}),cMapReaderFactory:z?null:new A({baseUrl:p,isCompressed:v}),standardFontDataFactory:z?null:new g({baseUrl:_})};if(!h){const be={verbosity:d,port:ns.workerPort};h=be.port?Ao.fromPort(be):new Ao(be),e._worker=h}const de={docId:t,apiVersion:"4.8.69",data:s,password:o,disableAutoFetch:ae,rangeChunkSize:u,length:M,docBaseUrl:f,enableXfa:j,evaluatorOptions:{maxImageSize:x,disableFontFace:L,ignoreErrors:w,isEvalSupported:S,isOffscreenCanvasSupported:k,isChrome:C,canvasMaxAreaInBytes:R,fontExtraProperties:D,useSystemFonts:I,cMapUrl:z?p:null,standardFontDataUrl:z?_:null}},Dt={disableFontFace:L,fontExtraProperties:D,ownerDocument:U,pdfBug:ce,styleElement:V,loadingParams:{disableAutoFetch:ae,enableXfa:j}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const be=h.messageHandler.sendWithPromise("GetDocRequest",de,s?[s.buffer]:null);let oe;if(c)oe=new BE(c,{disableRange:ie,disableStream:J});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Yt;St?Yt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Vl(i)?mv:ek:Yt=Vl(i)?mv:YE,oe=new Yt({url:i,length:M,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:ie,disableStream:J})}return be.then(Yt=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ms=new Zl(t,Yt,h.port),oh=new bk(ms,e,oe,Dt,Q);e._transport=oh,ms.send("Ready",null)})}).catch(e._capability.reject),e}function gk(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(St&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function mk(n){if(St&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Mf(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yv(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var sf;const rf=class rf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Et(rf,sf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};sf=new WeakMap,b(rf,sf,0);let Xg=rf;class NA{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){_e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class yk{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return re(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Hs,zi,Sn,Qa,Jh;class vk{constructor(e,t,i,s=!1){b(this,Sn);b(this,Hs,null);b(this,zi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new iv:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new FA,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new sh({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return re(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=_s.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var S,k;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:p,cacheKey:v}=f;m(this,zi,!1),y(this,Sn,Jh).call(this),o||(o=this._transport.getOptionalContentConfig(p));let A=this._intentStates.get(v);A||(A=Object.create(null),this._intentStates.set(v,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const _=!!(p&an.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(f));const g=C=>{var R;A.renderTasks.delete(w),(this._maybeCleanupAfterRender||_)&&m(this,zi,!0),y(this,Sn,Qa).call(this,!_),C?(w.capability.reject(C),this._abortOperatorList({intentState:A,reason:C instanceof Error?C:new Error(C)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(R=globalThis.Stats)!=null&&R.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new Yg({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:u});(A.renderTasks||(A.renderTasks=new Set)).add(w);const x=w.task;return Promise.all([A.displayReadyCapability.promise,o]).then(([C,R])=>{var L;if(this.destroyed){g();return}if((L=this._stats)==null||L.time("Rendering"),!(R.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:C,optionalContentConfig:R}),w.operatorListChanged()}).catch(g),x}getOperatorList({intent:e="display",annotationMode:t=_s.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,i,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Oc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){a.read().then(function({value:c,done:u}){if(u){i(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),m(this,zi,!1),y(this,Sn,Jh).call(this),Promise.all(e)}cleanup(e=!1){m(this,zi,!0);const t=y(this,Sn,Qa).call(this,!1);return e&&t&&this._stats&&(this._stats=new iv),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&y(this,Sn,Qa).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:a}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},a).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();y(this,Sn,Qa).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof k0){let s=lk;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Ua(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Hs=new WeakMap,zi=new WeakMap,Sn=new WeakSet,Qa=function(e=!1){if(y(this,Sn,Jh).call(this),!l(this,zi)||this.destroyed)return!1;if(e)return m(this,Hs,setTimeout(()=>{m(this,Hs,null),y(this,Sn,Qa).call(this,!1)},ck)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),m(this,zi,!1),!0},Jh=function(){l(this,Hs)&&(clearTimeout(l(this,Hs)),m(this,Hs,null))};var Hi,af;class wk{constructor(){b(this,Hi,new Map);b(this,af,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,af).then(()=>{for(const[s]of l(this,Hi))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){ee("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}l(this,Hi).set(t,s)}removeEventListener(e,t){const i=l(this,Hi).get(t);i==null||i(),l(this,Hi).delete(t)}terminate(){for(const[,e]of l(this,Hi))e==null||e();l(this,Hi).clear()}}Hi=new WeakMap,af=new WeakMap;var of,ta,na,Vo,ed,Go,td;const ke=class ke{constructor({name:e=null,port:t=null,verbosity:i=Q_()}={}){b(this,Vo);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(ke,na))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(ke,na)||m(ke,na,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return St?Promise.all([hr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Zl("main","worker",e),this._messageHandler.on("ready",function(){}),y(this,Vo,ed).call(this)}_initialize(){if(l(ke,ta)||l(ke,Go,td)){this._setupFakeWorker();return}let{workerSrc:e}=ke;try{ke._isSameOrigin(window.location.href,e)||(e=ke._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Zl("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",o=>{if(r.abort(),this.destroyed||!o){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,y(this,Vo,ed).call(this)}),i.on("ready",o=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Rf("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(ke,ta)||(ee("Setting up fake worker."),m(ke,ta,!0)),ke._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new wk;this._port=t;const i=`fake${Et(ke,of)._++}`,s=new Zl(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new Zl(i,i+"_worker",t),y(this,Vo,ed).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(ke,na))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,na))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ke(e)}static get workerSrc(){if(ns.workerSrc)return ns.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return re(this,"_setupFakeWorkerGlobal",(async()=>l(this,Go,td)?l(this,Go,td):(await import(this.workerSrc)).WorkerMessageHandler)())}};of=new WeakMap,ta=new WeakMap,na=new WeakMap,Vo=new WeakSet,ed=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Go=new WeakSet,td=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},b(ke,Go),b(ke,of,0),b(ke,ta,!1),b(ke,na),St&&(m(ke,ta,!0),ns.workerSrc||(ns.workerSrc="./pdf.worker.mjs")),ke._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},ke._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Ao=ke;var Bi,pi,Xo,qo,gi,ia,Jl;class bk{constructor(e,t,i,s,r){b(this,ia);b(this,Bi,new Map);b(this,pi,new Map);b(this,Xo,new Map);b(this,qo,new Map);b(this,gi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new FA,this.fontLoader=new yE({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return re(this,"annotationStorage",new R0)}getRenderingIntent(e,t=_s.ENABLE,i=null,s=!1,r=!1){let a=an.DISPLAY,o=Dg;switch(e){case"any":a=an.ANY;break;case"display":break;case"print":a=an.PRINT;break;default:ee(`getRenderingIntent - invalid intent: ${e}`)}const c=a&an.PRINT&&i instanceof dA?i:this.annotationStorage;switch(t){case _s.DISABLE:a+=an.ANNOTATIONS_DISABLE;break;case _s.ENABLE:break;case _s.ENABLE_FORMS:a+=an.ANNOTATIONS_FORMS;break;case _s.ENABLE_STORAGE:a+=an.ANNOTATIONS_STORAGE,o=c.serializable;break;default:ee(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=an.IS_EDITING),r&&(a+=an.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,gi))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,pi).values())e.push(s._destroy());l(this,pi).clear(),l(this,Xo).clear(),l(this,qo).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Bi).clear(),this.filterFactory.destroy(),Dc.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ua("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{Ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}Ke(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(i,s)=>{Ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){s.close();return}Ke(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new yk(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new pg(i.message,i.code);break;case"InvalidPDFException":s=new jb(i.message);break;case"MissingPDFException":s=new Ba(i.message);break;case"UnexpectedResponseException":s=new Lf(i.message,i.status);break;case"UnknownErrorException":s=new gg(i.message,i.details);break;default:_e("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(m(this,gi,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?l(this,gi).reject(r):l(this,gi).resolve({password:r})};try{t.onPassword(s,i.code)}catch(r){l(this,gi).reject(r)}}else l(this,gi).reject(new pg(i.message,i.code));return l(this,gi).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,pi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;ee(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,v)=>globalThis.FontInspector.fontAdded(p,v):null,d=new vE(r,{disableFontFace:o,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Ke(f,"The imageRef must be defined.");for(const p of l(this,pi).values())for(const[,v]of p.objs)if((v==null?void 0:v.ref)===f)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,a])=>{var c;if(this.destroyed)return;const o=l(this,pi).get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":o.objs.resolve(i,a),(a==null?void 0:a.dataLen)>G_&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ee("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,Xo).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,qo).set(r.refStr,e);const a=new vk(t,r,this,this._params.pdfBug);return l(this,pi).set(t,a),a});return l(this,Xo).set(t,s),s}getPageIndex(e){return yv(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return y(this,ia,Jl).call(this,"GetFieldObjects")}hasJSActions(){return y(this,ia,Jl).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return y(this,ia,Jl).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return y(this,ia,Jl).call(this,"GetOptionalContentConfig").then(t=>new HE(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Bi).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new jE(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,Bi).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,pi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Bi).clear(),this.filterFactory.destroy(!0),Dc.cleanup()}}cachedPageNumber(e){if(!yv(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,qo).get(t)??null}}Bi=new WeakMap,pi=new WeakMap,Xo=new WeakMap,qo=new WeakMap,gi=new WeakMap,ia=new WeakSet,Jl=function(e,t=null){const i=l(this,Bi).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return l(this,Bi).set(e,s),s};const Ph=Symbol("INITIAL_DATA");var Hn,bu,qg;class FA{constructor(){b(this,bu);b(this,Hn,Object.create(null))}get(e,t=null){if(t){const s=y(this,bu,qg).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=l(this,Hn)[e];if(!i||i.data===Ph)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,Hn)[e];return!!t&&t.data!==Ph}resolve(e,t=null){const i=y(this,bu,qg).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,Hn)){const{data:i}=l(this,Hn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}m(this,Hn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Hn)){const{data:t}=l(this,Hn)[e];t!==Ph&&(yield[e,t])}}}Hn=new WeakMap,bu=new WeakSet,qg=function(e){var t;return(t=l(this,Hn))[e]||(t[e]={...Promise.withResolvers(),data:Ph})};var Bs;class Ak{constructor(e){b(this,Bs,null);m(this,Bs,e),this.onContinue=null}get promise(){return l(this,Bs).capability.promise}cancel(e=0){l(this,Bs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Bs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Bs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Bs=new WeakMap;var Us,sa;const kr=class kr{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){b(this,Us,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ak(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(kr,sa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(kr,sa).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:a}=this.params;this.gfx=new bo(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Us)&&(window.cancelAnimationFrame(l(this,Us)),m(this,Us,null)),l(kr,sa).delete(this._canvas),this.callback(e||new k0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?m(this,Us,window.requestAnimationFrame(()=>{m(this,Us,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(kr,sa).delete(this._canvas),this.callback())))}};Us=new WeakMap,sa=new WeakMap,b(kr,sa,new WeakSet);let Yg=kr;const xk="4.8.69",Sk="3634dab10";function vv(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Hl(n){return Math.max(0,Math.min(255,255*n))}class wv{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Hl(e),[e,e,e]}static G_HTML([e]){const t=vv(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Hl)}static RGB_HTML(e){return`#${e.map(vv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[Hl(1-Math.min(1,e+s)),Hl(1-Math.min(1,i+s)),Hl(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,a=1-i,o=Math.min(s,r,a);return["CMYK",s,r,a,o]}}class _k{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_e("Abstract method `_createSVG` called.")}}class F0 extends _k{_createSVG(e){return document.createElementNS(Ci,e)}}class DA{static setupStorage(e,t,i,s,r){const a=s.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}o&&r.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:i});const o=r!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),o&&Oc.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,a]];for(;h.length>0;){const[p,v,A]=h.at(-1);if(v+1===p.children.length){h.pop();continue}const _=p.children[++h.at(-1)[1]];if(_===null)continue;const{name:g}=_;if(g==="#text"){const x=document.createTextNode(_.value);u.push(x),A.append(x);continue}const w=(d=_==null?void 0:_.attributes)!=null&&d.xmlns?document.createElementNS(_.attributes.xmlns,g):document.createElement(g);if(A.append(w),_.attributes&&this.setAttributes({html:w,element:_,storage:t,intent:r,linkService:i}),((f=_.children)==null?void 0:f.length)>0)h.push([_,-1,w]);else if(_.value){const x=document.createTextNode(_.value);o&&Oc.shouldBuildText(g)&&u.push(x),w.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ah=1e3,Ek=9,Da=new WeakSet;function as(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class kk{static create(e){switch(e.data.annotationType){case We.LINK:return new OA(e);case We.TEXT:return new Ck(e);case We.WIDGET:switch(e.data.fieldType){case"Tx":return new Tk(e);case"Btn":return e.data.radioButton?new HA(e):e.data.checkBox?new Rk(e):new Lk(e);case"Ch":return new Mk(e);case"Sig":return new Pk(e)}return new $a(e);case We.POPUP:return new Qg(e);case We.FREETEXT:return new VA(e);case We.LINE:return new Nk(e);case We.SQUARE:return new Fk(e);case We.CIRCLE:return new Dk(e);case We.POLYLINE:return new GA(e);case We.CARET:return new jk(e);case We.INK:return new D0(e);case We.POLYGON:return new Ok(e);case We.HIGHLIGHT:return new XA(e);case We.UNDERLINE:return new zk(e);case We.SQUIGGLY:return new Hk(e);case We.STRIKEOUT:return new Bk(e);case We.STAMP:return new qA(e);case We.FILEATTACHMENT:return new Uk(e);default:return new ze(e)}}}var ra,Yo,Ko,Au,Kg;const z0=class z0{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){b(this,Au);b(this,ra,null);b(this,Yo,!1);b(this,Ko,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return z0._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,ra)||m(this,ra,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&y(this,Au,Kg).call(this,t),(i=l(this,Ko))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,ra)&&(y(this,Au,Kg).call(this,l(this,ra).rect),(e=l(this,Ko))==null||e.popup.resetEdited(),m(this,ra,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof $a||(r.tabIndex=ah);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Qg){const{rotation:A}=t;return!t.hasOwnCanvas&&A!==0&&this.setRotation(A,r),r}const{width:o,height:c}=as(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const A=t.borderStyle.horizontalCornerRadius,_=t.borderStyle.verticalCornerRadius;if(A>0||_>0){const w=`calc(${A}px * var(--scale-factor)) / calc(${_}px * var(--scale-factor))`;a.borderRadius=w}else if(this instanceof HA){const w=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=w}switch(t.borderStyle.style){case jl.SOLID:a.borderStyle="solid";break;case jl.DASHED:a.borderStyle="dashed";break;case jl.BEVELED:ee("Unimplemented border style: beveled");break;case jl.INSET:ee("Unimplemented border style: inset");break;case jl.UNDERLINE:a.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(m(this,Yo,!0),a.borderColor=$.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const u=$.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;a.left=`${100*(u[0]-f)/h}%`,a.top=`${100*(u[1]-p)/d}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(a.width=`${100*o/h}%`,a.height=`${100*c/d}%`):this.setRotation(v,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=as(this.data.rect);let o,c;e%180===0?(o=100*r/i,c=100*a/s):(o=100*a/i,c=100*r/s),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],a=r[0],o=r.slice(1);s.target.style[i]=wv[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:wv[`${a}_rgb`](o)})};return re(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const a=i[s];if(a){const o={detail:{[s]:r},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(A=>Math.fround(A));if(e.length===8){const[A,_,g,w]=e.subarray(2,6);if(s===A&&r===_&&t===g&&i===w)return}const{style:a}=this.container;let o;if(l(this,Yo)){const{borderColor:A,borderWidth:_}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const c=s-t,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let A=2,_=e.length;A<_;A+=8){const g=e[A],w=e[A+1],x=e[A+2],S=e[A+3],k=h.createElement("rect"),C=(x-t)/c,R=(r-w)/u,L=(g-x)/c,D=(w-S)/u;k.setAttribute("x",C),k.setAttribute("y",R),k.setAttribute("width",L),k.setAttribute("height",D),p.append(k),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${R}" width="${L}" height="${D}"/>`)}l(this,Yo)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:e}=this,t=m(this,Ko,new Qg({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){_e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:a,exportValues:o}of s){if(r===-1||a===t)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Da.has(u)){ee(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==t&&Da.has(s)&&i.push({id:a,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ra=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Au=new WeakSet,Kg=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:h}=as(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*u/r}%`,t.height=`${100*h/a}%`):this.setRotation(s)};let ze=z0;var ln,Ar,jA,zA;class OA extends ze{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});b(this,ln);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(y(this,ln,jA).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(y(this,ln,zA).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&y(this,ln,Ar).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),y(this,ln,Ar).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const a=s.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),y(this,ln,Ar).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),y(this,ln,Ar).call(this),!this._fieldObjects){ee('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:r,refs:a,include:o}=i,c=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const v=this._fieldObjects[p]||[];for(const{id:A}of v)f.add(A)}for(const p of Object.values(this._fieldObjects))for(const v of p)f.has(v.id)===o&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const A=f.defaultValue||"";u.setValue(p,{value:A});break}case"checkbox":case"radiobutton":{const A=f.defaultValue===f.exportValues;u.setValue(p,{value:A});break}case"combobox":case"listbox":{const A=f.defaultValue||"";u.setValue(p,{value:A});break}default:continue}const v=document.querySelector(`[data-element-id="${p}"]`);if(v){if(!Da.has(v)){ee(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}ln=new WeakSet,Ar=function(){this.container.setAttribute("data-internal-link","")},jA=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},y(this,ln,Ar).call(this)},zA=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),y(this,ln,Ar).call(this)};class Ck extends ze{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class $a extends ze{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Lt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{var o;if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(e,t,i,s){var r,a,o;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":$.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Ek,r=e.style;let a;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(fp*s))||1,d=u/h;a=Math.min(s,c(d/fp))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,c(u/fp))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=$.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Tk extends $a{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Da.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=ah,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var A;if(h.focused)return;const{target:v}=p;h.userValue&&(v.value=h.userValue),h.lastCommittedValue=v.value,h.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const v={value(A){h.userValue=A.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:_}=A.detail;h.formattedValue=_,_!=null&&A.target!==document.activeElement&&(A.target.value=_),e.setValue(t,{formattedValue:_})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var x;const{charLimit:_}=A.detail,{target:g}=A;if(_===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",_);let w=h.userValue;!w||w.length<=_||(w=w.slice(0,_),g.value=h.userValue=w,e.setValue(t,{value:w}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(v,p)}),i.addEventListener("keydown",p=>{var _;h.commitKey=1;let v=-1;if(p.key==="Escape"?v=0:p.key==="Enter"&&!this.data.multiLine?v=2:p.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:A}=p.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:v,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var A,_;if(!h.focused||!p.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(h.focused=!1);const{value:v}=p.target;h.userValue=v,h.lastCommittedValue!==v&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",p=>{var k;h.lastCommittedValue=null;const{data:v,target:A}=p,{value:_,selectionStart:g,selectionEnd:w}=A;let x=g,S=w;switch(p.inputType){case"deleteWordBackward":{const C=_.substring(0,g).match(/\w*[^\w]*$/);C&&(x-=C[0].length);break}case"deleteWordForward":{const C=_.substring(g).match(/^[^\w]*\w*/);C&&(S+=C[0].length);break}case"deleteContentBackward":g===w&&(x-=1);break;case"deleteContentForward":g===w&&(S+=1);break}p.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:v||"",willCommit:!1,selStart:x,selEnd:S}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Pk extends $a{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Rk extends $a{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Da.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=ah,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,i)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class HA extends $a{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(Da.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=ah,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Lk extends OA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class Mk extends $a{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Da.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=ah;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),a=()=>{h.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(const A of s.options)A.selected=v.has(A.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,v=f.detail.remove;p[v].selected=!1,s.remove(v),p.length>0&&Array.prototype.findIndex.call(p,_=>_.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:p,displayValue:v,exportValue:A}=f.detail.insert,_=s.children[p],g=document.createElement("option");g.textContent=v,g.value=A,_?_.before(g):s.append(g),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const v of p){const{displayValue:A,exportValue:_}=v,g=document.createElement("option");g.textContent=A,g.value=_,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const v of f.target.options)v.selected=p.has(v.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=o(!0),f=o(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Qg extends ze{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:ze._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Ik({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${E0}${i}`).join(",")),this.container}}var Qo,lf,cf,Zo,aa,Fe,Ui,Jo,xu,Su,el,$i,Bn,Wi,_u,Vi,Eu,oa,la,we,nd,Zg,BA,UA,$A,WA,id,sd,Jg;class Ik{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:u,parentRect:h,open:d}){b(this,we);b(this,Qo,y(this,we,$A).bind(this));b(this,lf,y(this,we,Jg).bind(this));b(this,cf,y(this,we,sd).bind(this));b(this,Zo,y(this,we,id).bind(this));b(this,aa,null);b(this,Fe,null);b(this,Ui,null);b(this,Jo,null);b(this,xu,null);b(this,Su,null);b(this,el,null);b(this,$i,!1);b(this,Bn,null);b(this,Wi,null);b(this,_u,null);b(this,Vi,null);b(this,Eu,null);b(this,oa,null);b(this,la,!1);var f;m(this,Fe,e),m(this,Eu,s),m(this,Ui,a),m(this,Vi,o),m(this,Su,c),m(this,aa,t),m(this,_u,u),m(this,el,h),m(this,xu,i),m(this,Jo,T0.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,Zo)),p.addEventListener("mouseenter",l(this,cf)),p.addEventListener("mouseleave",l(this,lf)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",l(this,Qo));l(this,Fe).hidden=!0,d&&y(this,we,id).call(this)}render(){if(l(this,Bn))return;const e=m(this,Bn,document.createElement("div"));if(e.className="popup",l(this,aa)){const r=e.style.outlineColor=$.makeHexColor(...l(this,aa));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=$.makeHexColor(...l(this,aa).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,Eu),e.append(t),l(this,Jo)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Jo).valueOf()})),t.append(r)}const s=l(this,we,nd);if(s)DA.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,Ui));e.append(r)}l(this,Fe).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const o=s[r];i.append(document.createTextNode(o)),r<a-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,oa)||m(this,oa,{contentsObj:l(this,Ui),richText:l(this,Vi)}),e&&m(this,Wi,null),t&&(m(this,Vi,y(this,we,UA).call(this,t)),m(this,Ui,null)),(i=l(this,Bn))==null||i.remove(),m(this,Bn,null)}resetEdited(){var e;l(this,oa)&&({contentsObj:Et(this,Ui)._,richText:Et(this,Vi)._}=l(this,oa),m(this,oa,null),(e=l(this,Bn))==null||e.remove(),m(this,Bn,null),m(this,Wi,null))}forceHide(){m(this,la,this.isVisible),l(this,la)&&(l(this,Fe).hidden=!0)}maybeShow(){l(this,la)&&(l(this,Bn)||y(this,we,sd).call(this),m(this,la,!1),l(this,Fe).hidden=!1)}get isVisible(){return l(this,Fe).hidden===!1}}Qo=new WeakMap,lf=new WeakMap,cf=new WeakMap,Zo=new WeakMap,aa=new WeakMap,Fe=new WeakMap,Ui=new WeakMap,Jo=new WeakMap,xu=new WeakMap,Su=new WeakMap,el=new WeakMap,$i=new WeakMap,Bn=new WeakMap,Wi=new WeakMap,_u=new WeakMap,Vi=new WeakMap,Eu=new WeakMap,oa=new WeakMap,la=new WeakMap,we=new WeakSet,nd=function(){const e=l(this,Vi),t=l(this,Ui);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Vi).html||null},Zg=function(){var e,t,i;return((i=(t=(e=l(this,we,nd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},BA=function(){var e,t,i;return((i=(t=(e=l(this,we,nd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},UA=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,we,BA),fontSize:l(this,we,Zg)?`calc(${l(this,we,Zg)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},$A=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,$i))&&y(this,we,id).call(this)},WA=function(){if(l(this,Wi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=l(this,Su);let a=!!l(this,el),o=a?l(this,el):l(this,_u);for(const v of l(this,xu))if(!o||$.intersect(v.data.rect,o)!==null){o=v.data.rect,a=!0;break}const c=$.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,d=c[0]+h,f=c[1];m(this,Wi,[100*(d-s)/t,100*(f-r)/i]);const{style:p}=l(this,Fe);p.left=`${l(this,Wi)[0]}%`,p.top=`${l(this,Wi)[1]}%`},id=function(){m(this,$i,!l(this,$i)),l(this,$i)?(y(this,we,sd).call(this),l(this,Fe).addEventListener("click",l(this,Zo)),l(this,Fe).addEventListener("keydown",l(this,Qo))):(y(this,we,Jg).call(this),l(this,Fe).removeEventListener("click",l(this,Zo)),l(this,Fe).removeEventListener("keydown",l(this,Qo)))},sd=function(){l(this,Bn)||this.render(),this.isVisible?l(this,$i)&&l(this,Fe).classList.add("focused"):(y(this,we,WA).call(this),l(this,Fe).hidden=!1,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)+1e3)},Jg=function(){l(this,Fe).classList.remove("focused"),!(l(this,$i)||!this.isVisible)&&(l(this,Fe).hidden=!0,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)-1e3)};class VA extends ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=K.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ku;class Nk extends ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,ku,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=as(t.rect),r=this.svgFactory.create(i,s,!0),a=m(this,ku,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ku)}addHighlightArea(){this.container.classList.add("highlightArea")}}ku=new WeakMap;var Cu;class Fk extends ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Cu,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=as(t.rect),r=this.svgFactory.create(i,s,!0),a=t.borderStyle.width,o=m(this,Cu,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Cu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cu=new WeakMap;var Tu;class Dk extends ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Tu,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=as(t.rect),r=this.svgFactory.create(i,s,!0),a=t.borderStyle.width,o=m(this,Tu,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",s/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Tu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tu=new WeakMap;var Pu;class GA extends ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Pu,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:a,height:o}=as(t),c=this.svgFactory.create(a,o,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-t[0],v=t[3]-i[d+1];u.push(`${p},${v}`)}u=u.join(" ");const h=m(this,Pu,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Pu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pu=new WeakMap;class Ok extends GA{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class jk extends ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ru;class D0 extends ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Ru,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?K.HIGHLIGHT:K.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:s,popupRef:r}}=this,{width:a,height:o}=as(t),c=this.svgFactory.create(a,o,!0);for(const u of i){let h=[];for(let f=0,p=u.length;f<p;f+=2){const v=u[f]-t[0],A=t[3]-u[f+1];h.push(`${v},${A}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,Ru).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,Ru)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ru=new WeakMap;class XA extends ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=K.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class zk extends ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Hk extends ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Bk extends ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class qA extends ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=K.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Lu,Mu,em;class Uk extends ze{constructor(t){var s;super(t,{isRenderable:!0});b(this,Mu);b(this,Lu,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",y(this,Mu,em).bind(this)),m(this,Lu,s);const{isMac:r}=Lt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&y(this,Mu,em).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Lu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lu=new WeakMap,Mu=new WeakSet,em=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Iu,ca,ua,Nu,Oa,YA,tm;class $k{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:o}){b(this,Oa);b(this,Iu,null);b(this,ca,null);b(this,ua,new Map);b(this,Nu,null);this.div=e,m(this,Iu,t),m(this,ca,i),m(this,Nu,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return l(this,ua).size>0}async render(e){var a;const{annotations:t}=e,i=this.div;Na(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new F0,annotationStorage:e.annotationStorage||new R0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===We.POPUP;if(c){const d=s.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=as(o.rect);if(d<=0||f<=0)continue}r.data=o;const u=kk.create(r);if(!u.isRenderable)continue;if(!c&&o.popupRef){const d=s.get(o.popupRef);d?d.push(u):s.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await y(this,Oa,YA).call(this,h,o.id),u._isEditable&&(l(this,ua).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}y(this,Oa,tm).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Na(t,{rotation:e.rotation}),y(this,Oa,tm).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ua).values())}getEditableAnnotation(e){return l(this,ua).get(e)}}Iu=new WeakMap,ca=new WeakMap,ua=new WeakMap,Nu=new WeakMap,Oa=new WeakSet,YA=async function(e,t){var a,o;const i=e.firstChild||e,s=i.id=`${E0}${t}`,r=await((a=l(this,Nu))==null?void 0:a.getAriaAttributes(s));if(r)for(const[c,u]of r)i.setAttribute(c,u);this.div.append(e),(o=l(this,Iu))==null||o.moveElementInDOM(this.div,e,i,!1)},tm=function(){if(!l(this,ca))return;const e=this.div;for(const[t,i]of l(this,ca)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}l(this,ca).clear()};const Rh=/\r\n?|\n/g;var Un,Jt,Fu,ha,en,$e,KA,QA,ZA,rd,ls,ad,od,JA,im,ex;const Ae=class Ae extends me{constructor(t){super({...t,name:"freeTextEditor"});b(this,$e);b(this,Un);b(this,Jt,"");b(this,Fu,`${this.id}-editor`);b(this,ha,null);b(this,en);m(this,Un,t.color||Ae._defaultColor||me._defaultLineColor),m(this,en,t.fontSize||Ae._defaultFontSize)}static get _keyboardManager(){const t=Ae.prototype,i=a=>a.isEmpty(),s=Fa.TRANSLATE_SMALL,r=Fa.TRANSLATE_BIG;return re(this,"_keyboardManager",new rh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){me.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case X.FREETEXT_SIZE:Ae._defaultFontSize=i;break;case X.FREETEXT_COLOR:Ae._defaultColor=i;break}}updateParams(t,i){switch(t){case X.FREETEXT_SIZE:y(this,$e,KA).call(this,i);break;case X.FREETEXT_COLOR:y(this,$e,QA).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[X.FREETEXT_SIZE,Ae._defaultFontSize],[X.FREETEXT_COLOR,Ae._defaultColor||me._defaultLineColor]]}get propertiesToUpdate(){return[[X.FREETEXT_SIZE,l(this,en)],[X.FREETEXT_COLOR,l(this,Un)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ae._internalPadding*t,-(Ae._internalPadding+l(this,en))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(K.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),m(this,ha,new AbortController);const t=this._uiManager.combinedSignal(l(this,ha));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Fu)),this._isDraggable=!0,(t=l(this,ha))==null||t.abort(),m(this,ha,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,Jt),i=m(this,Jt,y(this,$e,ZA).call(this).trimEnd());if(t===i)return;const s=r=>{if(m(this,Jt,r),!r){this.remove();return}y(this,$e,od).call(this),this._uiManager.rebuild(this),y(this,$e,rd).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),y(this,$e,rd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ae._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Fu)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,en)}px * var(--scale-factor))`,s.color=l(this,Un),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),$d(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let v,A;switch(this.rotation){case 0:v=t+(o[0]-f)/h,A=i+this.height-(o[1]-p)/d;break;case 90:v=t+(o[0]-f)/h,A=i-(o[1]-p)/d,[c,u]=[u,-c];break;case 180:v=t-this.width+(o[0]-f)/h,A=i-(o[1]-p)/d,[c,u]=[-c,-u];break;case 270:v=t+(o[0]-f-this.height*d)/h,A=i+(o[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(v*r,A*a,c,u)}else this.setAt(t*r,i*a,this.width*r,this.height*a);y(this,$e,od).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,A,_;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=y(v=Ae,ls,im).call(v,i.getData("text")||"").replaceAll(Rh,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Rh,"")),g!==this.editorDiv){let w=h;for(const x of this.editorDiv.childNodes){if(x===g){w=d;continue}w.push(y(A=Ae,ls,ad).call(A,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(Rh,""))}else if(c===this.editorDiv){let g=h,w=0;for(const x of this.editorDiv.childNodes)w++===u&&(g=d),g.push(y(_=Ae,ls,ad).call(_,x))}m(this,Jt,`${h.join(`
`)}${r}${d.join(`
`)}`),y(this,$e,od).call(this);const f=new Range;let p=h.reduce((g,w)=>g+w.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const w=g.nodeValue.length;if(p<=w){f.setStart(g,p),f.setEnd(g,p);break}p-=w}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){var o;let r=null;if(t instanceof VA){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:v,textPosition:A,parent:{page:{pageNumber:_}}}=t;if(!v||v.length===0)return null;r=t={annotationType:K.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:A,pageIndex:_-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(t,i,s);return m(a,en,t.fontSize),m(a,Un,$.makeHexColor(...t.color)),m(a,Jt,y(o=Ae,ls,im).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ae._internalPadding*this.parentScale,s=this.getRect(i,i),r=me._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Un)),a={annotationType:K.FREETEXT,color:r,fontSize:l(this,en),value:y(this,$e,JA).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!y(this,$e,ex).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${l(this,en)}px * var(--scale-factor))`,s.color=l(this,Un),i.replaceChildren();for(const a of l(this,Jt).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}const r=Ae._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,Jt)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Un=new WeakMap,Jt=new WeakMap,Fu=new WeakMap,ha=new WeakMap,en=new WeakMap,$e=new WeakSet,KA=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,en))*this.parentScale),m(this,en,r),y(this,$e,rd).call(this)},s=l(this,en);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},QA=function(t){const i=r=>{m(this,Un,this.editorDiv.style.color=r)},s=l(this,Un);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ZA=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(y(s=Ae,ls,ad).call(s,r)),i=r);return t.join(`
`)},rd=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},ls=new WeakSet,ad=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Rh,"")},od=function(){if(this.editorDiv.replaceChildren(),!!l(this,Jt))for(const t of l(this,Jt).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},JA=function(){return l(this,Jt).replaceAll(""," ")},im=function(t){return t.replaceAll(" ","")},ex=function(t){const{value:i,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((o,c)=>o!==r[c])||t.pageIndex!==a},b(Ae,ls),G(Ae,"_freeTextDefaultContent",""),G(Ae,"_internalPadding",0),G(Ae,"_defaultColor",null),G(Ae,"_defaultFontSize",10),G(Ae,"_type","freetext"),G(Ae,"_editorType",K.FREETEXT);let nm=Ae;class tx{toSVGPath(){_e("Abstract method `toSVGPath` must be implemented.")}get box(){_e("Abstract getter `box` must be implemented.")}serialize(e,t){_e("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){_e("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){_e("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var tn,$n,tl,nl,mi,te,da,fa,Du,Ou,il,sl,$s,ju,uf,hf,Ze,ec,nx,ix,sx,rx,ax,ox;const Ri=class Ri{constructor({x:e,y:t},i,s,r,a,o=0){b(this,Ze);b(this,tn);b(this,$n,[]);b(this,tl);b(this,nl);b(this,mi,[]);b(this,te,new Float64Array(18));b(this,da);b(this,fa);b(this,Du);b(this,Ou);b(this,il);b(this,sl);b(this,$s,[]);m(this,tn,i),m(this,sl,r*s),m(this,nl,a),l(this,te).set([NaN,NaN,NaN,NaN,e,t],6),m(this,tl,o),m(this,Ou,l(Ri,ju)*s),m(this,Du,l(Ri,hf)*s),m(this,il,s),l(this,$s).push(e,t)}isEmpty(){return isNaN(l(this,te)[8])}add({x:e,y:t}){var D;m(this,da,e),m(this,fa,t);const[i,s,r,a]=l(this,tn);let[o,c,u,h]=l(this,te).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<l(this,Du))return!1;const v=p-l(this,Ou),A=v/p,_=A*d,g=A*f;let w=o,x=c;o=u,c=h,u+=_,h+=g,(D=l(this,$s))==null||D.push(e,t);const S=-g/v,k=_/v,C=S*l(this,sl),R=k*l(this,sl);return l(this,te).set(l(this,te).subarray(2,8),0),l(this,te).set([u+C,h+R],4),l(this,te).set(l(this,te).subarray(14,18),12),l(this,te).set([u-C,h-R],16),isNaN(l(this,te)[6])?(l(this,mi).length===0&&(l(this,te).set([o+C,c+R],2),l(this,mi).push(NaN,NaN,NaN,NaN,(o+C-i)/r,(c+R-s)/a),l(this,te).set([o-C,c-R],14),l(this,$n).push(NaN,NaN,NaN,NaN,(o-C-i)/r,(c-R-s)/a)),l(this,te).set([w,x,o,c,u,h],6),!this.isEmpty()):(l(this,te).set([w,x,o,c,u,h],6),Math.abs(Math.atan2(x-c,w-o)-Math.atan2(g,_))<Math.PI/2?([o,c,u,h]=l(this,te).subarray(2,6),l(this,mi).push(NaN,NaN,NaN,NaN,((o+u)/2-i)/r,((c+h)/2-s)/a),[o,c,w,x]=l(this,te).subarray(14,18),l(this,$n).push(NaN,NaN,NaN,NaN,((w+o)/2-i)/r,((x+c)/2-s)/a),!0):([w,x,o,c,u,h]=l(this,te).subarray(0,6),l(this,mi).push(((w+5*o)/6-i)/r,((x+5*c)/6-s)/a,((5*o+u)/6-i)/r,((5*c+h)/6-s)/a,((o+u)/2-i)/r,((c+h)/2-s)/a),[u,h,o,c,w,x]=l(this,te).subarray(12,18),l(this,$n).push(((w+5*o)/6-i)/r,((x+5*c)/6-s)/a,((5*o+u)/6-i)/r,((5*c+h)/6-s)/a,((o+u)/2-i)/r,((c+h)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,mi),t=l(this,$n);if(isNaN(l(this,te)[6])&&!this.isEmpty())return y(this,Ze,nx).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);y(this,Ze,sx).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return y(this,Ze,ix).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,r,a){return new lx(e,t,i,s,r,a)}getOutlines(){var d;const e=l(this,mi),t=l(this,$n),i=l(this,te),[s,r,a,o]=l(this,tn),c=new Float64Array((((d=l(this,$s))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,$s)[f]-s)/a,c[f+1]=(l(this,$s)[f+1]-r)/o;if(c[c.length-2]=(l(this,da)-s)/a,c[c.length-1]=(l(this,fa)-r)/o,isNaN(i[6])&&!this.isEmpty())return y(this,Ze,rx).call(this,c);const u=new Float64Array(l(this,mi).length+24+l(this,$n).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=y(this,Ze,ox).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return y(this,Ze,ax).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,tn),l(this,il),l(this,tl),l(this,nl))}};tn=new WeakMap,$n=new WeakMap,tl=new WeakMap,nl=new WeakMap,mi=new WeakMap,te=new WeakMap,da=new WeakMap,fa=new WeakMap,Du=new WeakMap,Ou=new WeakMap,il=new WeakMap,sl=new WeakMap,$s=new WeakMap,ju=new WeakMap,uf=new WeakMap,hf=new WeakMap,Ze=new WeakSet,ec=function(){const e=l(this,te).subarray(4,6),t=l(this,te).subarray(16,18),[i,s,r,a]=l(this,tn);return[(l(this,da)+(e[0]-t[0])/2-i)/r,(l(this,fa)+(e[1]-t[1])/2-s)/a,(l(this,da)+(t[0]-e[0])/2-i)/r,(l(this,fa)+(t[1]-e[1])/2-s)/a]},nx=function(){const[e,t,i,s]=l(this,tn),[r,a,o,c]=y(this,Ze,ec).call(this);return`M${(l(this,te)[2]-e)/i} ${(l(this,te)[3]-t)/s} L${(l(this,te)[4]-e)/i} ${(l(this,te)[5]-t)/s} L${r} ${a} L${o} ${c} L${(l(this,te)[16]-e)/i} ${(l(this,te)[17]-t)/s} L${(l(this,te)[14]-e)/i} ${(l(this,te)[15]-t)/s} Z`},ix=function(e){const t=l(this,$n);e.push(`L${t[4]} ${t[5]} Z`)},sx=function(e){const[t,i,s,r]=l(this,tn),a=l(this,te).subarray(4,6),o=l(this,te).subarray(16,18),[c,u,h,d]=y(this,Ze,ec).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-i)/r} L${c} ${u} L${h} ${d} L${(o[0]-t)/s} ${(o[1]-i)/r}`)},rx=function(e){const t=l(this,te),[i,s,r,a]=l(this,tn),[o,c,u,h]=y(this,Ze,ec).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/a],0),this.newFreeDrawOutline(d,e,l(this,tn),l(this,il),l(this,tl),l(this,nl))},ax=function(e,t){const i=l(this,$n);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},ox=function(e,t){const i=l(this,te).subarray(4,6),s=l(this,te).subarray(16,18),[r,a,o,c]=l(this,tn),[u,h,d,f]=y(this,Ze,ec).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/c],t),t+=24},b(Ri,ju,8),b(Ri,uf,2),b(Ri,hf,l(Ri,ju)+l(Ri,uf));let Vd=Ri;var rl,pa,Gi,zu,nn,Hu,Oe,Vt,tc,nc,cx;class lx extends tx{constructor(t,i,s,r,a,o){super();b(this,Vt);b(this,rl);b(this,pa,null);b(this,Gi);b(this,zu);b(this,nn);b(this,Hu);b(this,Oe);m(this,Oe,t),m(this,nn,i),m(this,rl,s),m(this,Hu,r),m(this,Gi,a),m(this,zu,o),y(this,Vt,cx).call(this,o);const{x:c,y:u,width:h,height:d}=l(this,pa);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,Oe)[4]} ${l(this,Oe)[5]}`];for(let i=6,s=l(this,Oe).length;i<s;i+=6){if(isNaN(l(this,Oe)[i])){t.push(`L${l(this,Oe)[i+4]} ${l(this,Oe)[i+5]}`);continue}t.push(`C${l(this,Oe)[i]} ${l(this,Oe)[i+1]} ${l(this,Oe)[i+2]} ${l(this,Oe)[i+3]} ${l(this,Oe)[i+4]} ${l(this,Oe)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],a){const o=s-t,c=r-i;let u,h;switch(a){case 0:u=y(this,Vt,tc).call(this,l(this,Oe),t,r,o,-c),h=y(this,Vt,tc).call(this,l(this,nn),t,r,o,-c);break;case 90:u=y(this,Vt,nc).call(this,l(this,Oe),t,i,o,c),h=y(this,Vt,nc).call(this,l(this,nn),t,i,o,c);break;case 180:u=y(this,Vt,tc).call(this,l(this,Oe),s,i,-o,c),h=y(this,Vt,tc).call(this,l(this,nn),s,i,-o,c);break;case 270:u=y(this,Vt,nc).call(this,l(this,Oe),s,r,-o,-c),h=y(this,Vt,nc).call(this,l(this,nn),s,r,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,pa)}newOutliner(t,i,s,r,a,o=0){return new Vd(t,i,s,r,a,o)}getNewOutline(t,i){const{x:s,y:r,width:a,height:o}=l(this,pa),[c,u,h,d]=l(this,rl),f=a*h,p=o*d,v=s*h+c,A=r*d+u,_=this.newOutliner({x:l(this,nn)[0]*f+v,y:l(this,nn)[1]*p+A},l(this,rl),l(this,Hu),t,l(this,zu),i??l(this,Gi));for(let g=2;g<l(this,nn).length;g+=2)_.add({x:l(this,nn)[g]*f+v,y:l(this,nn)[g+1]*p+A});return _.getOutlines()}get mustRemoveSelfIntersections(){return!0}}rl=new WeakMap,pa=new WeakMap,Gi=new WeakMap,zu=new WeakMap,nn=new WeakMap,Hu=new WeakMap,Oe=new WeakMap,Vt=new WeakSet,tc=function(t,i,s,r,a){const o=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)o[c]=i+t[c]*r,o[c+1]=s+t[c+1]*a;return o},nc=function(t,i,s,r,a){const o=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)o[c]=i+t[c+1]*r,o[c+1]=s+t[c]*a;return o},cx=function(t){const i=l(this,Oe);let s=i[4],r=i[5],a=s,o=r,c=s,u=r,h=s,d=r;const f=t?Math.max:Math.min;for(let g=6,w=i.length;g<w;g+=6){if(isNaN(i[g]))a=Math.min(a,i[g+4]),o=Math.min(o,i[g+5]),c=Math.max(c,i[g+4]),u=Math.max(u,i[g+5]),d<i[g+5]?(h=i[g+4],d=i[g+5]):d===i[g+5]&&(h=f(h,i[g+4]));else{const x=$.bezierBoundingBox(s,r,...i.slice(g,g+6));a=Math.min(a,x[0]),o=Math.min(o,x[1]),c=Math.max(c,x[2]),u=Math.max(u,x[3]),d<x[3]?(h=x[2],d=x[3]):d===x[3]&&(h=f(h,x[2]))}s=i[g+4],r=i[g+5]}const p=a-l(this,Gi),v=o-l(this,Gi),A=c-a+2*l(this,Gi),_=u-o+2*l(this,Gi);m(this,pa,{x:p,y:v,width:A,height:_,lastPoint:[h,d]})};var Bu,Ws,Wn,It,ux,ld,hx,dx,sm;class bv{constructor(e,t=0,i=0,s=!0){b(this,It);b(this,Bu);b(this,Ws,[]);b(this,Wn,[]);let r=1/0,a=-1/0,o=1/0,c=-1/0;const u=10**-4;for(const{x:_,y:g,width:w,height:x}of e){const S=Math.floor((_-t)/u)*u,k=Math.ceil((_+w+t)/u)*u,C=Math.floor((g-t)/u)*u,R=Math.ceil((g+x+t)/u)*u,L=[S,C,R,!0],D=[k,C,R,!1];l(this,Ws).push(L,D),r=Math.min(r,S),a=Math.max(a,k),o=Math.min(o,C),c=Math.max(c,R)}const h=a-r+2*i,d=c-o+2*i,f=r-i,p=o-i,v=l(this,Ws).at(s?-1:-2),A=[v[0],v[2]];for(const _ of l(this,Ws)){const[g,w,x]=_;_[0]=(g-f)/h,_[1]=(w-p)/d,_[2]=(x-p)/d}m(this,Bu,{x:f,y:p,width:h,height:d,lastPoint:A})}getOutlines(){l(this,Ws).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,Ws))t[3]?(e.push(...y(this,It,sm).call(this,t)),y(this,It,hx).call(this,t)):(y(this,It,dx).call(this,t),e.push(...y(this,It,sm).call(this,t)));return y(this,It,ux).call(this,e)}}Bu=new WeakMap,Ws=new WeakMap,Wn=new WeakMap,It=new WeakSet,ux=function(e){const t=[],i=new Set;for(const a of e){const[o,c,u]=a;t.push([o,c,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],u=t[a+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const a=i.values().next().value;let[o,c,u,h,d]=a;i.delete(a);let f=o,p=c;for(r=[o,u],s.push(r);;){let v;if(i.has(h))v=h;else if(i.has(d))v=d;else break;i.delete(v),[o,c,u,h,d]=v,f!==o&&(r.push(f,p,o,p===c?c:u),f=o),p=p===c?u:c}r.push(f,p)}return new Wk(s,l(this,Bu))},ld=function(e){const t=l(this,Wn);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,a=t[r][0];if(a===e)return r;a<e?i=r+1:s=r-1}return s+1},hx=function([,e,t]){const i=y(this,It,ld).call(this,e);l(this,Wn).splice(i,0,[e,t])},dx=function([,e,t]){const i=y(this,It,ld).call(this,e);for(let s=i;s<l(this,Wn).length;s++){const[r,a]=l(this,Wn)[s];if(r!==e)break;if(r===e&&a===t){l(this,Wn).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,a]=l(this,Wn)[s];if(r!==e)break;if(r===e&&a===t){l(this,Wn).splice(s,1);return}}},sm=function(e){const[t,i,s]=e,r=[[t,i,s]],a=y(this,It,ld).call(this,s);for(let o=0;o<a;o++){const[c,u]=l(this,Wn)[o];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([t,u,p])}}}return r};var Uu,al;class Wk extends tx{constructor(t,i){super();b(this,Uu);b(this,al);m(this,al,t),m(this,Uu,i)}toSVGPath(){const t=[];for(const i of l(this,al)){let[s,r]=i;t.push(`M${s} ${r}`);for(let a=2;a<i.length;a+=2){const o=i[a],c=i[a+1];o===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],a){const o=[],c=s-t,u=r-i;for(const h of l(this,al)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;o.push(d)}return o}get box(){return l(this,Uu)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Uu=new WeakMap,al=new WeakMap;class rm extends Vd{newFreeDrawOutline(e,t,i,s,r,a){return new Vk(e,t,i,s,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class Vk extends lx{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,s,r,a=0){return new rm(e,t,i,s,r,a)}}var Vn,ga,ol,Xe,$u,ll,Wu,Vu,Vs,Gn,cl,Gu,ve,am,om,lm,xr,fx,ws;const jt=class jt{constructor({editor:e=null,uiManager:t=null}){b(this,ve);b(this,Vn,null);b(this,ga,null);b(this,ol);b(this,Xe,null);b(this,$u,!1);b(this,ll,!1);b(this,Wu,null);b(this,Vu);b(this,Vs,null);b(this,Gn,null);b(this,cl);var i;e?(m(this,ll,!1),m(this,cl,X.HIGHLIGHT_COLOR),m(this,Wu,e)):(m(this,ll,!0),m(this,cl,X.HIGHLIGHT_DEFAULT_COLOR)),m(this,Gn,(e==null?void 0:e._uiManager)||t),m(this,Vu,l(this,Gn)._eventBus),m(this,ol,(e==null?void 0:e.color)||((i=l(this,Gn))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(jt,Gu)||m(jt,Gu,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return re(this,"_keyboardManager",new rh([[["Escape","mac+Escape"],jt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],jt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],jt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],jt.prototype._moveToPrevious],[["Home","mac+Home"],jt.prototype._moveToBeginning],[["End","mac+End"],jt.prototype._moveToEnd]]))}renderButton(){const e=m(this,Vn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Gn)._signal;e.addEventListener("click",y(this,ve,xr).bind(this),{signal:t}),e.addEventListener("keydown",y(this,ve,lm).bind(this),{signal:t});const i=m(this,ga,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,ol),e.append(i),e}renderMainDropdown(){const e=m(this,Xe,y(this,ve,am).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Vn)){y(this,ve,xr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&y(this,ve,om).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,ve,ws)){y(this,ve,xr).call(this,e);return}if(e.target===l(this,Vn)){(t=l(this,Xe).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,Xe))==null?void 0:t.firstChild)||e.target===l(this,Vn)){l(this,ve,ws)&&this._hideDropdownFromKeyboard();return}l(this,ve,ws)||y(this,ve,xr).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,ve,ws)){y(this,ve,xr).call(this,e);return}(t=l(this,Xe).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ve,ws)){y(this,ve,xr).call(this,e);return}(t=l(this,Xe).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Xe))==null||e.classList.add("hidden"),(t=l(this,Vs))==null||t.abort(),m(this,Vs,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,ll)){if(!l(this,ve,ws)){(e=l(this,Wu))==null||e.unselect();return}this.hideDropdown(),l(this,Vn).focus({preventScroll:!0,focusVisible:l(this,$u)})}}updateColor(e){if(l(this,ga)&&(l(this,ga).style.backgroundColor=e),!l(this,Xe))return;const t=l(this,Gn).highlightColors.values();for(const i of l(this,Xe).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Vn))==null||e.remove(),m(this,Vn,null),m(this,ga,null),(t=l(this,Xe))==null||t.remove(),m(this,Xe,null)}};Vn=new WeakMap,ga=new WeakMap,ol=new WeakMap,Xe=new WeakMap,$u=new WeakMap,ll=new WeakMap,Wu=new WeakMap,Vu=new WeakMap,Vs=new WeakMap,Gn=new WeakMap,cl=new WeakMap,Gu=new WeakMap,ve=new WeakSet,am=function(){const e=document.createElement("div"),t=l(this,Gn)._signal;e.addEventListener("contextmenu",Rn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of l(this,Gn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",l(jt,Gu)[i]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===l(this,ol)),r.addEventListener("click",y(this,ve,om).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",y(this,ve,lm).bind(this),{signal:t}),e},om=function(e,t){t.stopPropagation(),l(this,Vu).dispatch("switchannotationeditorparams",{source:this,type:l(this,cl),value:e})},lm=function(e){jt._keyboardManager.exec(this,e)},xr=function(e){if(l(this,ve,ws)){this.hideDropdown();return}if(m(this,$u,e.detail===0),l(this,Vs)||(m(this,Vs,new AbortController),window.addEventListener("pointerdown",y(this,ve,fx).bind(this),{signal:l(this,Gn).combinedSignal(l(this,Vs))})),l(this,Xe)){l(this,Xe).classList.remove("hidden");return}const t=m(this,Xe,y(this,ve,am).call(this));l(this,Vn).append(t)},fx=function(e){var t;(t=l(this,Xe))!=null&&t.contains(e.target)||this.hideDropdown()},ws=function(){return l(this,Xe)&&!l(this,Xe).classList.contains("hidden")},b(jt,Gu,null);let Gd=jt;var ul,Xu,Xi,ma,hl,vn,qu,Yu,ya,Xn,bt,Bt,dl,qi,qe,fl,wn,Ku,Y,cm,cd,px,gx,mx,um,Sr,_n,Za,yx,ud,ic,vx,wx,bx,Ax,xx;const ue=class ue extends me{constructor(t){super({...t,name:"highlightEditor"});b(this,Y);b(this,ul,null);b(this,Xu,0);b(this,Xi);b(this,ma,null);b(this,hl,null);b(this,vn,null);b(this,qu,null);b(this,Yu,0);b(this,ya,null);b(this,Xn,null);b(this,bt,null);b(this,Bt,!1);b(this,dl,null);b(this,qi);b(this,qe,null);b(this,fl,"");b(this,wn);b(this,Ku,"");this.color=t.color||ue._defaultColor,m(this,wn,t.thickness||ue._defaultThickness),m(this,qi,t.opacity||ue._defaultOpacity),m(this,Xi,t.boxes||null),m(this,Ku,t.methodOfCreation||""),m(this,fl,t.text||""),this._isDraggable=!1,t.highlightId>-1?(m(this,Bt,!0),y(this,Y,cd).call(this,t),y(this,Y,Sr).call(this)):l(this,Xi)&&(m(this,ul,t.anchorNode),m(this,Xu,t.anchorOffset),m(this,qu,t.focusNode),m(this,Yu,t.focusOffset),y(this,Y,cm).call(this),y(this,Y,Sr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ue.prototype;return re(this,"_keyboardManager",new rh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Bt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,wn),methodOfCreation:l(this,Ku)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;me.initialize(t,i),ue._defaultColor||(ue._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case X.HIGHLIGHT_DEFAULT_COLOR:ue._defaultColor=i;break;case X.HIGHLIGHT_THICKNESS:ue._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,dl)}updateParams(t,i){switch(t){case X.HIGHLIGHT_COLOR:y(this,Y,px).call(this,i);break;case X.HIGHLIGHT_THICKNESS:y(this,Y,gx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[X.HIGHLIGHT_DEFAULT_COLOR,ue._defaultColor],[X.HIGHLIGHT_THICKNESS,ue._defaultThickness]]}get propertiesToUpdate(){return[[X.HIGHLIGHT_COLOR,this.color||ue._defaultColor],[X.HIGHLIGHT_THICKNESS,l(this,wn)||ue._defaultThickness],[X.HIGHLIGHT_FREE,l(this,Bt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(m(this,hl,new Gd({editor:this})),t.addColorPicker(l(this,hl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(y(this,Y,ic).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,y(this,Y,ic).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){y(this,Y,um).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(y(this,Y,Sr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?y(this,Y,um).call(this):t&&(y(this,Y,Sr).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,a,o;const{drawLayer:i}=this.parent;let s;l(this,Bt)?(t=(t-this.rotation+360)%360,s=y(r=ue,_n,Za).call(r,l(this,Xn).box,t)):s=y(a=ue,_n,Za).call(a,this,t),i.rotate(l(this,bt),t),i.rotate(l(this,qe),t),i.updateBox(l(this,bt),s),i.updateBox(l(this,qe),y(o=ue,_n,Za).call(o,l(this,vn).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,fl)&&(t.setAttribute("aria-label",l(this,fl)),t.setAttribute("role","mark")),l(this,Bt)?t.classList.add("free"):this.div.addEventListener("keydown",y(this,Y,yx).bind(this),{signal:this._uiManager._signal});const i=m(this,ya,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,ma);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),$d(this,l(this,ya),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,qe),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,qe),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:y(this,Y,ud).call(this,!0);break;case 1:case 3:y(this,Y,ud).call(this,!1);break}}select(){var t,i;super.select(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,qe),"selected"))}unselect(){var t;super.unselect(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"selected"),l(this,Bt)||y(this,Y,ud).call(this,!1))}get _mustFixPosition(){return!l(this,Bt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,bt),t),this.parent.drawLayer.show(l(this,qe),t))}static startHighlighting(t,i,{target:s,x:r,y:a}){const{x:o,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=A=>{A.preventDefault(),A.stopPropagation()},v=A=>{d.abort(),y(this,_n,Ax).call(this,t,A)};window.addEventListener("blur",v,{signal:f}),window.addEventListener("pointerup",v,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Rn,{signal:f}),s.addEventListener("pointermove",y(this,_n,bx).bind(this,t),{signal:f}),this._freeHighlight=new rm({x:r,y:a},[o,c,u,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,s){var A,_,g,w;let r=null;if(t instanceof XA){const{data:{quadPoints:x,rect:S,rotation:k,id:C,color:R,opacity:L,popupRef:D},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:K.HIGHLIGHT,color:Array.from(R),opacity:L,quadPoints:x,boxes:null,pageIndex:j-1,rect:S.slice(0),rotation:k,id:C,deleted:!1,popupRef:D}}else if(t instanceof D0){const{data:{inkLists:x,rect:S,rotation:k,id:C,color:R,borderStyle:{rawWidth:L},popupRef:D},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:K.HIGHLIGHT,color:Array.from(R),thickness:L,inkLists:x,boxes:null,pageIndex:j-1,rect:S.slice(0),rotation:k,id:C,deleted:!1,popupRef:D}}const{color:a,quadPoints:o,inkLists:c,opacity:u}=t,h=await super.deserialize(t,i,s);h.color=$.makeHexColor(...a),m(h,qi,u||1),c&&m(h,wn,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,v]=h.pageTranslation;if(o){const x=m(h,Xi,[]);for(let S=0;S<o.length;S+=8)x.push({x:(o[S]-p)/d,y:1-(o[S+1]-v)/f,width:(o[S+2]-o[S])/d,height:(o[S+1]-o[S+5])/f});y(A=h,Y,cm).call(A),y(_=h,Y,Sr).call(_),h.rotate(h.rotation)}else if(c){m(h,Bt,!0);const x=c[0],S={x:x[0]-p,y:f-(x[1]-v)},k=new rm(S,[0,0,d,f],1,l(h,wn)/2,!0,.001);for(let L=0,D=x.length;L<D;L+=2)S.x=x[L]-p,S.y=f-(x[L+1]-v),k.add(S);const{id:C,clipPathId:R}=i.drawLayer.draw(k,h.color,h._defaultOpacity,!0);y(g=h,Y,cd).call(g,{highlightOutlines:k.getOutlines(),highlightId:C,clipPathId:R}),y(w=h,Y,Sr).call(w)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=me._colorManager.convert(this.color),r={annotationType:K.HIGHLIGHT,color:s,opacity:l(this,qi),thickness:l(this,wn),quadPoints:y(this,Y,vx).call(this),outlines:y(this,Y,wx).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:y(this,Y,ic).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!y(this,Y,xx).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ul=new WeakMap,Xu=new WeakMap,Xi=new WeakMap,ma=new WeakMap,hl=new WeakMap,vn=new WeakMap,qu=new WeakMap,Yu=new WeakMap,ya=new WeakMap,Xn=new WeakMap,bt=new WeakMap,Bt=new WeakMap,dl=new WeakMap,qi=new WeakMap,qe=new WeakMap,fl=new WeakMap,wn=new WeakMap,Ku=new WeakMap,Y=new WeakSet,cm=function(){const t=new bv(l(this,Xi),.001);m(this,Xn,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Xn).box;const i=new bv(l(this,Xi),.0025,.001,this._uiManager.direction==="ltr");m(this,vn,i.getOutlines());const{lastPoint:s}=l(this,vn).box;m(this,dl,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},cd=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var d,f;if(m(this,Xn,t),m(this,vn,t.getNewOutline(l(this,wn)/2+1.5,.0025)),i>=0)m(this,bt,i),m(this,ma,s),this.parent.drawLayer.finalizeLine(i,t),m(this,qe,this.parent.drawLayer.drawOutline(l(this,vn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,bt),t),this.parent.drawLayer.updateBox(l(this,bt),y(d=ue,_n,Za).call(d,l(this,Xn).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,qe),l(this,vn)),this.parent.drawLayer.updateBox(l(this,qe),y(f=ue,_n,Za).call(f,l(this,vn).box,p))}const{x:a,y:o,width:c,height:u}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=u;break;case 90:{const[p,v]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*v/p,this.height=u*p/v;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[p,v]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*v/p,this.height=u*p/v;break}}const{lastPoint:h}=l(this,vn).box;m(this,dl,[(h[0]-a)/c,(h[1]-o)/u])},px=function(t){const i=(a,o)=>{var c,u,h;this.color=a,(c=this.parent)==null||c.drawLayer.changeColor(l(this,bt),a),(u=l(this,hl))==null||u.updateColor(a),m(this,qi,o),(h=this.parent)==null||h.drawLayer.changeOpacity(l(this,bt),o)},s=this.color,r=l(this,qi);this.addCommands({cmd:i.bind(this,t,ue._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},gx=function(t){const i=l(this,wn),s=r=>{m(this,wn,r),y(this,Y,mx).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},mx=function(t){if(!l(this,Bt))return;y(this,Y,cd).call(this,{highlightOutlines:l(this,Xn).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},um=function(){l(this,bt)===null||!this.parent||(this.parent.drawLayer.remove(l(this,bt)),m(this,bt,null),this.parent.drawLayer.remove(l(this,qe)),m(this,qe,null))},Sr=function(t=this.parent){l(this,bt)===null&&({id:Et(this,bt)._,clipPathId:Et(this,ma)._}=t.drawLayer.draw(l(this,Xn),this.color,l(this,qi)),m(this,qe,t.drawLayer.drawOutline(l(this,vn))),l(this,ya)&&(l(this,ya).style.clipPath=l(this,ma)))},_n=new WeakSet,Za=function({x:t,y:i,width:s,height:r},a){switch(a){case 90:return{x:1-i-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-t-s,width:r,height:s}}return{x:t,y:i,width:s,height:r}},yx=function(t){ue._keyboardManager.exec(this,t)},ud=function(t){if(!l(this,ul))return;const i=window.getSelection();t?i.setPosition(l(this,ul),l(this,Xu)):i.setPosition(l(this,qu),l(this,Yu))},ic=function(){return l(this,Bt)?this.rotation:0},vx=function(){if(l(this,Bt))return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,a=l(this,Xi),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of a){const p=u*t+s,v=(1-h-f)*i+r;o[c]=o[c+4]=p,o[c+1]=o[c+3]=v,o[c+2]=o[c+6]=p+d*t,o[c+5]=o[c+7]=v+f*i,c+=8}return o},wx=function(t){return l(this,Xn).serialize(t,y(this,Y,ic).call(this))},bx=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Ax=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},xx=function(t){const{color:i}=this._initialData;return t.color.some((s,r)=>s!==i[r])},b(ue,_n),G(ue,"_defaultColor",null),G(ue,"_defaultOpacity",1),G(ue,"_defaultThickness",12),G(ue,"_type","highlight"),G(ue,"_editorType",K.HIGHLIGHT),G(ue,"_freeHighlightId",-1),G(ue,"_freeHighlight",null),G(ue,"_freeHighlightClipId","");let Xd=ue;var va,wa,yi,Yi,bn,ba,Aa,xa,Ki,pl,Sa,_a,Gs,F,Sx,_x,Ex,kx,dm,Cx,fm,Tx,Px,Rx,Lx,Mx,_r,pm,gm,mm,hd,dd,Ja,ym,fd,ps,Ix,vm,Nx,Fx,wm,pd,sc;const Te=class Te extends me{constructor(t){super({...t,name:"inkEditor"});b(this,F);b(this,va,0);b(this,wa,0);b(this,yi,null);b(this,Yi,new Path2D);b(this,bn,!1);b(this,ba,null);b(this,Aa,!1);b(this,xa,!1);b(this,Ki,null);b(this,pl,null);b(this,Sa,0);b(this,_a,0);b(this,Gs,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){me.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case X.INK_THICKNESS:Te._defaultThickness=i;break;case X.INK_COLOR:Te._defaultColor=i;break;case X.INK_OPACITY:Te._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case X.INK_THICKNESS:y(this,F,Sx).call(this,i);break;case X.INK_COLOR:y(this,F,_x).call(this,i);break;case X.INK_OPACITY:y(this,F,Ex).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[X.INK_THICKNESS,Te._defaultThickness],[X.INK_COLOR,Te._defaultColor||me._defaultLineColor],[X.INK_OPACITY,Math.round(Te._defaultOpacity*100)]]}get propertiesToUpdate(){return[[X.INK_THICKNESS,this.thickness||Te._defaultThickness],[X.INK_COLOR,this.color||Te._defaultColor||me._defaultLineColor],[X.INK_OPACITY,Math.round(100*(this.opacity??Te._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(y(this,F,hd).call(this),y(this,F,dd).call(this)),this.isAttachedToDOM||(this.parent.add(this),y(this,F,Ja).call(this)),y(this,F,sc).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,yi)&&(clearTimeout(l(this,yi)),m(this,yi,null)),(t=l(this,Ki))==null||t.disconnect(),m(this,Ki,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,s=this.width*t,r=this.height*i;this.setDimensions(s,r)}enableEditMode(){l(this,bn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,y(this,F,pm).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),y(this,F,gm).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,bn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),m(this,bn,!0),this.div.classList.add("disabled"),y(this,F,sc).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,bn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),y(this,F,Cx).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),y(this,F,fm).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),y(this,F,mm).call(this,t)}canvasPointerleave(t){y(this,F,mm).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,bn)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,o]=y(this,F,kx).call(this);if(this.setAt(s,r,0,0),this.setDims(a,o),y(this,F,hd).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(t*c,i*u,this.width*c,this.height*u),m(this,xa,!0),y(this,F,Ja).call(this),this.setDims(this.width*c,this.height*u),y(this,F,_r).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return y(this,F,dd).call(this),this.div}setDimensions(t,i){const s=Math.round(t),r=Math.round(i);if(l(this,Sa)===s&&l(this,_a)===r)return;m(this,Sa,s),m(this,_a,r),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=i/o,this.fixAndSetPosition(),l(this,bn)&&y(this,F,ym).call(this,t,i),y(this,F,Ja).call(this),y(this,F,_r).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,s){var _,g,w;if(t instanceof D0)return null;const r=await super.deserialize(t,i,s);r.thickness=t.thickness,r.color=$.makeHexColor(...t.color),r.opacity=t.opacity;const[a,o]=r.pageDimensions,c=r.width*a,u=r.height*o,h=r.parentScale,d=t.thickness/2;m(r,bn,!0),m(r,Sa,Math.round(c)),m(r,_a,Math.round(u));const{paths:f,rect:p,rotation:v}=t;for(let{bezier:x}of f){x=y(_=Te,ps,Nx).call(_,x,p,v);const S=[];r.paths.push(S);let k=h*(x[0]-d),C=h*(x[1]-d);for(let L=2,D=x.length;L<D;L+=6){const j=h*(x[L]-d),U=h*(x[L+1]-d),ie=h*(x[L+2]-d),J=h*(x[L+3]-d),ae=h*(x[L+4]-d),ce=h*(x[L+5]-d);S.push([[k,C],[j,U],[ie,J],[ae,ce]]),k=ae,C=ce}const R=y(this,ps,Ix).call(this,S);r.bezierPath2D.push(R)}const A=y(g=r,F,wm).call(g);return m(r,wa,Math.max(me.MIN_SIZE,A[2]-A[0])),m(r,va,Math.max(me.MIN_SIZE,A[3]-A[1])),y(w=r,F,ym).call(w,c,u),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=me._colorManager.convert(this.ctx.strokeStyle);return{annotationType:K.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:y(this,F,Fx).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};va=new WeakMap,wa=new WeakMap,yi=new WeakMap,Yi=new WeakMap,bn=new WeakMap,ba=new WeakMap,Aa=new WeakMap,xa=new WeakMap,Ki=new WeakMap,pl=new WeakMap,Sa=new WeakMap,_a=new WeakMap,Gs=new WeakMap,F=new WeakSet,Sx=function(t){const i=r=>{this.thickness=r,y(this,F,sc).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_x=function(t){const i=r=>{this.color=r,y(this,F,_r).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ex=function(t){const i=r=>{this.opacity=r,y(this,F,_r).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:X.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},kx=function(){const{parentRotation:t,parentDimensions:[i,s]}=this;switch(t){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},dm=function(){const{ctx:t,color:i,opacity:s,thickness:r,parentScale:a,scaleFactor:o}=this;t.lineWidth=r*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${fE(s)}`},Cx=function(t,i){this.canvas.addEventListener("contextmenu",Rn,{signal:this._uiManager._signal}),y(this,F,gm).call(this),m(this,ba,new AbortController);const s=this._uiManager.combinedSignal(l(this,ba));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,l(this,xa)||(m(this,xa,!0),y(this,F,Ja).call(this),this.thickness||(this.thickness=Te._defaultThickness),this.color||(this.color=Te._defaultColor||me._defaultLineColor),this.opacity??(this.opacity=Te._defaultOpacity)),this.currentPath.push([t,i]),m(this,Aa,!1),y(this,F,dm).call(this),m(this,Gs,()=>{y(this,F,Rx).call(this),l(this,Gs)&&window.requestAnimationFrame(l(this,Gs))}),window.requestAnimationFrame(l(this,Gs))},fm=function(t,i){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&i===r)return;const a=this.currentPath;let o=l(this,Yi);if(a.push([t,i]),m(this,Aa,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,i);return}a.length===3&&(m(this,Yi,o=new Path2D),o.moveTo(...a[0])),y(this,F,Lx).call(this,o,...a.at(-3),...a.at(-2),t,i)},Tx=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,Yi).lineTo(...t)},Px=function(t,i){m(this,Gs,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),y(this,F,fm).call(this,t,i),y(this,F,Tx).call(this);let s;if(this.currentPath.length!==1)s=y(this,F,Mx).call(this);else{const u=[t,i];s=[[u,u.slice(),u.slice(),u]]}const r=l(this,Yi),a=this.currentPath;this.currentPath=[],m(this,Yi,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(y(this,F,hd).call(this),y(this,F,dd).call(this)),y(this,F,sc).call(this))};this.addCommands({cmd:o,undo:c,mustExec:!0})},Rx=function(){if(!l(this,Aa))return;m(this,Aa,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(o=>o[0]),r=i.map(o=>o[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(l(this,Yi)),a.restore()},Lx=function(t,i,s,r,a,o,c){const u=(i+r)/2,h=(s+a)/2,d=(r+o)/2,f=(a+c)/2;t.bezierCurveTo(u+2*(r-u)/3,h+2*(a-h)/3,d+2*(r-d)/3,f+2*(a-f)/3,d,f)},Mx=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let s,[r,a]=t[0];for(s=1;s<t.length-2;s++){const[p,v]=t[s],[A,_]=t[s+1],g=(p+A)/2,w=(v+_)/2,x=[r+2*(p-r)/3,a+2*(v-a)/3],S=[g+2*(p-g)/3,w+2*(v-w)/3];i.push([[r,a],x,S,[g,w]]),[r,a]=[g,w]}const[o,c]=t[s],[u,h]=t[s+1],d=[r+2*(o-r)/3,a+2*(c-a)/3],f=[u+2*(o-u)/3,h+2*(c-h)/3];return i.push([[r,a],d,f,[u,h]]),i},_r=function(){if(this.isEmpty()){y(this,F,fd).call(this);return}y(this,F,dm).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),y(this,F,fd).call(this);for(const s of this.bezierPath2D)i.stroke(s)},pm=function(){if(l(this,pl))return;m(this,pl,new AbortController);const t=this._uiManager.combinedSignal(l(this,pl));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},gm=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},mm=function(t){var i;(i=l(this,ba))==null||i.abort(),m(this,ba,null),y(this,F,pm).call(this),l(this,yi)&&clearTimeout(l(this,yi)),m(this,yi,setTimeout(()=>{m(this,yi,null),this.canvas.removeEventListener("contextmenu",Rn)},10)),y(this,F,Px).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},hd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dd=function(){m(this,Ki,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,Ki).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Ki))==null||t.disconnect(),m(this,Ki,null)},{once:!0})},Ja=function(){if(!l(this,xa))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),y(this,F,fd).call(this)},ym=function(t,i){const s=y(this,F,pd).call(this),r=(t-s)/l(this,wa),a=(i-s)/l(this,va);this.scaleFactor=Math.min(r,a)},fd=function(){const t=y(this,F,pd).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ps=new WeakSet,Ix=function(t){const i=new Path2D;for(let s=0,r=t.length;s<r;s++){const[a,o,c,u]=t[s];s===0&&i.moveTo(...a),i.bezierCurveTo(o[0],o[1],c[0],c[1],u[0],u[1])}return i},vm=function(t,i,s){const[r,a,o,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+r,t[u+1]=d+a}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=o-t[u],t[u+1]+=a;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=o-t[u+1],t[u+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},Nx=function(t,i,s){const[r,a,o,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-a,t[u+1]=d-r}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=o-t[u],t[u+1]-=a;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=c-t[u+1],t[u+1]=o-d}break;default:throw new Error("Invalid rotation")}return t},Fx=function(t,i,s,r){var h,d;const a=[],o=this.thickness/2,c=t*i+o,u=t*s+o;for(const f of this.paths){const p=[],v=[];for(let A=0,_=f.length;A<_;A++){const[g,w,x,S]=f[A];if(g[0]===S[0]&&g[1]===S[1]&&_===1){const J=t*g[0]+c,ae=t*g[1]+u;p.push(J,ae),v.push(J,ae);break}const k=t*g[0]+c,C=t*g[1]+u,R=t*w[0]+c,L=t*w[1]+u,D=t*x[0]+c,j=t*x[1]+u,U=t*S[0]+c,ie=t*S[1]+u;A===0&&(p.push(k,C),v.push(k,C)),p.push(R,L,D,j,U,ie),v.push(R,L),A===_-1&&v.push(U,ie)}a.push({bezier:y(h=Te,ps,vm).call(h,p,r,this.rotation),points:y(d=Te,ps,vm).call(d,v,r,this.rotation)})}return a},wm=function(){let t=1/0,i=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[o,c,u,h]of a){const d=$.bezierBoundingBox(...o,...c,...u,...h);t=Math.min(t,d[0]),s=Math.min(s,d[1]),i=Math.max(i,d[2]),r=Math.max(r,d[3])}return[t,s,i,r]},pd=function(){return l(this,bn)?Math.ceil(this.thickness*this.parentScale):0},sc=function(t=!1){if(this.isEmpty())return;if(!l(this,bn)){y(this,F,_r).call(this);return}const i=y(this,F,wm).call(this),s=y(this,F,pd).call(this);m(this,wa,Math.max(me.MIN_SIZE,i[2]-i[0])),m(this,va,Math.max(me.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(s+l(this,wa)*this.scaleFactor),a=Math.ceil(s+l(this,va)*this.scaleFactor),[o,c]=this.parentDimensions;this.width=r/o,this.height=a/c,this.setAspectRatio(r,a);const u=this.translationX,h=this.translationY;this.translationX=-i[0],this.translationY=-i[1],y(this,F,Ja).call(this),y(this,F,_r).call(this),m(this,Sa,r),m(this,_a,a),this.setDims(r,a);const d=t?s/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},b(Te,ps),G(Te,"_defaultColor",null),G(Te,"_defaultOpacity",1),G(Te,"_defaultThickness",1),G(Te,"_type","ink"),G(Te,"_editorType",K.INK);let hm=Te;var Re,ct,Xs,Qi,qs,gl,vi,Zi,wi,sn,ml,se,rc,ac,gd,Am,Dx,md,xm,yd,Ox,jx;const vc=class vc extends me{constructor(t){super({...t,name:"stampEditor"});b(this,se);b(this,Re,null);b(this,ct,null);b(this,Xs,null);b(this,Qi,null);b(this,qs,null);b(this,gl,"");b(this,vi,null);b(this,Zi,null);b(this,wi,null);b(this,sn,!1);b(this,ml,!1);m(this,Qi,t.bitmapUrl),m(this,qs,t.bitmapFile)}static initialize(t,i){me.initialize(t,i)}static get supportedTypes(){return re(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return re(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(K.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,i;l(this,ct)&&(m(this,Re,null),this._uiManager.imageManager.deleteId(l(this,ct)),(t=l(this,vi))==null||t.remove(),m(this,vi,null),(i=l(this,Zi))==null||i.disconnect(),m(this,Zi,null),l(this,wi)&&(clearTimeout(l(this,wi)),m(this,wi,null))),super.remove()}rebuild(){if(!this.parent){l(this,ct)&&y(this,se,gd).call(this);return}super.rebuild(),this.div!==null&&(l(this,ct)&&l(this,vi)===null&&y(this,se,gd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,Xs)||l(this,Re)||l(this,Qi)||l(this,qs)||l(this,ct))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Re)?y(this,se,Am).call(this):y(this,se,gd).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r)}return this.div}copyCanvas(t,i,s=!1){var p;t||(t=224);const{width:r,height:a}=l(this,Re),o=new yg;let c=l(this,Re),u=r,h=a,d=null;if(i){if(r>i||a>i){const L=Math.min(i/r,i/a);u=Math.floor(r*L),h=Math.floor(a*L)}d=document.createElement("canvas");const v=d.width=Math.ceil(u*o.sx),A=d.height=Math.ceil(h*o.sy);l(this,sn)||(c=y(this,se,md).call(this,v,A));const _=d.getContext("2d");_.filter=this._uiManager.hcmFilter;let g="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",w="#42414d");const x=15,S=x*o.sx,k=x*o.sy,C=new OffscreenCanvas(S*2,k*2),R=C.getContext("2d");R.fillStyle=g,R.fillRect(0,0,S*2,k*2),R.fillStyle=w,R.fillRect(0,0,S,k),R.fillRect(S,k,S,k),_.fillStyle=_.createPattern(C,"repeat"),_.fillRect(0,0,v,A),_.drawImage(c,0,0,c.width,c.height,0,0,v,A)}let f=null;if(s){let v,A;if(o.symmetric&&c.width<t&&c.height<t)v=c.width,A=c.height;else if(c=l(this,Re),r>t||a>t){const w=Math.min(t/r,t/a);v=Math.floor(r*w),A=Math.floor(a*w),l(this,sn)||(c=y(this,se,md).call(this,v,A))}const g=new OffscreenCanvas(v,A).getContext("2d",{willReadFrequently:!0});g.drawImage(c,0,0,c.width,c.height,0,0,v,A),f={width:v,height:A,data:g.getImageData(0,0,v,A).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,vi)}static async deserialize(t,i,s){var A;let r=null;if(t instanceof qA){const{data:{rect:_,rotation:g,id:w,structParent:x,popupRef:S},container:k,parent:{page:{pageNumber:C}}}=t,R=k.querySelector("canvas"),L=s.imageManager.getFromCanvas(k.id,R);R.remove();const D=((A=await i._structTree.getAriaAttributes(`${E0}${w}`))==null?void 0:A.get("aria-label"))||"";r=t={annotationType:K.STAMP,bitmapId:L.id,bitmap:L.bitmap,pageIndex:C-1,rect:_.slice(0),rotation:g,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:D},isSvg:!1,structParent:x,popupRef:S}}const a=await super.deserialize(t,i,s),{rect:o,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&s.imageManager.isValidId(h)?(m(a,ct,h),c&&m(a,Re,c)):m(a,Qi,u),m(a,sn,d);const[p,v]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/v,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=r,m(a,ml,!!r),a}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:K.STAMP,bitmapId:l(this,ct),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,sn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=y(this,se,yd).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=y(this,se,jx).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const o=l(this,sn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(l(this,ct)))i.stamps.set(l(this,ct),{area:o,serialized:s}),s.bitmap=y(this,se,yd).call(this,!1);else if(l(this,sn)){const c=i.stamps.get(l(this,ct));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=y(this,se,yd).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Re=new WeakMap,ct=new WeakMap,Xs=new WeakMap,Qi=new WeakMap,qs=new WeakMap,gl=new WeakMap,vi=new WeakMap,Zi=new WeakMap,wi=new WeakMap,sn=new WeakMap,ml=new WeakMap,se=new WeakSet,rc=function(t,i=!1){if(!t){this.remove();return}m(this,Re,t.bitmap),i||(m(this,ct,t.id),m(this,sn,t.isSvg)),t.file&&m(this,gl,t.file.name),y(this,se,Am).call(this)},ac=function(){if(m(this,Xs,null),this._uiManager.enableWaiting(!1),!!l(this,vi)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Re)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Re)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},gd=function(){if(l(this,ct)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,ct)).then(s=>y(this,se,rc).call(this,s,!0)).finally(()=>y(this,se,ac).call(this));return}if(l(this,Qi)){const s=l(this,Qi);m(this,Qi,null),this._uiManager.enableWaiting(!0),m(this,Xs,this._uiManager.imageManager.getFromUrl(s).then(r=>y(this,se,rc).call(this,r)).finally(()=>y(this,se,ac).call(this)));return}if(l(this,qs)){const s=l(this,qs);m(this,qs,null),this._uiManager.enableWaiting(!0),m(this,Xs,this._uiManager.imageManager.getFromFile(s).then(r=>y(this,se,rc).call(this,r)).finally(()=>y(this,se,ac).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=vc.supportedTypesStr;const i=this._uiManager._signal;m(this,Xs,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),y(this,se,rc).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>y(this,se,ac).call(this))),t.click()},Am=function(){const{div:t}=this;let{width:i,height:s}=l(this,Re);const[r,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*r,s=this.height*a;else if(i>o*r||s>o*a){const d=Math.min(o*r/i,o*a/s);i*=d,s*=d}const[c,u]=this.parentDimensions;this.setDims(i*c/r,s*u/a),this._uiManager.enableWaiting(!1);const h=m(this,vi,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),y(this,se,xm).call(this,i,s),y(this,se,Ox).call(this),l(this,ml)||(this.parent.addUndoableEditor(this),m(this,ml,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,gl)&&h.setAttribute("aria-label",l(this,gl))},Dx=function(t,i){var o;const[s,r]=this.parentDimensions;this.width=t/s,this.height=i/r,(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,wi)!==null&&clearTimeout(l(this,wi)),m(this,wi,setTimeout(()=>{m(this,wi,null),y(this,se,xm).call(this,t,i)},200))},md=function(t,i){const{width:s,height:r}=l(this,Re);let a=s,o=r,c=l(this,Re);for(;a>2*t||o>2*i;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(c,0,0,u,h,0,0,a,o),c=d.transferToImageBitmap()}return c},xm=function(t,i){const s=new yg,r=Math.ceil(t*s.sx),a=Math.ceil(i*s.sy),o=l(this,vi);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const c=l(this,sn)?l(this,Re):y(this,se,md).call(this,r,a),u=o.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,r,a)},yd=function(t){if(t){if(l(this,sn)){const r=this._uiManager.imageManager.getSvgUrl(l(this,ct));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,Re),i.getContext("2d").drawImage(l(this,Re),0,0),i.toDataURL()}if(l(this,sn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*ur.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*ur.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(l(this,Re),0,0,l(this,Re).width,l(this,Re).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(l(this,Re))},Ox=function(){this._uiManager._signal&&(m(this,Zi,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&y(this,se,Dx).call(this,i.width,i.height)})),l(this,Zi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Zi))==null||t.disconnect(),m(this,Zi,null)},{once:!0}))},jx=function(t){var u;const{rect:i,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,a=t.rect.every((h,d)=>Math.abs(h-i[d])<1),o=t.pageIndex===s,c=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:a&&o&&c,isSameAltText:c}},G(vc,"_type","stamp"),G(vc,"_editorType",K.STAMP);let bm=vc;var Ea,yl,bi,Ys,Ji,rn,Ks,vl,wl,At,es,W,Qs,dt,zx,_m,Em,km,vd;const Mn=class Mn{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:c,viewport:u,l10n:h}){b(this,dt);b(this,Ea);b(this,yl,!1);b(this,bi,null);b(this,Ys,null);b(this,Ji,null);b(this,rn,new Map);b(this,Ks,!1);b(this,vl,!1);b(this,wl,!1);b(this,At,null);b(this,es,null);b(this,W);const d=[...l(Mn,Qs).values()];if(!Mn._initialized){Mn._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),m(this,W,e),this.pageIndex=t,this.div=i,m(this,Ea,r),m(this,bi,a),this.viewport=u,m(this,At,c),this.drawLayer=o,this._structTree=s,l(this,W).addLayer(this)}get isEmpty(){return l(this,rn).size===0}get isInvisible(){return this.isEmpty&&l(this,W).getMode()===K.NONE}updateToolbar(e){l(this,W).updateToolbar(e)}updateMode(e=l(this,W).getMode()){switch(y(this,dt,vd).call(this),e){case K.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case K.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case K.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(Mn,Qs).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,At))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,W).getMode()!==K.INK)return;if(!e){for(const i of l(this,rn).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,W).setEditingState(e)}addCommands(e){l(this,W).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,bi))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,rn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,W).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,bi))return;const t=l(this,bi).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,W).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;m(this,wl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,rn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(l(this,bi)){const r=l(this,bi).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(l(this,W).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(l(this,W).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}y(this,dt,vd).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of l(Mn,Qs).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),m(this,wl,!1)}getEditableAnnotation(e){var t;return((t=l(this,bi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,W).getActive()!==e&&l(this,W).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,At))!=null&&e.div&&!l(this,es)){m(this,es,new AbortController);const t=l(this,W).combinedSignal(l(this,es));l(this,At).div.addEventListener("pointerdown",y(this,dt,zx).bind(this),{signal:t}),l(this,At).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,At))!=null&&e.div&&l(this,es)&&(l(this,es).abort(),m(this,es,null),l(this,At).div.classList.remove("highlighting"))}enableClick(){if(l(this,Ys))return;m(this,Ys,new AbortController);const e=l(this,W).combinedSignal(l(this,Ys));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,Ys))==null||e.abort(),m(this,Ys,null)}attach(e){l(this,rn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,W).isDeletedAnnotationElement(t)&&l(this,W).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,rn).delete(e.id),(t=l(this,Ea))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,wl)&&e.annotationElementId&&l(this,W).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,W).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,vl)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,W).addDeletedAnnotationElement(e.annotationElementId),me.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,W).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,W).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Ji)&&(e._focusEventsAllowed=!1,m(this,Ji,setTimeout(()=>{m(this,Ji,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,W)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,Ea))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,W).getId()}combinedSignal(e){return l(this,W).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,dt,_m))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,W).updateToolbar(e),l(this,W).updateMode(e);const{offsetX:i,offsetY:s}=y(this,dt,km).call(this),r=this.getNextId(),a=y(this,dt,Em).call(this,{parent:this,id:r,x:i,y:s,uiManager:l(this,W),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=l(Mn,Qs).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,W)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=y(this,dt,Em).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,W),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(y(this,dt,km).call(this),!0)}setSelected(e){l(this,W).setSelected(e)}toggleSelected(e){l(this,W).toggleSelected(e)}unselect(e){l(this,W).unselect(e)}pointerup(e){const{isMac:t}=Lt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Ks)){if(m(this,Ks,!1),!l(this,yl)){m(this,yl,!0);return}if(l(this,W).getMode()===K.STAMP){l(this,W).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,W).getMode()===K.HIGHLIGHT&&this.enableTextSelection(),l(this,Ks)){m(this,Ks,!1);return}const{isMac:t}=Lt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;m(this,Ks,!0);const i=l(this,W).getActive();m(this,yl,!i||i.isEmpty())}findNewParent(e,t,i){const s=l(this,W).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,W).getActive())==null?void 0:e.parent)===this&&(l(this,W).commitOrRemove(),l(this,W).setActiveEditor(null)),l(this,Ji)&&(clearTimeout(l(this,Ji)),m(this,Ji,null));for(const i of l(this,rn).values())(t=l(this,Ea))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,rn).clear(),l(this,W).removeLayer(this)}render({viewport:e}){this.viewport=e,Na(this.div,e);for(const t of l(this,W).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,W).commitOrRemove(),y(this,dt,vd).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Na(this.div,{rotation:i}),t!==i)for(const s of l(this,rn).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,W).viewParameters.realScale}};Ea=new WeakMap,yl=new WeakMap,bi=new WeakMap,Ys=new WeakMap,Ji=new WeakMap,rn=new WeakMap,Ks=new WeakMap,vl=new WeakMap,wl=new WeakMap,At=new WeakMap,es=new WeakMap,W=new WeakMap,Qs=new WeakMap,dt=new WeakSet,zx=function(e){l(this,W).unselectAll();const{target:t}=e;if(t===l(this,At).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,At).div.contains(t)){const{isMac:i}=Lt.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,W).showAllEditors("highlight",!0,!0),l(this,At).div.classList.add("free"),this.toggleDrawing(),Xd.startHighlighting(this,l(this,W).direction==="ltr",{target:l(this,At).div,x:e.x,y:e.y}),l(this,At).div.addEventListener("pointerup",()=>{l(this,At).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,W)._signal}),e.preventDefault()}},_m=function(){return l(Mn,Qs).get(l(this,W).getMode())},Em=function(e){const t=l(this,dt,_m);return t?new t.prototype.constructor(e):null},km=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+s),u=(r+o)/2-e,h=(a+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},vd=function(){m(this,vl,!0);for(const e of l(this,rn).values())e.isEmpty()&&e.remove();m(this,vl,!1)},G(Mn,"_initialized",!1),b(Mn,Qs,new Map([nm,hm,bm,Xd].map(e=>[e._editorType,e])));let Sm=Mn;var Ai,Qu,Be,ts,Zu,Tm,ja,Pm,Hx;const at=class at{constructor({pageIndex:e}){b(this,ja);b(this,Ai,null);b(this,Qu,0);b(this,Be,new Map);b(this,ts,new Map);this.pageIndex=e}setParent(e){if(!l(this,Ai)){m(this,Ai,e);return}if(l(this,Ai)!==e){if(l(this,Be).size>0)for(const t of l(this,Be).values())t.remove(),e.append(t);m(this,Ai,e)}}static get _svgFactory(){return re(this,"_svgFactory",new F0)}draw(e,t,i,s=!1){const r=Et(this,Qu)._++,a=y(this,ja,Pm).call(this,e.box);a.classList.add(...e.classNamesForDrawing);const o=at._svgFactory.createElement("defs");a.append(o);const c=at._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),s&&l(this,ts).set(r,c);const h=y(this,ja,Hx).call(this,o,u),d=at._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",t),a.setAttribute("fill-opacity",i),d.setAttribute("href",`#${u}`),l(this,Be).set(r,a),{id:r,clipPathId:`url(#${h})`}}drawOutline(e){const t=Et(this,Qu)._++,i=y(this,ja,Pm).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const s=at._svgFactory.createElement("defs");i.append(s);const r=at._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",a),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.mustRemoveSelfIntersections){const h=at._svgFactory.createElement("mask");s.append(h),o=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");const d=at._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=at._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=at._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),o&&c.setAttribute("mask",`url(#${o})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),l(this,Be).set(t,i),t}finalizeLine(e,t){const i=l(this,ts).get(e);l(this,ts).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,Be).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,ts).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;y(i=at,Zu,Tm).call(i,l(this,Be).get(e),t)}show(e,t){l(this,Be).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,Be).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,Be).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,Be).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,Be).get(e).classList.add(t)}removeClass(e,t){l(this,Be).get(e).classList.remove(t)}getSVGRoot(e){return l(this,Be).get(e)}remove(e){l(this,ts).delete(e),l(this,Ai)!==null&&(l(this,Be).get(e).remove(),l(this,Be).delete(e))}destroy(){m(this,Ai,null);for(const e of l(this,Be).values())e.remove();l(this,Be).clear(),l(this,ts).clear()}};Ai=new WeakMap,Qu=new WeakMap,Be=new WeakMap,ts=new WeakMap,Zu=new WeakSet,Tm=function(e,{x:t=0,y:i=0,width:s=1,height:r=1}={}){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},ja=new WeakSet,Pm=function(e){var i;const t=at._svgFactory.create(1,1,!0);return l(this,Ai).append(t),t.setAttribute("aria-hidden",!0),y(i=at,Zu,Tm).call(i,t,e),t},Hx=function(e,t){const i=at._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=at._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},b(at,Zu);let Cm=at;q.AbortException;q.AnnotationEditorLayer;q.AnnotationEditorParamsType;q.AnnotationEditorType;q.AnnotationEditorUIManager;q.AnnotationLayer;q.AnnotationMode;q.ColorPicker;q.DOMSVGFactory;q.DrawLayer;q.FeatureTest;var Gk=q.GlobalWorkerOptions;q.ImageKind;q.InvalidPDFException;q.MissingPDFException;q.OPS;q.OutputScale;q.PDFDataRangeTransport;q.PDFDateString;q.PDFWorker;q.PasswordResponses;q.PermissionFlag;q.PixelsPerInch;q.RenderingCancelledException;q.TextLayer;q.UnexpectedResponseException;q.Util;q.VerbosityLevel;q.XfaLayer;q.build;q.createValidAbsoluteUrl;q.fetchData;var Xk=q.getDocument;q.getFilenameFromUrl;q.getPdfFilenameFromUrl;q.getXfaPageViewport;q.isDataScheme;q.isPdfFile;q.noContextMenu;q.normalizeUnicode;q.setLayerDimensions;q.shadow;q.version;const qk="/CVEditor/assets/pdf.worker.min-GB3t0DcA.mjs";Gk.workerSrc=qk;const Yk=()=>{const[n,e]=Kn.useState(E_),[t,i]=Kn.useState(!0),[s,r]=Kn.useState("styled"),[a,o]=Kn.useState("personal");Kn.useRef();const c=(T,E)=>{e(M=>({...M,personalDetails:{...M.personalDetails,[T]:E}}))},u=T=>{e(E=>({...E,profile:T}))},h=(T,E)=>{e(M=>({...M,education:{...M.education,[T]:E}}))},d=T=>{e(E=>({...E,courses:T}))},f=()=>{e(T=>({...T,workExperience:[...T.workExperience,{title:"",company:"",dates:"",description:"",responsibilities:[""]}]}))},p=(T,E,M)=>{e(I=>({...I,workExperience:I.workExperience.map((z,V)=>V===T?{...z,[E]:M}:z)}))},v=T=>{e(E=>({...E,workExperience:E.workExperience.filter((M,I)=>I!==T)}))},A=T=>{e(E=>({...E,workExperience:E.workExperience.map((M,I)=>I===T?{...M,responsibilities:[...M.responsibilities,""]}:M)}))},_=(T,E,M)=>{e(I=>({...I,workExperience:I.workExperience.map((z,V)=>V===T?{...z,responsibilities:z.responsibilities.map((Q,de)=>de===E?M:Q)}:z)}))},g=(T,E)=>{e(M=>({...M,workExperience:M.workExperience.map((I,z)=>z===T?{...I,responsibilities:I.responsibilities.filter((V,Q)=>Q!==E)}:I)}))},w=()=>{e(T=>({...T,personalProjects:[...T.personalProjects,{title:"",technologies:"",responsibilities:[""]}]}))},x=(T,E,M)=>{e(I=>({...I,personalProjects:I.personalProjects.map((z,V)=>V===T?{...z,[E]:M}:z)}))},S=T=>{e(E=>({...E,personalProjects:E.personalProjects.filter((M,I)=>I!==T)}))},k=T=>{e(E=>({...E,personalProjects:E.personalProjects.map((M,I)=>I===T?{...M,responsibilities:[...M.responsibilities,""]}:M)}))},C=(T,E,M)=>{e(I=>({...I,personalProjects:I.personalProjects.map((z,V)=>V===T?{...z,responsibilities:z.responsibilities.map((Q,de)=>de===E?M:Q)}:z)}))},R=(T,E)=>{e(M=>({...M,personalProjects:M.personalProjects.map((I,z)=>z===T?{...I,responsibilities:I.responsibilities.filter((V,Q)=>Q!==E)}:I)}))},L=()=>{e(T=>({...T,certificates:[...T.certificates,{title:"",description:""}]}))},D=(T,E,M)=>{e(I=>({...I,certificates:I.certificates.map((z,V)=>V===T?{...z,[E]:M}:z)}))},j=T=>{e(E=>({...E,certificates:E.certificates.filter((M,I)=>I!==T)}))},U=()=>{const T=JSON.stringify(n),E=window.open("","_blank"),I=Zy(n,s).replace("</body>",`<!-- CV_DATA:${btoa(T)}:CV_DATA --></body>`);E.document.write(I),E.document.close(),E.focus(),E.print()};async function ie(T){const E=T instanceof ArrayBuffer?T:await T.arrayBuffer(),M=await Xk({data:E}).promise,I=[];for(let z=1;z<=M.numPages;z++){const Q=await(await M.getPage(z)).getTextContent(),de=new Map,Dt=2;for(const Yt of Q.items){const ms=(Yt.str||"").trim();if(!ms)continue;const oh=Yt.transform||Yt.matrix||[],Bx=typeof oh[5]=="number"?oh[5]:0,Df=Math.round(Bx/Dt)*Dt;de.has(Df)||de.set(Df,[]),de.get(Df).push(ms)}const oe=Array.from(de.keys()).sort((Yt,ms)=>ms-Yt).map(Yt=>de.get(Yt).join(" "));I.push(oe.join(`
`))}return I.join(`

`)}function J(T){return T?(T.match(/[^\x09\x0A\x0D\x20-\x7E\u00A0-\uFFFF]/g)||[]).length>T.length*.02:!0}const ae=async T=>{var M,I;const E=(I=(M=T==null?void 0:T.target)==null?void 0:M.files)==null?void 0:I[0];if(E)try{let z="";if(E.type==="application/pdf"||E.name.toLowerCase().endsWith(".pdf")){const Q=await ie(E);let de=null;const Dt=/CV_DATA:([A-Za-z0-9+/=]+):CV_DATA/,be=Q.match(Dt);if(be)try{const oe=atob(be[1]);de=JSON.parse(oe)}catch{}if(de&&de.personalDetails&&de.workExperience){e(de),alert("CV data imported successfully from exported PDF!"),T.target.value="";return}if(z=Q,J(z)||z.trim().length<10){alert("This PDF has no selectable text (likely image-only). Try exporting with selectable text or import a .json/.txt instead."),T.target.value="";return}}else if(E.type==="text/plain"||E.name.toLowerCase().endsWith(".txt"))z=await E.text();else if(E.name.toLowerCase().endsWith(".json"))try{const Q=JSON.parse(await E.text());e(Q),alert("Imported CV from JSON."),T.target.value="";return}catch{alert("Invalid JSON file."),T.target.value="";return}else{alert("Please upload a PDF, TXT, or JSON file."),T.target.value="";return}const V=$_.parseCV(z);e(V.data),V.message&&console.info(V.message)}catch(z){console.error("Import error:",z),alert(`Error reading file: ${(z==null?void 0:z.message)??"Unknown error"}`)}finally{T!=null&&T.target&&(T.target.value="")}},ce=[{id:"personal",name:"Personal Details",icon:""},{id:"profile",name:"Profile",icon:""},{id:"experience",name:"Work Experience",icon:""},{id:"projects",name:"Personal Projects",icon:""},{id:"certificates",name:"Certificates",icon:""},{id:"education",name:"Education",icon:""},{id:"courses",name:"Additional Courses",icon:""}],he=()=>{switch(a){case"personal":return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Details"}),P.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),P.jsx("input",{type:"text",value:n.personalDetails.name,onChange:T=>c("name",T.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),P.jsx("input",{type:"text",value:n.personalDetails.phone,onChange:T=>c("phone",T.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address"}),P.jsx("textarea",{value:n.personalDetails.address,onChange:T=>c("address",T.target.value),rows:"3",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300 resize-none"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),P.jsx("input",{type:"email",value:n.personalDetails.email,onChange:T=>c("email",T.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),P.jsx("input",{type:"text",value:n.personalDetails.website,onChange:T=>c("website",T.target.value),className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]})]})]});case"profile":return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Professional Profile"}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Profile Description"}),P.jsx("textarea",{value:n.profile,onChange:T=>u(T.target.value),rows:"8",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300 resize-none",placeholder:"Write your professional profile here..."})]})]});case"experience":return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Work Experience"}),P.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(hp,{className:"h-4 w-4"}),"Add Job"]})]}),n.workExperience.map((T,E)=>P.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg",children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(up,{className:"h-5 w-5 text-gray-400"}),P.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Job #",E+1]})]}),P.jsx("button",{onClick:()=>v(E),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:P.jsx(dp,{className:"h-4 w-4"})})]}),P.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[P.jsx("input",{type:"text",value:T.title,onChange:M=>p(E,"title",M.target.value),placeholder:"Job Title",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"}),P.jsx("input",{type:"text",value:T.company,onChange:M=>p(E,"company",M.target.value),placeholder:"Company",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"}),P.jsx("input",{type:"text",value:T.dates,onChange:M=>p(E,"dates",M.target.value),placeholder:"Employment Dates",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"}),P.jsx("textarea",{value:T.description,onChange:M=>p(E,"description",M.target.value),placeholder:"Company Description",rows:"2",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300 resize-none"})]}),P.jsxs("div",{className:"mt-4",children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Responsibilities:"}),P.jsx("button",{onClick:()=>A(E),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),T.responsibilities.map((M,I)=>P.jsxs("div",{className:"flex gap-2 mb-3",children:[P.jsx("textarea",{value:M,onChange:z=>_(E,I,z.target.value),placeholder:"Responsibility description...",rows:"2",className:"flex-1 px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300 resize-none text-sm"}),P.jsx("button",{onClick:()=>g(E,I),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},I))]})]},E))]});case"projects":return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Projects"}),P.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(hp,{className:"h-4 w-4"}),"Add Project"]})]}),n.personalProjects.map((T,E)=>P.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg",children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(up,{className:"h-5 w-5 text-gray-400"}),P.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Project #",E+1]})]}),P.jsx("button",{onClick:()=>S(E),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:P.jsx(dp,{className:"h-4 w-4"})})]}),P.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[P.jsx("input",{type:"text",value:T.title,onChange:M=>x(E,"title",M.target.value),placeholder:"Project Title",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"}),P.jsx("input",{type:"text",value:T.technologies,onChange:M=>x(E,"technologies",M.target.value),placeholder:"Technologies Used",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]}),P.jsxs("div",{className:"mt-4",children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Project Details:"}),P.jsx("button",{onClick:()=>k(E),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),T.responsibilities.map((M,I)=>P.jsxs("div",{className:"flex gap-2 mb-3",children:[P.jsx("textarea",{value:M,onChange:z=>C(E,I,z.target.value),placeholder:"Project detail description...",rows:"2",className:"flex-1 px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300 resize-none text-sm"}),P.jsx("button",{onClick:()=>R(E,I),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},I))]})]},E))]});case"certificates":return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Certificates"}),P.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(hp,{className:"h-4 w-4"}),"Add Certificate"]})]}),n.certificates.map((T,E)=>P.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg",children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(up,{className:"h-5 w-5 text-gray-400"}),P.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Certificate #",E+1]})]}),P.jsx("button",{onClick:()=>j(E),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:P.jsx(dp,{className:"h-4 w-4"})})]}),P.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P.jsx("input",{type:"text",value:T.title,onChange:M=>D(E,"title",M.target.value),placeholder:"Certificate Title",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"}),P.jsx("textarea",{value:T.description,onChange:M=>D(E,"description",M.target.value),placeholder:"Certificate Description",rows:"3",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300 resize-none"})]})]},E))]});case"education":return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Education"}),P.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 p-6 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-lg",children:P.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Degree"}),P.jsx("input",{type:"text",value:n.education.degree,onChange:T=>h("degree",T.target.value),placeholder:"Degree Title",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"University"}),P.jsx("input",{type:"text",value:n.education.university,onChange:T=>h("university",T.target.value),placeholder:"University Name",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dates"}),P.jsx("input",{type:"text",value:n.education.dates,onChange:T=>h("dates",T.target.value),placeholder:"Study Period",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grade/Classification"}),P.jsx("input",{type:"text",value:n.education.grade,onChange:T=>h("grade",T.target.value),placeholder:"Grade or Classification",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300"})]})]})})]});case"courses":return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Additional Courses"}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Courses Information"}),P.jsx("textarea",{value:n.courses,onChange:T=>d(T.target.value),rows:"4",className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-all duration-300 resize-none",placeholder:"Information about additional courses, training, or qualifications..."})]})]});default:return null}};return P.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[P.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-xl border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50 backdrop-blur-xl bg-opacity-90 dark:bg-opacity-90",children:P.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:P.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[P.jsxs("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center gap-3",children:[P.jsx(Qy,{className:"h-8 w-8 text-purple-600"}),"CV Editor Pro"]}),P.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[P.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-xl p-2",children:[P.jsx(b_,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}),P.jsxs("select",{value:s,onChange:T=>r(T.target.value),className:"bg-transparent text-sm font-medium text-gray-700 dark:text-gray-300 focus:outline-none",children:[P.jsx("option",{value:"styled",children:"Rich Professional"}),P.jsx("option",{value:"plain",children:"Plain Professional"})]})]}),P.jsxs("button",{onClick:()=>i(!t),className:`flex items-center gap-2 px-6 py-3 rounded-xl text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl ${t?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":"bg-gradient-to-r from-gray-200 to-gray-300 text-gray-700 hover:from-gray-300 hover:to-gray-400 dark:from-gray-600 dark:to-gray-700 dark:text-gray-200"}`,children:[t?P.jsx(Ky,{className:"h-4 w-4"}):P.jsx(A_,{className:"h-4 w-4"}),t?"Preview Mode":"Edit Mode"]}),P.jsxs("label",{className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl text-sm font-medium hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl cursor-pointer",children:[P.jsx(Qy,{className:"h-4 w-4"}),"Import PDF",P.jsx("input",{type:"file",accept:".pdf",onChange:ae,className:"hidden"})]}),P.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl text-sm font-medium hover:from-green-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(w_,{className:"h-4 w-4"}),"Export PDF"]})]})]})})}),P.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:P.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[t&&P.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 border border-gray-200 dark:border-gray-700",children:[P.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Edit Sections"}),P.jsx("div",{className:"grid grid-cols-2 gap-2",children:ce.map(T=>P.jsxs("button",{onClick:()=>o(T.id),className:`flex items-center gap-2 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 ${a===T.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[P.jsx("span",{children:T.icon}),T.name]},T.id))})]}),P.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 border border-gray-200 dark:border-gray-700",children:he()})]}),P.jsx("div",{className:`${t?"lg:col-span-7":"lg:col-span-12"}`,children:P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[P.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-4",children:P.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[P.jsx(Ky,{className:"h-5 w-5"}),"Live Preview"]})}),P.jsx("div",{className:"p-8 max-h-screen overflow-y-auto",children:P.jsx("div",{className:"cv-preview",style:{fontFamily:s==="styled"?"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif":"Arial, sans-serif",lineHeight:"1.6",color:"#333",fontSize:"14px"},dangerouslySetInnerHTML:{__html:Zy(n,s).replace(/<!DOCTYPE[^>]*>/,"").replace(/<html[^>]*>/,"").replace(/<\/html>/,"").replace(/<head[^>]*>[\s\S]*?<\/head>/,"").replace(/<body[^>]*>/,"").replace(/<\/body>/,"")}})})]})})]})})]})};function Kk(){return P.jsx(Yk,{})}Nb(document.getElementById("root")).render(P.jsx(Kn.StrictMode,{children:P.jsx(Kk,{})}));
