var u1=Object.defineProperty;var cy=n=>{throw TypeError(n)};var h1=(n,e,t)=>e in n?u1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Y=(n,e,t)=>h1(n,typeof e!="symbol"?e+"":e,t),rp=(n,e,t)=>e.has(n)||cy("Cannot "+t);var l=(n,e,t)=>(rp(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?cy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),y=(n,e,t,i)=>(rp(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),v=(n,e,t)=>(rp(n,e,"access private method"),t);var Nt=(n,e,t,i)=>({set _(s){y(n,e,s,t)},get _(){return l(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var $v={exports:{}},Lf={},Uv={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh=Symbol.for("react.element"),d1=Symbol.for("react.portal"),f1=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),m1=Symbol.for("react.provider"),y1=Symbol.for("react.context"),v1=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),w1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),uy=Symbol.iterator;function x1(n){return n===null||typeof n!="object"?null:(n=uy&&n[uy]||n["@@iterator"],typeof n=="function"?n:null)}var Vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wv=Object.assign,Gv={};function Hl(n,e,t){this.props=n,this.context=e,this.refs=Gv,this.updater=t||Vv}Hl.prototype.isReactComponent={};Hl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Hl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Xv(){}Xv.prototype=Hl.prototype;function qm(n,e,t){this.props=n,this.context=e,this.refs=Gv,this.updater=t||Vv}var Ym=qm.prototype=new Xv;Ym.constructor=qm;Wv(Ym,Hl.prototype);Ym.isPureReactComponent=!0;var hy=Array.isArray,qv=Object.prototype.hasOwnProperty,Km={current:null},Yv={key:!0,ref:!0,__self:!0,__source:!0};function Kv(n,e,t){var i,s={},r=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)qv.call(e,i)&&!Yv.hasOwnProperty(i)&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return{$$typeof:gh,type:n,key:r,ref:a,props:s,_owner:Km.current}}function S1(n,e){return{$$typeof:gh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Qm(n){return typeof n=="object"&&n!==null&&n.$$typeof===gh}function E1(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var dy=/\/+/g;function ap(n,e){return typeof n=="object"&&n!==null&&n.key!=null?E1(""+n.key):e.toString(36)}function Yh(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case gh:case d1:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+ap(a,0):i,hy(s)?(t="",n!=null&&(t=n.replace(dy,"$&/")+"/"),Yh(s,e,t,"",function(u){return u})):s!=null&&(Qm(s)&&(s=S1(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(dy,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",hy(n))for(var o=0;o<n.length;o++){r=n[o];var c=i+ap(r,o);a+=Yh(r,e,t,c,s)}else if(c=x1(n),typeof c=="function")for(n=c.call(n),o=0;!(r=n.next()).done;)r=r.value,c=i+ap(r,o++),a+=Yh(r,e,t,c,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function kh(n,e,t){if(n==null)return n;var i=[],s=0;return Yh(n,i,"","",function(r){return e.call(t,r,s++)}),i}function _1(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var $t={current:null},Kh={transition:null},k1={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Kh,ReactCurrentOwner:Km};function Qv(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:kh,forEach:function(n,e,t){kh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return kh(n,function(){e++}),e},toArray:function(n){return kh(n,function(e){return e})||[]},only:function(n){if(!Qm(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ae.Component=Hl;ae.Fragment=f1;ae.Profiler=g1;ae.PureComponent=qm;ae.StrictMode=p1;ae.Suspense=b1;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k1;ae.act=Qv;ae.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Wv({},n.props),s=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=Km.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in e)qv.call(e,c)&&!Yv.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:gh,type:n.type,key:s,ref:r,props:i,_owner:a}};ae.createContext=function(n){return n={$$typeof:y1,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:m1,_context:n},n.Consumer=n};ae.createElement=Kv;ae.createFactory=function(n){var e=Kv.bind(null,n);return e.type=n,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(n){return{$$typeof:v1,render:n}};ae.isValidElement=Qm;ae.lazy=function(n){return{$$typeof:A1,_payload:{_status:-1,_result:n},_init:_1}};ae.memo=function(n,e){return{$$typeof:w1,type:n,compare:e===void 0?null:e}};ae.startTransition=function(n){var e=Kh.transition;Kh.transition={};try{n()}finally{Kh.transition=e}};ae.unstable_act=Qv;ae.useCallback=function(n,e){return $t.current.useCallback(n,e)};ae.useContext=function(n){return $t.current.useContext(n)};ae.useDebugValue=function(){};ae.useDeferredValue=function(n){return $t.current.useDeferredValue(n)};ae.useEffect=function(n,e){return $t.current.useEffect(n,e)};ae.useId=function(){return $t.current.useId()};ae.useImperativeHandle=function(n,e,t){return $t.current.useImperativeHandle(n,e,t)};ae.useInsertionEffect=function(n,e){return $t.current.useInsertionEffect(n,e)};ae.useLayoutEffect=function(n,e){return $t.current.useLayoutEffect(n,e)};ae.useMemo=function(n,e){return $t.current.useMemo(n,e)};ae.useReducer=function(n,e,t){return $t.current.useReducer(n,e,t)};ae.useRef=function(n){return $t.current.useRef(n)};ae.useState=function(n){return $t.current.useState(n)};ae.useSyncExternalStore=function(n,e,t){return $t.current.useSyncExternalStore(n,e,t)};ae.useTransition=function(){return $t.current.useTransition()};ae.version="18.3.1";Uv.exports=ae;var U=Uv.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1=U,T1=Symbol.for("react.element"),P1=Symbol.for("react.fragment"),R1=Object.prototype.hasOwnProperty,L1=C1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M1={key:!0,ref:!0,__self:!0,__source:!0};function Jv(n,e,t){var i,s={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)R1.call(e,i)&&!M1.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:T1,type:n,key:r,ref:a,props:s,_owner:L1.current}}Lf.Fragment=P1;Lf.jsx=Jv;Lf.jsxs=Jv;$v.exports=Lf;var C=$v.exports,Zv={exports:{}},An={},eb={exports:{}},tb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(R,W){var G=R.length;R.push(W);e:for(;0<G;){var le=G-1>>>1,re=R[le];if(0<s(re,W))R[le]=W,R[G]=re,G=le;else break e}}function t(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var W=R[0],G=R.pop();if(G!==W){R[0]=G;e:for(var le=0,re=R.length,Ee=re>>>1;le<Ee;){var At=2*(le+1)-1,Hn=R[At],Le=At+1,pe=R[Le];if(0>s(Hn,G))Le<re&&0>s(pe,Hn)?(R[le]=pe,R[Le]=G,le=Le):(R[le]=Hn,R[At]=G,le=At);else if(Le<re&&0>s(pe,G))R[le]=pe,R[Le]=G,le=Le;else break e}}return W}function s(R,W){var G=R.sortIndex-W.sortIndex;return G!==0?G:R.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var W=t(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=R)i(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=t(u)}}function S(R){if(w=!1,x(R),!m)if(t(c)!==null)m=!0,me(_);else{var W=t(u);W!==null&&V(S,W.startTime-R)}}function _(R,W){m=!1,w&&(w=!1,g(P),P=-1),p=!0;var G=f;try{for(x(W),d=t(c);d!==null&&(!(d.expirationTime>W)||R&&!H());){var le=d.callback;if(typeof le=="function"){d.callback=null,f=d.priorityLevel;var re=le(d.expirationTime<=W);W=n.unstable_now(),typeof re=="function"?d.callback=re:d===t(c)&&i(c),x(W)}else i(c);d=t(c)}if(d!==null)var Ee=!0;else{var At=t(u);At!==null&&V(S,At.startTime-W),Ee=!1}return Ee}finally{d=null,f=G,p=!1}}var k=!1,T=null,P=-1,F=5,O=-1;function H(){return!(n.unstable_now()-O<F)}function oe(){if(T!==null){var R=n.unstable_now();O=R;var W=!0;try{W=T(!0,R)}finally{W?ne():(k=!1,T=null)}}else k=!1}var ne;if(typeof b=="function")ne=function(){b(oe)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,fe=he.port2;he.port1.onmessage=oe,ne=function(){fe.postMessage(null)}}else ne=function(){E(oe,0)};function me(R){T=R,k||(k=!0,ne())}function V(R,W){P=E(function(){R(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,me(_))},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(R){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var G=f;f=W;try{return R()}finally{f=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=f;f=R;try{return W()}finally{f=G}},n.unstable_scheduleCallback=function(R,W,G){var le=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?le+G:le):G=le,R){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,R={id:h++,callback:W,priorityLevel:R,startTime:G,expirationTime:re,sortIndex:-1},G>le?(R.sortIndex=G,e(u,R),t(c)===null&&R===t(u)&&(w?(g(P),P=-1):w=!0,V(S,G-le))):(R.sortIndex=re,e(c,R),m||p||(m=!0,me(_))),R},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(R){var W=f;return function(){var G=f;f=W;try{return R.apply(this,arguments)}finally{f=G}}}})(tb);eb.exports=tb;var N1=eb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1=U,wn=N1;function M(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nb=new Set,Ic={};function Ka(n,e){Ml(n,e),Ml(n+"Capture",e)}function Ml(n,e){for(Ic[n]=e,n=0;n<e.length;n++)nb.add(e[n])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zp=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fy={},py={};function F1(n){return zp.call(py,n)?!0:zp.call(fy,n)?!1:D1.test(n)?py[n]=!0:(fy[n]=!0,!1)}function O1(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j1(n,e,t,i){if(e===null||typeof e>"u"||O1(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(n,e,t,i,s,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){wt[n]=new Ut(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];wt[e]=new Ut(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){wt[n]=new Ut(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){wt[n]=new Ut(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){wt[n]=new Ut(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){wt[n]=new Ut(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){wt[n]=new Ut(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){wt[n]=new Ut(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){wt[n]=new Ut(n,5,!1,n.toLowerCase(),null,!1,!1)});var Jm=/[\-:]([a-z])/g;function Zm(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Jm,Zm);wt[e]=new Ut(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Jm,Zm);wt[e]=new Ut(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Jm,Zm);wt[e]=new Ut(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){wt[n]=new Ut(n,1,!1,n.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){wt[n]=new Ut(n,1,!1,n.toLowerCase(),null,!0,!0)});function e0(n,e,t,i){var s=wt.hasOwnProperty(e)?wt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j1(e,t,s,i)&&(t=null),i||s===null?F1(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Cs=I1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ch=Symbol.for("react.element"),fo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),t0=Symbol.for("react.strict_mode"),Hp=Symbol.for("react.profiler"),ib=Symbol.for("react.provider"),sb=Symbol.for("react.context"),n0=Symbol.for("react.forward_ref"),Bp=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),i0=Symbol.for("react.memo"),Ms=Symbol.for("react.lazy"),rb=Symbol.for("react.offscreen"),gy=Symbol.iterator;function Ul(n){return n===null||typeof n!="object"?null:(n=gy&&n[gy]||n["@@iterator"],typeof n=="function"?n:null)}var He=Object.assign,op;function ec(n){if(op===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);op=e&&e[1]||""}return`
`+op+n}var lp=!1;function cp(n,e){if(!n||lp)return"";lp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==r[o]){var c=`
`+s[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{lp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ec(n):""}function z1(n){switch(n.tag){case 5:return ec(n.type);case 16:return ec("Lazy");case 13:return ec("Suspense");case 19:return ec("SuspenseList");case 0:case 2:case 15:return n=cp(n.type,!1),n;case 11:return n=cp(n.type.render,!1),n;case 1:return n=cp(n.type,!0),n;default:return""}}function Up(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case po:return"Fragment";case fo:return"Portal";case Hp:return"Profiler";case t0:return"StrictMode";case Bp:return"Suspense";case $p:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case sb:return(n.displayName||"Context")+".Consumer";case ib:return(n._context.displayName||"Context")+".Provider";case n0:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case i0:return e=n.displayName||null,e!==null?e:Up(n.type)||"Memo";case Ms:e=n._payload,n=n._init;try{return Up(n(e))}catch{}}return null}function H1(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Up(e);case 8:return e===t0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ab(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B1(n){var e=ab(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Th(n){n._valueTracker||(n._valueTracker=B1(n))}function ob(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=ab(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Od(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Vp(n,e){var t=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function my(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=wr(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lb(n,e){e=e.checked,e!=null&&e0(n,"checked",e,!1)}function Wp(n,e){lb(n,e);var t=wr(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Gp(n,e.type,t):e.hasOwnProperty("defaultValue")&&Gp(n,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function yy(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Gp(n,e,t){(e!=="number"||Od(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var tc=Array.isArray;function ko(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+wr(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Xp(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vy(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(M(92));if(tc(t)){if(1<t.length)throw Error(M(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:wr(t)}}function cb(n,e){var t=wr(e.value),i=wr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function by(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function ub(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qp(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?ub(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ph,hb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ph=Ph||document.createElement("div"),Ph.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ph.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Dc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(Ac).forEach(function(n){$1.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ac[e]=Ac[n]})});function db(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ac.hasOwnProperty(n)&&Ac[n]?(""+e).trim():e+"px"}function fb(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=db(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var U1=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yp(n,e){if(e){if(U1[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Kp(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qp=null;function s0(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Jp=null,Co=null,To=null;function wy(n){if(n=vh(n)){if(typeof Jp!="function")throw Error(M(280));var e=n.stateNode;e&&(e=Ff(e),Jp(n.stateNode,n.type,e))}}function pb(n){Co?To?To.push(n):To=[n]:Co=n}function gb(){if(Co){var n=Co,e=To;if(To=Co=null,wy(n),e)for(n=0;n<e.length;n++)wy(e[n])}}function mb(n,e){return n(e)}function yb(){}var up=!1;function vb(n,e,t){if(up)return n(e,t);up=!0;try{return mb(n,e,t)}finally{up=!1,(Co!==null||To!==null)&&(yb(),gb())}}function Fc(n,e){var t=n.stateNode;if(t===null)return null;var i=Ff(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(M(231,e,typeof t));return t}var Zp=!1;if(As)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{Zp=!1}function V1(n,e,t,i,s,r,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var xc=!1,jd=null,zd=!1,eg=null,W1={onError:function(n){xc=!0,jd=n}};function G1(n,e,t,i,s,r,a,o,c){xc=!1,jd=null,V1.apply(W1,arguments)}function X1(n,e,t,i,s,r,a,o,c){if(G1.apply(this,arguments),xc){if(xc){var u=jd;xc=!1,jd=null}else throw Error(M(198));zd||(zd=!0,eg=u)}}function Qa(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function bb(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Ay(n){if(Qa(n)!==n)throw Error(M(188))}function q1(n){var e=n.alternate;if(!e){if(e=Qa(n),e===null)throw Error(M(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return Ay(s),n;if(r===i)return Ay(s),e;r=r.sibling}throw Error(M(188))}if(t.return!==i.return)t=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a)throw Error(M(189))}}if(t.alternate!==i)throw Error(M(190))}if(t.tag!==3)throw Error(M(188));return t.stateNode.current===t?n:e}function wb(n){return n=q1(n),n!==null?Ab(n):null}function Ab(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Ab(n);if(e!==null)return e;n=n.sibling}return null}var xb=wn.unstable_scheduleCallback,xy=wn.unstable_cancelCallback,Y1=wn.unstable_shouldYield,K1=wn.unstable_requestPaint,We=wn.unstable_now,Q1=wn.unstable_getCurrentPriorityLevel,r0=wn.unstable_ImmediatePriority,Sb=wn.unstable_UserBlockingPriority,Hd=wn.unstable_NormalPriority,J1=wn.unstable_LowPriority,Eb=wn.unstable_IdlePriority,Mf=null,Ii=null;function Z1(n){if(Ii&&typeof Ii.onCommitFiberRoot=="function")try{Ii.onCommitFiberRoot(Mf,n,void 0,(n.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:nS,eS=Math.log,tS=Math.LN2;function nS(n){return n>>>=0,n===0?32:31-(eS(n)/tS|0)|0}var Rh=64,Lh=4194304;function nc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Bd(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?i=nc(o):(r&=a,r!==0&&(i=nc(r)))}else a=t&~s,a!==0?i=nc(a):r!==0&&(i=nc(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-oi(e),s=1<<t,i|=n[t],e&=~s;return i}function iS(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sS(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-oi(r),o=1<<a,c=s[a];c===-1?(!(o&t)||o&i)&&(s[a]=iS(o,e)):c<=e&&(n.expiredLanes|=o),r&=~o}}function tg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function _b(){var n=Rh;return Rh<<=1,!(Rh&4194240)&&(Rh=64),n}function hp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function mh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-oi(e),n[e]=t}function rS(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-oi(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function a0(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-oi(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Ae=0;function kb(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Cb,o0,Tb,Pb,Rb,ng=!1,Mh=[],dr=null,fr=null,pr=null,Oc=new Map,jc=new Map,Is=[],aS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sy(n,e){switch(n){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(e.pointerId)}}function Wl(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=vh(e),e!==null&&o0(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function oS(n,e,t,i,s){switch(e){case"focusin":return dr=Wl(dr,n,e,t,i,s),!0;case"dragenter":return fr=Wl(fr,n,e,t,i,s),!0;case"mouseover":return pr=Wl(pr,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Oc.set(r,Wl(Oc.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,jc.set(r,Wl(jc.get(r)||null,n,e,t,i,s)),!0}return!1}function Lb(n){var e=zr(n.target);if(e!==null){var t=Qa(e);if(t!==null){if(e=t.tag,e===13){if(e=bb(t),e!==null){n.blockedOn=e,Rb(n.priority,function(){Tb(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=ig(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Qp=i,t.target.dispatchEvent(i),Qp=null}else return e=vh(t),e!==null&&o0(e),n.blockedOn=t,!1;e.shift()}return!0}function Ey(n,e,t){Qh(n)&&t.delete(e)}function lS(){ng=!1,dr!==null&&Qh(dr)&&(dr=null),fr!==null&&Qh(fr)&&(fr=null),pr!==null&&Qh(pr)&&(pr=null),Oc.forEach(Ey),jc.forEach(Ey)}function Gl(n,e){n.blockedOn===e&&(n.blockedOn=null,ng||(ng=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,lS)))}function zc(n){function e(s){return Gl(s,n)}if(0<Mh.length){Gl(Mh[0],n);for(var t=1;t<Mh.length;t++){var i=Mh[t];i.blockedOn===n&&(i.blockedOn=null)}}for(dr!==null&&Gl(dr,n),fr!==null&&Gl(fr,n),pr!==null&&Gl(pr,n),Oc.forEach(e),jc.forEach(e),t=0;t<Is.length;t++)i=Is[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Is.length&&(t=Is[0],t.blockedOn===null);)Lb(t),t.blockedOn===null&&Is.shift()}var Po=Cs.ReactCurrentBatchConfig,$d=!0;function cS(n,e,t,i){var s=Ae,r=Po.transition;Po.transition=null;try{Ae=1,l0(n,e,t,i)}finally{Ae=s,Po.transition=r}}function uS(n,e,t,i){var s=Ae,r=Po.transition;Po.transition=null;try{Ae=4,l0(n,e,t,i)}finally{Ae=s,Po.transition=r}}function l0(n,e,t,i){if($d){var s=ig(n,e,t,i);if(s===null)Ap(n,e,i,Ud,t),Sy(n,i);else if(oS(s,n,e,t,i))i.stopPropagation();else if(Sy(n,i),e&4&&-1<aS.indexOf(n)){for(;s!==null;){var r=vh(s);if(r!==null&&Cb(r),r=ig(n,e,t,i),r===null&&Ap(n,e,i,Ud,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else Ap(n,e,i,null,t)}}var Ud=null;function ig(n,e,t,i){if(Ud=null,n=s0(i),n=zr(n),n!==null)if(e=Qa(n),e===null)n=null;else if(t=e.tag,t===13){if(n=bb(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ud=n,null}function Mb(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q1()){case r0:return 1;case Sb:return 4;case Hd:case J1:return 16;case Eb:return 536870912;default:return 16}default:return 16}}var ur=null,c0=null,Jh=null;function Nb(){if(Jh)return Jh;var n,e=c0,t=e.length,i,s="value"in ur?ur.value:ur.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===s[r-i];i++);return Jh=s.slice(n,1<i?1-i:void 0)}function Zh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Nh(){return!0}function _y(){return!1}function xn(n){function e(t,i,s,r,a){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Nh:_y,this.isPropagationStopped=_y,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Nh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Nh)},persist:function(){},isPersistent:Nh}),e}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u0=xn(Bl),yh=He({},Bl,{view:0,detail:0}),hS=xn(yh),dp,fp,Xl,Nf=He({},yh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h0,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xl&&(Xl&&n.type==="mousemove"?(dp=n.screenX-Xl.screenX,fp=n.screenY-Xl.screenY):fp=dp=0,Xl=n),dp)},movementY:function(n){return"movementY"in n?n.movementY:fp}}),ky=xn(Nf),dS=He({},Nf,{dataTransfer:0}),fS=xn(dS),pS=He({},yh,{relatedTarget:0}),pp=xn(pS),gS=He({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),mS=xn(gS),yS=He({},Bl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vS=xn(yS),bS=He({},Bl,{data:0}),Cy=xn(bS),wS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SS(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=xS[n])?!!e[n]:!1}function h0(){return SS}var ES=He({},yh,{key:function(n){if(n.key){var e=wS[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Zh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?AS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h0,charCode:function(n){return n.type==="keypress"?Zh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_S=xn(ES),kS=He({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ty=xn(kS),CS=He({},yh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h0}),TS=xn(CS),PS=He({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),RS=xn(PS),LS=He({},Nf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),MS=xn(LS),NS=[9,13,27,32],d0=As&&"CompositionEvent"in window,Sc=null;As&&"documentMode"in document&&(Sc=document.documentMode);var IS=As&&"TextEvent"in window&&!Sc,Ib=As&&(!d0||Sc&&8<Sc&&11>=Sc),Py=" ",Ry=!1;function Db(n,e){switch(n){case"keyup":return NS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fb(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var go=!1;function DS(n,e){switch(n){case"compositionend":return Fb(e);case"keypress":return e.which!==32?null:(Ry=!0,Py);case"textInput":return n=e.data,n===Py&&Ry?null:n;default:return null}}function FS(n,e){if(go)return n==="compositionend"||!d0&&Db(n,e)?(n=Nb(),Jh=c0=ur=null,go=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ib&&e.locale!=="ko"?null:e.data;default:return null}}var OS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ly(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!OS[n.type]:e==="textarea"}function Ob(n,e,t,i){pb(i),e=Vd(e,"onChange"),0<e.length&&(t=new u0("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ec=null,Hc=null;function jS(n){qb(n,0)}function If(n){var e=vo(n);if(ob(e))return n}function zS(n,e){if(n==="change")return e}var jb=!1;if(As){var gp;if(As){var mp="oninput"in document;if(!mp){var My=document.createElement("div");My.setAttribute("oninput","return;"),mp=typeof My.oninput=="function"}gp=mp}else gp=!1;jb=gp&&(!document.documentMode||9<document.documentMode)}function Ny(){Ec&&(Ec.detachEvent("onpropertychange",zb),Hc=Ec=null)}function zb(n){if(n.propertyName==="value"&&If(Hc)){var e=[];Ob(e,Hc,n,s0(n)),vb(jS,e)}}function HS(n,e,t){n==="focusin"?(Ny(),Ec=e,Hc=t,Ec.attachEvent("onpropertychange",zb)):n==="focusout"&&Ny()}function BS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return If(Hc)}function $S(n,e){if(n==="click")return If(e)}function US(n,e){if(n==="input"||n==="change")return If(e)}function VS(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ci=typeof Object.is=="function"?Object.is:VS;function Bc(n,e){if(ci(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!zp.call(e,s)||!ci(n[s],e[s]))return!1}return!0}function Iy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dy(n,e){var t=Iy(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Iy(t)}}function Hb(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Hb(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Bb(){for(var n=window,e=Od();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Od(n.document)}return e}function f0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function WS(n){var e=Bb(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Hb(t.ownerDocument.documentElement,t)){if(i!==null&&f0(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=Dy(t,r);var a=Dy(t,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var GS=As&&"documentMode"in document&&11>=document.documentMode,mo=null,sg=null,_c=null,rg=!1;function Fy(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;rg||mo==null||mo!==Od(i)||(i=mo,"selectionStart"in i&&f0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),_c&&Bc(_c,i)||(_c=i,i=Vd(sg,"onSelect"),0<i.length&&(e=new u0("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=mo)))}function Ih(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var yo={animationend:Ih("Animation","AnimationEnd"),animationiteration:Ih("Animation","AnimationIteration"),animationstart:Ih("Animation","AnimationStart"),transitionend:Ih("Transition","TransitionEnd")},yp={},$b={};As&&($b=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Df(n){if(yp[n])return yp[n];if(!yo[n])return n;var e=yo[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in $b)return yp[n]=e[t];return n}var Ub=Df("animationend"),Vb=Df("animationiteration"),Wb=Df("animationstart"),Gb=Df("transitionend"),Xb=new Map,Oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(n,e){Xb.set(n,e),Ka(e,[n])}for(var vp=0;vp<Oy.length;vp++){var bp=Oy[vp],XS=bp.toLowerCase(),qS=bp[0].toUpperCase()+bp.slice(1);kr(XS,"on"+qS)}kr(Ub,"onAnimationEnd");kr(Vb,"onAnimationIteration");kr(Wb,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(Gb,"onTransitionEnd");Ml("onMouseEnter",["mouseout","mouseover"]);Ml("onMouseLeave",["mouseout","mouseover"]);Ml("onPointerEnter",["pointerout","pointerover"]);Ml("onPointerLeave",["pointerout","pointerover"]);Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ic));function jy(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,X1(i,e,void 0,n),n.currentTarget=null}function qb(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==r&&s.isPropagationStopped())break e;jy(s,o,u),r=c}else for(a=0;a<i.length;a++){if(o=i[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==r&&s.isPropagationStopped())break e;jy(s,o,u),r=c}}}if(zd)throw n=eg,zd=!1,eg=null,n}function Te(n,e){var t=e[ug];t===void 0&&(t=e[ug]=new Set);var i=n+"__bubble";t.has(i)||(Yb(e,n,2,!1),t.add(i))}function wp(n,e,t){var i=0;e&&(i|=4),Yb(t,n,i,e)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function $c(n){if(!n[Dh]){n[Dh]=!0,nb.forEach(function(t){t!=="selectionchange"&&(YS.has(t)||wp(t,!1,n),wp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Dh]||(e[Dh]=!0,wp("selectionchange",!1,e))}}function Yb(n,e,t,i){switch(Mb(e)){case 1:var s=cS;break;case 4:s=uS;break;default:s=l0}t=s.bind(null,e,t,n),s=void 0,!Zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Ap(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;o!==null;){if(a=zr(o),a===null)return;if(c=a.tag,c===5||c===6){i=r=a;continue e}o=o.parentNode}}i=i.return}vb(function(){var u=r,h=s0(t),d=[];e:{var f=Xb.get(n);if(f!==void 0){var p=u0,m=n;switch(n){case"keypress":if(Zh(t)===0)break e;case"keydown":case"keyup":p=_S;break;case"focusin":m="focus",p=pp;break;case"focusout":m="blur",p=pp;break;case"beforeblur":case"afterblur":p=pp;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=fS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=TS;break;case Ub:case Vb:case Wb:p=mS;break;case Gb:p=RS;break;case"scroll":p=hS;break;case"wheel":p=MS;break;case"copy":case"cut":case"paste":p=vS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ty}var w=(e&4)!==0,E=!w&&n==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var b=u,x;b!==null;){x=b;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,g!==null&&(S=Fc(b,g),S!=null&&w.push(Uc(b,S,x)))),E)break;b=b.return}0<w.length&&(f=new p(f,m,null,t,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==Qp&&(m=t.relatedTarget||t.fromElement)&&(zr(m)||m[xs]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?zr(m):null,m!==null&&(E=Qa(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(w=ky,S="onMouseLeave",g="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(w=Ty,S="onPointerLeave",g="onPointerEnter",b="pointer"),E=p==null?f:vo(p),x=m==null?f:vo(m),f=new w(S,b+"leave",p,t,h),f.target=E,f.relatedTarget=x,S=null,zr(h)===u&&(w=new w(g,b+"enter",m,t,h),w.target=x,w.relatedTarget=E,S=w),E=S,p&&m)t:{for(w=p,g=m,b=0,x=w;x;x=no(x))b++;for(x=0,S=g;S;S=no(S))x++;for(;0<b-x;)w=no(w),b--;for(;0<x-b;)g=no(g),x--;for(;b--;){if(w===g||g!==null&&w===g.alternate)break t;w=no(w),g=no(g)}w=null}else w=null;p!==null&&zy(d,f,p,w,!1),m!==null&&E!==null&&zy(d,E,m,w,!0)}}e:{if(f=u?vo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=zS;else if(Ly(f))if(jb)_=US;else{_=BS;var k=HS}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=$S);if(_&&(_=_(n,u))){Ob(d,_,t,h);break e}k&&k(n,f,u),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Gp(f,"number",f.value)}switch(k=u?vo(u):window,n){case"focusin":(Ly(k)||k.contentEditable==="true")&&(mo=k,sg=u,_c=null);break;case"focusout":_c=sg=mo=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,Fy(d,t,h);break;case"selectionchange":if(GS)break;case"keydown":case"keyup":Fy(d,t,h)}var T;if(d0)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else go?Db(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(Ib&&t.locale!=="ko"&&(go||P!=="onCompositionStart"?P==="onCompositionEnd"&&go&&(T=Nb()):(ur=h,c0="value"in ur?ur.value:ur.textContent,go=!0)),k=Vd(u,P),0<k.length&&(P=new Cy(P,n,null,t,h),d.push({event:P,listeners:k}),T?P.data=T:(T=Fb(t),T!==null&&(P.data=T)))),(T=IS?DS(n,t):FS(n,t))&&(u=Vd(u,"onBeforeInput"),0<u.length&&(h=new Cy("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=T))}qb(d,e)})}function Uc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Vd(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Fc(n,t),r!=null&&i.unshift(Uc(n,r,s)),r=Fc(n,e),r!=null&&i.push(Uc(n,r,s))),n=n.return}return i}function no(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zy(n,e,t,i,s){for(var r=e._reactName,a=[];t!==null&&t!==i;){var o=t,c=o.alternate,u=o.stateNode;if(c!==null&&c===i)break;o.tag===5&&u!==null&&(o=u,s?(c=Fc(t,r),c!=null&&a.unshift(Uc(t,c,o))):s||(c=Fc(t,r),c!=null&&a.push(Uc(t,c,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var KS=/\r\n?/g,QS=/\u0000|\uFFFD/g;function Hy(n){return(typeof n=="string"?n:""+n).replace(KS,`
`).replace(QS,"")}function Fh(n,e,t){if(e=Hy(e),Hy(n)!==e&&t)throw Error(M(425))}function Wd(){}var ag=null,og=null;function lg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cg=typeof setTimeout=="function"?setTimeout:void 0,JS=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(n){return By.resolve(null).then(n).catch(eE)}:cg;function eE(n){setTimeout(function(){throw n})}function xp(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),zc(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);zc(e)}function gr(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function $y(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var $l=Math.random().toString(36).slice(2),Mi="__reactFiber$"+$l,Vc="__reactProps$"+$l,xs="__reactContainer$"+$l,ug="__reactEvents$"+$l,tE="__reactListeners$"+$l,nE="__reactHandles$"+$l;function zr(n){var e=n[Mi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xs]||t[Mi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=$y(n);n!==null;){if(t=n[Mi])return t;n=$y(n)}return e}n=t,t=n.parentNode}return null}function vh(n){return n=n[Mi]||n[xs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(M(33))}function Ff(n){return n[Vc]||null}var hg=[],bo=-1;function Cr(n){return{current:n}}function Re(n){0>bo||(n.current=hg[bo],hg[bo]=null,bo--)}function ke(n,e){bo++,hg[bo]=n.current,n.current=e}var Ar={},Mt=Cr(Ar),en=Cr(!1),Ha=Ar;function Nl(n,e){var t=n.type.contextTypes;if(!t)return Ar;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function tn(n){return n=n.childContextTypes,n!=null}function Gd(){Re(en),Re(Mt)}function Uy(n,e,t){if(Mt.current!==Ar)throw Error(M(168));ke(Mt,e),ke(en,t)}function Kb(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(M(108,H1(n)||"Unknown",s));return He({},t,i)}function Xd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ar,Ha=Mt.current,ke(Mt,n),ke(en,en.current),!0}function Vy(n,e,t){var i=n.stateNode;if(!i)throw Error(M(169));t?(n=Kb(n,e,Ha),i.__reactInternalMemoizedMergedChildContext=n,Re(en),Re(Mt),ke(Mt,n)):Re(en),ke(en,t)}var $i=null,Of=!1,Sp=!1;function Qb(n){$i===null?$i=[n]:$i.push(n)}function iE(n){Of=!0,Qb(n)}function Tr(){if(!Sp&&$i!==null){Sp=!0;var n=0,e=Ae;try{var t=$i;for(Ae=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}$i=null,Of=!1}catch(s){throw $i!==null&&($i=$i.slice(n+1)),xb(r0,Tr),s}finally{Ae=e,Sp=!1}}return null}var wo=[],Ao=0,qd=null,Yd=0,Rn=[],Ln=0,Ba=null,ps=1,gs="";function Lr(n,e){wo[Ao++]=Yd,wo[Ao++]=qd,qd=n,Yd=e}function Jb(n,e,t){Rn[Ln++]=ps,Rn[Ln++]=gs,Rn[Ln++]=Ba,Ba=n;var i=ps;n=gs;var s=32-oi(i)-1;i&=~(1<<s),t+=1;var r=32-oi(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ps=1<<32-oi(e)+s|t<<s|i,gs=r+n}else ps=1<<r|t<<s|i,gs=n}function p0(n){n.return!==null&&(Lr(n,1),Jb(n,1,0))}function g0(n){for(;n===qd;)qd=wo[--Ao],wo[Ao]=null,Yd=wo[--Ao],wo[Ao]=null;for(;n===Ba;)Ba=Rn[--Ln],Rn[Ln]=null,gs=Rn[--Ln],Rn[Ln]=null,ps=Rn[--Ln],Rn[Ln]=null}var vn=null,yn=null,Ne=!1,ri=null;function Zb(n,e){var t=In(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Wy(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,vn=n,yn=gr(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,vn=n,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ba!==null?{id:ps,overflow:gs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=In(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,vn=n,yn=null,!0):!1;default:return!1}}function dg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function fg(n){if(Ne){var e=yn;if(e){var t=e;if(!Wy(n,e)){if(dg(n))throw Error(M(418));e=gr(t.nextSibling);var i=vn;e&&Wy(n,e)?Zb(i,t):(n.flags=n.flags&-4097|2,Ne=!1,vn=n)}}else{if(dg(n))throw Error(M(418));n.flags=n.flags&-4097|2,Ne=!1,vn=n}}}function Gy(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vn=n}function Oh(n){if(n!==vn)return!1;if(!Ne)return Gy(n),Ne=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!lg(n.type,n.memoizedProps)),e&&(e=yn)){if(dg(n))throw ew(),Error(M(418));for(;e;)Zb(n,e),e=gr(e.nextSibling)}if(Gy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(M(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){yn=gr(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}yn=null}}else yn=vn?gr(n.stateNode.nextSibling):null;return!0}function ew(){for(var n=yn;n;)n=gr(n.nextSibling)}function Il(){yn=vn=null,Ne=!1}function m0(n){ri===null?ri=[n]:ri.push(n)}var sE=Cs.ReactCurrentBatchConfig;function ql(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(M(309));var i=t.stateNode}if(!i)throw Error(M(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=s.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(M(284));if(!t._owner)throw Error(M(290,n))}return n}function jh(n,e){throw n=Object.prototype.toString.call(e),Error(M(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Xy(n){var e=n._init;return e(n._payload)}function tw(n){function e(g,b){if(n){var x=g.deletions;x===null?(g.deletions=[b],g.flags|=16):x.push(b)}}function t(g,b){if(!n)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function i(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function s(g,b){return g=br(g,b),g.index=0,g.sibling=null,g}function r(g,b,x){return g.index=x,n?(x=g.alternate,x!==null?(x=x.index,x<b?(g.flags|=2,b):x):(g.flags|=2,b)):(g.flags|=1048576,b)}function a(g){return n&&g.alternate===null&&(g.flags|=2),g}function o(g,b,x,S){return b===null||b.tag!==6?(b=Rp(x,g.mode,S),b.return=g,b):(b=s(b,x),b.return=g,b)}function c(g,b,x,S){var _=x.type;return _===po?h(g,b,x.props.children,S,x.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ms&&Xy(_)===b.type)?(S=s(b,x.props),S.ref=ql(g,b,x),S.return=g,S):(S=ad(x.type,x.key,x.props,null,g.mode,S),S.ref=ql(g,b,x),S.return=g,S)}function u(g,b,x,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=Lp(x,g.mode,S),b.return=g,b):(b=s(b,x.children||[]),b.return=g,b)}function h(g,b,x,S,_){return b===null||b.tag!==7?(b=za(x,g.mode,S,_),b.return=g,b):(b=s(b,x),b.return=g,b)}function d(g,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Rp(""+b,g.mode,x),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ch:return x=ad(b.type,b.key,b.props,null,g.mode,x),x.ref=ql(g,null,b),x.return=g,x;case fo:return b=Lp(b,g.mode,x),b.return=g,b;case Ms:var S=b._init;return d(g,S(b._payload),x)}if(tc(b)||Ul(b))return b=za(b,g.mode,x,null),b.return=g,b;jh(g,b)}return null}function f(g,b,x,S){var _=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:o(g,b,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ch:return x.key===_?c(g,b,x,S):null;case fo:return x.key===_?u(g,b,x,S):null;case Ms:return _=x._init,f(g,b,_(x._payload),S)}if(tc(x)||Ul(x))return _!==null?null:h(g,b,x,S,null);jh(g,x)}return null}function p(g,b,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(x)||null,o(b,g,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ch:return g=g.get(S.key===null?x:S.key)||null,c(b,g,S,_);case fo:return g=g.get(S.key===null?x:S.key)||null,u(b,g,S,_);case Ms:var k=S._init;return p(g,b,x,k(S._payload),_)}if(tc(S)||Ul(S))return g=g.get(x)||null,h(b,g,S,_,null);jh(b,S)}return null}function m(g,b,x,S){for(var _=null,k=null,T=b,P=b=0,F=null;T!==null&&P<x.length;P++){T.index>P?(F=T,T=null):F=T.sibling;var O=f(g,T,x[P],S);if(O===null){T===null&&(T=F);break}n&&T&&O.alternate===null&&e(g,T),b=r(O,b,P),k===null?_=O:k.sibling=O,k=O,T=F}if(P===x.length)return t(g,T),Ne&&Lr(g,P),_;if(T===null){for(;P<x.length;P++)T=d(g,x[P],S),T!==null&&(b=r(T,b,P),k===null?_=T:k.sibling=T,k=T);return Ne&&Lr(g,P),_}for(T=i(g,T);P<x.length;P++)F=p(T,g,P,x[P],S),F!==null&&(n&&F.alternate!==null&&T.delete(F.key===null?P:F.key),b=r(F,b,P),k===null?_=F:k.sibling=F,k=F);return n&&T.forEach(function(H){return e(g,H)}),Ne&&Lr(g,P),_}function w(g,b,x,S){var _=Ul(x);if(typeof _!="function")throw Error(M(150));if(x=_.call(x),x==null)throw Error(M(151));for(var k=_=null,T=b,P=b=0,F=null,O=x.next();T!==null&&!O.done;P++,O=x.next()){T.index>P?(F=T,T=null):F=T.sibling;var H=f(g,T,O.value,S);if(H===null){T===null&&(T=F);break}n&&T&&H.alternate===null&&e(g,T),b=r(H,b,P),k===null?_=H:k.sibling=H,k=H,T=F}if(O.done)return t(g,T),Ne&&Lr(g,P),_;if(T===null){for(;!O.done;P++,O=x.next())O=d(g,O.value,S),O!==null&&(b=r(O,b,P),k===null?_=O:k.sibling=O,k=O);return Ne&&Lr(g,P),_}for(T=i(g,T);!O.done;P++,O=x.next())O=p(T,g,P,O.value,S),O!==null&&(n&&O.alternate!==null&&T.delete(O.key===null?P:O.key),b=r(O,b,P),k===null?_=O:k.sibling=O,k=O);return n&&T.forEach(function(oe){return e(g,oe)}),Ne&&Lr(g,P),_}function E(g,b,x,S){if(typeof x=="object"&&x!==null&&x.type===po&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ch:e:{for(var _=x.key,k=b;k!==null;){if(k.key===_){if(_=x.type,_===po){if(k.tag===7){t(g,k.sibling),b=s(k,x.props.children),b.return=g,g=b;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ms&&Xy(_)===k.type){t(g,k.sibling),b=s(k,x.props),b.ref=ql(g,k,x),b.return=g,g=b;break e}t(g,k);break}else e(g,k);k=k.sibling}x.type===po?(b=za(x.props.children,g.mode,S,x.key),b.return=g,g=b):(S=ad(x.type,x.key,x.props,null,g.mode,S),S.ref=ql(g,b,x),S.return=g,g=S)}return a(g);case fo:e:{for(k=x.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){t(g,b.sibling),b=s(b,x.children||[]),b.return=g,g=b;break e}else{t(g,b);break}else e(g,b);b=b.sibling}b=Lp(x,g.mode,S),b.return=g,g=b}return a(g);case Ms:return k=x._init,E(g,b,k(x._payload),S)}if(tc(x))return m(g,b,x,S);if(Ul(x))return w(g,b,x,S);jh(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(t(g,b.sibling),b=s(b,x),b.return=g,g=b):(t(g,b),b=Rp(x,g.mode,S),b.return=g,g=b),a(g)):t(g,b)}return E}var Dl=tw(!0),nw=tw(!1),Kd=Cr(null),Qd=null,xo=null,y0=null;function v0(){y0=xo=Qd=null}function b0(n){var e=Kd.current;Re(Kd),n._currentValue=e}function pg(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Ro(n,e){Qd=n,y0=xo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Jt=!0),n.firstContext=null)}function On(n){var e=n._currentValue;if(y0!==n)if(n={context:n,memoizedValue:e,next:null},xo===null){if(Qd===null)throw Error(M(308));xo=n,Qd.dependencies={lanes:0,firstContext:n}}else xo=xo.next=n;return e}var Hr=null;function w0(n){Hr===null?Hr=[n]:Hr.push(n)}function iw(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,w0(e)):(t.next=s.next,s.next=t),e.interleaved=t,Ss(n,i)}function Ss(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ns=!1;function A0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sw(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ms(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,de&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ss(n,t)}return s=i.interleaved,s===null?(e.next=e,w0(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ss(n,t)}function ed(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,a0(n,t)}}function qy(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Jd(n,e,t,i){var s=n.updateQueue;Ns=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?r=u:a.next=u,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;a=0,h=u=c=null,o=r;do{var f=o.lane,p=o.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,w=o;switch(f=e,p=t,w.tag){case 1:if(m=w.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=He({},d,f);break e;case 2:Ns=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Ua|=a,n.lanes=a,n.memoizedState=d}}function Yy(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(M(191,s));s.call(i)}}}var bh={},Di=Cr(bh),Wc=Cr(bh),Gc=Cr(bh);function Br(n){if(n===bh)throw Error(M(174));return n}function x0(n,e){switch(ke(Gc,e),ke(Wc,n),ke(Di,bh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qp(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=qp(e,n)}Re(Di),ke(Di,e)}function Fl(){Re(Di),Re(Wc),Re(Gc)}function rw(n){Br(Gc.current);var e=Br(Di.current),t=qp(e,n.type);e!==t&&(ke(Wc,n),ke(Di,t))}function S0(n){Wc.current===n&&(Re(Di),Re(Wc))}var je=Cr(0);function Zd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ep=[];function E0(){for(var n=0;n<Ep.length;n++)Ep[n]._workInProgressVersionPrimary=null;Ep.length=0}var td=Cs.ReactCurrentDispatcher,_p=Cs.ReactCurrentBatchConfig,$a=0,ze=null,nt=null,ht=null,ef=!1,kc=!1,Xc=0,rE=0;function xt(){throw Error(M(321))}function _0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ci(n[t],e[t]))return!1;return!0}function k0(n,e,t,i,s,r){if($a=r,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,td.current=n===null||n.memoizedState===null?cE:uE,n=t(i,s),kc){r=0;do{if(kc=!1,Xc=0,25<=r)throw Error(M(301));r+=1,ht=nt=null,e.updateQueue=null,td.current=hE,n=t(i,s)}while(kc)}if(td.current=tf,e=nt!==null&&nt.next!==null,$a=0,ht=nt=ze=null,ef=!1,e)throw Error(M(300));return n}function C0(){var n=Xc!==0;return Xc=0,n}function fi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?ze.memoizedState=ht=n:ht=ht.next=n,ht}function jn(){if(nt===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var e=ht===null?ze.memoizedState:ht.next;if(e!==null)ht=e,nt=n;else{if(n===null)throw Error(M(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ht===null?ze.memoizedState=ht=n:ht=ht.next=n}return ht}function qc(n,e){return typeof e=="function"?e(n):e}function kp(n){var e=jn(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var i=nt,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var o=a=null,c=null,u=r;do{var h=u.lane;if(($a&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,a=i):c=c.next=d,ze.lanes|=h,Ua|=h}u=u.next}while(u!==null&&u!==r);c===null?a=i:c.next=o,ci(i,e.memoizedState)||(Jt=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,ze.lanes|=r,Ua|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Cp(n){var e=jn(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do r=n(r,a.action),a=a.next;while(a!==s);ci(r,e.memoizedState)||(Jt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function aw(){}function ow(n,e){var t=ze,i=jn(),s=e(),r=!ci(i.memoizedState,s);if(r&&(i.memoizedState=s,Jt=!0),i=i.queue,T0(uw.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||ht!==null&&ht.memoizedState.tag&1){if(t.flags|=2048,Yc(9,cw.bind(null,t,i,s,e),void 0,null),dt===null)throw Error(M(349));$a&30||lw(t,e,s)}return s}function lw(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function cw(n,e,t,i){e.value=t,e.getSnapshot=i,hw(e)&&dw(n)}function uw(n,e,t){return t(function(){hw(e)&&dw(n)})}function hw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ci(n,t)}catch{return!0}}function dw(n){var e=Ss(n,1);e!==null&&li(e,n,1,-1)}function Ky(n){var e=fi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:n},e.queue=n,n=n.dispatch=lE.bind(null,ze,n),[e.memoizedState,n]}function Yc(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function fw(){return jn().memoizedState}function nd(n,e,t,i){var s=fi();ze.flags|=n,s.memoizedState=Yc(1|e,t,void 0,i===void 0?null:i)}function jf(n,e,t,i){var s=jn();i=i===void 0?null:i;var r=void 0;if(nt!==null){var a=nt.memoizedState;if(r=a.destroy,i!==null&&_0(i,a.deps)){s.memoizedState=Yc(e,t,r,i);return}}ze.flags|=n,s.memoizedState=Yc(1|e,t,r,i)}function Qy(n,e){return nd(8390656,8,n,e)}function T0(n,e){return jf(2048,8,n,e)}function pw(n,e){return jf(4,2,n,e)}function gw(n,e){return jf(4,4,n,e)}function mw(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function yw(n,e,t){return t=t!=null?t.concat([n]):null,jf(4,4,mw.bind(null,e,n),t)}function P0(){}function vw(n,e){var t=jn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&_0(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function bw(n,e){var t=jn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&_0(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function ww(n,e,t){return $a&21?(ci(t,e)||(t=_b(),ze.lanes|=t,Ua|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=t)}function aE(n,e){var t=Ae;Ae=t!==0&&4>t?t:4,n(!0);var i=_p.transition;_p.transition={};try{n(!1),e()}finally{Ae=t,_p.transition=i}}function Aw(){return jn().memoizedState}function oE(n,e,t){var i=vr(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},xw(n))Sw(e,t);else if(t=iw(n,e,t,i),t!==null){var s=jt();li(t,n,i,s),Ew(t,e,i)}}function lE(n,e,t){var i=vr(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(xw(n))Sw(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(s.hasEagerState=!0,s.eagerState=o,ci(o,a)){var c=e.interleaved;c===null?(s.next=s,w0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=iw(n,e,s,i),t!==null&&(s=jt(),li(t,n,i,s),Ew(t,e,i))}}function xw(n){var e=n.alternate;return n===ze||e!==null&&e===ze}function Sw(n,e){kc=ef=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Ew(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,a0(n,t)}}var tf={readContext:On,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},cE={readContext:On,useCallback:function(n,e){return fi().memoizedState=[n,e===void 0?null:e],n},useContext:On,useEffect:Qy,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,nd(4194308,4,mw.bind(null,e,n),t)},useLayoutEffect:function(n,e){return nd(4194308,4,n,e)},useInsertionEffect:function(n,e){return nd(4,2,n,e)},useMemo:function(n,e){var t=fi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=fi();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=oE.bind(null,ze,n),[i.memoizedState,n]},useRef:function(n){var e=fi();return n={current:n},e.memoizedState=n},useState:Ky,useDebugValue:P0,useDeferredValue:function(n){return fi().memoizedState=n},useTransition:function(){var n=Ky(!1),e=n[0];return n=aE.bind(null,n[1]),fi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=ze,s=fi();if(Ne){if(t===void 0)throw Error(M(407));t=t()}else{if(t=e(),dt===null)throw Error(M(349));$a&30||lw(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,Qy(uw.bind(null,i,r,n),[n]),i.flags|=2048,Yc(9,cw.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=fi(),e=dt.identifierPrefix;if(Ne){var t=gs,i=ps;t=(i&~(1<<32-oi(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Xc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=rE++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},uE={readContext:On,useCallback:vw,useContext:On,useEffect:T0,useImperativeHandle:yw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:bw,useReducer:kp,useRef:fw,useState:function(){return kp(qc)},useDebugValue:P0,useDeferredValue:function(n){var e=jn();return ww(e,nt.memoizedState,n)},useTransition:function(){var n=kp(qc)[0],e=jn().memoizedState;return[n,e]},useMutableSource:aw,useSyncExternalStore:ow,useId:Aw,unstable_isNewReconciler:!1},hE={readContext:On,useCallback:vw,useContext:On,useEffect:T0,useImperativeHandle:yw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:bw,useReducer:Cp,useRef:fw,useState:function(){return Cp(qc)},useDebugValue:P0,useDeferredValue:function(n){var e=jn();return nt===null?e.memoizedState=n:ww(e,nt.memoizedState,n)},useTransition:function(){var n=Cp(qc)[0],e=jn().memoizedState;return[n,e]},useMutableSource:aw,useSyncExternalStore:ow,useId:Aw,unstable_isNewReconciler:!1};function Un(n,e){if(n&&n.defaultProps){e=He({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function gg(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:He({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var zf={isMounted:function(n){return(n=n._reactInternals)?Qa(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=jt(),s=vr(n),r=ms(i,s);r.payload=e,t!=null&&(r.callback=t),e=mr(n,r,s),e!==null&&(li(e,n,s,i),ed(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=jt(),s=vr(n),r=ms(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=mr(n,r,s),e!==null&&(li(e,n,s,i),ed(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=jt(),i=vr(n),s=ms(t,i);s.tag=2,e!=null&&(s.callback=e),e=mr(n,s,i),e!==null&&(li(e,n,i,t),ed(e,n,i))}};function Jy(n,e,t,i,s,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!Bc(t,i)||!Bc(s,r):!0}function _w(n,e,t){var i=!1,s=Ar,r=e.contextType;return typeof r=="object"&&r!==null?r=On(r):(s=tn(e)?Ha:Mt.current,i=e.contextTypes,r=(i=i!=null)?Nl(n,s):Ar),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zf,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function Zy(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&zf.enqueueReplaceState(e,e.state,null)}function mg(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},A0(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=On(r):(r=tn(e)?Ha:Mt.current,s.context=Nl(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(gg(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zf.enqueueReplaceState(s,s.state,null),Jd(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Ol(n,e){try{var t="",i=e;do t+=z1(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function Tp(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function yg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var dE=typeof WeakMap=="function"?WeakMap:Map;function kw(n,e,t){t=ms(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){sf||(sf=!0,Cg=i),yg(n,e)},t}function Cw(n,e,t){t=ms(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){yg(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){yg(n,e),typeof i!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function ev(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new dE;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=kE.bind(null,n,e,t),e.then(n,n))}function tv(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function nv(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ms(-1,1),e.tag=2,mr(t,e,1))),t.lanes|=1),n)}var fE=Cs.ReactCurrentOwner,Jt=!1;function Ft(n,e,t,i){e.child=n===null?nw(e,null,t,i):Dl(e,n.child,t,i)}function iv(n,e,t,i,s){t=t.render;var r=e.ref;return Ro(e,s),i=k0(n,e,t,i,r,s),t=C0(),n!==null&&!Jt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Es(n,e,s)):(Ne&&t&&p0(e),e.flags|=1,Ft(n,e,i,s),e.child)}function sv(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!O0(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,Tw(n,e,r,i,s)):(n=ad(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:Bc,t(a,i)&&n.ref===e.ref)return Es(n,e,s)}return e.flags|=1,n=br(r,i),n.ref=e.ref,n.return=e,e.child=n}function Tw(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Bc(r,i)&&n.ref===e.ref)if(Jt=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Jt=!0);else return e.lanes=n.lanes,Es(n,e,s)}return vg(n,e,t,i,s)}function Pw(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Eo,gn),gn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ke(Eo,gn),gn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,ke(Eo,gn),gn|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,ke(Eo,gn),gn|=i;return Ft(n,e,s,t),e.child}function Rw(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function vg(n,e,t,i,s){var r=tn(t)?Ha:Mt.current;return r=Nl(e,r),Ro(e,s),t=k0(n,e,t,i,r,s),i=C0(),n!==null&&!Jt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Es(n,e,s)):(Ne&&i&&p0(e),e.flags|=1,Ft(n,e,t,s),e.child)}function rv(n,e,t,i,s){if(tn(t)){var r=!0;Xd(e)}else r=!1;if(Ro(e,s),e.stateNode===null)id(n,e),_w(e,t,i),mg(e,t,i,s),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=On(u):(u=tn(t)?Ha:Mt.current,u=Nl(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||c!==u)&&Zy(e,a,i,u),Ns=!1;var f=e.memoizedState;a.state=f,Jd(e,i,a,s),c=e.memoizedState,o!==i||f!==c||en.current||Ns?(typeof h=="function"&&(gg(e,t,h,i),c=e.memoizedState),(o=Ns||Jy(e,t,o,i,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,sw(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:Un(e.type,o),a.props=u,d=e.pendingProps,f=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=On(c):(c=tn(t)?Ha:Mt.current,c=Nl(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==c)&&Zy(e,a,i,c),Ns=!1,f=e.memoizedState,a.state=f,Jd(e,i,a,s);var m=e.memoizedState;o!==d||f!==m||en.current||Ns?(typeof p=="function"&&(gg(e,t,p,i),m=e.memoizedState),(u=Ns||Jy(e,t,u,i,f,m,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,m,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),a.props=i,a.state=m,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return bg(n,e,t,i,r,s)}function bg(n,e,t,i,s,r){Rw(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&Vy(e,t,!1),Es(n,e,r);i=e.stateNode,fE.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Dl(e,n.child,null,r),e.child=Dl(e,null,o,r)):Ft(n,e,o,r),e.memoizedState=i.state,s&&Vy(e,t,!0),e.child}function Lw(n){var e=n.stateNode;e.pendingContext?Uy(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Uy(n,e.context,!1),x0(n,e.containerInfo)}function av(n,e,t,i,s){return Il(),m0(s),e.flags|=256,Ft(n,e,t,i),e.child}var wg={dehydrated:null,treeContext:null,retryLane:0};function Ag(n){return{baseLanes:n,cachePool:null,transitions:null}}function Mw(n,e,t){var i=e.pendingProps,s=je.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),ke(je,s&1),n===null)return fg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,r?(i=e.mode,r=e.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=$f(a,i,0,null),n=za(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=Ag(t),e.memoizedState=wg,n):R0(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return pE(n,e,a,i,o,s,t);if(r){r=i.fallback,a=e.mode,s=n.child,o=s.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=br(s,c),i.subtreeFlags=s.subtreeFlags&14680064),o!==null?r=br(o,r):(r=za(r,a,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=n.child.memoizedState,a=a===null?Ag(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=wg,i}return r=n.child,n=r.sibling,i=br(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function R0(n,e){return e=$f({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function zh(n,e,t,i){return i!==null&&m0(i),Dl(e,n.child,null,t),n=R0(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function pE(n,e,t,i,s,r,a){if(t)return e.flags&256?(e.flags&=-257,i=Tp(Error(M(422))),zh(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=$f({mode:"visible",children:i.children},s,0,null),r=za(r,s,a,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Dl(e,n.child,null,a),e.child.memoizedState=Ag(a),e.memoizedState=wg,r);if(!(e.mode&1))return zh(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(M(419)),i=Tp(r,i,void 0),zh(n,e,a,i)}if(o=(a&n.childLanes)!==0,Jt||o){if(i=dt,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Ss(n,s),li(i,n,s,-1))}return F0(),i=Tp(Error(M(421))),zh(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=CE.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,yn=gr(s.nextSibling),vn=e,Ne=!0,ri=null,n!==null&&(Rn[Ln++]=ps,Rn[Ln++]=gs,Rn[Ln++]=Ba,ps=n.id,gs=n.overflow,Ba=e),e=R0(e,i.children),e.flags|=4096,e)}function ov(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),pg(n.return,e,t)}function Pp(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function Nw(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Ft(n,e,i.children,t),i=je.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ov(n,t,e);else if(n.tag===19)ov(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(ke(je,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Zd(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Pp(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Zd(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Pp(e,!0,t,null,r);break;case"together":Pp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function id(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Es(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ua|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(M(153));if(e.child!==null){for(n=e.child,t=br(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=br(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function gE(n,e,t){switch(e.tag){case 3:Lw(e),Il();break;case 5:rw(e);break;case 1:tn(e.type)&&Xd(e);break;case 4:x0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ke(Kd,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ke(je,je.current&1),e.flags|=128,null):t&e.child.childLanes?Mw(n,e,t):(ke(je,je.current&1),n=Es(n,e,t),n!==null?n.sibling:null);ke(je,je.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Nw(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(je,je.current),i)break;return null;case 22:case 23:return e.lanes=0,Pw(n,e,t)}return Es(n,e,t)}var Iw,xg,Dw,Fw;Iw=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};xg=function(){};Dw=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Br(Di.current);var r=null;switch(t){case"input":s=Vp(n,s),i=Vp(n,i),r=[];break;case"select":s=He({},s,{value:void 0}),i=He({},i,{value:void 0}),r=[];break;case"textarea":s=Xp(n,s),i=Xp(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Wd)}Yp(t,i);var a;t=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ic.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(o=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ic.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Te("scroll",n),r||o===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Fw=function(n,e,t,i){t!==i&&(e.flags|=4)};function Yl(n,e){if(!Ne)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function St(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function mE(n,e,t){var i=e.pendingProps;switch(g0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return tn(e.type)&&Gd(),St(e),null;case 3:return i=e.stateNode,Fl(),Re(en),Re(Mt),E0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Oh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ri!==null&&(Rg(ri),ri=null))),xg(n,e),St(e),null;case 5:S0(e);var s=Br(Gc.current);if(t=e.type,n!==null&&e.stateNode!=null)Dw(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(M(166));return St(e),null}if(n=Br(Di.current),Oh(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Mi]=e,i[Vc]=r,n=(e.mode&1)!==0,t){case"dialog":Te("cancel",i),Te("close",i);break;case"iframe":case"object":case"embed":Te("load",i);break;case"video":case"audio":for(s=0;s<ic.length;s++)Te(ic[s],i);break;case"source":Te("error",i);break;case"img":case"image":case"link":Te("error",i),Te("load",i);break;case"details":Te("toggle",i);break;case"input":my(i,r),Te("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Te("invalid",i);break;case"textarea":vy(i,r),Te("invalid",i)}Yp(t,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&Fh(i.textContent,o,n),s=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&Fh(i.textContent,o,n),s=["children",""+o]):Ic.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Te("scroll",i)}switch(t){case"input":Th(i),yy(i,r,!0);break;case"textarea":Th(i),by(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Wd)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ub(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[Mi]=e,n[Vc]=i,Iw(n,e,!1,!1),e.stateNode=n;e:{switch(a=Kp(t,i),t){case"dialog":Te("cancel",n),Te("close",n),s=i;break;case"iframe":case"object":case"embed":Te("load",n),s=i;break;case"video":case"audio":for(s=0;s<ic.length;s++)Te(ic[s],n);s=i;break;case"source":Te("error",n),s=i;break;case"img":case"image":case"link":Te("error",n),Te("load",n),s=i;break;case"details":Te("toggle",n),s=i;break;case"input":my(n,i),s=Vp(n,i),Te("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=He({},i,{value:void 0}),Te("invalid",n);break;case"textarea":vy(n,i),s=Xp(n,i),Te("invalid",n);break;default:s=i}Yp(t,s),o=s;for(r in o)if(o.hasOwnProperty(r)){var c=o[r];r==="style"?fb(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hb(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Dc(n,c):typeof c=="number"&&Dc(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ic.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Te("scroll",n):c!=null&&e0(n,r,c,a))}switch(t){case"input":Th(n),yy(n,i,!1);break;case"textarea":Th(n),by(n);break;case"option":i.value!=null&&n.setAttribute("value",""+wr(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?ko(n,!!i.multiple,r,!1):i.defaultValue!=null&&ko(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Wd)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(n&&e.stateNode!=null)Fw(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(M(166));if(t=Br(Gc.current),Br(Di.current),Oh(e)){if(i=e.stateNode,t=e.memoizedProps,i[Mi]=e,(r=i.nodeValue!==t)&&(n=vn,n!==null))switch(n.tag){case 3:Fh(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fh(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Mi]=e,e.stateNode=i}return St(e),null;case 13:if(Re(je),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ne&&yn!==null&&e.mode&1&&!(e.flags&128))ew(),Il(),e.flags|=98560,r=!1;else if(r=Oh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(M(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(M(317));r[Mi]=e}else Il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),r=!1}else ri!==null&&(Rg(ri),ri=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||je.current&1?st===0&&(st=3):F0())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Fl(),xg(n,e),n===null&&$c(e.stateNode.containerInfo),St(e),null;case 10:return b0(e.type._context),St(e),null;case 17:return tn(e.type)&&Gd(),St(e),null;case 19:if(Re(je),r=e.memoizedState,r===null)return St(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Yl(r,!1);else{if(st!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Zd(n),a!==null){for(e.flags|=128,Yl(r,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ke(je,je.current&1|2),e.child}n=n.sibling}r.tail!==null&&We()>jl&&(e.flags|=128,i=!0,Yl(r,!1),e.lanes=4194304)}else{if(!i)if(n=Zd(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Yl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Ne)return St(e),null}else 2*We()-r.renderingStartTime>jl&&t!==1073741824&&(e.flags|=128,i=!0,Yl(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=We(),e.sibling=null,t=je.current,ke(je,i?t&1|2:t&1),e):(St(e),null);case 22:case 23:return D0(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gn&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function yE(n,e){switch(g0(e),e.tag){case 1:return tn(e.type)&&Gd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Fl(),Re(en),Re(Mt),E0(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return S0(e),null;case 13:if(Re(je),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Il()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Re(je),null;case 4:return Fl(),null;case 10:return b0(e.type._context),null;case 22:case 23:return D0(),null;case 24:return null;default:return null}}var Hh=!1,Rt=!1,vE=typeof WeakSet=="function"?WeakSet:Set,z=null;function So(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){$e(n,e,i)}else t.current=null}function Sg(n,e,t){try{t()}catch(i){$e(n,e,i)}}var lv=!1;function bE(n,e){if(ag=$d,n=Bb(),f0(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(o=a+s),d!==r||i!==0&&d.nodeType!==3||(c=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===s&&(o=a),f===r&&++h===i&&(c=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(og={focusedElem:n,selectionRange:t},$d=!1,z=e;z!==null;)if(e=z,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,z=n;else for(;z!==null;){e=z;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,E=m.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Un(e.type,w),E);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){$e(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}return m=lv,lv=!1,m}function Cc(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&Sg(e,t,r)}s=s.next}while(s!==i)}}function Hf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Eg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Ow(n){var e=n.alternate;e!==null&&(n.alternate=null,Ow(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Mi],delete e[Vc],delete e[ug],delete e[tE],delete e[nE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function jw(n){return n.tag===5||n.tag===3||n.tag===4}function cv(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _g(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Wd));else if(i!==4&&(n=n.child,n!==null))for(_g(n,e,t),n=n.sibling;n!==null;)_g(n,e,t),n=n.sibling}function kg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(kg(n,e,t),n=n.sibling;n!==null;)kg(n,e,t),n=n.sibling}var yt=null,si=!1;function Ps(n,e,t){for(t=t.child;t!==null;)zw(n,e,t),t=t.sibling}function zw(n,e,t){if(Ii&&typeof Ii.onCommitFiberUnmount=="function")try{Ii.onCommitFiberUnmount(Mf,t)}catch{}switch(t.tag){case 5:Rt||So(t,e);case 6:var i=yt,s=si;yt=null,Ps(n,e,t),yt=i,si=s,yt!==null&&(si?(n=yt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):yt.removeChild(t.stateNode));break;case 18:yt!==null&&(si?(n=yt,t=t.stateNode,n.nodeType===8?xp(n.parentNode,t):n.nodeType===1&&xp(n,t),zc(n)):xp(yt,t.stateNode));break;case 4:i=yt,s=si,yt=t.stateNode.containerInfo,si=!0,Ps(n,e,t),yt=i,si=s;break;case 0:case 11:case 14:case 15:if(!Rt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&Sg(t,e,a),s=s.next}while(s!==i)}Ps(n,e,t);break;case 1:if(!Rt&&(So(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){$e(t,e,o)}Ps(n,e,t);break;case 21:Ps(n,e,t);break;case 22:t.mode&1?(Rt=(i=Rt)||t.memoizedState!==null,Ps(n,e,t),Rt=i):Ps(n,e,t);break;default:Ps(n,e,t)}}function uv(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new vE),e.forEach(function(i){var s=TE.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Bn(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:yt=o.stateNode,si=!1;break e;case 3:yt=o.stateNode.containerInfo,si=!0;break e;case 4:yt=o.stateNode.containerInfo,si=!0;break e}o=o.return}if(yt===null)throw Error(M(160));zw(r,a,s),yt=null,si=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){$e(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hw(e,n),e=e.sibling}function Hw(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Bn(e,n),hi(n),i&4){try{Cc(3,n,n.return),Hf(3,n)}catch(w){$e(n,n.return,w)}try{Cc(5,n,n.return)}catch(w){$e(n,n.return,w)}}break;case 1:Bn(e,n),hi(n),i&512&&t!==null&&So(t,t.return);break;case 5:if(Bn(e,n),hi(n),i&512&&t!==null&&So(t,t.return),n.flags&32){var s=n.stateNode;try{Dc(s,"")}catch(w){$e(n,n.return,w)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&lb(s,r),Kp(o,a);var u=Kp(o,r);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?fb(s,d):h==="dangerouslySetInnerHTML"?hb(s,d):h==="children"?Dc(s,d):e0(s,h,d,u)}switch(o){case"input":Wp(s,r);break;case"textarea":cb(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?ko(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?ko(s,!!r.multiple,r.defaultValue,!0):ko(s,!!r.multiple,r.multiple?[]:"",!1))}s[Vc]=r}catch(w){$e(n,n.return,w)}}break;case 6:if(Bn(e,n),hi(n),i&4){if(n.stateNode===null)throw Error(M(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(w){$e(n,n.return,w)}}break;case 3:if(Bn(e,n),hi(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{zc(e.containerInfo)}catch(w){$e(n,n.return,w)}break;case 4:Bn(e,n),hi(n);break;case 13:Bn(e,n),hi(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(N0=We())),i&4&&uv(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Rt=(u=Rt)||h,Bn(e,n),Rt=u):Bn(e,n),hi(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(z=n,h=n.child;h!==null;){for(d=z=h;z!==null;){switch(f=z,p=f.child,f.tag){case 0:case 11:case 14:case 15:Cc(4,f,f.return);break;case 1:So(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(w){$e(i,t,w)}}break;case 5:So(f,f.return);break;case 22:if(f.memoizedState!==null){dv(d);continue}}p!==null?(p.return=f,z=p):dv(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=db("display",a))}catch(w){$e(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){$e(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Bn(e,n),hi(n),i&4&&uv(n);break;case 21:break;default:Bn(e,n),hi(n)}}function hi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(jw(t)){var i=t;break e}t=t.return}throw Error(M(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Dc(s,""),i.flags&=-33);var r=cv(n);kg(n,r,s);break;case 3:case 4:var a=i.stateNode.containerInfo,o=cv(n);_g(n,o,a);break;default:throw Error(M(161))}}catch(c){$e(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function wE(n,e,t){z=n,Bw(n)}function Bw(n,e,t){for(var i=(n.mode&1)!==0;z!==null;){var s=z,r=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Hh;if(!a){var o=s.alternate,c=o!==null&&o.memoizedState!==null||Rt;o=Hh;var u=Rt;if(Hh=a,(Rt=c)&&!u)for(z=s;z!==null;)a=z,c=a.child,a.tag===22&&a.memoizedState!==null?fv(s):c!==null?(c.return=a,z=c):fv(s);for(;r!==null;)z=r,Bw(r),r=r.sibling;z=s,Hh=o,Rt=u}hv(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,z=r):hv(n)}}function hv(n){for(;z!==null;){var e=z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||Hf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Rt)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Un(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Yy(e,r,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Yy(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&zc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Rt||e.flags&512&&Eg(e)}catch(f){$e(e,e.return,f)}}if(e===n){z=null;break}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}}function dv(n){for(;z!==null;){var e=z;if(e===n){z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,z=t;break}z=e.return}}function fv(n){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Hf(4,e)}catch(c){$e(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(c){$e(e,s,c)}}var r=e.return;try{Eg(e)}catch(c){$e(e,r,c)}break;case 5:var a=e.return;try{Eg(e)}catch(c){$e(e,a,c)}}}catch(c){$e(e,e.return,c)}if(e===n){z=null;break}var o=e.sibling;if(o!==null){o.return=e.return,z=o;break}z=e.return}}var AE=Math.ceil,nf=Cs.ReactCurrentDispatcher,L0=Cs.ReactCurrentOwner,Dn=Cs.ReactCurrentBatchConfig,de=0,dt=null,Ye=null,vt=0,gn=0,Eo=Cr(0),st=0,Kc=null,Ua=0,Bf=0,M0=0,Tc=null,Qt=null,N0=0,jl=1/0,zi=null,sf=!1,Cg=null,yr=null,Bh=!1,hr=null,rf=0,Pc=0,Tg=null,sd=-1,rd=0;function jt(){return de&6?We():sd!==-1?sd:sd=We()}function vr(n){return n.mode&1?de&2&&vt!==0?vt&-vt:sE.transition!==null?(rd===0&&(rd=_b()),rd):(n=Ae,n!==0||(n=window.event,n=n===void 0?16:Mb(n.type)),n):1}function li(n,e,t,i){if(50<Pc)throw Pc=0,Tg=null,Error(M(185));mh(n,t,i),(!(de&2)||n!==dt)&&(n===dt&&(!(de&2)&&(Bf|=t),st===4&&Ds(n,vt)),nn(n,i),t===1&&de===0&&!(e.mode&1)&&(jl=We()+500,Of&&Tr()))}function nn(n,e){var t=n.callbackNode;sS(n,e);var i=Bd(n,n===dt?vt:0);if(i===0)t!==null&&xy(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&xy(t),e===1)n.tag===0?iE(pv.bind(null,n)):Qb(pv.bind(null,n)),ZS(function(){!(de&6)&&Tr()}),t=null;else{switch(kb(i)){case 1:t=r0;break;case 4:t=Sb;break;case 16:t=Hd;break;case 536870912:t=Eb;break;default:t=Hd}t=Yw(t,$w.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function $w(n,e){if(sd=-1,rd=0,de&6)throw Error(M(327));var t=n.callbackNode;if(Lo()&&n.callbackNode!==t)return null;var i=Bd(n,n===dt?vt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=af(n,i);else{e=i;var s=de;de|=2;var r=Vw();(dt!==n||vt!==e)&&(zi=null,jl=We()+500,ja(n,e));do try{EE();break}catch(o){Uw(n,o)}while(!0);v0(),nf.current=r,de=s,Ye!==null?e=0:(dt=null,vt=0,e=st)}if(e!==0){if(e===2&&(s=tg(n),s!==0&&(i=s,e=Pg(n,s))),e===1)throw t=Kc,ja(n,0),Ds(n,i),nn(n,We()),t;if(e===6)Ds(n,i);else{if(s=n.current.alternate,!(i&30)&&!xE(s)&&(e=af(n,i),e===2&&(r=tg(n),r!==0&&(i=r,e=Pg(n,r))),e===1))throw t=Kc,ja(n,0),Ds(n,i),nn(n,We()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(M(345));case 2:Mr(n,Qt,zi);break;case 3:if(Ds(n,i),(i&130023424)===i&&(e=N0+500-We(),10<e)){if(Bd(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){jt(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=cg(Mr.bind(null,n,Qt,zi),e);break}Mr(n,Qt,zi);break;case 4:if(Ds(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-oi(i);r=1<<a,a=e[a],a>s&&(s=a),i&=~r}if(i=s,i=We()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*AE(i/1960))-i,10<i){n.timeoutHandle=cg(Mr.bind(null,n,Qt,zi),i);break}Mr(n,Qt,zi);break;case 5:Mr(n,Qt,zi);break;default:throw Error(M(329))}}}return nn(n,We()),n.callbackNode===t?$w.bind(null,n):null}function Pg(n,e){var t=Tc;return n.current.memoizedState.isDehydrated&&(ja(n,e).flags|=256),n=af(n,e),n!==2&&(e=Qt,Qt=t,e!==null&&Rg(e)),n}function Rg(n){Qt===null?Qt=n:Qt.push.apply(Qt,n)}function xE(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!ci(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ds(n,e){for(e&=~M0,e&=~Bf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-oi(e),i=1<<t;n[t]=-1,e&=~i}}function pv(n){if(de&6)throw Error(M(327));Lo();var e=Bd(n,0);if(!(e&1))return nn(n,We()),null;var t=af(n,e);if(n.tag!==0&&t===2){var i=tg(n);i!==0&&(e=i,t=Pg(n,i))}if(t===1)throw t=Kc,ja(n,0),Ds(n,e),nn(n,We()),t;if(t===6)throw Error(M(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Mr(n,Qt,zi),nn(n,We()),null}function I0(n,e){var t=de;de|=1;try{return n(e)}finally{de=t,de===0&&(jl=We()+500,Of&&Tr())}}function Va(n){hr!==null&&hr.tag===0&&!(de&6)&&Lo();var e=de;de|=1;var t=Dn.transition,i=Ae;try{if(Dn.transition=null,Ae=1,n)return n()}finally{Ae=i,Dn.transition=t,de=e,!(de&6)&&Tr()}}function D0(){gn=Eo.current,Re(Eo)}function ja(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,JS(t)),Ye!==null)for(t=Ye.return;t!==null;){var i=t;switch(g0(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Gd();break;case 3:Fl(),Re(en),Re(Mt),E0();break;case 5:S0(i);break;case 4:Fl();break;case 13:Re(je);break;case 19:Re(je);break;case 10:b0(i.type._context);break;case 22:case 23:D0()}t=t.return}if(dt=n,Ye=n=br(n.current,null),vt=gn=e,st=0,Kc=null,M0=Bf=Ua=0,Qt=Tc=null,Hr!==null){for(e=0;e<Hr.length;e++)if(t=Hr[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var a=r.next;r.next=s,i.next=a}t.pending=i}Hr=null}return n}function Uw(n,e){do{var t=Ye;try{if(v0(),td.current=tf,ef){for(var i=ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ef=!1}if($a=0,ht=nt=ze=null,kc=!1,Xc=0,L0.current=null,t===null||t.return===null){st=1,Kc=e,Ye=null;break}e:{var r=n,a=t.return,o=t,c=e;if(e=vt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=tv(a);if(p!==null){p.flags&=-257,nv(p,a,o,r,e),p.mode&1&&ev(r,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var w=new Set;w.add(c),e.updateQueue=w}else m.add(c);break e}else{if(!(e&1)){ev(r,u,e),F0();break e}c=Error(M(426))}}else if(Ne&&o.mode&1){var E=tv(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),nv(E,a,o,r,e),m0(Ol(c,o));break e}}r=c=Ol(c,o),st!==4&&(st=2),Tc===null?Tc=[r]:Tc.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=kw(r,c,e);qy(r,g);break e;case 1:o=c;var b=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(yr===null||!yr.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=Cw(r,o,e);qy(r,S);break e}}r=r.return}while(r!==null)}Gw(t)}catch(_){e=_,Ye===t&&t!==null&&(Ye=t=t.return);continue}break}while(!0)}function Vw(){var n=nf.current;return nf.current=tf,n===null?tf:n}function F0(){(st===0||st===3||st===2)&&(st=4),dt===null||!(Ua&268435455)&&!(Bf&268435455)||Ds(dt,vt)}function af(n,e){var t=de;de|=2;var i=Vw();(dt!==n||vt!==e)&&(zi=null,ja(n,e));do try{SE();break}catch(s){Uw(n,s)}while(!0);if(v0(),de=t,nf.current=i,Ye!==null)throw Error(M(261));return dt=null,vt=0,st}function SE(){for(;Ye!==null;)Ww(Ye)}function EE(){for(;Ye!==null&&!Y1();)Ww(Ye)}function Ww(n){var e=qw(n.alternate,n,gn);n.memoizedProps=n.pendingProps,e===null?Gw(n):Ye=e,L0.current=null}function Gw(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=yE(t,e),t!==null){t.flags&=32767,Ye=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{st=6,Ye=null;return}}else if(t=mE(t,e,gn),t!==null){Ye=t;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=n}while(e!==null);st===0&&(st=5)}function Mr(n,e,t){var i=Ae,s=Dn.transition;try{Dn.transition=null,Ae=1,_E(n,e,t,i)}finally{Dn.transition=s,Ae=i}return null}function _E(n,e,t,i){do Lo();while(hr!==null);if(de&6)throw Error(M(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(M(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(rS(n,r),n===dt&&(Ye=dt=null,vt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Bh||(Bh=!0,Yw(Hd,function(){return Lo(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Dn.transition,Dn.transition=null;var a=Ae;Ae=1;var o=de;de|=4,L0.current=null,bE(n,t),Hw(t,n),WS(og),$d=!!ag,og=ag=null,n.current=t,wE(t),K1(),de=o,Ae=a,Dn.transition=r}else n.current=t;if(Bh&&(Bh=!1,hr=n,rf=s),r=n.pendingLanes,r===0&&(yr=null),Z1(t.stateNode),nn(n,We()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(sf)throw sf=!1,n=Cg,Cg=null,n;return rf&1&&n.tag!==0&&Lo(),r=n.pendingLanes,r&1?n===Tg?Pc++:(Pc=0,Tg=n):Pc=0,Tr(),null}function Lo(){if(hr!==null){var n=kb(rf),e=Dn.transition,t=Ae;try{if(Dn.transition=null,Ae=16>n?16:n,hr===null)var i=!1;else{if(n=hr,hr=null,rf=0,de&6)throw Error(M(331));var s=de;for(de|=4,z=n.current;z!==null;){var r=z,a=r.child;if(z.flags&16){var o=r.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(z=u;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:Cc(8,h,r)}var d=h.child;if(d!==null)d.return=h,z=d;else for(;z!==null;){h=z;var f=h.sibling,p=h.return;if(Ow(h),h===u){z=null;break}if(f!==null){f.return=p,z=f;break}z=p}}}var m=r.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}z=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,z=a;else e:for(;z!==null;){if(r=z,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Cc(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,z=g;break e}z=r.return}}var b=n.current;for(z=b;z!==null;){a=z;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,z=x;else e:for(a=b;z!==null;){if(o=z,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Hf(9,o)}}catch(_){$e(o,o.return,_)}if(o===a){z=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,z=S;break e}z=o.return}}if(de=s,Tr(),Ii&&typeof Ii.onPostCommitFiberRoot=="function")try{Ii.onPostCommitFiberRoot(Mf,n)}catch{}i=!0}return i}finally{Ae=t,Dn.transition=e}}return!1}function gv(n,e,t){e=Ol(t,e),e=kw(n,e,1),n=mr(n,e,1),e=jt(),n!==null&&(mh(n,1,e),nn(n,e))}function $e(n,e,t){if(n.tag===3)gv(n,n,t);else for(;e!==null;){if(e.tag===3){gv(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yr===null||!yr.has(i))){n=Ol(t,n),n=Cw(e,n,1),e=mr(e,n,1),n=jt(),e!==null&&(mh(e,1,n),nn(e,n));break}}e=e.return}}function kE(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=jt(),n.pingedLanes|=n.suspendedLanes&t,dt===n&&(vt&t)===t&&(st===4||st===3&&(vt&130023424)===vt&&500>We()-N0?ja(n,0):M0|=t),nn(n,e)}function Xw(n,e){e===0&&(n.mode&1?(e=Lh,Lh<<=1,!(Lh&130023424)&&(Lh=4194304)):e=1);var t=jt();n=Ss(n,e),n!==null&&(mh(n,e,t),nn(n,t))}function CE(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Xw(n,t)}function TE(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(M(314))}i!==null&&i.delete(e),Xw(n,t)}var qw;qw=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||en.current)Jt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Jt=!1,gE(n,e,t);Jt=!!(n.flags&131072)}else Jt=!1,Ne&&e.flags&1048576&&Jb(e,Yd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;id(n,e),n=e.pendingProps;var s=Nl(e,Mt.current);Ro(e,t),s=k0(null,e,i,n,s,t);var r=C0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(i)?(r=!0,Xd(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,A0(e),s.updater=zf,e.stateNode=s,s._reactInternals=e,mg(e,i,n,t),e=bg(null,e,i,!0,r,t)):(e.tag=0,Ne&&r&&p0(e),Ft(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(id(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=RE(i),n=Un(i,n),s){case 0:e=vg(null,e,i,n,t);break e;case 1:e=rv(null,e,i,n,t);break e;case 11:e=iv(null,e,i,n,t);break e;case 14:e=sv(null,e,i,Un(i.type,n),t);break e}throw Error(M(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),vg(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),rv(n,e,i,s,t);case 3:e:{if(Lw(e),n===null)throw Error(M(387));i=e.pendingProps,r=e.memoizedState,s=r.element,sw(n,e),Jd(e,i,null,t);var a=e.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Ol(Error(M(423)),e),e=av(n,e,i,t,s);break e}else if(i!==s){s=Ol(Error(M(424)),e),e=av(n,e,i,t,s);break e}else for(yn=gr(e.stateNode.containerInfo.firstChild),vn=e,Ne=!0,ri=null,t=nw(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Il(),i===s){e=Es(n,e,t);break e}Ft(n,e,i,t)}e=e.child}return e;case 5:return rw(e),n===null&&fg(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,a=s.children,lg(i,s)?a=null:r!==null&&lg(i,r)&&(e.flags|=32),Rw(n,e),Ft(n,e,a,t),e.child;case 6:return n===null&&fg(e),null;case 13:return Mw(n,e,t);case 4:return x0(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Dl(e,null,i,t):Ft(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),iv(n,e,i,s,t);case 7:return Ft(n,e,e.pendingProps,t),e.child;case 8:return Ft(n,e,e.pendingProps.children,t),e.child;case 12:return Ft(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,a=s.value,ke(Kd,i._currentValue),i._currentValue=a,r!==null)if(ci(r.value,a)){if(r.children===s.children&&!en.current){e=Es(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var c=o.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=ms(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),pg(r.return,t,e),o.lanes|=t;break}c=c.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(M(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),pg(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Ft(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Ro(e,t),s=On(s),i=i(s),e.flags|=1,Ft(n,e,i,t),e.child;case 14:return i=e.type,s=Un(i,e.pendingProps),s=Un(i.type,s),sv(n,e,i,s,t);case 15:return Tw(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Un(i,s),id(n,e),e.tag=1,tn(i)?(n=!0,Xd(e)):n=!1,Ro(e,t),_w(e,i,s),mg(e,i,s,t),bg(null,e,i,!0,n,t);case 19:return Nw(n,e,t);case 22:return Pw(n,e,t)}throw Error(M(156,e.tag))};function Yw(n,e){return xb(n,e)}function PE(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,e,t,i){return new PE(n,e,t,i)}function O0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function RE(n){if(typeof n=="function")return O0(n)?1:0;if(n!=null){if(n=n.$$typeof,n===n0)return 11;if(n===i0)return 14}return 2}function br(n,e){var t=n.alternate;return t===null?(t=In(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ad(n,e,t,i,s,r){var a=2;if(i=n,typeof n=="function")O0(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case po:return za(t.children,s,r,e);case t0:a=8,s|=8;break;case Hp:return n=In(12,t,e,s|2),n.elementType=Hp,n.lanes=r,n;case Bp:return n=In(13,t,e,s),n.elementType=Bp,n.lanes=r,n;case $p:return n=In(19,t,e,s),n.elementType=$p,n.lanes=r,n;case rb:return $f(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ib:a=10;break e;case sb:a=9;break e;case n0:a=11;break e;case i0:a=14;break e;case Ms:a=16,i=null;break e}throw Error(M(130,n==null?n:typeof n,""))}return e=In(a,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function za(n,e,t,i){return n=In(7,n,i,e),n.lanes=t,n}function $f(n,e,t,i){return n=In(22,n,i,e),n.elementType=rb,n.lanes=t,n.stateNode={isHidden:!1},n}function Rp(n,e,t){return n=In(6,n,null,e),n.lanes=t,n}function Lp(n,e,t){return e=In(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function LE(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hp(0),this.expirationTimes=hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function j0(n,e,t,i,s,r,a,o,c){return n=new LE(n,e,t,o,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=In(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},A0(r),n}function ME(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function Kw(n){if(!n)return Ar;n=n._reactInternals;e:{if(Qa(n)!==n||n.tag!==1)throw Error(M(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(n.tag===1){var t=n.type;if(tn(t))return Kb(n,t,e)}return e}function Qw(n,e,t,i,s,r,a,o,c){return n=j0(t,i,!0,n,s,r,a,o,c),n.context=Kw(null),t=n.current,i=jt(),s=vr(t),r=ms(i,s),r.callback=e??null,mr(t,r,s),n.current.lanes=s,mh(n,s,i),nn(n,i),n}function Uf(n,e,t,i){var s=e.current,r=jt(),a=vr(s);return t=Kw(t),e.context===null?e.context=t:e.pendingContext=t,e=ms(r,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=mr(s,e,a),n!==null&&(li(n,s,a,r),ed(n,s,a)),a}function of(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function mv(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function z0(n,e){mv(n,e),(n=n.alternate)&&mv(n,e)}function NE(){return null}var Jw=typeof reportError=="function"?reportError:function(n){console.error(n)};function H0(n){this._internalRoot=n}Vf.prototype.render=H0.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(M(409));Uf(n,e,null,null)};Vf.prototype.unmount=H0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Va(function(){Uf(null,n,null,null)}),e[xs]=null}};function Vf(n){this._internalRoot=n}Vf.prototype.unstable_scheduleHydration=function(n){if(n){var e=Pb();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Is.length&&e!==0&&e<Is[t].priority;t++);Is.splice(t,0,n),t===0&&Lb(n)}};function B0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yv(){}function IE(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=of(a);r.call(u)}}var a=Qw(e,i,n,0,null,!1,!1,"",yv);return n._reactRootContainer=a,n[xs]=a.current,$c(n.nodeType===8?n.parentNode:n),Va(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var o=i;i=function(){var u=of(c);o.call(u)}}var c=j0(n,0,!1,null,null,!1,!1,"",yv);return n._reactRootContainer=c,n[xs]=c.current,$c(n.nodeType===8?n.parentNode:n),Va(function(){Uf(e,c,t,i)}),c}function Gf(n,e,t,i,s){var r=t._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var o=s;s=function(){var c=of(a);o.call(c)}}Uf(e,a,n,s)}else a=IE(t,e,n,s,i);return of(a)}Cb=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=nc(e.pendingLanes);t!==0&&(a0(e,t|1),nn(e,We()),!(de&6)&&(jl=We()+500,Tr()))}break;case 13:Va(function(){var i=Ss(n,1);if(i!==null){var s=jt();li(i,n,1,s)}}),z0(n,1)}};o0=function(n){if(n.tag===13){var e=Ss(n,134217728);if(e!==null){var t=jt();li(e,n,134217728,t)}z0(n,134217728)}};Tb=function(n){if(n.tag===13){var e=vr(n),t=Ss(n,e);if(t!==null){var i=jt();li(t,n,e,i)}z0(n,e)}};Pb=function(){return Ae};Rb=function(n,e){var t=Ae;try{return Ae=n,e()}finally{Ae=t}};Jp=function(n,e,t){switch(e){case"input":if(Wp(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=Ff(i);if(!s)throw Error(M(90));ob(i),Wp(i,s)}}}break;case"textarea":cb(n,t);break;case"select":e=t.value,e!=null&&ko(n,!!t.multiple,e,!1)}};mb=I0;yb=Va;var DE={usingClientEntryPoint:!1,Events:[vh,vo,Ff,pb,gb,I0]},Kl={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FE={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wb(n),n===null?null:n.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||NE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Mf=$h.inject(FE),Ii=$h}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DE;An.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B0(e))throw Error(M(200));return ME(n,e,null,t)};An.createRoot=function(n,e){if(!B0(n))throw Error(M(299));var t=!1,i="",s=Jw;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=j0(n,1,!1,null,null,t,!1,i,s),n[xs]=e.current,$c(n.nodeType===8?n.parentNode:n),new H0(e)};An.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(M(188)):(n=Object.keys(n).join(","),Error(M(268,n)));return n=wb(e),n=n===null?null:n.stateNode,n};An.flushSync=function(n){return Va(n)};An.hydrate=function(n,e,t){if(!Wf(e))throw Error(M(200));return Gf(null,n,e,!0,t)};An.hydrateRoot=function(n,e,t){if(!B0(n))throw Error(M(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",a=Jw;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Qw(e,null,n,1,t??null,s,!1,r,a),n[xs]=e.current,$c(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Vf(e)};An.render=function(n,e,t){if(!Wf(e))throw Error(M(200));return Gf(null,n,e,!1,t)};An.unmountComponentAtNode=function(n){if(!Wf(n))throw Error(M(40));return n._reactRootContainer?(Va(function(){Gf(null,null,n,!1,function(){n._reactRootContainer=null,n[xs]=null})}),!0):!1};An.unstable_batchedUpdates=I0;An.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Wf(t))throw Error(M(200));if(n==null||n._reactInternals===void 0)throw Error(M(38));return Gf(n,e,t,!1,i)};An.version="18.3.1-next-f1338f8080-20240426";function Zw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zw)}catch(n){console.error(n)}}Zw(),Zv.exports=An;var OE=Zv.exports,eA,vv=OE;eA=vv.createRoot,vv.hydrateRoot;var jE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HE=(n,e)=>{const t=U.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,children:o,...c},u)=>U.createElement("svg",{ref:u,...jE,width:s,height:s,stroke:i,strokeWidth:a?Number(r)*24/Number(s):r,className:`lucide lucide-${zE(n)}`,...c},[...e.map(([h,d])=>U.createElement(h,d)),...(Array.isArray(o)?o:[o])||[]]));return t.displayName=`${n}`,t};var Sn=HE;const BE=Sn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),$E=Sn("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Mp=Sn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),UE=Sn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Xf=Sn("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),VE=Sn("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),WE=Sn("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),GE=Sn("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),$0=Sn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),XE=Sn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qE=Sn("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),U0=Sn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),YE=Sn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),KE=`
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    max-width: 100%;
    margin: 0 auto;
    color: #333;
    background: white;
    font-size: 12px;
    text-align: left;
  }
  .cv-container {
    background: white;
    color: #333;
    max-width: 100%;
    width: 100%;
    text-align: left;
  }
  /* Light theme scrollbar */
  ::-webkit-scrollbar {
    width: 12px;
  }
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }
  ::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 6px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
  }
`,QE=`
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    max-width: 100%;
    margin: 0 auto;
    color: #e4e4e7;
    background: #18181b;
    font-size: 12px;
    text-align: left;
  }
  .cv-container {
    background: #18181b;
    color: #e4e4e7;
    max-width: 100%;
    width: 100%;
    text-align: left;
  }
  /* Dark theme scrollbar */
  ::-webkit-scrollbar {
    width: 12px;
  }
  ::-webkit-scrollbar-track {
    background: #374151;
  }
  ::-webkit-scrollbar-thumb {
    background: #6b7280;
    border-radius: 6px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
  }
`,JE=`
  /* Dark theme overrides for styled version only */
  .header h1 { color: #a5b4fc; }
  .personal-details {
    background: linear-gradient(135deg, rgba(165, 180, 252, 0.1), rgba(196, 181, 253, 0.1));
    border: 1px solid #374151;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  }
  .personal-details h2 { 
    color: #a5b4fc;
    border-bottom: 1px solid #a5b4fc;
  }
  .contact-item strong { color: #a5b4fc; }
  .section h2 {
    color: #a5b4fc;
    border-bottom: 2px solid #a5b4fc;
    background: linear-gradient(90deg, rgba(165, 180, 252, 0.1), transparent);
  }
  .job::before {
    background: #a5b4fc;
    box-shadow: 0 0 0 3px #18181b, 0 0 0 6px #a5b4fc;
  }
  .job-title { color: #a5b4fc; }
  .company { color: #e4e4e7; }
  .dates { color: #9ca3af; }
  .company-description {
    color: #9ca3af;
    background: rgba(165, 180, 252, 0.08);
    border-left: 2px solid #a5b4fc;
  }
  .project::before {
    background: #c4b5fd;
    box-shadow: 0 0 0 3px #18181b, 0 0 0 6px #c4b5fd;
  }
  .technologies { color: #c4b5fd; }
  .certificate .job-title { color: #a5b4fc; }
`,ZE=`
  /* Dark theme overrides for plain version - minimal styling */
  .header h1 { color: #e4e4e7; }
  .job-title { color: #e4e4e7; }
  .company { color: #e4e4e7; }
  .dates { color: #9ca3af; }
  .company-description { color: #9ca3af; }
  .technologies { color: #9ca3af; }
  .certificate .job-title { color: #e4e4e7; }
  .personal-details h2 { color: #e4e4e7; }
  .section h2 { color: #e4e4e7; }
  .contact-item strong { color: #e4e4e7; }
`,e_=`
  .header {
    text-align: center;
    padding-bottom: 15px;
    margin-bottom: 20px;
    border-bottom: 2px solid #667eea;
  }
  .header h1 {
    font-size: 1.8em;
    margin: 0;
    color: #2c5aa0;
    font-weight: bold;
  }
  .personal-details {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    border: 1px solid #e9ecef;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }
  .personal-details h2 {
    color: #2c5aa0;
    font-size: 1.1em;
    margin-top: 0;
    margin-bottom: 8px;
    padding-bottom: 3px;
    border-bottom: 1px solid #667eea;
  }
  .contact-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  .contact-item {
    margin: 2px 0;
    display: flex;
    align-items: center;
  }
  .contact-item strong {
    color: #2c5aa0;
    min-width: 60px;
  }
  .section {
    margin-bottom: 20px;
    position: relative;
  }
  .section h2 {
    color: #2c5aa0;
    font-size: 1.2em;
    padding-bottom: 6px;
    margin-bottom: 15px;
    border-bottom: 2px solid #667eea;
    background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), transparent);
    padding-left: 8px;
    margin-left: -8px;
    border-radius: 3px 0 0 0;
  }
  .profile {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    padding: 15px;
    border-radius: 8px;
    font-size: 1em;
    line-height: 1.5;
    border-left: 3px solid #667eea;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    text-align: left;
  }
  .job {
    margin-bottom: 18px;
    border-left: 3px solid #667eea;
    padding-left: 15px;
    position: relative;
    background: linear-gradient(90deg, rgba(102, 126, 234, 0.03), transparent);
    padding-top: 10px;
    padding-bottom: 10px;
    border-radius: 0 6px 6px 0;
    margin-left: -3px;
    padding-left: 18px;
    text-align: left;
  }
  .job::before {
    content: '';
    position: absolute;
    left: -5px;
    top: 12px;
    width: 6px;
    height: 6px;
    background: #667eea;
    border-radius: 50%;
    box-shadow: 0 0 0 2px white, 0 0 0 4px #667eea;
  }
  .job-title {
    font-size: 1.05em;
    font-weight: bold;
    color: #2c5aa0;
    margin-bottom: 4px;
    text-align: left;
  }
  .company {
    font-weight: bold;
    font-size: 0.95em;
    margin-bottom: 3px;
    color: #333;
    text-align: left;
  }
  .dates {
    font-style: italic;
    color: #666;
    margin-bottom: 6px;
    font-size: 0.9em;
    text-align: left;
  }
  .company-description {
    font-style: italic;
    color: #666;
    margin-bottom: 8px;
    background: rgba(102, 126, 234, 0.08);
    padding: 6px;
    border-radius: 4px;
    border-left: 2px solid #667eea;
    text-align: left;
  }
  .project {
    margin-bottom: 18px;
    border-left: 3px solid #764ba2;
    padding-left: 15px;
    position: relative;
    background: linear-gradient(90deg, rgba(118, 75, 162, 0.03), transparent);
    padding-top: 10px;
    padding-bottom: 10px;
    border-radius: 0 6px 6px 0;
    margin-left: -3px;
    padding-left: 18px;
    text-align: left;
  }
  .project::before {
    content: '';
    position: absolute;
    left: -5px;
    top: 12px;
    width: 6px;
    height: 6px;
    background: #764ba2;
    border-radius: 50%;
    box-shadow: 0 0 0 2px white, 0 0 0 4px #764ba2;
  }
  .technologies {
    font-style: italic;
    color: #764ba2;
    margin-bottom: 6px;
    font-size: 0.9em;
    font-weight: 500;
    text-align: left;
  }
  .certificate {
    margin-bottom: 15px;
    padding: 12px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    border-radius: 6px;
    border-left: 3px solid #667eea;
    text-align: left;
  }
  .certificate .job-title {
    color: #667eea;
    margin-bottom: 8px;
    text-align: left;
  }
  ul {
    margin: 0 0 8px 0;
    padding-left: 16px;
    text-align: left;
  }
  li {
    margin-bottom: 4px;
    line-height: 1.5;
    text-align: left;
  }
`,t_=`
  .header {
    text-align: center;
    padding-bottom: 20px;
    margin-bottom: 30px;
  }
  .header h1 {
    font-size: 1.8em;
    margin: 0 0 20px 0;
    font-weight: bold;
  }
  .personal-details {
    padding: 20px;
    margin-bottom: 25px;
    text-align: left;
  }
  .personal-details h2 {
    font-size: 1.2em;
    font-weight: bold;
    margin-top: 0;
    margin-bottom: 10px;
  }
  .contact-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  .contact-item {
    margin: 2px 0;
    display: flex;
    align-items: center;
    text-align: left;
  }
  .contact-item strong {
    font-weight: bold;
    min-width: 70px;
  }
  .section {
    margin-bottom: 30px;
    text-align: left;
  }
  .section h2 {
    font-size: 1.3em;
    font-weight: bold;
    margin-bottom: 20px;
    margin-top: 0;
  }
  .profile {
    padding: 25px;
    font-size: 1.05em;
    line-height: 1.7;
    text-align: left;
  }
  .job {
    margin-bottom: 25px;
    padding-left: 0;
    padding-top: 15px;
    padding-bottom: 15px;
    text-align: left;
  }
  .job-title {
    font-size: 1.1em;
    font-weight: bold;
    margin-bottom: 5px;
    text-align: left;
  }
  .company {
    font-weight: bold;
    font-size: 1em;
    margin-bottom: 3px;
    text-align: left;
  }
  .dates {
    font-style: italic;
    margin-bottom: 8px;
    font-size: 0.95em;
    text-align: left;
  }
  .company-description {
    font-style: italic;
    margin-bottom: 12px;
    padding: 0;
    text-align: left;
  }
  .project {
    margin-bottom: 25px;
    padding-left: 0;
    padding-top: 15px;
    padding-bottom: 15px;
    text-align: left;
  }
  .technologies {
    font-style: italic;
    margin-bottom: 8px;
    font-size: 0.95em;
    font-weight: 500;
    text-align: left;
  }
  .certificate {
    margin-bottom: 20px;
    padding: 15px;
    text-align: left;
  }
  .certificate .job-title {
    margin-bottom: 10px;
    text-align: left;
  }
  ul {
    margin: 0;
    padding-left: 18px;
    text-align: left;
  }
  li {
    margin-bottom: 6px;
    line-height: 1.6;
    text-align: left;
  }
  /* Remove decorative elements but keep consistent spacing and fonts */
  .personal-details {
    border: none;
    background: none;
    box-shadow: none;
  }
  .profile {
    background: none;
    border: none;
    box-shadow: none;
  }
  .job, .project {
    border: none;
    background: none;
    margin-left: 0;
  }
  .job::before, .project::before {
    display: none;
  }
  .company-description {
    background: none;
    border: none;
    padding: 0;
    margin-bottom: 12px;
  }
  .certificate {
    background: none;
    border: none;
  }
  /* Light theme scrollbar for plain style */
  ::-webkit-scrollbar {
    width: 12px;
  }
  ::-webkit-scrollbar-track {
    background: #f1f1f1;
  }
  ::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 6px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
  }
`,n_=`
  @media print {
    body { 
      font-size: 10px !important; 
      background: white !important;
      color: black !important;
      max-width: 100% !important;
      margin: 0 !important;
      padding: 10mm !important;
      box-sizing: border-box !important;
    }
    .cv-container {
      max-width: 100% !important;
      width: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    .header {
      padding-bottom: 10px !important;
      margin-bottom: 15px !important;
    }
    .header h1 {
      font-size: 1.6em !important;
      margin-bottom: 0 !important;
    }
    .personal-details {
      padding: 10px !important;
      margin-bottom: 15px !important;
    }
    .section {
      margin-bottom: 15px !important;
    }
    .section h2 {
      margin-bottom: 10px !important;
      padding-bottom: 4px !important;
      page-break-after: avoid;
    }
    .profile {
      padding: 10px !important;
      line-height: 1.4 !important;
    }
    .job, .project {
      margin-bottom: 12px !important;
      padding-top: 6px !important;
      padding-bottom: 6px !important;
    }
    .certificate {
      margin-bottom: 10px !important;
      padding: 8px !important;
    }
    .company-description {
      padding: 4px !important;
      margin-bottom: 6px !important;
    }
    ul {
      margin-bottom: 6px !important;
    }
    li {
      margin-bottom: 2px !important;
      line-height: 1.4 !important;
    }
    .no-print { display: none; }
    .job::before { 
      box-shadow: 0 0 0 2px white, 0 0 0 4px #667eea !important;
      width: 5px !important;
      height: 5px !important;
      top: 8px !important;
    }
    .project::before { 
      box-shadow: 0 0 0 2px white, 0 0 0 4px #764ba2 !important;
      width: 5px !important;
      height: 5px !important;
      top: 8px !important;
    }
    * { color-adjust: exact !important; }
  }
`,bv=(n,e,t="light",i)=>{const s=t==="dark"?QE:KE,r=e==="styled"?e_:t_;let a="";t==="dark"&&(e==="styled"?a=JE:a=ZE);const o=u=>{switch(u){case"personal":return`
          <div class="personal-details">
            <h2>CONTACT DETAILS</h2>
            <div class="contact-info">
              <div class="contact-item"><strong>Phone:</strong> ${n.personalDetails.phone}</div>
              <div class="contact-item"><strong>Address:</strong> ${n.personalDetails.address}</div>
              <div class="contact-item"><strong>Email:</strong> ${n.personalDetails.email}</div>
              <div class="contact-item"><strong>Website:</strong> ${n.personalDetails.website}</div>
            </div>
          </div>
        `;case"profile":return n.profile?`
          <div class="section">
            <h2>PROFILE</h2>
            <div class="profile">
              ${n.profile.split(`
`).map(h=>h.trim()).filter(h=>h).join("<br><br>")}
            </div>
          </div>
        `:"";case"experience":return n.workExperience.length>0?`
          <div class="section">
            <h2>WORK EXPERIENCE</h2>
            ${n.workExperience.map(h=>`
              <div class="job">
                <div class="job-title">${h.title}</div>
                <div class="company">${h.company}</div>
                <div class="dates">${h.dates}</div>
                ${h.description?`<div class="company-description">${h.description}</div>`:""}
                ${h.responsibilities.length>0?`
                  <ul>
                    ${h.responsibilities.map(d=>`<li>${d}</li>`).join("")}
                  </ul>
                `:""}
              </div>
            `).join("")}
          </div>
        `:"";case"projects":return n.personalProjects.length>0?`
          <div class="section">
            <h2>PERSONAL PROJECTS</h2>
            ${n.personalProjects.map(h=>`
              <div class="project">
                <div class="job-title">${h.title}</div>
                <div class="technologies">Technologies: ${h.technologies}</div>
                ${h.responsibilities.length>0?`
                  <ul>
                    ${h.responsibilities.map(d=>`<li>${d}</li>`).join("")}
                  </ul>
                `:""}
              </div>
            `).join("")}
          </div>
        `:"";case"certificates":return n.certificates.length>0?`
          <div class="section">
            <h2>CERTIFICATES</h2>
            ${n.certificates.map(h=>`
              <div class="certificate">
                <div class="job-title">${h.title}</div>
                <p>${h.description}</p>
              </div>
            `).join("")}
          </div>
        `:"";case"education":return n.education.degree||n.education.university?`
          <div class="section">
            <h2>EDUCATION</h2>
            <div class="job">
              <div class="job-title">${n.education.degree}</div>
              <div class="company">${n.education.university}</div>
              <div class="dates">${n.education.dates}</div>
              <p>${n.education.grade}</p>
            </div>
          </div>
        `:"";case"courses":return n.courses?`
          <div class="section">
            <h2>ADDITIONAL COURSES</h2>
            <p>${n.courses}</p>
          </div>
        `:"";default:return""}},c=i||["personal","profile","experience","projects","certificates","education","courses"];return`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="UTF-8">
        <title>${n.personalDetails.name} - CV</title>
        <style>
          ${s}
          ${r}
          ${a}
          ${n_}
        </style>
      </head>
      <body>
        <div class="cv-container">
          <div class="header">
            <h1>${n.personalDetails.name}</h1>
          </div>
          
          ${c.map(u=>o(u)).join("")}
        </div>
      </body>
    </html>
  `},i_={personalDetails:{name:"Allegra Bourne",phone:"(+44) 7854 943 193",address:"14 Lewis Road, Northallerton, North Yorkshire, UK. DL6 3RX",email:"allegrabourne@gmail.com",website:"allegrabourne.github.io/"},profile:`Software Engineer with 15+ years of experience delivering event driven, AI powered and scalable solutions for local, national and multinational businesses in both the private and public sectors across diverse industries, including finance, supply chain and transportation systems.

Adept at translating business requirements into technical solutions and working with modern development frameworks, cloud services, and enterprise messaging solutions with an emphasis on test-driven development and design patterns.

Advocate of mentoring and collaboration. Seeking to contribute technical expertise to innovative projects.`,workExperience:[{title:"Senior Software Engineer",company:"Ligentia, Leeds, England, United Kingdom",dates:"Jun 2022 - Present",description:"Ligentia is a leading supply chain technology and services provider specialising in manufacturing, consumer brands, pharmaceuticals and the retail sector.",responsibilities:["Development of new Consignment Delivery Management portal with API development utilising Fast Endpoints, messaging via Azure ServiceBus and Angular for UI development.","Worked to develop the new Landed Cost portal, a project which helped to retain Myer; Australia's largest department store, as a customer. Providing Myer with accurate landed cost and end-to-end visibility of their supply chain, from production confirmation, to freight booking, through to delivery to stores spanning Australia.","Azure DevOps / Octopus Deploy for CI and release management, creation and maintenance of deployment pipelines inline with industry practice.","Blazor utilised for the developmental concept for the new Client onboarding web application.","Business analysis of legacy processes where knowledge had been lost with a view of replacing them with newer tech stacks."]},{title:"Full Stack Developer",company:"Refract - an Allego company, Newcastle upon Tyne, England, United Kingdom",dates:"Apr 2021 - Jun 2022",description:"Refract utilises AI technology to deliver personalised insight, based on the business and their reps, showing the actions and words that align with top performers and results. Allego sets out to improve onboarding and messaging consistency with high-quality, reliable and secure video learning, communication and collaboration. Engaging new hires quickly, developing critical skills and driving faster results for an organisation.",responsibilities:["Introduced multilingual capabilities to the Refract platform.","Worked on introducing new 'road map' features to the Refract platform such as Call Analytics, Platform Usage and Deal Intelligence dashboards.",".Net, Angular and SQL utilising code first and EF migrations.","Azure development utilising blob containers.","Emphasis on TDD and design patterns to ensure quality of work."]},{title:"Integrations Developer",company:"XCM, York, England, United Kingdom",dates:"Apr 2020 - Apr 2021",description:"XCM are marketing specialists working with some of the biggest retailers in the UK to leverage competitive advantage via the use of specialist data tools, analysis and CRM services.",responsibilities:["Client integration utilising .Net Core and Kafka to ensure real time distributed streaming of big data from Google PubSub.","Docker used for Kafka containerisation.","TSQL / KSQL development.","Google Cloud / PubSub integration.","Apache AVRO for binary serialisation of messages for faster processing.","Data migration and integration.","Single Customer View.","Development of the XCM Horizon data warehouse.","Web Services development using .Net Core hosted in Kestrel."]},{title:"Software Engineer",company:"Cubic Corporation, Stockton-On-Tees, United Kingdom",dates:"Jan 2019 - Apr 2020",description:"Cubic Transportation Systems is one arm of Cubic Corporation that produces public transport solutions, traffic management platforms and fare reading and payment systems.",responsibilities:["Development of ICMP - the traffic management platform utilised by New South Wales, Australia. The platform formed part of TfNSW's $123 million intelligent congestion management program which enabled better traffic management through real-time data and predictive technology.","Frontend development utilising Angular / Typescript / SignalR.","Enterprise messaging conducted utilising NServiceBus / RabbitMQ.","Micro service development utilising AZURE Service Fabric / Topshelf / WebAPI services.","Continuous integration via Jenkins with SonarCube code smells and Octopus.","Development undertaken accordingly with Agile/SCRUM methodologies."]},{title:"Solution Developer",company:"Vianet Group plc, Stockton-On-Tees, United Kingdom",dates:"Jun 2017 - Dec 2018",description:"Vianet are UK leader in providing draught beer quality and waste management services.",responsibilities:["Worked on the IDraught IOT platform on the consumption of data that would empower customer's strategic decisions on metrics and business intelligence, these insights were then used to measure metrics such as wastage, temperature, in identifying missing drinks and improving drink quality.","Frontend development on the new 'Vianet IOT Portal' utilising AngularJS 2 / Typescript.","WebAPI services via the use of .Net Core and hosted using Kestrel.","AZURE web app services and message queueing.","Big data processing via HBASE.","JAVA / Apache SPARK / Hadoop number crunching business logic utilising IntelliJ GUI and taking on a TDD approach.","Introduced an emphasis on TDD and introduced concepts attaining to Agile/SCRUM and mentoring junior members of the team."]},{title:"Lead Software Developer",company:"ZyroFisher, Darlington, United Kingdom",dates:"Apr 2017 - Jun 2017",description:"ZyroFisher are the leading distributor of Parts, Accessories and Clothing to the UK and Irish cycling markets.",responsibilities:["Integrated new Altura Cycling customer facing commercial website with their backend ordering system and payment provider (included implementing Sage/SagePay API) utilising RabbitMQ, RESTful API services and HMAC authentication enabling customers to make online purchases for the first time.","Front-end development utilising NodeJS.","Emphasis on quality test driven development utilising NCrunch and MOQ."]},{title:"Software Developer",company:"Lowell Group, Leeds, United Kingdom",dates:"Apr 2012 - Apr 2017",description:"Lowell are one of Europe's largest credit management companies, operating in the UK and the DACH and Nordic regions.",responsibilities:["RESTful Web API services self hosted utilising Topshelf.","MVC5/Rest/CMS Umbraco - development of the new Lowell website, designed to give customers control over their accounts and manage payments securely through Verifone, similar to leading banking websites. In its first year, the platform saw over 150,000 customer registrations.","Automated deployment via Octopus deploy and continuous builds using TeamCity.","Test driven .Net development. NCrunch, MOQ.","Service Orientated Architecture - development of person matching and address cleansing services utilising WCF and RabbitMQ.","T-SQL utilising CLR functions.","ORM implemented using NHibernate.","Agile software development utilising SCRUM.","Development of LIMA - Lowell's main tracing application.","Provided third line support as required."]},{title:"Collections Development Analyst",company:"Lowell, Leeds, United Kingdom",dates:"Feb 2011 - Apr 2012",description:"",responsibilities:["Core business process mapping and improvement.","Business process automation utilising SSIS, T-SQL and C#/VB.net in order to create dynamic DTSX packages.","Data analysis utilising Crystal Reports and SSAS.","Systems support, project and change management.","Automated de-duping processes for enabling single view of customers with multiple accounts saving Lowell 40k (quoted by system supplier to scope out possible automation).","Mentored colleagues in the use of source control, TFS, .NET and SSIS."]},{title:"Integrated Systems Officer",company:"North Yorkshire County Council, Northallerton, United Kingdom",dates:"Feb 2009 - Feb 2011",description:"",responsibilities:["Project managed the deployment of CACI's 'Children's Centre Management System to the 40 Children's Centres throughout North Yorkshire.","Project managed the deployment of North Yorkshire's new integrated online Admissions system.","Aided in the deployment and integration of IMPULSE; the integrated system for children in North Yorkshire.","Instigated a drive in data quality, this included the creation of a number of XML cleansing macros utilising VBA and xpath to cleanse data received from Schools.","Aided with the implementation and accreditation of the prescribed national child reference system - ContactPoint and took the lead during Instance Accreditation for North Yorkshire and partners.","Provided augmented services when required."]},{title:"Systems Administrative Assistant (Internship)",company:"State Street, Luxembourg",dates:"Sep 2006 - Sep 2007",description:"State Street Corporation is a financial services company that provides investment management services for institutional investors.",responsibilities:["Data warehousing / mining and core applications development for fund compliance.","Java, Oracle and PL/SQL development.","VBA (Contingency macros).","Worked on the development of a data warehousing solution which pooled various assets, funds and investment information from different locations throughout the world. This information would then be used for investment analysis, fund accounting and various other investment strategies."]}],personalProjects:[{title:"AI-Powered Wildlife Health Monitoring Field Lab",technologies:"Python, PyTorch, Raspberry Pi, FastAPI, librosa, Deep Learning, Bioacoustics",responsibilities:["Developed an IoT edge field lab using Python, Raspberry Pi 4, and PyTorch with a custom convolutional neural network to detect hedgehog respiratory illness from acoustic signals, supporting faster interventions and conservation efforts.","Designed a real-time audio analysis pipeline that records 5-second clips, converts them into spectrograms, and classifies breathing patterns using a neural network, achieving ~75% accuracy and 0.91 precision.","Engineered a modular architecture with FastAPI, automated night-time recording, remote inference server on GPU hardware, and Pushbullet alerting.","Applied non-invasive bioacoustic monitoring aligned with UK conservation ethics, demonstrating cross-disciplinary innovation with potential applications in both wildlife conservation and healthcare."]}],certificates:[{title:"IBM Data Science Professional Certificate",description:"A comprehensive, ACE-recommended (12 college credits) and FIBAA-accredited (6 ECTS credits) program covering key data science skills, including Python, regression analysis, statistical modeling, and machine learning."},{title:"IBM AI Developer Professional Certificate",description:"A comprehensive program focused on the essential skills for developing AI applications, including machine learning, deep learning, and natural language processing."}],education:{degree:"BSc (HONS) BUSINESS COMPUTING",university:"University of Teesside",dates:"2004 - 2008",grade:"With Second Class Honours Division One (2:1)"},courses:"Please see LinkedIn for a comprehensive list of completed courses and qualifications"},s_=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/i,r_=/\bhttps?:\/\/[^\s]+|(?:www\.)[^\s]+\.[a-z]{2,}\b/i,a_=/\b(?:\+44\s?7\d{3}|\(0?7\d{3}\)|0?7\d{3})\s?\d{3}\s?\d{3}\b/,o_=/\b(?:\+44\s?|\(0\)\s?|0)(?:1\d{3}|2\d{2}|3\d{2}|[58]\d{2})\s?\d{3}\s?\d{3,4}\b/,l_=new RegExp(`${a_.source}|${o_.source}`,"i"),tA=/\b([A-Z]{1,2}\d{1,2}[A-Z]?)\s?(\d[A-Z]{2})\b/i,nA=/\b(street|st|road|rd|avenue|ave|lane|ln|close|cl|drive|dr|way|place|pl|court|ct|terrace|terr|crescent|cres|square|sq|gardens|gdns|hill|park|mews)\b/i,c_=/^[0-9]{1,4}[A-Z]?\s+/,lf="(?:jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)[a-z]*",qf=new RegExp(`\\b${lf}\\s+\\d{4}\\s*(?:|-|to)\\s*(?:present|current|${lf}\\s+\\d{4})`,"i"),V0=/\b\d{4}\s*(?:|-|to)\s*(?:present|current|\d{4})\b/i,W0=new RegExp(`\\b(?:${lf}\\s+)?\\d{4}(?:\\s*-\\s*(?:${lf}\\s+)?\\d{4})?\\b`,"i"),u_=/\b(senior|lead|principal|manager|director|head|chief|specialist|engineer|developer|analyst|consultant|coordinator|supervisor|assistant|intern|trainee)\b/i,h_=/\b(ltd|limited|inc|incorporated|corp|corporation|llc|plc|group|company|co\.|&|and|solutions|services|systems|technologies|consulting)\b/i,zl=/^\s*(?:[-]|(\d+\.)|([a-z]\.))\s+/,d_=[{key:"profile",re:/^\s*(profile|summary|professional summary|about|overview|career summary|personal profile)\s*$/i,priority:10},{key:"experience",re:/^\s*(work experience|experience|employment history|career history|professional experience|work|jobs)\s*$/i,priority:10},{key:"education",re:/^\s*(education|qualifications|academic background|academic qualifications)\s*$/i,priority:9},{key:"projects",re:/^\s*(projects|personal projects|portfolio|key projects)\s*$/i,priority:8},{key:"certs",re:/^\s*(certificates|certifications|professional certifications)\s*$/i,priority:7},{key:"courses",re:/^\s*(courses|training|additional courses|professional development|continuing education)\s*$/i,priority:6}];function wh(n){return(n??"").replace(/\u00a0/g," ").replace(/\s+/g," ").trim()}function ys(n,e){try{const t=n.match(e);return t?t[0].trim():""}catch{return""}}function f_(n){return(n??"").toString().replace(/\r\n/g,`
`).split(`
`).map(e=>(e??"").trim()).filter(Boolean)}function wv(n){const e=wh(n).toLowerCase();return u_.test(e)||n.length<100&&!/[@.]/.test(n)&&n.split(" ").length<=6&&n.split(" ").length>=2}function p_(n){const e=wh(n);return h_.test(e)||n.includes(",")&&n.length<120||n.length<100&&!zl.test(n)&&!qf.test(n)}function g_(n){return qf.test(n)||V0.test(n)||W0.test(n)}function Rc(n){return zl.test(n)}function m_(n){const e=wh(n);return e?tA.test(e)||c_.test(e)&&nA.test(e):!1}function y_(n){const e=n.findIndex(a=>m_(a));if(e===-1)return"";const t=3;let i=e,s=e;const r=a=>tA.test(a)||nA.test(a)||/^[A-Za-z ,.'-]{2,40}$/.test(a);for(let a=e-1;a>=0&&i>e-t&&r(n[a]);a--)i=a;for(let a=e+1;a<n.length&&s<e+t&&r(n[a]);a++)s=a;return n.slice(i,s+1).join(`
`)}function v_(n){const e=n.slice(0,5),t=i=>{if(!i||/[@\d]/.test(i)||i.length>60)return!1;const s=i.split(/\s+/).filter(Boolean);return s.length>=2&&s.length<=4&&s.every(r=>/^[A-Z][a-z''-]+$/.test(r))};return e.find(t)||""}function b_(n){const e=[];return n.forEach((t,i)=>{const s=wh(t);d_.forEach(r=>{r.re.test(s)&&e.push({index:i,key:r.key,priority:r.priority,title:s})})}),e.sort((t,i)=>t.priority!==i.priority?i.priority-t.priority:t.index-i.index)}function io(n,e,t){const i=e.find(o=>o.key===t);if(!i)return[];const s=i.index+1,r=e.find(o=>o.index>i.index),a=r?r.index:n.length;return n.slice(s,a)}function w_(n){return n.join(" ").slice(0,600)}function A_(n){const e=[];let t=null,i=null;return n.forEach((s,r)=>{const a=wh(s);if(a){if(g_(a)){t&&!t.dates&&(t.dates=ys(a,qf)||ys(a,V0)||ys(a,W0)),i="dates";return}if(Rc(a)){t||(t={title:"",company:"",dates:"",description:"",responsibilities:[]});const o=a.replace(zl,"").trim();o&&t.responsibilities.push(o),i="responsibilities";return}if(wv(a)&&i!=="responsibilities"){t&&(t.title||t.company||t.responsibilities.length>0)&&e.push(t),t={title:a,company:"",dates:"",description:"",responsibilities:[]},i="title";return}if(p_(a)&&i==="title"){t&&(t.company=a,i="company");return}t?i==="company"||i==="dates"?a.length>30&&!wv(a)&&(t.description?t.description+=" "+a:t.description=a,i="description"):(!i||i==="description")&&(a.length<200&&!t.title?(t.title=a,i="title"):!t.description&&a.length>30?(t.description=a,i="description"):a.length>20&&t.responsibilities.push(a)):(t={title:a,company:"",dates:"",description:"",responsibilities:[]},i="title")}}),t&&(t.title||t.company||t.responsibilities.length>0)&&e.push(t),e.filter(s=>s.title.trim()||s.company.trim()).map(s=>({...s,title:s.title.trim(),company:s.company.trim(),dates:s.dates.trim(),description:s.description.trim(),responsibilities:s.responsibilities.filter(r=>r.trim()).map(r=>r.trim())}))}function x_(n){const e=n.join(" ");return{degree:n.find(t=>/(BSc|MSc|PhD|Bachelor|Master|Degree|Diploma|Certificate)/i.test(t))||"",university:n.find(t=>/(University|College|Institute|School)/i.test(t))||"",dates:ys(e,qf)||ys(e,V0)||ys(e,W0),grade:n.find(t=>/(First|Second|Upper|Lower|Honours|Honor|Merit|Distinction|GPA|Grade)/i.test(t))||""}}function S_(n){const e=[];let t=null,i=null;for(let s=0;s<n.length;s++){const r=n[s].trim();if(!r)continue;const a=Rc(r),o=/technologies?:/i.test(r);if(!a&&!o&&(!t||i==="complete"))t&&(t.title||t.responsibilities.length>0)&&e.push(t),t={title:r,technologies:"",responsibilities:[]},i="title";else if(o)t&&(t.technologies=r.replace(/^technologies?:\s*/i,"").trim(),i="technologies");else if(a){t||(t={title:"",technologies:"",responsibilities:[]});const c=r.replace(zl,"").trim();c&&t.responsibilities.push(c),i="responsibilities"}else t&&i!=="complete"&&r.length>30&&t.responsibilities.push(r)}return t&&(t.title||t.responsibilities.length>0)&&e.push(t),e.filter(s=>s.title.trim()||s.responsibilities.length>0).map(s=>({title:s.title.trim(),technologies:s.technologies.trim(),responsibilities:s.responsibilities.filter(r=>r.trim()).map(r=>r.trim())}))}function E_(n){const e=[];let t=null;for(let s=0;s<n.length;s++){const r=n[s].trim();if(!r)continue;if(!Rc(r))t&&t.title&&e.push(t),t={title:r,description:""};else if(t){const o=r.replace(zl,"").trim();o&&(t.description?t.description+=" "+o:t.description=o)}}t&&t.title&&e.push(t);const i=[];for(let s=0;s<n.length;s++){const r=n[s].trim();if(!r)continue;if(!Rc(r)&&!r.startsWith(" ")){const o={title:r,description:""},c=[];for(let u=s+1;u<n.length;u++){const h=n[u].trim();if(!h)continue;if(!Rc(h)&&!h.startsWith(" ")&&h.length<200&&!(/(certificate|certification|program|course|training)/i.test(o.title)&&/(A comprehensive|program|skills|including)/i.test(h)))break;const f=h.replace(zl,"").trim();f&&c.push(f),s=u}o.description=c.join(" "),i.push(o)}}return i.length>0?i:e}function __(){return{personalDetails:{name:"",phone:"",address:"",email:"",website:""},profile:"",education:{degree:"",university:"",dates:"",grade:""},workExperience:[],personalProjects:[],certificates:[],courses:""}}const k_={parseCV(n){const e=__();try{const t=(n??"").toString(),i=f_(t),s=t;e.personalDetails.email=ys(s,s_),e.personalDetails.phone=ys(s,l_),e.personalDetails.website=ys(s,r_),e.personalDetails.address=y_(i),e.personalDetails.name=v_(i);const r=b_(i),a=io(i,r,"profile");a.length&&(e.profile=w_(a));const o=io(i,r,"experience");o.length&&(e.workExperience=A_(o));const c=io(i,r,"education");c.length&&(e.education=x_(c));const u=io(i,r,"projects");u.length&&(e.personalProjects=S_(u));const h=io(i,r,"certs");h.length&&(e.certificates=E_(h));const d=io(i,r,"courses");return d.length&&(e.courses=d.join("; ")),{success:!0,data:e,message:`Successfully parsed CV. Found ${e.workExperience.length} work experience entries, ${e.personalProjects.length} projects, ${e.certificates.length} certificates.`,debug:{sectionsFound:r.map(f=>({key:f.key,title:f.title})),linesProcessed:i.length}}}catch(t){return console.error("CV parsing error:",t),{success:!0,data:e,message:"Parsed with defaults due to error.",error:t.message}}}},iA=["personal","profile","experience","projects","certificates","education","courses"],sc={personal:{id:"personal",name:"Personal Details",icon:"",required:!0,exportable:!0},profile:{id:"profile",name:"Profile",icon:"",required:!1,exportable:!0},experience:{id:"experience",name:"Work Experience",icon:"",required:!1,exportable:!0},projects:{id:"projects",name:"Personal Projects",icon:"",required:!1,exportable:!0},certificates:{id:"certificates",name:"Certificates",icon:"",required:!1,exportable:!0},education:{id:"education",name:"Education",icon:"",required:!1,exportable:!0},courses:{id:"courses",name:"Additional Courses",icon:"",required:!1,exportable:!0}};class C_{constructor(e=iA){this.sectionOrder=[...e]}getSectionOrder(){return[...this.sectionOrder]}setSectionOrder(e){if(!Object.values(sc).filter(s=>s.required).map(s=>s.id).every(s=>e.includes(s)))throw new Error("Missing required sections in new order");return this.sectionOrder=[...e],this.sectionOrder}moveSection(e,t){const i=[...this.sectionOrder],[s]=i.splice(e,1);return i.splice(t,0,s),this.setSectionOrder(i)}getSectionConfig(e){return sc[e]||null}getAllSectionConfigs(){return this.sectionOrder.map(e=>sc[e]).filter(Boolean)}getExportableSections(){return this.sectionOrder.map(e=>sc[e]).filter(e=>e&&e.exportable)}validateSectionData(e,t){if(!this.getSectionConfig(e))return!1;switch(e){case"personal":return t.personalDetails&&(t.personalDetails.name||t.personalDetails.email);case"profile":return typeof t.profile=="string"&&t.profile.trim().length>0;case"experience":return Array.isArray(t.workExperience)&&t.workExperience.some(s=>s.title||s.company);case"projects":return Array.isArray(t.personalProjects)&&t.personalProjects.some(s=>s.title);case"certificates":return Array.isArray(t.certificates)&&t.certificates.some(s=>s.title);case"education":return t.education&&(t.education.degree||t.education.university);case"courses":return typeof t.courses=="string"&&t.courses.trim().length>0;default:return!1}}getVisibleSections(e){return this.sectionOrder.filter(t=>{const i=this.getSectionConfig(t);return i?i.required?!0:this.validateSectionData(t,e):!1})}}const T_=()=>{const[n,e]=U.useState(()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");return U.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]),{theme:n,toggleTheme:()=>{e(i=>i==="light"?"dark":"light")},isDark:n==="dark"}},P_=(n,e)=>{const[t,i]=U.useState(null),[s,r]=U.useState(null),a=U.useCallback((p,m,w)=>{i({item:m,index:w}),p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML),setTimeout(()=>{p.target.style.opacity="0.5"},0)},[]),o=U.useCallback(p=>{p.target.style.opacity="1",i(null),r(null)},[]),c=U.useCallback((p,m)=>{p.preventDefault(),p.dataTransfer.dropEffect="move",r(m)},[]),u=U.useCallback(p=>{const m=p.currentTarget.getBoundingClientRect(),w=p.clientX,E=p.clientY;(w<m.left||w>m.right||E<m.top||E>m.bottom)&&r(null)},[]),h=U.useCallback((p,m)=>{if(p.preventDefault(),!t||t.index===m){i(null),r(null);return}const w=[...n],[E]=w.splice(t.index,1),g=t.index<m?m-1:m;w.splice(g,0,E),e(w),i(null),r(null)},[t,n,e]),d=U.useCallback((p,m)=>({draggable:!0,onDragStart:w=>a(w,p,m),onDragEnd:o,style:{cursor:"grab",userSelect:"none",...(t==null?void 0:t.index)===m&&{opacity:.5,transform:"scale(0.95)"}}}),[t,a,o]),f=U.useCallback(p=>({onDragOver:m=>c(m,p),onDragLeave:u,onDrop:m=>h(m,p),"data-drop-target":!0,style:{...s===p&&{backgroundColor:"rgba(168, 85, 247, 0.1)",borderColor:"rgba(168, 85, 247, 0.5)",transform:"scale(1.02)"}}}),[s,c,u,h]);return{draggedItem:t,dragOverIndex:s,getDragProps:d,getDropProps:f,isDragging:!!t}},Ni=(n=!1)=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 text-sm ${n?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,Qc=(n=!1)=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-sm ${n?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,Ah=()=>document.documentElement.classList.contains("dark"),R_=({workExperience:n,onAdd:e,onUpdate:t,onRemove:i,onAddResponsibility:s,onUpdateResponsibility:r,onRemoveResponsibility:a})=>{const o=Ah();return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Work Experience"}),C.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[C.jsx($0,{className:"h-4 w-4"}),"Add Job"]})]}),n.map((c,u)=>C.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${o?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Xf,{className:"h-5 w-5 text-gray-400"}),C.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Job #",u+1]})]}),C.jsx("button",{onClick:()=>i(u),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:C.jsx(U0,{className:"h-4 w-4"})})]}),C.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[C.jsx("input",{type:"text",value:c.title,onChange:h=>t(u,"title",h.target.value),placeholder:"Job Title",className:Ni(o)}),C.jsx("input",{type:"text",value:c.company,onChange:h=>t(u,"company",h.target.value),placeholder:"Company",className:Ni(o)}),C.jsx("input",{type:"text",value:c.dates,onChange:h=>t(u,"dates",h.target.value),placeholder:"Employment Dates",className:Ni(o)}),C.jsx("textarea",{value:c.description,onChange:h=>t(u,"description",h.target.value),placeholder:"Company Description",rows:"2",className:Qc(o)})]}),C.jsxs("div",{className:"mt-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Responsibilities:"}),C.jsx("button",{onClick:()=>s(u),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),c.responsibilities.map((h,d)=>C.jsxs("div",{className:"flex gap-2 mb-3",children:[C.jsx("textarea",{value:h,onChange:f=>r(u,d,f.target.value),placeholder:"Responsibility description...",rows:"2",className:Qc(o)+" text-sm"}),C.jsx("button",{onClick:()=>a(u,d),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},d))]})]},u))]})},L_=({personalProjects:n,onAdd:e,onUpdate:t,onRemove:i,onAddResponsibility:s,onUpdateResponsibility:r,onRemoveResponsibility:a})=>{const o=Ah();return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Projects"}),C.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[C.jsx($0,{className:"h-4 w-4"}),"Add Project"]})]}),n.map((c,u)=>C.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${o?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Xf,{className:"h-5 w-5 text-gray-400"}),C.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Project #",u+1]})]}),C.jsx("button",{onClick:()=>i(u),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:C.jsx(U0,{className:"h-4 w-4"})})]}),C.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[C.jsx("input",{type:"text",value:c.title,onChange:h=>t(u,"title",h.target.value),placeholder:"Project Title",className:Ni(o)}),C.jsx("input",{type:"text",value:c.technologies,onChange:h=>t(u,"technologies",h.target.value),placeholder:"Technologies Used",className:Ni(o)})]}),C.jsxs("div",{className:"mt-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Project Details:"}),C.jsx("button",{onClick:()=>s(u),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),c.responsibilities.map((h,d)=>C.jsxs("div",{className:"flex gap-2 mb-3",children:[C.jsx("textarea",{value:h,onChange:f=>r(u,d,f.target.value),placeholder:"Project detail description...",rows:"2",className:Qc(o)+" text-sm"}),C.jsx("button",{onClick:()=>a(u,d),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},d))]})]},u))]})},M_=({certificates:n,onAdd:e,onUpdate:t,onRemove:i})=>{const s=Ah();return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Certificates"}),C.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[C.jsx($0,{className:"h-4 w-4"}),"Add Certificate"]})]}),n.map((r,a)=>C.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${s?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Xf,{className:"h-5 w-5 text-gray-400"}),C.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Certificate #",a+1]})]}),C.jsx("button",{onClick:()=>i(a),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:C.jsx(U0,{className:"h-4 w-4"})})]}),C.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[C.jsx("input",{type:"text",value:r.title,onChange:o=>t(a,"title",o.target.value),placeholder:"Certificate Title",className:Ni(s)}),C.jsx("textarea",{value:r.description,onChange:o=>t(a,"description",o.target.value),placeholder:"Certificate Description",rows:"3",className:Qc(s)})]})]},a))]})},N_=({education:n,onUpdate:e})=>{const t=Ah();return C.jsxs("div",{className:"space-y-6",children:[C.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Education"}),C.jsx("div",{className:`p-6 rounded-2xl border shadow-lg ${t?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:C.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Degree"}),C.jsx("input",{type:"text",value:n.degree,onChange:i=>e("degree",i.target.value),placeholder:"Degree Title",className:Ni(t)})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"University"}),C.jsx("input",{type:"text",value:n.university,onChange:i=>e("university",i.target.value),placeholder:"University Name",className:Ni(t)})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dates"}),C.jsx("input",{type:"text",value:n.dates,onChange:i=>e("dates",i.target.value),placeholder:"Study Period",className:Ni(t)})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grade/Classification"}),C.jsx("input",{type:"text",value:n.grade,onChange:i=>e("grade",i.target.value),placeholder:"Grade or Classification",className:Ni(t)})]})]})})]})},I_=({courses:n,onUpdate:e})=>{const t=Ah();return C.jsxs("div",{className:"space-y-6",children:[C.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Additional Courses"}),C.jsx("div",{className:`p-6 rounded-2xl border shadow-lg ${t?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Courses Information"}),C.jsx("textarea",{value:n,onChange:i=>e(i.target.value),rows:"4",className:Qc(t),placeholder:"Information about additional courses, training, or qualifications..."})]})})]})},D_="modulepreload",F_=function(n){return"/CVEditor/"+n},Av={},Uh=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=F_(c),c in Av)return;Av[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":D_,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};var Lc={};Lc.d=(n,e)=>{for(var t in e)Lc.o(e,t)&&!Lc.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Lc.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var Q=globalThis.pdfjsLib={};Lc.d(Q,{AbortException:()=>Za,AnnotationEditorLayer:()=>Bm,AnnotationEditorParamsType:()=>K,AnnotationEditorType:()=>Z,AnnotationEditorUIManager:()=>Ga,AnnotationLayer:()=>IC,AnnotationMode:()=>Fs,ColorPicker:()=>df,DOMSVGFactory:()=>iy,DrawLayer:()=>Wm,FeatureTest:()=>zt,GlobalWorkerOptions:()=>fs,ImageKind:()=>od,InvalidPDFException:()=>rA,MissingPDFException:()=>Ja,OPS:()=>Vn,OutputScale:()=>Dg,PDFDataRangeTransport:()=>tx,PDFDateString:()=>K0,PDFWorker:()=>No,PasswordResponses:()=>H_,PermissionFlag:()=>z_,PixelsPerInch:()=>xr,RenderingCancelledException:()=>q0,TextLayer:()=>Jc,UnexpectedResponseException:()=>Jf,Util:()=>B,VerbosityLevel:()=>Yf,XfaLayer:()=>ix,build:()=>pC,createValidAbsoluteUrl:()=>V_,fetchData:()=>ep,getDocument:()=>rC,getFilenameFromUrl:()=>Z_,getPdfFilenameFromUrl:()=>ek,getXfaPageViewport:()=>tk,isDataScheme:()=>tp,isPdfFile:()=>Y0,noContextMenu:()=>zn,normalizeUnicode:()=>K_,setLayerDimensions:()=>Wa,shadow:()=>ue,version:()=>fC});const Lt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),sA=[1,0,0,1,0,0],Lg=[.001,0,0,.001,0,0],O_=1e7,Np=1.35,pn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Fs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},j_="pdfjs_internal_editor_",Z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},K={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},z_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Et={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},od={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Qe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Ql={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Yf={ERRORS:0,WARNINGS:1,INFOS:5},Vn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},H_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Kf=Yf.WARNINGS;function B_(n){Number.isInteger(n)&&(Kf=n)}function $_(){return Kf}function Qf(n){Kf>=Yf.INFOS&&console.log(`Info: ${n}`)}function ie(n){Kf>=Yf.WARNINGS&&console.log(`Warning: ${n}`)}function Pe(n){throw new Error(n)}function it(n,e){n||Pe(e)}function U_(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function V_(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Y_(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(U_(i))return i}catch{}return null}function ue(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Pr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Mg extends Pr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ng extends Pr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rA extends Pr{constructor(e){super(e,"InvalidPDFException")}}class Ja extends Pr{constructor(e){super(e,"MissingPDFException")}}class Jf extends Pr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class W_ extends Pr{constructor(e){super(e,"FormatError")}}class Za extends Pr{constructor(e){super(e,"AbortException")}}function aA(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Pe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),a=n.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Zf(n){typeof n!="string"&&Pe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function G_(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function G0(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function X_(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function q_(){try{return new Function(""),!0}catch{return!1}}class zt{static get isLittleEndian(){return ue(this,"isLittleEndian",X_())}static get isEvalSupported(){return ue(this,"isEvalSupported",q_())}static get isOffscreenCanvasSupported(){return ue(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ue(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ue(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ue(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ip=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var bs,ld,Ig;class B{static makeHexColor(e,t,i){return`#${Ip[e]}${Ip[t]}${Ip[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,r]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],r[0],a[0]),Math.min(i[1],s[1],r[1],a[1]),Math.max(i[0],s[0],r[0],a[0]),Math.max(i[1],s[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,c=Math.sqrt((i+a)**2-4*(i*a-r*s))/2,u=o+c||1,h=o-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[i,r,s,a]}static bezierBoundingBox(e,t,i,s,r,a,o,c,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],v(this,bs,Ig).call(this,e,i,r,o,t,s,a,c,3*(-e+3*(i-r)+o),6*(e-2*i+r),3*(i-e),u),v(this,bs,Ig).call(this,e,i,r,o,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),u),u}}bs=new WeakSet,ld=function(e,t,i,s,r,a,o,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*e+3*u*t)+3*f*i)+p*s,w=d*(d*(d*r+3*u*a)+3*f*o)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],w)},Ig=function(e,t,i,s,r,a,o,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&v(this,bs,ld).call(this,e,t,i,s,r,a,o,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),w=2*u;v(this,bs,ld).call(this,e,t,i,s,r,a,o,c,(-h+m)/w,f),v(this,bs,ld).call(this,e,t,i,s,r,a,o,c,(-h-m)/w,f)},A(B,bs);function Y_(n){return decodeURIComponent(escape(n))}let Dp=null,xv=null;function K_(n){return Dp||(Dp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xv=new Map([["","t"]])),n.replaceAll(Dp,(e,t,i)=>t?t.normalize("NFKC"):xv.get(i))}function Q_(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return aA(n)}const X0="pdfjs_internal_id_",Fi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function J_(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(aA(n))}const ji="http://www.w3.org/2000/svg",Or=class Or{};Y(Or,"CSS",96),Y(Or,"PDF",72),Y(Or,"PDF_TO_CSS_UNITS",Or.CSS/Or.PDF);let xr=Or;async function ep(n,e="text"){if(rc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class xh{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=r;const o=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,f=-f);let p,m,w,E;u===0?(p=Math.abs(c-e[1])*t+s,m=Math.abs(o-e[0])*t+r,w=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+s,m=Math.abs(c-e[1])*t+r,w=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,p-u*t*o-d*t*c,m-h*t*o-f*t*c],this.width=w,this.height=E}get rawDims(){const{viewBox:e}=this;return ue(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new xh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return B.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=B.applyTransform([e[0],e[1]],this.transform),i=B.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return B.applyInverseTransform([e,t],this.transform)}}class q0 extends Pr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function tp(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Y0(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Z_(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function ek(n,e="document.pdf"){if(typeof n!="string")return e;if(tp(n))return ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class Sv{constructor(){Y(this,"started",Object.create(null));Y(this,"times",[])}time(e){e in this.started&&ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function rc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function zn(n){n.preventDefault()}function Ev(n){console.log("Deprecated API usage: "+n)}var eu;class K0{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,eu)||y(this,eu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,eu).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(a+=h,o+=d):u==="+"&&(a-=h,o-=d),new Date(Date.UTC(i,s,r,a,o,c))}}eu=new WeakMap,A(K0,eu);function tk(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new xh({viewBox:r,scale:e,rotation:t})}function Q0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ie(`Not a valid color format: "${n}"`),[0,0,0])}function nk(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,Q0(i))}e.remove()}function Oe(n){const{a:e,b:t,c:i,d:s,e:r,f:a}=n.getTransform();return[e,t,i,s,r,a]}function Oi(n){const{a:e,b:t,c:i,d:s,e:r,f:a}=n.getTransform().invertSelf();return[e,t,i,s,r,a]}function Wa(n,e,t=!1,i=!0){if(e instanceof xh){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:a}=n,o=zt.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,h=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=d):(a.width=d,a.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}class Dg{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Os,$r,Wn,Ur,tu,nu,pf,oA,Ht,lA,cA,cd,uA,Og;const Hi=class Hi{constructor(e){A(this,Ht);A(this,Os,null);A(this,$r,null);A(this,Wn);A(this,Ur,null);A(this,tu,null);y(this,Wn,e),l(Hi,nu)||y(Hi,nu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=y(this,Os,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Wn)._uiManager._signal;e.addEventListener("contextmenu",zn,{signal:t}),e.addEventListener("pointerdown",v(Hi,pf,oA),{signal:t});const i=y(this,Ur,document.createElement("div"));i.className="buttons",e.append(i);const s=l(this,Wn).toolbarPosition;if(s){const{style:r}=e,a=l(this,Wn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return v(this,Ht,uA).call(this),e}get div(){return l(this,Os)}hide(){var e;l(this,Os).classList.add("hidden"),(e=l(this,$r))==null||e.hideDropdown()}show(){var e;l(this,Os).classList.remove("hidden"),(e=l(this,tu))==null||e.shown()}async addAltText(e){const t=await e.render();v(this,Ht,cd).call(this,t),l(this,Ur).prepend(t,l(this,Ht,Og)),y(this,tu,e)}addColorPicker(e){y(this,$r,e);const t=e.renderButton();v(this,Ht,cd).call(this,t),l(this,Ur).prepend(t,l(this,Ht,Og))}remove(){var e;l(this,Os).remove(),(e=l(this,$r))==null||e.destroy(),y(this,$r,null)}};Os=new WeakMap,$r=new WeakMap,Wn=new WeakMap,Ur=new WeakMap,tu=new WeakMap,nu=new WeakMap,pf=new WeakSet,oA=function(e){e.stopPropagation()},Ht=new WeakSet,lA=function(e){l(this,Wn)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},cA=function(e){l(this,Wn)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},cd=function(e){const t=l(this,Wn)._uiManager._signal;e.addEventListener("focusin",v(this,Ht,lA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",v(this,Ht,cA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",zn,{signal:t})},uA=function(){const{editorType:e,_uiManager:t}=l(this,Wn),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(Hi,nu)[e]),v(this,Ht,cd).call(this,i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,Ur).append(i)},Og=function(){const e=document.createElement("div");return e.className="divider",e},A(Hi,pf),A(Hi,nu,null);let Fg=Hi;var iu,Vr,Wr,Er,hA,dA,fA;class ik{constructor(e){A(this,Er);A(this,iu,null);A(this,Vr,null);A(this,Wr);y(this,Wr,e)}show(e,t,i){const[s,r]=v(this,Er,dA).call(this,t,i),{style:a}=l(this,Vr)||y(this,Vr,v(this,Er,hA).call(this));e.append(l(this,Vr)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Vr).remove()}}iu=new WeakMap,Vr=new WeakMap,Wr=new WeakMap,Er=new WeakSet,hA=function(){const e=y(this,Vr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",zn,{signal:l(this,Wr)._signal});const t=y(this,iu,document.createElement("div"));return t.className="buttons",e.append(t),v(this,Er,fA).call(this),e},dA=function(e,t){let i=0,s=0;for(const r of e){const a=r.y+r.height;if(a<i)continue;const o=r.x+(t?r.width:0);if(a>i){s=o,i=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,i]},fA=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Wr)._signal;e.addEventListener("contextmenu",zn,{signal:i}),e.addEventListener("click",()=>{l(this,Wr).highlightSelection("floating_button")},{signal:i}),l(this,iu).append(e)};function cf(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function sk(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var gf;class rk{constructor(){A(this,gf,0)}get id(){return`${j_}${Nt(this,gf)._++}`}}gf=new WeakMap;var Io,su,kt,Do,ud;const ry=class ry{constructor(){A(this,Do);A(this,Io,Q_());A(this,su,0);A(this,kt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ue(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return v(this,Do,ud).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return v(this,Do,ud).call(this,e,e)}async getFromBlob(e,t){const i=await t;return v(this,Do,ud).call(this,e,i)}async getFromId(e){l(this,kt)||y(this,kt,new Map);const t=l(this,kt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,kt)||y(this,kt,new Map);let i=l(this,kt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${l(this,Io)}_${Nt(this,su)._++}`,refCounter:1,isSvg:!1},l(this,kt).set(e,i),l(this,kt).set(i.id,i),i}getSvgUrl(e){const t=l(this,kt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,kt)||y(this,kt,new Map);const t=l(this,kt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Io)}_`)}};Io=new WeakMap,su=new WeakMap,kt=new WeakMap,Do=new WeakSet,ud=async function(e,t){l(this,kt)||y(this,kt,new Map);let i=l(this,kt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,Io)}_${Nt(this,su)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await ep(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=ry._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((u,h)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const d=i.svgUrl=a.result;o.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=h});a.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return l(this,kt).set(e,i),i&&l(this,kt).set(i.id,i),i};let jg=ry;var at,js,ru,ot;class ak{constructor(e=128){A(this,at,[]);A(this,js,!1);A(this,ru);A(this,ot,-1);y(this,ru,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),l(this,js))return;const c={cmd:e,undo:t,post:i,type:r};if(l(this,ot)===-1){l(this,at).length>0&&(l(this,at).length=0),y(this,ot,0),l(this,at).push(c);return}if(a&&l(this,at)[l(this,ot)].type===r){o&&(c.undo=l(this,at)[l(this,ot)].undo),l(this,at)[l(this,ot)]=c;return}const u=l(this,ot)+1;u===l(this,ru)?l(this,at).splice(0,1):(y(this,ot,u),u<l(this,at).length&&l(this,at).splice(u)),l(this,at).push(c)}undo(){if(l(this,ot)===-1)return;y(this,js,!0);const{undo:e,post:t}=l(this,at)[l(this,ot)];e(),t==null||t(),y(this,js,!1),y(this,ot,l(this,ot)-1)}redo(){if(l(this,ot)<l(this,at).length-1){y(this,ot,l(this,ot)+1),y(this,js,!0);const{cmd:e,post:t}=l(this,at)[l(this,ot)];e(),t==null||t(),y(this,js,!1)}}hasSomethingToUndo(){return l(this,ot)!==-1}hasSomethingToRedo(){return l(this,ot)<l(this,at).length-1}destroy(){y(this,at,null)}}at=new WeakMap,js=new WeakMap,ru=new WeakMap,ot=new WeakMap;var mf,pA;class Sh{constructor(e){A(this,mf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=zt.platform;for(const[i,s,r={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(v(this,mf,pA).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(s.bind(e,...a,t)(),r||(t.stopPropagation(),t.preventDefault()))}}mf=new WeakSet,pA=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const yf=class yf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return nk(e),ue(this,"_colors",e)}convert(e){const t=Q0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,a)=>r===t[a]))return yf._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?B.makeHexColor(...t):e}};Y(yf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let zg=yf;var Fo,an,Ze,pt,Oo,Ui,jo,Gn,zs,zo,Gr,pi,Xn,Xr,au,ou,Ho,lu,gi,Hs,Bo,Bs,mi,vf,$s,cu,Us,qr,uu,hu,lt,ve,Vi,Yr,du,fu,Vs,yi,Wi,pu,_n,D,hd,Hg,gA,mA,dd,yA,vA,bA,Bg,wA,$g,Ug,AA,It,Rs,xA,SA,Vg,EA,ac,Wg;const _o=class _o{constructor(e,t,i,s,r,a,o,c,u,h,d){A(this,D);A(this,Fo,new AbortController);A(this,an,null);A(this,Ze,new Map);A(this,pt,new Map);A(this,Oo,null);A(this,Ui,null);A(this,jo,null);A(this,Gn,new ak);A(this,zs,null);A(this,zo,0);A(this,Gr,new Set);A(this,pi,null);A(this,Xn,null);A(this,Xr,new Set);A(this,au,!1);A(this,ou,!1);A(this,Ho,!1);A(this,lu,null);A(this,gi,null);A(this,Hs,null);A(this,Bo,null);A(this,Bs,!1);A(this,mi,null);A(this,vf,new rk);A(this,$s,!1);A(this,cu,!1);A(this,Us,null);A(this,qr,null);A(this,uu,null);A(this,hu,null);A(this,lt,Z.NONE);A(this,ve,new Set);A(this,Vi,null);A(this,Yr,null);A(this,du,null);A(this,fu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Vs,[0,0]);A(this,yi,null);A(this,Wi,null);A(this,pu,null);A(this,_n,null);const f=this._signal=l(this,Fo).signal;y(this,Wi,e),y(this,pu,t),y(this,Oo,i),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),v(this,D,yA).call(this),v(this,D,AA).call(this),v(this,D,Bg).call(this),y(this,Ui,r.annotationStorage),y(this,lu,r.filterFactory),y(this,Yr,a),y(this,Bo,o||null),y(this,au,c),y(this,ou,u),y(this,Ho,h),y(this,hu,d||null),this.viewParameters={realScale:xr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=_o.prototype,t=a=>l(a,Wi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ue(this,"_keyboardManager",new Sh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Wi).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&l(a,Wi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,s;(e=l(this,_n))==null||e.resolve(),y(this,_n,null),(t=l(this,Fo))==null||t.abort(),y(this,Fo,null),this._signal=null;for(const r of l(this,pt).values())r.destroy();l(this,pt).clear(),l(this,Ze).clear(),l(this,Xr).clear(),y(this,an,null),l(this,ve).clear(),l(this,Gn).destroy(),(i=l(this,Oo))==null||i.destroy(),(s=l(this,mi))==null||s.hide(),y(this,mi,null),l(this,gi)&&(clearTimeout(l(this,gi)),y(this,gi,null)),l(this,yi)&&(clearTimeout(l(this,yi)),y(this,yi,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,hu)}get useNewAltTextFlow(){return l(this,ou)}get useNewAltTextWhenAddingImage(){return l(this,Ho)}get hcmFilter(){return ue(this,"hcmFilter",l(this,Yr)?l(this,lu).addHCMFilter(l(this,Yr).foreground,l(this,Yr).background):"none")}get direction(){return ue(this,"direction",getComputedStyle(l(this,Wi)).direction)}get highlightColors(){return ue(this,"highlightColors",l(this,Bo)?new Map(l(this,Bo).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ue(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){y(this,uu,e)}editAltText(e,t=!1){var i;(i=l(this,Oo))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":y(this,Ho,t);break}}onPageChanging({pageNumber:e}){y(this,zo,e-1)}focusMainContainer(){l(this,Wi).focus()}findParent(e,t){for(const i of l(this,pt).values()){const{x:s,y:r,width:a,height:o}=i.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=r&&t<=r+o)return i}return null}disableUserSelect(e=!1){l(this,pu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Xr).add(e)}removeShouldRescale(e){l(this,Xr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*xr.PDF_TO_CSS_UNITS;for(const t of l(this,Xr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a}=t,o=t.toString(),u=v(this,D,hd).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=v(this,D,Hg).call(this,u),f=l(this,lt)===Z.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Z.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Ui)&&!l(this,Ui).has(e.id)&&l(this,Ui).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Bs)&&(y(this,Bs,!1),v(this,D,dd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,ve))if(t.div.contains(e)){y(this,qr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,qr))return;const[e,t]=l(this,qr);y(this,qr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){v(this,D,Bg).call(this),v(this,D,$g).call(this)}removeEditListeners(){v(this,D,wA).call(this),v(this,D,Ug).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,Xn))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,Xn))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,an))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,ve)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of l(this,Xn))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){ie(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const a=()=>{for(const c of r)v(this,D,Vg).call(this,c);v(this,D,Wg).call(this,r)},o=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){ie(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,lt)!==Z.NONE&&!this.isEditorHandlingKeyboard&&_o._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Bs)&&(y(this,Bs,!1),v(this,D,dd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(v(this,D,vA).call(this),v(this,D,$g).call(this),v(this,D,It).call(this,{isEditing:l(this,lt)!==Z.NONE,isEmpty:v(this,D,ac).call(this),hasSomethingToUndo:l(this,Gn).hasSomethingToUndo(),hasSomethingToRedo:l(this,Gn).hasSomethingToRedo(),hasSelectedEditor:!1})):(v(this,D,bA).call(this),v(this,D,Ug).call(this),v(this,D,It).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Xn)){y(this,Xn,e);for(const t of l(this,Xn))v(this,D,Rs).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,vf).id}get currentLayer(){return l(this,pt).get(l(this,zo))}getLayer(e){return l(this,pt).get(e)}get currentPageIndex(){return l(this,zo)}addLayer(e){l(this,pt).set(e.pageIndex,e),l(this,$s)?e.enable():e.disable()}removeLayer(e){l(this,pt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,lt)!==e&&!(l(this,_n)&&(await l(this,_n).promise,!l(this,_n)))){if(y(this,_n,Promise.withResolvers()),y(this,lt,e),e===Z.NONE){this.setEditingState(!1),v(this,D,SA).call(this),l(this,_n).resolve();return}this.setEditingState(!0),await v(this,D,xA).call(this),this.unselectAll();for(const s of l(this,pt).values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,_n).resolve();return}for(const s of l(this,Ze).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,_n).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,lt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,Xn)){switch(e){case K.CREATE:this.currentLayer.addNewEditor();return;case K.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,uu))==null||i.updateColor(t);break;case K.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,du)||y(this,du,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,ve))s.updateParams(e,t);for(const s of l(this,Xn))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const a of l(this,Ze).values())a.editorType===e&&a.show(t);(((r=l(this,du))==null?void 0:r.get(K.HIGHLIGHT_SHOW_ALL))??!0)!==t&&v(this,D,Rs).call(this,[[K.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,cu)!==e){y(this,cu,e);for(const t of l(this,pt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Ze).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Ze).get(e)}addEditor(e){l(this,Ze).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,gi)&&clearTimeout(l(this,gi)),y(this,gi,setTimeout(()=>{this.focusMainContainer(),y(this,gi,null)},0))),l(this,Ze).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Gr).has(e.annotationElementId))&&((t=l(this,Ui))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Gr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Gr).has(e)}removeDeletedAnnotationElement(e){l(this,Gr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,an)!==e&&(y(this,an,e),e&&v(this,D,Rs).call(this,e.propertiesToUpdate))}updateUI(e){l(this,D,EA)===e&&v(this,D,Rs).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,ve).has(e)){l(this,ve).delete(e),e.unselect(),v(this,D,It).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ve).add(e),e.select(),v(this,D,Rs).call(this,e.propertiesToUpdate),v(this,D,It).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,ve))t!==e&&t.unselect();l(this,ve).clear(),l(this,ve).add(e),e.select(),v(this,D,Rs).call(this,e.propertiesToUpdate),v(this,D,It).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,ve).has(e)}get firstSelectedEditor(){return l(this,ve).values().next().value}unselect(e){e.unselect(),l(this,ve).delete(e),v(this,D,It).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ve).size!==0}get isEnterHandled(){return l(this,ve).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Gn).undo(),v(this,D,It).call(this,{hasSomethingToUndo:l(this,Gn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:v(this,D,ac).call(this)})}redo(){l(this,Gn).redo(),v(this,D,It).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Gn).hasSomethingToRedo(),isEmpty:v(this,D,ac).call(this)})}addCommands(e){l(this,Gn).add(e),v(this,D,It).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:v(this,D,ac).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,ve)],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)v(this,D,Vg).call(this,s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,an))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,an)||this.hasSelection}selectAll(){for(const e of l(this,ve))e.commit();v(this,D,Wg).call(this,l(this,Ze).values())}unselectAll(){if(!(l(this,an)&&(l(this,an).commitOrRemove(),l(this,lt)!==Z.NONE))&&this.hasSelection){for(const e of l(this,ve))e.unselect();l(this,ve).clear(),v(this,D,It).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,Vs)[0]+=e,l(this,Vs)[1]+=t;const[s,r]=l(this,Vs),a=[...l(this,ve)],o=1e3;l(this,yi)&&clearTimeout(l(this,yi)),y(this,yi,setTimeout(()=>{y(this,yi,null),l(this,Vs)[0]=l(this,Vs)[1]=0,this.addCommands({cmd:()=>{for(const c of a)l(this,Ze).has(c.id)&&c.translateInPage(s,r)},undo:()=>{for(const c of a)l(this,Ze).has(c.id)&&c.translateInPage(-s,-r)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,pi,new Map);for(const e of l(this,ve))l(this,pi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,pi))return!1;this.disableUserSelect(!1);const e=l(this,pi);y(this,pi,null);let t=!1;for(const[{x:s,y:r,pageIndex:a},o]of e)o.newX=s,o.newY=r,o.newPageIndex=a,t||(t=s!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const i=(s,r,a,o)=>{if(l(this,Ze).has(s.id)){const c=l(this,pt).get(o);c?s._setParentAndPosition(c,r,a):(s.pageIndex=o,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:o}]of e)i(s,r,a,o)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:o}]of e)i(s,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,pi))for(const i of l(this,pi).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,ve).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,an)===e}getActive(){return l(this,an)}getMode(){return l(this,lt)}get imageManager(){return ue(this,"imageManager",new jg)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,d,f)=>({x:(h-s)/a,y:1-(u+d-i)/r,width:f/a,height:d/r});break;case"180":o=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/a,width:d/r,height:f/a});break;case"270":o=(u,h,d,f)=>({x:1-(h+f-s)/a,y:(u-i)/r,width:f/a,height:d/r});break;default:o=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/a,width:d/r,height:f/a});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:w}of d.getClientRects())m===0||w===0||c.push(o(f,p,m,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,jo)||y(this,jo,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,jo))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,jo))==null?void 0:s.get(e.data.id);if(!t)return;const i=l(this,Ui).getRawValue(t);i&&(l(this,lt)===Z.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};Fo=new WeakMap,an=new WeakMap,Ze=new WeakMap,pt=new WeakMap,Oo=new WeakMap,Ui=new WeakMap,jo=new WeakMap,Gn=new WeakMap,zs=new WeakMap,zo=new WeakMap,Gr=new WeakMap,pi=new WeakMap,Xn=new WeakMap,Xr=new WeakMap,au=new WeakMap,ou=new WeakMap,Ho=new WeakMap,lu=new WeakMap,gi=new WeakMap,Hs=new WeakMap,Bo=new WeakMap,Bs=new WeakMap,mi=new WeakMap,vf=new WeakMap,$s=new WeakMap,cu=new WeakMap,Us=new WeakMap,qr=new WeakMap,uu=new WeakMap,hu=new WeakMap,lt=new WeakMap,ve=new WeakMap,Vi=new WeakMap,Yr=new WeakMap,du=new WeakMap,fu=new WeakMap,Vs=new WeakMap,yi=new WeakMap,Wi=new WeakMap,pu=new WeakMap,_n=new WeakMap,D=new WeakSet,hd=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Hg=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,pt).values())if(i.hasTextLayer(e))return i;return null},gA=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=v(this,D,hd).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(l(this,mi)||y(this,mi,new ik(this)),l(this,mi).show(i,s,this.direction==="ltr"))},mA=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Vi)&&((r=l(this,mi))==null||r.hide(),y(this,Vi,null),v(this,D,It).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Vi))return;const s=v(this,D,hd).call(this,e).closest(".textLayer");if(!s){l(this,Vi)&&((a=l(this,mi))==null||a.hide(),y(this,Vi,null),v(this,D,It).call(this,{hasSelectedText:!1}));return}if((o=l(this,mi))==null||o.hide(),y(this,Vi,t),v(this,D,It).call(this,{hasSelectedText:!0}),!(l(this,lt)!==Z.HIGHLIGHT&&l(this,lt)!==Z.NONE)&&(l(this,lt)===Z.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,Bs,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,lt)===Z.HIGHLIGHT?v(this,D,Hg).call(this,s):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&v(this,D,dd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},dd=function(e=""){l(this,lt)===Z.HIGHLIGHT?this.highlightSelection(e):l(this,au)&&v(this,D,gA).call(this)},yA=function(){document.addEventListener("selectionchange",v(this,D,mA).bind(this),{signal:this._signal})},vA=function(){if(l(this,Hs))return;y(this,Hs,new AbortController);const e=this.combinedSignal(l(this,Hs));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},bA=function(){var e;(e=l(this,Hs))==null||e.abort(),y(this,Hs,null)},Bg=function(){if(l(this,Us))return;y(this,Us,new AbortController);const e=this.combinedSignal(l(this,Us));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},wA=function(){var e;(e=l(this,Us))==null||e.abort(),y(this,Us,null)},$g=function(){if(l(this,zs))return;y(this,zs,new AbortController);const e=this.combinedSignal(l(this,zs));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Ug=function(){var e;(e=l(this,zs))==null||e.abort(),y(this,zs,null)},AA=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},It=function(e){Object.entries(e).some(([i,s])=>l(this,fu)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,fu),e)}),l(this,lt)===Z.HIGHLIGHT&&e.hasSelectedEditor===!1&&v(this,D,Rs).call(this,[[K.HIGHLIGHT_FREE,!0]]))},Rs=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},xA=async function(){if(!l(this,$s)){y(this,$s,!0);const e=[];for(const t of l(this,pt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ze).values())t.enable()}},SA=function(){if(this.unselectAll(),l(this,$s)){y(this,$s,!1);for(const e of l(this,pt).values())e.disable();for(const e of l(this,Ze).values())e.disable()}},Vg=function(e){const t=l(this,pt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},EA=function(){let e=null;for(e of l(this,ve));return e},ac=function(){if(l(this,Ze).size===0)return!0;if(l(this,Ze).size===1)for(const e of l(this,Ze).values())return e.isEmpty();return!1},Wg=function(e){for(const t of l(this,ve))t.unselect();l(this,ve).clear();for(const t of e)t.isEmpty()||(l(this,ve).add(t),t.select());v(this,D,It).call(this,{hasSelectedEditor:this.hasSelection})},Y(_o,"TRANSLATE_SMALL",1),Y(_o,"TRANSLATE_BIG",10);let Ga=_o;var ct,vi,qn,$o,bi,on,Uo,wi,Xt,Gi,Kr,Ai,Ws,ai,oc,fd;const Dt=class Dt{constructor(e){A(this,ai);A(this,ct,null);A(this,vi,!1);A(this,qn,null);A(this,$o,null);A(this,bi,null);A(this,on,null);A(this,Uo,!1);A(this,wi,null);A(this,Xt,null);A(this,Gi,null);A(this,Kr,null);A(this,Ai,!1);y(this,Xt,e),y(this,Ai,e._uiManager.useNewAltTextFlow),l(Dt,Ws)||y(Dt,Ws,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Dt._l10n??(Dt._l10n=e)}async render(){const e=y(this,qn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=y(this,$o,document.createElement("span"));e.append(t),l(this,Ai)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Dt,Ws).missing),t.setAttribute("data-l10n-id",l(Dt,Ws)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,Xt)._uiManager._signal;e.addEventListener("contextmenu",zn,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),l(this,Xt)._uiManager.editAltText(l(this,Xt)),l(this,Ai)&&l(this,Xt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,ai,oc)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(y(this,Uo,!0),s(r))},{signal:i}),await v(this,ai,fd).call(this),e}finish(){l(this,qn)&&(l(this,qn).focus({focusVisible:l(this,Uo)}),y(this,Uo,!1))}isEmpty(){return l(this,Ai)?l(this,ct)===null:!l(this,ct)&&!l(this,vi)}hasData(){return l(this,Ai)?l(this,ct)!==null||!!l(this,Gi):this.isEmpty()}get guessedText(){return l(this,Gi)}async setGuessedText(e){l(this,ct)===null&&(y(this,Gi,e),y(this,Kr,await Dt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),v(this,ai,fd).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Ai)||l(this,ct)){(t=l(this,wi))==null||t.remove(),y(this,wi,null);return}if(!l(this,wi)){const i=y(this,wi,document.createElement("div"));i.className="noAltTextBadge",l(this,Xt).div.append(i)}l(this,wi).classList.toggle("hidden",!e)}serialize(e){let t=l(this,ct);return!e&&l(this,Gi)===t&&(t=l(this,Kr)),{altText:t,decorative:l(this,vi),guessedText:l(this,Gi),textWithDisclaimer:l(this,Kr)}}get data(){return{altText:l(this,ct),decorative:l(this,vi)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(y(this,Gi,i),y(this,Kr,s)),!(l(this,ct)===e&&l(this,vi)===t)&&(r||(y(this,ct,e),y(this,vi,t)),v(this,ai,fd).call(this))}toggle(e=!1){l(this,qn)&&(!e&&l(this,on)&&(clearTimeout(l(this,on)),y(this,on,null)),l(this,qn).disabled=!e)}shown(){l(this,Xt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,ai,oc)}})}destroy(){var e,t;(e=l(this,qn))==null||e.remove(),y(this,qn,null),y(this,$o,null),y(this,bi,null),(t=l(this,wi))==null||t.remove(),y(this,wi,null)}};ct=new WeakMap,vi=new WeakMap,qn=new WeakMap,$o=new WeakMap,bi=new WeakMap,on=new WeakMap,Uo=new WeakMap,wi=new WeakMap,Xt=new WeakMap,Gi=new WeakMap,Kr=new WeakMap,Ai=new WeakMap,Ws=new WeakMap,ai=new WeakSet,oc=function(){return l(this,ct)&&"added"||l(this,ct)===null&&this.guessedText&&"review"||"missing"},fd=async function(){var s,r,a;const e=l(this,qn);if(!e)return;if(l(this,Ai)){if(e.classList.toggle("done",!!l(this,ct)),e.setAttribute("data-l10n-id",l(Dt,Ws)[l(this,ai,oc)]),(s=l(this,$o))==null||s.setAttribute("data-l10n-id",l(Dt,Ws)[`${l(this,ai,oc)}-label`]),!l(this,ct)){(r=l(this,bi))==null||r.remove();return}}else{if(!l(this,ct)&&!l(this,vi)){e.classList.remove("done"),(a=l(this,bi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,bi);if(!t){y(this,bi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Xt).id}`;const o=100,c=l(this,Xt)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,on)),y(this,on,null)},{once:!0}),e.addEventListener("mouseenter",()=>{y(this,on,setTimeout(()=>{y(this,on,null),l(this,bi).classList.add("show"),l(this,Xt)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,on)&&(clearTimeout(l(this,on)),y(this,on,null)),(u=l(this,bi))==null||u.classList.remove("show")},{signal:c})}l(this,vi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,ct)),t.parentNode||e.append(t);const i=l(this,Xt).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},A(Dt,Ws,null),Y(Dt,"_l10n",null);let uf=Dt;var Qr,Yn,De,Vo,Jr,gt,Zr,Gs,gu,ea,Xs,mu,ta,Xi,xi,Wo,Go,kn,yu,bf,te,Gg,vu,Xg,qg,_A,kA,Yg,Kg,Qg,CA,Jg,TA,PA,RA,Zg,lc;const ye=class ye{constructor(e){A(this,te);A(this,Qr,null);A(this,Yn,null);A(this,De,null);A(this,Vo,!1);A(this,Jr,!1);A(this,gt,null);A(this,Zr,null);A(this,Gs,null);A(this,gu,"");A(this,ea,!1);A(this,Xs,null);A(this,mu,!1);A(this,ta,!1);A(this,Xi,!1);A(this,xi,null);A(this,Wo,0);A(this,Go,0);A(this,kn,null);Y(this,"_editToolbar",null);Y(this,"_initialOptions",Object.create(null));Y(this,"_initialData",null);Y(this,"_isVisible",!0);Y(this,"_uiManager",null);Y(this,"_focusEventsAllowed",!0);A(this,yu,!1);A(this,bf,ye._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ye.prototype._resizeWithKeyboard,t=Ga.TRANSLATE_SMALL,i=Ga.TRANSLATE_BIG;return ue(this,"_resizerKeyboardManager",new Sh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],ye.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ue(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ok({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ye._l10n??(ye._l10n=e),ye._l10nResizer||(ye._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ye._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ye._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Pe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,yu)}set _isDraggable(e){var t;y(this,yu,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,bf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):v(this,te,lc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,ea)?y(this,ea,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){v(this,te,Gg).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Xs)||y(this,Xs,[this.x,this.y]),v(this,te,Gg).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Xs)||y(this,Xs,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,c]=this.getBaseTranslation();r+=o,a+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Xs)&&(l(this,Xs)[0]!==this.x||l(this,Xs)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=ye,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:r,width:a,height:o}=this;if(a*=t,o*=i,s*=t,r*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),r=Math.max(0,Math.min(i-o,r));break;case 90:s=Math.max(0,Math.min(t-o,s)),r=Math.min(i,Math.max(a,r));break;case 180:s=Math.min(t,Math.max(a,s)),r=Math.min(i,Math.max(o,r));break;case 270:s=Math.min(t,Math.max(o,s)),r=Math.max(0,Math.min(i-a,r));break}this.x=s/=t,this.y=r/=i;const[c,u]=this.getBaseTranslation();s+=c,r+=u;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return v(i=ye,vu,Xg).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return v(i=ye,vu,Xg).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,Jr)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!l(this,Jr)&&t.endsWith("%");if(s&&r)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!l(this,Jr)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,De))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,ta)?this._editToolbar:(this._editToolbar=new Fg(this),this.div.append(this._editToolbar.render()),l(this,De)&&await this._editToolbar.addAltText(l(this,De)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,De))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,De)||(uf.initialize(ye._l10n),y(this,De,new uf(this)),l(this,Qr)&&(l(this,De).data=l(this,Qr),y(this,Qr,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,De))==null?void 0:e.data}set altTextData(e){l(this,De)&&(l(this,De).data=e)}get guessedAltText(){var e;return(e=l(this,De))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,De))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,De))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,De)&&!l(this,De).isEmpty()}hasAltTextData(){var e;return((e=l(this,De))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Vo)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),v(this,te,Jg).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),cf(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=zt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(y(this,ea,!0),this._isDraggable){v(this,te,CA).call(this,e);return}v(this,te,Qg).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,xi)&&clearTimeout(l(this,xi)),y(this,xi,setTimeout(()=>{var e;y(this,xi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,u=e/s,h=t/s,d=this.x*r,f=this.y*a,p=this.width*r,m=this.height*a;switch(i){case 0:return[d+u+o,a-f-h-m+c,d+u+p+o,a-f-h+c];case 90:return[d+h+o,a-f+u+c,d+h+m+o,a-f+u+p+c];case 180:return[d-u-p+o,a-f+h+c,d-u+o,a-f+h+m+c];case 270:return[d-h-m+o,a-f-u-p+c,d-h+o,a-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,a]=e,o=r-i,c=a-s;switch(this.rotation){case 0:return[i,t-a,o,c];case 90:return[i,t-s,c,o];case 180:return[r,t-s,o,c];case 270:return[r,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){y(this,ta,!0)}disableEditMode(){y(this,ta,!1)}isInEditMode(){return l(this,ta)}shouldGetKeyboardEvents(){return l(this,Xi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){v(this,te,Jg).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Pe("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,y(s,Qr,e.accessibilityData);const[r,a]=s.pageDimensions,[o,c,u,h]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/r,s.y=c/a,s.width=u/r,s.height=h/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Gs))==null||e.abort(),y(this,Gs,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,xi)&&(clearTimeout(l(this,xi)),y(this,xi,null)),v(this,te,lc).call(this),this.removeEditToolbar(),l(this,kn)){for(const t of l(this,kn).values())clearTimeout(t);y(this,kn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(v(this,te,_A).call(this),l(this,gt).classList.remove("hidden"),cf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),y(this,Zr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,gt).children;if(!l(this,Yn)){y(this,Yn,Array.from(t));const a=v(this,te,TA).bind(this),o=v(this,te,PA).bind(this),c=this._uiManager._signal;for(const u of l(this,Yn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",v(this,te,RA).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ye._l10nResizer[h])}}const i=l(this,Yn)[0];let s=0;for(const a of t){if(a===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Yn).length/4);if(r!==s){if(r<s)for(let o=0;o<s-r;o++)l(this,gt).append(l(this,gt).firstChild);else if(r>s)for(let o=0;o<r-s;o++)l(this,gt).firstChild.before(l(this,gt).lastChild);let a=0;for(const o of t){const u=l(this,Yn)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ye._l10nResizer[u])}}v(this,te,Zg).call(this,0),y(this,Xi,!0),l(this,gt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Xi)&&v(this,te,Kg).call(this,l(this,gu),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){v(this,te,lc).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,De))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,s,r;(e=l(this,gt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=l(this,De))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,mu)}set isEditing(e){y(this,mu,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){y(this,Jr,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,kn)||y(this,kn,new Map);const{action:i}=e;let s=l(this,kn).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,kn).delete(i),l(this,kn).size===0&&y(this,kn,null)},ye._telemetryTimeout),l(this,kn).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),y(this,Vo,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,Vo,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Qr=new WeakMap,Yn=new WeakMap,De=new WeakMap,Vo=new WeakMap,Jr=new WeakMap,gt=new WeakMap,Zr=new WeakMap,Gs=new WeakMap,gu=new WeakMap,ea=new WeakMap,Xs=new WeakMap,mu=new WeakMap,ta=new WeakMap,Xi=new WeakMap,xi=new WeakMap,Wo=new WeakMap,Go=new WeakMap,kn=new WeakMap,yu=new WeakMap,bf=new WeakMap,te=new WeakSet,Gg=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()},vu=new WeakSet,Xg=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},qg=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},_A=function(){if(l(this,gt))return;y(this,gt,document.createElement("div")),l(this,gt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");l(this,gt).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",v(this,te,kA).bind(this,i),{signal:t}),s.addEventListener("contextmenu",zn,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,gt))},kA=function(e,t){var m;t.preventDefault();const{isMac:i}=zt.platform;if(t.button!==0||t.ctrlKey&&i)return;(m=l(this,De))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",v(this,te,Kg).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",zn,{signal:a});const o=this.x,c=this.y,u=this.width,h=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var w;r.abort(),this.parent.togglePointerEvents(!0),(w=l(this,De))==null||w.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=f,v(this,te,Yg).call(this,o,c,u,h)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})},Yg=function(e,t,i,s){const r=this.x,a=this.y,o=this.width,c=this.height;r===e&&a===t&&o===i&&c===s||this.addCommands({cmd:()=>{this.width=o,this.height=c,this.x=r,this.y=a;const[u,h]=this.parentDimensions;this.setDims(u*o,h*c),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*i,h*s),this.fixAndSetPosition()},mustExec:!0})},Kg=function(e,t){const[i,s]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,u=ye.MIN_SIZE/i,h=ye.MIN_SIZE/s,d=V=>Math.round(V*1e4)/1e4,f=v(this,te,qg).call(this,this.rotation),p=(V,R)=>[f[0]*V+f[2]*R,f[1]*V+f[3]*R],m=v(this,te,qg).call(this,360-this.rotation),w=(V,R)=>[m[0]*V+m[2]*R,m[1]*V+m[3]*R];let E,g,b=!1,x=!1;switch(e){case"topLeft":b=!0,E=(V,R)=>[0,0],g=(V,R)=>[V,R];break;case"topMiddle":E=(V,R)=>[V/2,0],g=(V,R)=>[V/2,R];break;case"topRight":b=!0,E=(V,R)=>[V,0],g=(V,R)=>[0,R];break;case"middleRight":x=!0,E=(V,R)=>[V,R/2],g=(V,R)=>[0,R/2];break;case"bottomRight":b=!0,E=(V,R)=>[V,R],g=(V,R)=>[0,0];break;case"bottomMiddle":E=(V,R)=>[V/2,R],g=(V,R)=>[V/2,0];break;case"bottomLeft":b=!0,E=(V,R)=>[0,R],g=(V,R)=>[V,0];break;case"middleLeft":x=!0,E=(V,R)=>[0,R/2],g=(V,R)=>[V,R/2];break}const S=E(o,c),_=g(o,c);let k=p(..._);const T=d(r+k[0]),P=d(a+k[1]);let F=1,O=1,[H,oe]=this.screenToPageTranslation(t.movementX,t.movementY);if([H,oe]=w(H/i,oe/s),b){const V=Math.hypot(o,c);F=O=Math.max(Math.min(Math.hypot(_[0]-S[0]-H,_[1]-S[1]-oe)/V,1/o,1/c),u/o,h/c)}else x?F=Math.max(u,Math.min(1,Math.abs(_[0]-S[0]-H)))/o:O=Math.max(h,Math.min(1,Math.abs(_[1]-S[1]-oe)))/c;const ne=d(o*F),he=d(c*O);k=p(...g(ne,he));const fe=T-k[0],me=P-k[1];this.width=ne,this.height=he,this.x=fe,this.y=me,this.setDims(i*ne,s*he),this.fixAndSetPosition()},Qg=function(e){const{isMac:t}=zt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},CA=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,s=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),y(this,Wo,e.clientX),y(this,Go,e.clientY);const a=o=>{const{clientX:c,clientY:u}=o,[h,d]=this.screenToPageTranslation(c-l(this,Wo),u-l(this,Go));y(this,Wo,c),y(this,Go,u),this._uiManager.dragSelectedEditors(h,d)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{i.abort(),t&&this.div.classList.remove("moving"),y(this,ea,!1),this._uiManager.endDragSession()||v(this,te,Qg).call(this,e)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},Jg=function(){if(l(this,Gs)||!this.div)return;y(this,Gs,new AbortController);const e=this._uiManager.combinedSignal(l(this,Gs));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},TA=function(e){ye._resizerKeyboardManager.exec(this,e)},PA=function(e){var t;l(this,Xi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,gt)&&v(this,te,lc).call(this)},RA=function(e){y(this,gu,l(this,Xi)?e:"")},Zg=function(e){if(l(this,Yn))for(const t of l(this,Yn))t.tabIndex=e},lc=function(){if(y(this,Xi,!1),v(this,te,Zg).call(this,-1),l(this,Zr)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=l(this,Zr);v(this,te,Yg).call(this,e,t,i,s),y(this,Zr,null)}},A(ye,vu),Y(ye,"_l10n",null),Y(ye,"_l10nResizer",null),Y(ye,"_borderLineWidth",-1),Y(ye,"_colorManager",new zg),Y(ye,"_zIndex",1),Y(ye,"_telemetryTimeout",1e3);let we=ye;class ok extends we{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const _v=3285377520,En=4294901760,di=65535;class LA{constructor(e){this.h1=e?e&4294967295:_v,this.h2=e?e&4294967295:_v}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,E=e.length;w<E;w++){const g=e.charCodeAt(w);g<=255?t[i++]=g:(t[i++]=g>>>8,t[i++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&di,m=f&di;for(let w=0;w<s;w++)w&1?(o=a[w],o=o*d&En|o*p&di,o=o<<15|o>>>17,o=o*f&En|o*m&di,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=a[w],c=c*d&En|c*p&di,c=c<<15|c>>>17,c=c*f&En|c*m&di,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,r){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*d&En|o*p&di,o=o<<15|o>>>17,o=o*f&En|o*m&di,s&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&En|e*36045&di,t=t*4283543511&En|((t<<16|e>>>16)*2950163797&En)>>>16,e^=t>>>1,e=e*444984403&En|e*60499&di,t=t*3301882366&En|((t<<16|e>>>16)*3120437893&En)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const em=Object.freeze({map:null,hash:"",transfer:void 0});var na,ia,ut,wf,MA;class J0{constructor(){A(this,wf);A(this,na,!1);A(this,ia,null);A(this,ut,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,ut).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,ut).get(e)}remove(e){if(l(this,ut).delete(e),l(this,ut).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,ut).values())if(t instanceof we)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,ut).get(e);let s=!1;if(i!==void 0)for(const[r,a]of Object.entries(t))i[r]!==a&&(s=!0,i[r]=a);else s=!0,l(this,ut).set(e,t);s&&v(this,wf,MA).call(this),t instanceof we&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,ut).has(e)}getAll(){return l(this,ut).size>0?G0(l(this,ut)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,ut).size}resetModified(){l(this,na)&&(y(this,na,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new NA(this)}get serializable(){if(l(this,ut).size===0)return em;const e=new Map,t=new LA,i=[],s=Object.create(null);let r=!1;for(const[a,o]of l(this,ut)){const c=o instanceof we?o.serialize(!1,s):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:em}get editorStats(){let e=null;const t=new Map;for(const i of l(this,ut).values()){if(!(i instanceof we))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,c]of Object.entries(s)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){y(this,ia,null)}get modifiedIds(){if(l(this,ia))return l(this,ia);const e=[];for(const t of l(this,ut).values())!(t instanceof we)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return y(this,ia,{ids:new Set(e),hash:e.join(",")})}}na=new WeakMap,ia=new WeakMap,ut=new WeakMap,wf=new WeakSet,MA=function(){l(this,na)||(y(this,na,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var bu;class NA extends J0{constructor(t){super();A(this,bu);const{map:i,hash:s,transfer:r}=t.serializable,a=structuredClone(i,r?{transfer:r}:null);y(this,bu,{map:a,hash:s,transfer:r})}get print(){Pe("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,bu)}get modifiedIds(){return ue(this,"modifiedIds",{ids:new Set,hash:""})}}bu=new WeakMap;var Xo;class lk{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,Xo,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Xo).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Xo).has(e.loadedName))){if(it(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=e,a=new FontFace(i,s,r);this.addNativeFontFace(a);try{await a.load(),l(this,Xo).add(i),t==null||t(e)}catch{ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Pe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw ie(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ue(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Lt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ue(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(it(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ue(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(S,_){return S.charCodeAt(_)<<24|S.charCodeAt(_+1)<<16|S.charCodeAt(_+2)<<8|S.charCodeAt(_+3)&255}function s(S,_,k,T){const P=S.substring(0,_),F=S.substring(_+k);return P+T+F}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function h(S,_){if(++u>30){ie("Load test font never loaded."),_();return}if(c.font="30px "+S,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(h.bind(null,S,_))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const m=16,w=1482184792;let E=i(f,m);for(r=0,a=d.length-3;r<a;r+=4)E=E-w+i(d,r)|0;r<d.length&&(E=E-w+i(d+"XXX",r)|0),f=s(f,m,4,G_(E));const g=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(b);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const S of[e.loadedName,d]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=S,x.append(_)}this._document.body.append(x),h(d,()=>{x.remove(),t.complete()})}}Xo=new WeakMap;class ck{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${J_(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){ie(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(r,a){};const s=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case Fi.BEZIER_CURVE_TO:{const[o,c,u,h,d,f]=i.slice(r,r+6);s.push(p=>p.bezierCurveTo(o,c,u,h,d,f)),r+=6}break;case Fi.MOVE_TO:{const[o,c]=i.slice(r,r+2);s.push(u=>u.moveTo(o,c)),r+=2}break;case Fi.LINE_TO:{const[o,c]=i.slice(r,r+2);s.push(u=>u.lineTo(o,c)),r+=2}break;case Fi.QUADRATIC_CURVE_TO:{const[o,c,u,h]=i.slice(r,r+4);s.push(d=>d.quadraticCurveTo(o,c,u,h)),r+=4}break;case Fi.RESTORE:s.push(o=>o.restore());break;case Fi.SAVE:s.push(o=>o.save());break;case Fi.SCALE:it(s.length===2,"Scale command is only valid at the third position.");break;case Fi.TRANSFORM:{const[o,c,u,h,d,f]=i.slice(r,r+6);s.push(p=>p.transform(o,c,u,h,d,f)),r+=6}break;case Fi.TRANSLATE:{const[o,c]=i.slice(r,r+2);s.push(u=>u.translate(o,c)),r+=2}break}return this.compiledGlyphs[t]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let c=2,u=s.length;c<u;c++)s[c](a)}}}var wu;class IA{constructor({enableHWA:e=!1}){A(this,wu,!1);y(this,wu,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,wu)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Pe("Abstract method `_createCanvas` called.")}}wu=new WeakMap;class uk extends IA{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class DA{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Pe("Abstract method `_fetch` called.")}}class FA extends DA{async _fetch(e){const t=await ep(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Zf(t)}}class OA{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var sa,ra,Si,qi,Ct,Af,aa,j,_t,so,ro,pd,ao,jA,tm,oo,cc,uc,nm,hc;class hk extends OA{constructor({docId:t,ownerDocument:i=globalThis.document}){super();A(this,j);A(this,sa);A(this,ra);A(this,Si);A(this,qi);A(this,Ct);A(this,Af);A(this,aa,0);y(this,qi,t),y(this,Ct,i)}addFilter(t){if(!t)return"none";let i=l(this,j,_t).get(t);if(i)return i;const[s,r,a]=v(this,j,pd).call(this,t),o=t.length===1?s:`${s}${r}${a}`;if(i=l(this,j,_t).get(o),i)return l(this,j,_t).set(t,i),i;const c=`g_${l(this,qi)}_transfer_map_${Nt(this,aa)._++}`,u=v(this,j,ao).call(this,c);l(this,j,_t).set(t,u),l(this,j,_t).set(o,u);const h=v(this,j,oo).call(this,c);return v(this,j,uc).call(this,s,r,a,h),u}addHCMFilter(t,i){var m;const s=`${t}-${i}`,r="base";let a=l(this,j,so).get(r);if((a==null?void 0:a.key)===s||(a?((m=a.filter)==null||m.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},l(this,j,so).set(r,a)),!t||!i))return a.url;const o=v(this,j,hc).call(this,t);t=B.makeHexColor(...o);const c=v(this,j,hc).call(this,i);if(i=B.makeHexColor(...c),l(this,j,ro).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const u=new Array(256);for(let w=0;w<=255;w++){const E=w/255;u[w]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,qi)}_hcm_filter`,f=a.filter=v(this,j,oo).call(this,d);v(this,j,uc).call(this,h,h,h,f),v(this,j,tm).call(this,f);const p=(w,E)=>{const g=o[w]/255,b=c[w]/255,x=new Array(E+1);for(let S=0;S<=E;S++)x[S]=g+S/E*(b-g);return x.join(",")};return v(this,j,uc).call(this,p(0,5),p(1,5),p(2,5),f),a.url=v(this,j,ao).call(this,d),a.url}addAlphaFilter(t){let i=l(this,j,_t).get(t);if(i)return i;const[s]=v(this,j,pd).call(this,[t]),r=`alpha_${s}`;if(i=l(this,j,_t).get(r),i)return l(this,j,_t).set(t,i),i;const a=`g_${l(this,qi)}_alpha_map_${Nt(this,aa)._++}`,o=v(this,j,ao).call(this,a);l(this,j,_t).set(t,o),l(this,j,_t).set(r,o);const c=v(this,j,oo).call(this,a);return v(this,j,nm).call(this,s,c),o}addLuminosityFilter(t){let i=l(this,j,_t).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=v(this,j,pd).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=l(this,j,_t).get(r),i)return l(this,j,_t).set(t,i),i;const a=`g_${l(this,qi)}_luminosity_map_${Nt(this,aa)._++}`,o=v(this,j,ao).call(this,a);l(this,j,_t).set(t,o),l(this,j,_t).set(r,o);const c=v(this,j,oo).call(this,a);return v(this,j,jA).call(this,c),t&&v(this,j,nm).call(this,s,c),o}addHighlightHCMFilter(t,i,s,r,a){var b;const o=`${i}-${s}-${r}-${a}`;let c=l(this,j,so).get(t);if((c==null?void 0:c.key)===o||(c?((b=c.filter)==null||b.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},l(this,j,so).set(t,c)),!i||!s))return c.url;const[u,h]=[i,s].map(v(this,j,hc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,a].map(v(this,j,hc).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,j,ro).style.color="";const w=(x,S,_)=>{const k=new Array(256),T=(f-d)/_,P=x/255,F=(S-x)/(255*_);let O=0;for(let H=0;H<=_;H++){const oe=Math.round(d+H*T),ne=P+H*F;for(let he=O;he<=oe;he++)k[he]=ne;O=oe+1}for(let H=O;H<256;H++)k[H]=k[O-1];return k.join(",")},E=`g_${l(this,qi)}_hcm_${t}_filter`,g=c.filter=v(this,j,oo).call(this,E);return v(this,j,tm).call(this,g),v(this,j,uc).call(this,w(p[0],m[0],5),w(p[1],m[1],5),w(p[2],m[2],5),g),c.url=v(this,j,ao).call(this,E),c.url}destroy(t=!1){t&&l(this,j,so).size!==0||(l(this,Si)&&(l(this,Si).parentNode.parentNode.remove(),y(this,Si,null)),l(this,ra)&&(l(this,ra).clear(),y(this,ra,null)),y(this,aa,0))}}sa=new WeakMap,ra=new WeakMap,Si=new WeakMap,qi=new WeakMap,Ct=new WeakMap,Af=new WeakMap,aa=new WeakMap,j=new WeakSet,_t=function(){return l(this,ra)||y(this,ra,new Map)},so=function(){return l(this,Af)||y(this,Af,new Map)},ro=function(){if(!l(this,Si)){const t=l(this,Ct).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=l(this,Ct).createElementNS(ji,"svg");s.setAttribute("width",0),s.setAttribute("height",0),y(this,Si,l(this,Ct).createElementNS(ji,"defs")),t.append(s),s.append(l(this,Si)),l(this,Ct).body.append(t)}return l(this,Si)},pd=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=i[u]/255,o[u]=s[u]/255,c[u]=r[u]/255;return[a.join(","),o.join(","),c.join(",")]},ao=function(t){if(l(this,sa)===void 0){y(this,sa,"");const i=l(this,Ct).URL;i!==l(this,Ct).baseURI&&(tp(i)?ie('#createUrl: ignore "data:"-URL for performance reasons.'):y(this,sa,i.split("#",1)[0]))}return`url(${l(this,sa)}#${t})`},jA=function(t){const i=l(this,Ct).createElementNS(ji,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},tm=function(t){const i=l(this,Ct).createElementNS(ji,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},oo=function(t){const i=l(this,Ct).createElementNS(ji,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,j,ro).append(i),i},cc=function(t,i,s){const r=l(this,Ct).createElementNS(ji,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},uc=function(t,i,s,r){const a=l(this,Ct).createElementNS(ji,"feComponentTransfer");r.append(a),v(this,j,cc).call(this,a,"feFuncR",t),v(this,j,cc).call(this,a,"feFuncG",i),v(this,j,cc).call(this,a,"feFuncB",s)},nm=function(t,i){const s=l(this,Ct).createElementNS(ji,"feComponentTransfer");i.append(s),v(this,j,cc).call(this,s,"feFuncA",t)},hc=function(t){return l(this,j,ro).style.color=t,Q0(getComputedStyle(l(this,j,ro)).getPropertyValue("color"))};class zA{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Pe("Abstract method `_fetch` called.")}}class HA extends zA{async _fetch(e){const t=await ep(e,"arraybuffer");return new Uint8Array(t)}}if(Lt){var im=Promise.withResolvers(),Mc=null;(async()=>{const e=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:r,path2d:a}))})().then(e=>{Mc=e,im.resolve()},e=>{ie(`loadPackages: ${e}`),Mc=new Map,im.resolve()})}class Sr{static get promise(){return im.promise}static get(e){return Mc==null?void 0:Mc.get(e)}}async function BA(n){const t=await Sr.get("fs").promises.readFile(n);return new Uint8Array(t)}class dk extends OA{}class fk extends IA{_createCanvas(e,t){return Sr.get("canvas").createCanvas(e,t)}}class pk extends DA{async _fetch(e){return BA(e)}}class gk extends zA{async _fetch(e){return BA(e)}}const Ot={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function sm(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class Z0{getPattern(){Pe("Abstract method `getPattern` called.")}}class mk extends Z0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Ot.STROKE||s===Ot.FILL){const a=t.current.getClippedPathBoundingBox(s,Oe(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=B.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),sm(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else sm(e,this._bbox),r=this._createGradient(e);return r}}function Fp(n,e,t,i,s,r,a,o){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=a,a=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=a,a=o,o=f),c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=a,a=f);const p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,E=(c[i+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,b=(c[s+1]+e.offsetY)*e.scaleY;if(m>=b)return;const x=u[r],S=u[r+1],_=u[r+2],k=u[a],T=u[a+1],P=u[a+2],F=u[o],O=u[o+1],H=u[o+2],oe=Math.round(m),ne=Math.round(b);let he,fe,me,V,R,W,G,le;for(let re=oe;re<=ne;re++){if(re<E){const pe=re<m?0:(m-re)/(m-E);he=p-(p-w)*pe,fe=x-(x-k)*pe,me=S-(S-T)*pe,V=_-(_-P)*pe}else{let pe;re>b?pe=1:E===b?pe=0:pe=(E-re)/(E-b),he=w-(w-g)*pe,fe=k-(k-F)*pe,me=T-(T-O)*pe,V=P-(P-H)*pe}let Ee;re<m?Ee=0:re>b?Ee=1:Ee=(m-re)/(m-b),R=p-(p-g)*Ee,W=x-(x-F)*Ee,G=S-(S-O)*Ee,le=_-(_-H)*Ee;const At=Math.round(Math.min(he,R)),Hn=Math.round(Math.max(he,R));let Le=d*re+At*4;for(let pe=At;pe<=Hn;pe++)Ee=(he-pe)/(he-R),Ee<0?Ee=0:Ee>1&&(Ee=1),h[Le++]=fe-(fe-W)*Ee|0,h[Le++]=me-(me-G)*Ee|0,h[Le++]=V-(V-le)*Ee|0,h[Le++]=255}}function yk(n,e,t){const i=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(i.length/o)-1,u=o-1;for(r=0;r<c;r++){let h=r*o;for(let d=0;d<u;d++,h++)Fp(n,t,i[h],i[h+1],i[h+o],s[h],s[h+1],s[h+o]),Fp(n,t,i[h+o+1],i[h+1],i[h+o],s[h+o+1],s[h+1],s[h+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)Fp(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class vk extends Z0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,m=h/f,w={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/m},E=d+2*2,g=f+2*2,b=i.getCanvas("mesh",E,g),x=b.context,S=x.createImageData(d,f);if(t){const k=S.data;for(let T=0,P=k.length;T<P;T+=4)k[T]=t[0],k[T+1]=t[1],k[T+2]=t[2],k[T+3]=255}for(const k of this._figures)yk(S,k,w);return x.putImageData(S,2,2),{canvas:b.canvas,offsetX:o-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(e,t,i,s){sm(e,this._bbox);let r;if(s===Ot.SHADING)r=B.singularValueDecompose2dScale(Oe(e));else if(r=B.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=B.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,s===Ot.SHADING?null:this._background,t.cachedCanvases);return s!==Ot.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class bk extends Z0{getPattern(){return"hotpink"}}function wk(n){switch(n[0]){case"RadialAxial":return new mk(n);case"Mesh":return new vk(n);case"Dummy":return new bk}throw new Error(`Unknown IR type: ${n[0]}`)}const kv={COLORED:1,UNCOLORED:2},xf=class xf{constructor(e,t,i,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Qf("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],m=f-h,w=p-d,E=B.singularValueDecompose2dScale(this.matrix),g=B.singularValueDecompose2dScale(this.baseTransform),b=E[0]*g[0],x=E[1]*g[1];let S=m,_=w,k=!1,T=!1;const P=Math.ceil(c*b),F=Math.ceil(u*x),O=Math.ceil(m*b),H=Math.ceil(w*x);P>=O?S=c:k=!0,F>=H?_=u:T=!0;const oe=this.getSizeAndScale(S,this.ctx.canvas.width,b),ne=this.getSizeAndScale(_,this.ctx.canvas.height,x),he=e.cachedCanvases.getCanvas("pattern",oe.size,ne.size),fe=he.context,me=o.createCanvasGraphics(fe);if(me.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(me,s,a),fe.translate(-oe.scale*h,-ne.scale*d),me.transform(oe.scale,0,0,ne.scale,0,0),fe.save(),this.clipBbox(me,h,d,f,p),me.baseTransform=Oe(me.ctx),me.executeOperatorList(i),me.endDrawing(),fe.restore(),k||T){const V=he.canvas;k&&(S=c),T&&(_=u);const R=this.getSizeAndScale(S,this.ctx.canvas.width,b),W=this.getSizeAndScale(_,this.ctx.canvas.height,x),G=R.size,le=W.size,re=e.cachedCanvases.getCanvas("pattern-workaround",G,le),Ee=re.context,At=k?Math.floor(m/c):0,Hn=T?Math.floor(w/u):0;for(let Le=0;Le<=At;Le++)for(let pe=0;pe<=Hn;pe++)Ee.drawImage(V,G*Le,le*pe,G,le,0,0,G,le);return{canvas:re.canvas,scaleX:R.scale,scaleY:W.scale,offsetX:h,offsetY:d}}return{canvas:he.canvas,scaleX:oe.scale,scaleY:ne.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,i){const s=Math.max(xf.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const a=s-t,o=r-i;e.ctx.rect(t,i,a,o),e.current.updateRectMinMax(Oe(e.ctx),[t,i,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case kv.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case kv.UNCOLORED:const o=B.makeHexColor(i[0],i[1],i[2]);s.fillStyle=o,s.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new W_(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let r=i;s!==Ot.SHADING&&(r=B.transform(r,t.baseTransform),this.matrix&&(r=B.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};Y(xf,"MAX_PATTERN_SIZE",3e3);let rm=xf;function Ak({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=zt.isLittleEndian?4278190080:255,[c,u]=a?[r,o]:[o,r],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<s;m++){for(const E=e+h;e<E;e++){const g=e<f?n[e]:255;t[p++]=g&128?u:c,t[p++]=g&64?u:c,t[p++]=g&32?u:c,t[p++]=g&16?u:c,t[p++]=g&8?u:c,t[p++]=g&4?u:c,t[p++]=g&2?u:c,t[p++]=g&1?u:c}if(d===0)continue;const w=e<f?n[e++]:255;for(let E=0;E<d;E++)t[p++]=w&1<<7-E?u:c}return{srcPos:e,destPos:p}}const Cv=16,Tv=100,xk=15,Pv=10,Rv=1e3,Kt=16;function Sk(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,a,o,c){e.transform(i,s,r,a,o,c),this.__originalTransform(i,s,r,a,o,c)},n.setTransform=function(i,s,r,a,o,c){e.setTransform(i,s,r,a,o,c),this.__originalSetTransform(i,s,r,a,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,a,o){e.bezierCurveTo(t,i,s,r,a,o),this.__originalBezierCurveTo(t,i,s,r,a,o)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Ek{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Vh(n,e,t,i,s,r,a,o,c,u){const[h,d,f,p,m,w]=Oe(n);if(d===0&&f===0){const b=a*h+m,x=Math.round(b),S=o*p+w,_=Math.round(S),k=(a+c)*h+m,T=Math.abs(Math.round(k)-x)||1,P=(o+u)*p+w,F=Math.abs(Math.round(P)-_)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),x,_),n.drawImage(e,t,i,s,r,0,0,T,F),n.setTransform(h,d,f,p,m,w),[T,F]}if(h===0&&p===0){const b=o*f+m,x=Math.round(b),S=a*d+w,_=Math.round(S),k=(o+u)*f+m,T=Math.abs(Math.round(k)-x)||1,P=(a+c)*d+w,F=Math.abs(Math.round(P)-_)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,x,_),n.drawImage(e,t,i,s,r,0,0,F,T),n.setTransform(h,d,f,p,m,w),[F,T]}n.drawImage(e,t,i,s,r,a,o,c,u);const E=Math.hypot(h,d),g=Math.hypot(f,p);return[E*c,g*u]}function _k(n){const{width:e,height:t}=n;if(e>Rv||t>Rv)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const g of n.data){let b=128;for(;b>0;)d[f++]=g&b?0:255,b>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[c]=2,++p),o=1;o<t;o++){f=o*h,u=o*r,d[f-h]!==d[f]&&(a[u]=d[f]?1:8,++p);let g=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)g=(g>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[g]&&(a[u+c]=s[g],++p),f++;if(d[f-h]!==d[f]&&(a[u+c]=d[f]?2:4,++p),p>i)return null}for(f=h*(t-1),u=o*r,d[f]!==0&&(a[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(a[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[u+c]=4,++p),p>i)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),w=new Path2D;for(o=0;p&&o<=t;o++){let g=o*r;const b=g+e;for(;g<b&&!a[g];)g++;if(g===b)continue;w.moveTo(g%r,o);const x=g;let S=a[g];do{const _=m[S];do g+=_;while(!a[g]);const k=a[g];k!==5&&k!==10?(S=k,a[g]=0):(S=k&51*S>>4,a[g]&=S>>2|S<<2),w.lineTo(g%r,g/r|0),a[g]||--p}while(x!==g);--o}return d=null,a=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(w),g.beginPath(),g.restore()}}class Lv{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=sA,this.textMatrixScale=1,this.fontMatrix=Lg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Et.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=B.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=B.applyTransform(t,e),s=B.applyTransform(t.slice(2),e),r=B.applyTransform([t[0],t[3]],e),a=B.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],a[1])}updateScalingPathMinMax(e,t){B.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,r,a,o,c,u,h){const d=B.bezierBoundingBox(t,i,s,r,a,o,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Ot.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Ot.STROKE){t||Pe("Stroke bounding box must include transform.");const s=B.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const e=B.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Ot.FILL,t=null){return B.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Mv(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%Kt,r=(t-s)/Kt,a=s===0?r:r+1,o=n.createImageData(i,Kt);let c=0,u;const h=e.data,d=o.data;let f,p,m,w;if(e.kind===od.GRAYSCALE_1BPP){const E=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),b=g.length,x=i+7>>3,S=4294967295,_=zt.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<r?Kt:s,u=0,p=0;p<m;p++){const k=E-c;let T=0;const P=k>x?i:k*8-7,F=P&-8;let O=0,H=0;for(;T<F;T+=8)H=h[c++],g[u++]=H&128?S:_,g[u++]=H&64?S:_,g[u++]=H&32?S:_,g[u++]=H&16?S:_,g[u++]=H&8?S:_,g[u++]=H&4?S:_,g[u++]=H&2?S:_,g[u++]=H&1?S:_;for(;T<P;T++)O===0&&(H=h[c++],O=128),g[u++]=H&O?S:_,O>>=1}for(;u<b;)g[u++]=0;n.putImageData(o,0,f*Kt)}}else if(e.kind===od.RGBA_32BPP){for(p=0,w=i*Kt*4,f=0;f<r;f++)d.set(h.subarray(c,c+w)),c+=w,n.putImageData(o,0,p),p+=Kt;f<a&&(w=i*s*4,d.set(h.subarray(c,c+w)),n.putImageData(o,0,p))}else if(e.kind===od.RGB_24BPP)for(m=Kt,w=i*m,f=0;f<a;f++){for(f>=r&&(m=s,w=i*m),u=0,p=w;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(o,0,f*Kt)}else throw new Error(`bad image kind: ${e.kind}`)}function Nv(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%Kt,r=(t-s)/Kt,a=s===0?r:r+1,o=n.createImageData(i,Kt);let c=0;const u=e.data,h=o.data;for(let d=0;d<a;d++){const f=d<r?Kt:s;({srcPos:c}=Ak({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(o,0,d*Kt)}}function Jl(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Wh(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Lt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function Iv(n,e){if(e)return!0;const t=B.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*xr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const kk=["butt","round","square"],Ck=["miter","round","bevel"],Tk={},Dv={};var _r,am,om;const ay=class ay{constructor(e,t,i,s,r,{optionalContentConfig:a,markedContentStack:o=null},c,u){A(this,_r);this.ctx=e,this.current=new Lv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Ek(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Oe(this.compositeCtx))}this.ctx.save(),Wh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Oe(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,a=e.fnArray;let o=t||0;const c=r.length;if(c===o)return o;const u=c-o>Pv&&typeof i=="function",h=u?Date.now()+xk:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,i),o;if(m=a[o],m!==Vn.dependency)this[m].apply(this,r[o]);else for(const w of r[o]){const E=w.startsWith("g_")?f:p;if(!E.has(w))return E.get(w,i),o}if(o++,o===c)return o;if(u&&++d>Pv){if(Date.now()>h)return i(),o;d=0}}}endDrawing(){v(this,_r,am).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),v(this,_r,om).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,c=s,u="prescale1",h,d;for(;r>2&&o>1||a>2&&c>1;){let f=o,p=c;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,c,0,0,f,p),e=h.canvas,o=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,a=this.current.patternFill,o=Oe(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const P=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),r]),c=this._cachedBitmapsMap.get(P),c||(c=new Map,this._cachedBitmapsMap.set(P,c));const F=c.get(u);if(F&&!a){const O=Math.round(Math.min(o[0],o[2])+o[4]),H=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:F,offsetX:O,offsetY:H}}h=F}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),Nv(d.context,e));let f=B.transform(o,[1/i,0,0,-1/s,0,0]);f=B.transform(f,[1,0,0,1,0,-s]);const[p,m,w,E]=B.getAxialAlignedBoundingBox([0,0,i,s],f),g=Math.round(w-p)||1,b=Math.round(E-m)||1,x=this.cachedCanvases.getCanvas("fillCanvas",g,b),S=x.context,_=p,k=m;S.translate(-_,-k),S.transform(...f),h||(h=this._scaleImage(d.canvas,Oi(S)),h=h.img,c&&a&&c.set(u,h)),S.imageSmoothingEnabled=Iv(Oe(S),e.interpolate),Vh(S,h,0,0,h.width,h.height,0,0,i,s),S.globalCompositeOperation="source-in";const T=B.transform(Oi(S),[1,0,0,1,-_,-k]);return S.fillStyle=a?r.getPattern(t,this,T,Ot.FILL):r,S.fillRect(0,0,i,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),{canvas:x.canvas,offsetX:Math.round(_),offsetY:Math.round(k)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=kk[e]}setLineJoin(e){this.ctx.lineJoin=Ck[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Oe(this.suspendedCtx)),Jl(this.suspendedCtx,r),Sk(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],a=s[1],o=s[2]-r,c=s[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,i,o,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,a,o,c,u,h,d){let f=e.canvas,p=c-h,m=u-d;if(a){const E=B.makeHexColor(...a);if(p<0||m<0||p+i>f.width||m+s>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",i,s),b=g.context;b.drawImage(f,-p,-m),b.globalCompositeOperation="destination-atop",b.fillStyle=E,b.fillRect(0,0,i,s),b.globalCompositeOperation="source-over",f=g.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,m,i,s),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(p,m,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const w=new Path2D;w.rect(c,u,i,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,i,s,c,u,i,s),t.restore()}save(){this.inSMaskMode?(Jl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Jl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,r,a){this.ctx.transform(e,t,i,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,r=this.current;let a=r.x,o=r.y,c,u;const h=Oe(s),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let p=0,m=0,w=e.length;p<w;p++)switch(e[p]|0){case Vn.rectangle:a=t[m++],o=t[m++];const E=t[m++],g=t[m++],b=a+E,x=o+g;s.moveTo(a,o),E===0||g===0?s.lineTo(b,x):(s.lineTo(b,o),s.lineTo(b,x),s.lineTo(a,x)),d||r.updateRectMinMax(h,[a,o,b,x]),s.closePath();break;case Vn.moveTo:a=t[m++],o=t[m++],s.moveTo(a,o),d||r.updatePathMinMax(h,a,o);break;case Vn.lineTo:a=t[m++],o=t[m++],s.lineTo(a,o),d||r.updatePathMinMax(h,a,o);break;case Vn.curveTo:c=a,u=o,a=t[m+4],o=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],t[m+2],t[m+3],a,o,f),m+=6;break;case Vn.curveTo2:c=a,u=o,s.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,c,u,a,o,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],o=t[m+3],m+=4;break;case Vn.curveTo3:c=a,u=o,a=t[m+2],o=t[m+3],s.bezierCurveTo(t[m],t[m+1],a,o,a,o),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],a,o,a,o,f),m+=4;break;case Vn.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,Oi(t),Ot.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,Oi(t),Ot.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Tk}eoClip(){this.pendingClip=Dv}beginText(){this.current.textMatrix=sA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||Lg,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ie("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const c=i.italic?"italic":"normal";let u=t;t<Cv?u=Cv:t>Tv&&(u=Tv),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,r,a){this.current.textMatrix=[e,t,i,s,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const r=this.ctx,a=this.current,o=a.font,c=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,h=c&Et.FILL_STROKE_MASK,d=!!(c&Et.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||f)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f?(r.save(),r.translate(t,i),r.beginPath(),p(r,u),s&&r.setTransform(...s),(h===Et.FILL||h===Et.FILL_STROKE)&&r.fill(),(h===Et.STROKE||h===Et.FILL_STROKE)&&r.stroke(),r.restore()):((h===Et.FILL||h===Et.FILL_STROKE)&&r.fillText(e,t,i),(h===Et.STROKE||h===Et.FILL_STROKE)&&r.strokeText(e,t,i)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Oe(r),x:t,y:i,fontSize:u,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return ue(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=i.vertical,p=f?1:-1,m=i.defaultVMetrics,w=s*t.fontMatrix[0],E=t.textRenderingMode===Et.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let g;if(t.patternFill){r.save();const k=t.fillColor.getPattern(r,this,Oi(r),Ot.FILL);g=Oe(r),r.restore(),r.fillStyle=k}let b=t.lineWidth;const x=t.textMatrixScale;if(x===0||b===0){const k=t.textRenderingMode&Et.FILL_STROKE_MASK;(k===Et.STROKE||k===Et.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=x;if(a!==1&&(r.scale(a,a),b/=a),r.lineWidth=b,i.isInvalidPDFjsFont){const k=[];let T=0;for(const P of e)k.push(P.unicode),T+=P.width;r.fillText(k.join(""),0,0),t.x+=T*w*h,r.restore(),this.compose();return}let S=0,_;for(_=0;_<d;++_){const k=e[_];if(typeof k=="number"){S+=p*k*s/1e3;continue}let T=!1;const P=(k.isSpace?c:0)+o,F=k.fontChar,O=k.accent;let H,oe,ne=k.width;if(f){const fe=k.vmetric||m,me=-(k.vmetric?fe[1]:ne*.5)*w,V=fe[2]*w;ne=fe?-fe[0]:ne,H=me/a,oe=(S+V)/a}else H=S/a,oe=0;if(i.remeasure&&ne>0){const fe=r.measureText(F).width*1e3/s*a;if(ne<fe&&this.isFontSubpixelAAEnabled){const me=ne/fe;T=!0,r.save(),r.scale(me,1),H/=me}else ne!==fe&&(H+=(ne-fe)/2e3*s/a)}if(this.contentVisible&&(k.isInFont||i.missingFile)){if(E&&!O)r.fillText(F,H,oe);else if(this.paintChar(F,H,oe,g),O){const fe=H+s*O.offset.x/a,me=oe-s*O.offset.y/a;this.paintChar(O.fontChar,fe,me,g)}}const he=f?ne*w-P*u:ne*w+P*u;S+=he,T&&r.restore()}f?t.y-=S:t.x+=S*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,a=i.fontDirection,o=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,h=i.textHScale*a,d=i.fontMatrix||Lg,f=e.length,p=i.textRenderingMode===Et.INVISIBLE;let m,w,E,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,a),m=0;m<f;++m){if(w=e[m],typeof w=="number"){g=o*w*r/1e3,this.ctx.translate(g,0),i.x+=g*h;continue}const b=(w.isSpace?u:0)+c,x=s.charProcOperatorList[w.operatorListId];if(!x){ie(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(x),this.restore()),E=B.applyTransform([w.width,0],d)[0]*r+b,t.translate(E,0),i.x+=E*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,a){this.ctx.rect(i,s,r-i,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||Oe(this.ctx),r={createCanvasGraphics:a=>new ay(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new rm(e,i,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=B.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=B.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=wk(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Oi(t),Ot.SHADING);const s=Oi(t);if(s){const{width:r,height:a}=t.canvas,[o,c,u,h]=B.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(o,c,u-o,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Pe("Should not call beginInlineImage")}beginImageData(){Pe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Oe(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(Oe(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Qf("TODO: Support non-isolated groups."),e.knockout&&ie("Knockout groups not supported.");const i=Oe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=B.getAxialAlignedBoundingBox(e.bbox,Oe(t));const r=[0,0,t.canvas.width,t.canvas.height];s=B.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-a,-o),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Jl(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Oe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=B.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(v(this,_r,am).call(this),Wh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,u]=B.singularValueDecompose2dScale(Oe(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),f=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,o*u),Wh(this.ctx)}else Wh(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Lv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),v(this,_r,om).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=_k(e)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(e),a=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=Oe(o);o.transform(t,i,s,r,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=a.length;h<d;h+=2){const f=B.transform(c,[t,i,s,r,a[h],a[h+1]]),[p,m]=B.applyTransform([0,0],f);o.drawImage(u.canvas,p,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:a,width:o,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",o,c),d=h.context;d.save();const f=this.getObject(a,r);Nv(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,Oi(t),Ot.FILL):i,d.fillRect(0,0,o,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Vh(t,h.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){ie("Dependent image isn't ready yet");return}const a=r.width,o=r.height,c=[];for(let u=0,h=s.length;u<h;u+=2)c.push({transform:[t,0,0,i,s[u],s[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!Lt){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Mv(c,e),r=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(r,Oi(s));s.imageSmoothingEnabled=Iv(Oe(s),e.interpolate),Vh(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;Mv(c,e),s=this.applyTransferMapsToCanvas(c)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),Vh(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===Dv?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Oe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let a,o;if(i===0&&s===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)a=o=1/c;else{const h=c*e;a=o=h<1?1/h:1}else if(e===0)a=1/c,o=1/u;else{const h=c*e,d=u*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const c=Math.abs(t*r-i*s),u=Math.hypot(t,i),h=Math.hypot(s,r);if(e===0)a=h/c,o=u/c;else{const d=e*c;a=h>d?h/d:1,o=u>d?u/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,r),a.length>0){const o=Math.max(s,r);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};_r=new WeakSet,am=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},om=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Mo=ay;for(const n in Vn)Mo.prototype[n]!==void 0&&(Mo.prototype[Vn[n]]=Mo.prototype[n]);var Au,xu;class fs{static get workerPort(){return l(this,Au)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");y(this,Au,e)}static get workerSrc(){return l(this,xu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");y(this,xu,e)}}Au=new WeakMap,xu=new WeakMap,A(fs,Au,null),A(fs,xu,"");const Gh={DATA:1,ERROR:2},Xe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function rn(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Pe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Za(n.message);case"MissingPDFException":return new Ja(n.message);case"PasswordException":return new Mg(n.message,n.code);case"UnexpectedResponseException":return new Jf(n.message,n.status);case"UnknownErrorException":return new Ng(n.message,n.details);default:return new Ng(n.message,n.toString())}}var qo,Fn,$A,UA,VA,gd;class dc{constructor(e,t,i){A(this,Fn);A(this,qo,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",v(this,Fn,$A).bind(this),{signal:l(this,qo).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:Xe.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{it(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:Xe.CANCEL,streamId:r,reason:rn(u)}),h.promise}},i)}destroy(){var e;(e=l(this,qo))==null||e.abort(),y(this,qo,null)}}qo=new WeakMap,Fn=new WeakSet,$A=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){v(this,Fn,VA).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Gh.DATA)s.resolve(e.data);else if(e.callback===Gh.ERROR)s.reject(rn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){r.postMessage({sourceName:i,targetName:s,callback:Gh.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:i,targetName:s,callback:Gh.ERROR,callbackId:e.callbackId,reason:rn(a)})});return}if(e.streamId){v(this,Fn,UA).call(this,e);return}t(e.data)},UA=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Xe.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Xe.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){it(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Xe.ERROR,streamId:t,reason:rn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(o(e.data,c))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Xe.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Xe.START_COMPLETE,streamId:t,reason:rn(u)})})},VA=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Xe.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(rn(e.reason));break;case Xe.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(rn(e.reason));break;case Xe.PULL:if(!o){r.postMessage({sourceName:i,targetName:s,stream:Xe.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(c){var u;c((u=o.onPull)==null?void 0:u.call(o))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Xe.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Xe.PULL_COMPLETE,streamId:t,reason:rn(c)})});break;case Xe.ENQUEUE:if(it(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Xe.CLOSE:if(it(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),v(this,Fn,gd).call(this,a,t);break;case Xe.ERROR:it(a,"error should have stream controller"),a.controller.error(rn(e.reason)),v(this,Fn,gd).call(this,a,t);break;case Xe.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(rn(e.reason)),v(this,Fn,gd).call(this,a,t);break;case Xe.CANCEL:if(!o)break;new Promise(function(c){var u;c((u=o.onCancel)==null?void 0:u.call(o,rn(e.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Xe.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Xe.CANCEL_COMPLETE,streamId:t,reason:rn(c)})}),o.sinkCapability.reject(rn(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},gd=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var oa,Su;class Pk{constructor({parsedData:e,rawData:t}){A(this,oa);A(this,Su);y(this,oa,e),y(this,Su,t)}getRaw(){return l(this,Su)}get(e){return l(this,oa).get(e)??null}getAll(){return G0(l(this,oa))}has(e){return l(this,oa).has(e)}}oa=new WeakMap,Su=new WeakMap;const lo=Symbol("INTERNAL");var Eu,_u,ku,Yo;class Rk{constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){A(this,Eu,!1);A(this,_u,!1);A(this,ku,!1);A(this,Yo,!0);y(this,Eu,!!(e&pn.DISPLAY)),y(this,_u,!!(e&pn.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(l(this,ku))return l(this,Yo);if(!l(this,Yo))return!1;const{print:e,view:t}=this.usage;return l(this,Eu)?(t==null?void 0:t.viewState)!=="OFF":l(this,_u)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==lo&&Pe("Internal method `_setVisible` called."),y(this,ku,i),y(this,Yo,t)}}Eu=new WeakMap,_u=new WeakMap,ku=new WeakMap,Yo=new WeakMap;var qs,be,Ko,Qo,Cu,lm;class Lk{constructor(e,t=pn.DISPLAY){A(this,Cu);A(this,qs,null);A(this,be,new Map);A(this,Ko,null);A(this,Qo,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,y(this,Qo,e.order);for(const i of e.groups)l(this,be).set(i.id,new Rk(t,i));if(e.baseState==="OFF")for(const i of l(this,be).values())i._setVisible(lo,!1);for(const i of e.on)l(this,be).get(i)._setVisible(lo,!0);for(const i of e.off)l(this,be).get(i)._setVisible(lo,!1);y(this,Ko,this.getHash())}}isVisible(e){if(l(this,be).size===0)return!0;if(!e)return Qf("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,be).has(e.id)?l(this,be).get(e.id).visible:(ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return v(this,Cu,lm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,be).has(t))return ie(`Optional content group not found: ${t}`),!0;if(l(this,be).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,be).has(t))return ie(`Optional content group not found: ${t}`),!0;if(!l(this,be).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,be).has(t))return ie(`Optional content group not found: ${t}`),!0;if(!l(this,be).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,be).has(t))return ie(`Optional content group not found: ${t}`),!0;if(l(this,be).get(t).visible)return!1}return!0}return ie(`Unknown optional content policy ${e.policy}.`),!0}return ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var r;const s=l(this,be).get(e);if(!s){ie(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((r=l(this,be).get(o))==null||r._setVisible(lo,!1,!0));s._setVisible(lo,!!t,!0),y(this,qs,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=l(this,be).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}y(this,qs,null)}get hasInitialVisibility(){return l(this,Ko)===null||this.getHash()===l(this,Ko)}getOrder(){return l(this,be).size?l(this,Qo)?l(this,Qo).slice():[...l(this,be).keys()]:null}getGroups(){return l(this,be).size>0?G0(l(this,be)):null}getGroup(e){return l(this,be).get(e)||null}getHash(){if(l(this,qs)!==null)return l(this,qs);const e=new LA;for(const[t,i]of l(this,be))e.update(`${t}:${i.visible}`);return y(this,qs,e.hexdigest())}}qs=new WeakMap,be=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,Cu=new WeakSet,lm=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let a;if(Array.isArray(r))a=v(this,Cu,lm).call(this,r);else if(l(this,be).has(r))a=l(this,be).get(r).visible;else return ie(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class Mk{constructor(e,{disableRange:t=!1,disableStream:i=!1}){it(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});it(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){it(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Nk(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Ik(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class Nk{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=Y0(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ik{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Dk(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=a(n),t){const h=u(t);return r(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Zf(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function a(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,w,E,g]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[E,g]}const m=[];for(let w=0;w<d.length&&w in d;++w){let[E,g]=d[w];g=o(g),E&&(g=unescape(g),w===0&&(g=c(g))),m.push(g)}return m.join("")}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return s(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function ey(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function ty({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function ny(n){const e=n.get("Content-Disposition");if(e){let t=Dk(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Y0(t))return t}return null}function np(n,e){return n===404||n===0&&e.startsWith("file:")?new Ja('Missing PDF "'+e+'".'):new Jf(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function WA(n){return n===200||n===206}function GA(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function XA(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ie(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Fv{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ey(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return it(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Fk(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Ok(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Fk{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,GA(i,this._withCredentials,this._abortController)).then(r=>{if(!WA(r.status))throw np(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:c}=ty({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=ny(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Za("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:XA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Ok{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const a=s.url;fetch(a,GA(r,this._withCredentials,this._abortController)).then(o=>{if(!WA(o.status))throw np(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:XA(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Op=200,jp=206;function jk(n){const e=n.response;return typeof e!="string"?e:Zf(e).buffer}class zk{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ey(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const r in i)s[r]=i[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=jp):s.expectedStatus=Op,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){var c,u,h;const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=i.onError)==null||c.call(i,s.status);return}const r=s.status||Op;if(!(r===Op&&i.expectedStatus===jp)&&r!==i.expectedStatus){(u=i.onError)==null||u.call(i,s.status);return}const o=jk(s);if(r===jp){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(f[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):(h=i.onError)==null||h.call(i,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Hk{constructor(e){this._source=e,this._manager=new zk(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return it(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Bk(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new $k(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Bk{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...c]=a.split(": ");return[o,c.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=ty({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=ny(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=np(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $k{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=np(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Uk=/^[a-z][a-z0-9\-+.]+:/i;function Vk(n){if(Uk.test(n))return new URL(n);const e=Sr.get("url");return new URL(e.pathToFileURL(n))}function qA(n,e,t){return n.protocol==="http:"?Sr.get("http").request(n,{headers:e},t):Sr.get("https").request(n,{headers:e},t)}class Wk{constructor(e){this.source=e,this.url=Vk(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=ey(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return it(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new qk(this):new Gk(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new Yk(this,e,t):new Xk(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class YA{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Za("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class KA{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class Gk extends YA{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=s=>{if(s.statusCode===404){const c=new Ja(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=ty({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=ny(r)};this._request=qA(this._url,t,i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class Xk extends KA{constructor(e,t,i){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${i-1}`;const r=a=>{if(a.statusCode===404){const o=new Ja(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=qA(this._url,s,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class qk extends YA{constructor(e){super(e);const t=Sr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Ja(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class Yk extends KA{constructor(e,t,i){super(e);const s=Sr.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:i-1}))}}const Kk=1e5,Wt=30,Qk=.8;var Bv,Ys,qt,Tu,Pu,la,Yi,Ru,Lu,ca,Jo,Zo,Ks,el,Mu,tl,ua,Nu,Iu,ha,da,Du,Qs,nl,_s,QA,JA,cm,bn,md,um,ZA,ex;const Je=class Je{constructor({textContentSource:e,container:t,viewport:i}){A(this,_s);A(this,Ys,Promise.withResolvers());A(this,qt,null);A(this,Tu,!1);A(this,Pu,!!((Bv=globalThis.FontInspector)!=null&&Bv.enabled));A(this,la,null);A(this,Yi,null);A(this,Ru,0);A(this,Lu,0);A(this,ca,null);A(this,Jo,null);A(this,Zo,0);A(this,Ks,0);A(this,el,Object.create(null));A(this,Mu,[]);A(this,tl,null);A(this,ua,[]);A(this,Nu,new WeakMap);A(this,Iu,null);var c;if(e instanceof ReadableStream)y(this,tl,e);else if(typeof e=="object")y(this,tl,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,qt,y(this,Jo,t)),y(this,Ks,i.scale*(globalThis.devicePixelRatio||1)),y(this,Zo,i.rotation),y(this,Yi,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=i.rawDims;y(this,Iu,[1,0,0,-1,-a,o+r]),y(this,Lu,s),y(this,Ru,r),v(c=Je,bn,ZA).call(c),Wa(t,i),l(this,Ys).promise.finally(()=>{l(Je,nl).delete(this),y(this,Yi,null),y(this,el,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=zt.platform;return ue(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,ca).read().then(({value:t,done:i})=>{if(i){l(this,Ys).resolve();return}l(this,la)??y(this,la,t.lang),Object.assign(l(this,el),t.styles),v(this,_s,QA).call(this,t.items),e()},l(this,Ys).reject)};return y(this,ca,l(this,tl).getReader()),l(Je,nl).add(this),e(),l(this,Ys).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,Zo)&&(t==null||t(),y(this,Zo,s),Wa(l(this,Jo),{rotation:s})),i!==l(this,Ks)){t==null||t(),y(this,Ks,i);const a={div:null,properties:null,ctx:v(r=Je,bn,md).call(r,l(this,la))};for(const o of l(this,ua))a.properties=l(this,Nu).get(o),a.div=o,v(this,_s,cm).call(this,a)}}cancel(){var t;const e=new Za("TextLayer task cancelled.");(t=l(this,ca))==null||t.cancel(e).catch(()=>{}),y(this,ca,null),l(this,Ys).reject(e)}get textDivs(){return l(this,ua)}get textContentItemsStr(){return l(this,Mu)}static cleanup(){if(!(l(this,nl).size>0)){l(this,ha).clear();for(const{canvas:e}of l(this,da).values())e.remove();l(this,da).clear()}}};Ys=new WeakMap,qt=new WeakMap,Tu=new WeakMap,Pu=new WeakMap,la=new WeakMap,Yi=new WeakMap,Ru=new WeakMap,Lu=new WeakMap,ca=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Ks=new WeakMap,el=new WeakMap,Mu=new WeakMap,tl=new WeakMap,ua=new WeakMap,Nu=new WeakMap,Iu=new WeakMap,ha=new WeakMap,da=new WeakMap,Du=new WeakMap,Qs=new WeakMap,nl=new WeakMap,_s=new WeakSet,QA=function(e){var s,r;if(l(this,Tu))return;(r=l(this,Yi)).ctx??(r.ctx=v(s=Je,bn,md).call(s,l(this,la)));const t=l(this,ua),i=l(this,Mu);for(const a of e){if(t.length>Kk){ie("Ignoring additional textDivs for performance reasons."),y(this,Tu,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=l(this,qt);y(this,qt,document.createElement("span")),l(this,qt).classList.add("markedContent"),a.id!==null&&l(this,qt).setAttribute("id",`${a.id}`),o.append(l(this,qt))}else a.type==="endMarkedContent"&&y(this,qt,l(this,qt).parentNode);continue}i.push(a.str),v(this,_s,JA).call(this,a)}},JA=function(e){var w;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,ua).push(t);const s=B.transform(l(this,Iu),e.transform);let r=Math.atan2(s[1],s[0]);const a=l(this,el)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=l(this,Pu)&&a.fontSubstitution||a.fontFamily;o=Je.fontFamilyMap.get(o)||o;const c=Math.hypot(s[2],s[3]),u=c*v(w=Je,bn,ex).call(w,o,l(this,la));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;l(this,qt)===l(this,Jo)?(p.left=`${(100*h/l(this,Lu)).toFixed(2)}%`,p.top=`${(100*d/l(this,Ru)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(Je,Qs)*c).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Pu)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);E!==g&&Math.max(E,g)/Math.min(E,g)>1.5&&(m=!0)}if(m&&(i.canvasWidth=a.vertical?e.height:e.width),l(this,Nu).set(t,i),l(this,Yi).div=t,l(this,Yi).properties=i,v(this,_s,cm).call(this,l(this,Yi)),i.hasText&&l(this,qt).append(t),i.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,qt).append(E)}},cm=function(e){var o;const{div:t,properties:i,ctx:s}=e,{style:r}=t;let a="";if(l(Je,Qs)>1&&(a=`scale(${1/l(Je,Qs)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=i;v(o=Je,bn,um).call(o,s,h*l(this,Ks),c);const{width:d}=s.measureText(t.textContent);d>0&&(a=`scaleX(${u*l(this,Ks)/d}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(r.transform=a)},bn=new WeakSet,md=function(e=null){let t=l(this,da).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,da).set(e,t),l(this,Du).set(t,{size:0,family:""})}return t},um=function(e,t,i){const s=l(this,Du).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},ZA=function(){if(l(this,Qs)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),y(this,Qs,e.getBoundingClientRect().height),e.remove()},ex=function(e,t){const i=l(this,ha).get(e);if(i)return i;const s=v(this,bn,md).call(this,t);s.canvas.width=s.canvas.height=Wt,v(this,bn,um).call(this,s,Wt,e);const r=s.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const h=a/(a+o);return l(this,ha).set(e,h),s.canvas.width=s.canvas.height=0,h}s.strokeStyle="red",s.clearRect(0,0,Wt,Wt),s.strokeText("g",0,0);let c=s.getImageData(0,0,Wt,Wt).data;o=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){o=Math.ceil(h/4/Wt);break}s.clearRect(0,0,Wt,Wt),s.strokeText("A",0,Wt),c=s.getImageData(0,0,Wt,Wt).data,a=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){a=Wt-Math.floor(h/4/Wt);break}s.canvas.width=s.canvas.height=0;const u=a?a/(a+o):Qk;return l(this,ha).set(e,u),u},A(Je,bn),A(Je,ha,new Map),A(Je,da,new Map),A(Je,Du,new WeakMap),A(Je,Qs,null),A(Je,nl,new Set);let Jc=Je;class Zc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var c;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(Zc.shouldBuildText(o))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const u of r.children)s(u)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Jk=65536,Zk=100,eC=5e3,tC=Lt?fk:uk,nC=Lt?pk:FA,iC=Lt?dk:hk,sC=Lt?gk:HA;function rC(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new hm,{docId:t}=e,i=n.url?aC(n.url):null,s=n.data?oC(n.data):null,r=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof tx?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Jk;let h=n.worker instanceof No?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!tp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,w=n.CMapReaderFactory||nC,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||sC,b=n.stopAtErrors!==!0,x=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=n.isEvalSupported!==!1,_=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Lt,k=typeof n.isChrome=="boolean"?n.isChrome:!zt.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),T=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P=typeof n.disableFontFace=="boolean"?n.disableFontFace:Lt,F=n.fontExtraProperties===!0,O=n.enableXfa===!0,H=n.ownerDocument||globalThis.document,oe=n.disableRange===!0,ne=n.disableStream===!0,he=n.disableAutoFetch===!0,fe=n.pdfBug===!0,me=n.CanvasFactory||tC,V=n.FilterFactory||iC,R=n.enableHWA===!0,W=c?c.length:n.length??NaN,G=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Lt&&!P,le=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===FA&&g===HA&&p&&E&&rc(p,document.baseURI)&&rc(E,document.baseURI);n.canvasFactory&&Ev("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&Ev("`filterFactory`-instance option, please use `FilterFactory` instead.");const re=null;B_(d);const Ee={canvasFactory:new me({ownerDocument:H,enableHWA:R}),filterFactory:new V({docId:t,ownerDocument:H}),cMapReaderFactory:le?null:new w({baseUrl:p,isCompressed:m}),standardFontDataFactory:le?null:new g({baseUrl:E})};if(!h){const Le={verbosity:d,port:fs.workerPort};h=Le.port?No.fromPort(Le):new No(Le),e._worker=h}const At={docId:t,apiVersion:"4.8.69",data:s,password:o,disableAutoFetch:he,rangeChunkSize:u,length:W,docBaseUrl:f,enableXfa:O,evaluatorOptions:{maxImageSize:x,disableFontFace:P,ignoreErrors:b,isEvalSupported:S,isOffscreenCanvasSupported:_,isChrome:k,canvasMaxAreaInBytes:T,fontExtraProperties:F,useSystemFonts:G,cMapUrl:le?p:null,standardFontDataUrl:le?E:null}},Hn={disableFontFace:P,fontExtraProperties:F,ownerDocument:H,pdfBug:fe,styleElement:re,loadingParams:{disableAutoFetch:he,enableXfa:O}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Le=h.messageHandler.sendWithPromise("GetDocRequest",At,s?[s.buffer]:null);let pe;if(c)pe=new Mk(c,{disableRange:oe,disableStream:ne});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let ui;Lt?ui=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&rc(i)?Fv:Wk:ui=rc(i)?Fv:Hk,pe=new ui({url:i,length:W,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:oe,disableStream:ne})}return Le.then(ui=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const to=new dc(t,ui,h.port),ip=new hC(to,e,pe,Hn,Ee);e._transport=ip,to.send("Ready",null)})}).catch(e._capability.reject),e}function aC(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Lt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oC(n){if(Lt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Zf(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ov(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Sf;const Ef=class Ef{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Nt(Ef,Sf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Sf=new WeakMap,A(Ef,Sf,0);let hm=Ef;class tx{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Pe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class lC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Js,Ki,Mn,co,yd;class cC{constructor(e,t,i,s=!1){A(this,Mn);A(this,Js,null);A(this,Ki,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new Sv:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new nx,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new xh({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=Fs.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var S,_;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:p,cacheKey:m}=f;y(this,Ki,!1),v(this,Mn,yd).call(this),o||(o=this._transport.getOptionalContentConfig(p));let w=this._intentStates.get(m);w||(w=Object.create(null),this._intentStates.set(m,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const E=!!(p&pn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_=this._stats)==null||_.time("Page Request"),this._pumpOperatorList(f));const g=k=>{var T;w.renderTasks.delete(b),(this._maybeCleanupAfterRender||E)&&y(this,Ki,!0),v(this,Mn,co).call(this,!E),k?(b.capability.reject(k),this._abortOperatorList({intentState:w,reason:k instanceof Error?k:new Error(k)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(T=globalThis.Stats)!=null&&T.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new fm({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(w.renderTasks||(w.renderTasks=new Set)).add(b);const x=b.task;return Promise.all([w.displayReadyCapability.promise,o]).then(([k,T])=>{var P;if(this.destroyed){g();return}if((P=this._stats)==null||P.time("Rendering"),!(T.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:k,optionalContentConfig:T}),b.operatorListChanged()}).catch(g),x}getOperatorList({intent:e="display",annotationMode:t=Fs.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,i,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Zc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){a.read().then(function({value:c,done:u}){if(u){i(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),y(this,Ki,!1),v(this,Mn,yd).call(this),Promise.all(e)}cleanup(e=!1){y(this,Ki,!0);const t=v(this,Mn,co).call(this,!1);return e&&t&&this._stats&&(this._stats=new Sv),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&v(this,Mn,co).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:a}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},a).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();v(this,Mn,co).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof q0){let s=Zk;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Za(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Js=new WeakMap,Ki=new WeakMap,Mn=new WeakSet,co=function(e=!1){if(v(this,Mn,yd).call(this),!l(this,Ki)||this.destroyed)return!1;if(e)return y(this,Js,setTimeout(()=>{y(this,Js,null),v(this,Mn,co).call(this,!1)},eC)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,Ki,!1),!0},yd=function(){l(this,Js)&&(clearTimeout(l(this,Js)),y(this,Js,null))};var Qi,_f;class uC{constructor(){A(this,Qi,new Map);A(this,_f,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,_f).then(()=>{for(const[s]of l(this,Qi))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){ie("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}l(this,Qi).set(t,s)}removeEventListener(e,t){const i=l(this,Qi).get(t);i==null||i(),l(this,Qi).delete(t)}terminate(){for(const[,e]of l(this,Qi))e==null||e();l(this,Qi).clear()}}Qi=new WeakMap,_f=new WeakMap;var kf,fa,pa,il,vd,sl,bd;const Me=class Me{constructor({name:e=null,port:t=null,verbosity:i=$_()}={}){A(this,il);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(Me,pa))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Me,pa)||y(Me,pa,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Lt?Promise.all([Sr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new dc("main","worker",e),this._messageHandler.on("ready",function(){}),v(this,il,vd).call(this)}_initialize(){if(l(Me,fa)||l(Me,sl,bd)){this._setupFakeWorker();return}let{workerSrc:e}=Me;try{Me._isSameOrigin(window.location.href,e)||(e=Me._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new dc("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",o=>{if(r.abort(),this.destroyed||!o){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,v(this,il,vd).call(this)}),i.on("ready",o=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{Qf("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Me,fa)||(ie("Setting up fake worker."),y(Me,fa,!0)),Me._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new uC;this._port=t;const i=`fake${Nt(Me,kf)._++}`,s=new dc(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new dc(i,i+"_worker",t),v(this,il,vd).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(Me,pa))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,pa))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Me(e)}static get workerSrc(){if(fs.workerSrc)return fs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ue(this,"_setupFakeWorkerGlobal",(async()=>l(this,sl,bd)?l(this,sl,bd):(await import(this.workerSrc)).WorkerMessageHandler)())}};kf=new WeakMap,fa=new WeakMap,pa=new WeakMap,il=new WeakSet,vd=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},sl=new WeakSet,bd=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(Me,sl),A(Me,kf,0),A(Me,fa,!1),A(Me,pa),Lt&&(y(Me,fa,!0),fs.workerSrc||(fs.workerSrc="./pdf.worker.mjs")),Me._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},Me._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let No=Me;var Ji,Ei,rl,al,_i,ga,fc;class hC{constructor(e,t,i,s,r){A(this,ga);A(this,Ji,new Map);A(this,Ei,new Map);A(this,rl,new Map);A(this,al,new Map);A(this,_i,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new nx,this.fontLoader=new lk({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ue(this,"annotationStorage",new J0)}getRenderingIntent(e,t=Fs.ENABLE,i=null,s=!1,r=!1){let a=pn.DISPLAY,o=em;switch(e){case"any":a=pn.ANY;break;case"display":break;case"print":a=pn.PRINT;break;default:ie(`getRenderingIntent - invalid intent: ${e}`)}const c=a&pn.PRINT&&i instanceof NA?i:this.annotationStorage;switch(t){case Fs.DISABLE:a+=pn.ANNOTATIONS_DISABLE;break;case Fs.ENABLE:break;case Fs.ENABLE_FORMS:a+=pn.ANNOTATIONS_FORMS;break;case Fs.ENABLE_STORAGE:a+=pn.ANNOTATIONS_STORAGE,o=c.serializable;break;default:ie(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=pn.IS_EDITING),r&&(a+=pn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[a,o.hash,h];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,_i))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Ei).values())e.push(s._destroy());l(this,Ei).clear(),l(this,rl).clear(),l(this,al).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ji).clear(),this.filterFactory.destroy(),Jc.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Za("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{it(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}it(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(i,s)=>{it(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){s.close();return}it(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new lC(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new Mg(i.message,i.code);break;case"InvalidPDFException":s=new rA(i.message);break;case"MissingPDFException":s=new Ja(i.message);break;case"UnexpectedResponseException":s=new Jf(i.message,i.status);break;case"UnknownErrorException":s=new Ng(i.message,i.details);break;default:Pe("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(y(this,_i,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?l(this,_i).reject(r):l(this,_i).resolve({password:r})};try{t.onPassword(s,i.code)}catch(r){l(this,_i).reject(r)}}else l(this,_i).reject(new Mg(i.message,i.code));return l(this,_i).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Ei).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;ie(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const h=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new ck(r,{disableFontFace:o,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=r;it(f,"The imageRef must be defined.");for(const p of l(this,Ei).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,a])=>{var c;if(this.destroyed)return;const o=l(this,Ei).get(s);if(!o.objs.has(i)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":o.objs.resolve(i,a),(a==null?void 0:a.dataLen)>O_&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,rl).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,al).set(r.refStr,e);const a=new cC(t,r,this,this._params.pdfBug);return l(this,Ei).set(t,a),a});return l(this,rl).set(t,s),s}getPageIndex(e){return Ov(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return v(this,ga,fc).call(this,"GetFieldObjects")}hasJSActions(){return v(this,ga,fc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return v(this,ga,fc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return v(this,ga,fc).call(this,"GetOptionalContentConfig").then(t=>new Lk(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Ji).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new Pk(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return l(this,Ji).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Ei).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ji).clear(),this.filterFactory.destroy(!0),Jc.cleanup()}}cachedPageNumber(e){if(!Ov(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,al).get(t)??null}}Ji=new WeakMap,Ei=new WeakMap,rl=new WeakMap,al=new WeakMap,_i=new WeakMap,ga=new WeakSet,fc=function(e,t=null){const i=l(this,Ji).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return l(this,Ji).set(e,s),s};const Xh=Symbol("INITIAL_DATA");var Kn,Fu,dm;class nx{constructor(){A(this,Fu);A(this,Kn,Object.create(null))}get(e,t=null){if(t){const s=v(this,Fu,dm).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=l(this,Kn)[e];if(!i||i.data===Xh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,Kn)[e];return!!t&&t.data!==Xh}resolve(e,t=null){const i=v(this,Fu,dm).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,Kn)){const{data:i}=l(this,Kn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}y(this,Kn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Kn)){const{data:t}=l(this,Kn)[e];t!==Xh&&(yield[e,t])}}}Kn=new WeakMap,Fu=new WeakSet,dm=function(e){var t;return(t=l(this,Kn))[e]||(t[e]={...Promise.withResolvers(),data:Xh})};var Zs;class dC{constructor(e){A(this,Zs,null);y(this,Zs,e),this.onContinue=null}get promise(){return l(this,Zs).capability.promise}cancel(e=0){l(this,Zs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Zs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Zs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Zs=new WeakMap;var er,ma;const jr=class jr{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){A(this,er,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new dC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(l(jr,ma).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(jr,ma).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:a}=this.params;this.gfx=new Mo(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,er)&&(window.cancelAnimationFrame(l(this,er)),y(this,er,null)),l(jr,ma).delete(this._canvas),this.callback(e||new q0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,er,window.requestAnimationFrame(()=>{y(this,er,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(jr,ma).delete(this._canvas),this.callback())))}};er=new WeakMap,ma=new WeakMap,A(jr,ma,new WeakSet);let fm=jr;const fC="4.8.69",pC="3634dab10";function jv(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Zl(n){return Math.max(0,Math.min(255,255*n))}class zv{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Zl(e),[e,e,e]}static G_HTML([e]){const t=jv(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Zl)}static RGB_HTML(e){return`#${e.map(jv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[Zl(1-Math.min(1,e+s)),Zl(1-Math.min(1,i+s)),Zl(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,a=1-i,o=Math.min(s,r,a);return["CMYK",s,r,a,o]}}class gC{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Pe("Abstract method `_createSVG` called.")}}class iy extends gC{_createSVG(e){return document.createElementNS(ji,e)}}class ix{static setupStorage(e,t,i,s,r){const a=s.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,u]of Object.entries(a))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}o&&r.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:i});const o=r!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),o&&Zc.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,a]];for(;h.length>0;){const[p,m,w]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const E=p.children[++h.at(-1)[1]];if(E===null)continue;const{name:g}=E;if(g==="#text"){const x=document.createTextNode(E.value);u.push(x),w.append(x);continue}const b=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,g):document.createElement(g);if(w.append(b),E.attributes&&this.setAttributes({html:b,element:E,storage:t,intent:r,linkService:i}),((f=E.children)==null?void 0:f.length)>0)h.push([E,-1,b]);else if(E.value){const x=document.createTextNode(E.value);o&&Zc.shouldBuildText(g)&&u.push(x),b.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Eh=1e3,mC=9,Xa=new WeakSet;function vs(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class yC{static create(e){switch(e.data.annotationType){case Qe.LINK:return new sx(e);case Qe.TEXT:return new vC(e);case Qe.WIDGET:switch(e.data.fieldType){case"Tx":return new bC(e);case"Btn":return e.data.radioButton?new ox(e):e.data.checkBox?new AC(e):new xC(e);case"Ch":return new SC(e);case"Sig":return new wC(e)}return new eo(e);case Qe.POPUP:return new gm(e);case Qe.FREETEXT:return new dx(e);case Qe.LINE:return new _C(e);case Qe.SQUARE:return new kC(e);case Qe.CIRCLE:return new CC(e);case Qe.POLYLINE:return new fx(e);case Qe.CARET:return new PC(e);case Qe.INK:return new sy(e);case Qe.POLYGON:return new TC(e);case Qe.HIGHLIGHT:return new px(e);case Qe.UNDERLINE:return new RC(e);case Qe.SQUIGGLY:return new LC(e);case Qe.STRIKEOUT:return new MC(e);case Qe.STAMP:return new gx(e);case Qe.FILEATTACHMENT:return new NC(e);default:return new Ge(e)}}}var ya,ol,ll,Ou,pm;const oy=class oy{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){A(this,Ou);A(this,ya,null);A(this,ol,!1);A(this,ll,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return oy._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,ya)||y(this,ya,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&v(this,Ou,pm).call(this,t),(i=l(this,ll))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,ya)&&(v(this,Ou,pm).call(this,l(this,ya).rect),(e=l(this,ll))==null||e.popup.resetEdited(),y(this,ya,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof eo||(r.tabIndex=Eh);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof gm){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:o,height:c}=vs(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(w>0||E>0){const b=`calc(${w}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=b}else if(this instanceof ox){const b=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=b}switch(t.borderStyle.style){case Ql.SOLID:a.borderStyle="solid";break;case Ql.DASHED:a.borderStyle="dashed";break;case Ql.BEVELED:ie("Unimplemented border style: beveled");break;case Ql.INSET:ie("Unimplemented border style: inset");break;case Ql.UNDERLINE:a.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(y(this,ol,!0),a.borderColor=B.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const u=B.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;a.left=`${100*(u[0]-f)/h}%`,a.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/h}%`,a.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=vs(this.data.rect);let o,c;e%180===0?(o=100*r/i,c=100*a/s):(o=100*a/i,c=100*r/s),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],a=r[0],o=r.slice(1);s.target.style[i]=zv[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:zv[`${a}_rgb`](o)})};return ue(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const a=i[s];if(a){const o={detail:{[s]:r},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,g,b]=e.subarray(2,6);if(s===w&&r===E&&t===g&&i===b)return}const{style:a}=this.container;let o;if(l(this,ol)){const{borderColor:w,borderWidth:E}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=s-t,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let w=2,E=e.length;w<E;w+=8){const g=e[w],b=e[w+1],x=e[w+2],S=e[w+3],_=h.createElement("rect"),k=(x-t)/c,T=(r-b)/u,P=(g-x)/c,F=(b-S)/u;_.setAttribute("x",k),_.setAttribute("y",T),_.setAttribute("width",P),_.setAttribute("height",F),p.append(_),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${T}" width="${P}" height="${F}"/>`)}l(this,ol)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=y(this,ll,new gm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Pe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:a,exportValues:o}of s){if(r===-1||a===t)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Xa.has(u)){ie(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==t&&Xa.has(s)&&i.push({id:a,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ya=new WeakMap,ol=new WeakMap,ll=new WeakMap,Ou=new WeakSet,pm=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:h}=vs(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*u/r}%`,t.height=`${100*h/a}%`):this.setRotation(s)};let Ge=oy;var mn,Nr,rx,ax;class sx extends Ge{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});A(this,mn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(v(this,mn,rx).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(v(this,mn,ax).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&v(this,mn,Nr).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),v(this,mn,Nr).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const a=s.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),v(this,mn,Nr).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),v(this,mn,Nr).call(this),!this._fieldObjects){ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:r,refs:a,include:o}=i,c=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:w}of m)f.add(w)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===o&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(p,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Xa.has(m)){ie(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}mn=new WeakSet,Nr=function(){this.container.setAttribute("data-internal-link","")},rx=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},v(this,mn,Nr).call(this)},ax=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),v(this,mn,Nr).call(this)};class vC extends Ge{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class eo extends Ge{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return zt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{var o;if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(e,t,i,s){var r,a,o;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":B.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||mC,r=e.style;let a;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(Np*s))||1,d=u/h;a=Math.min(s,c(d/Np))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,c(u/Np))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=B.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class bC extends eo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),r.setValue(a.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Xa.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Eh,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";i.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",p=>{var w;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(w){h.userValue=w.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:E}=w.detail;h.formattedValue=E,E!=null&&w.target!==document.activeElement&&(w.target.value=E),e.setValue(t,{formattedValue:E})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var x;const{charLimit:E}=w.detail,{target:g}=w;if(E===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",E);let b=h.userValue;!b||b.length<=E||(b=b.slice(0,E),g.value=h.userValue=b,e.setValue(t,{value:b}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),i.addEventListener("keydown",p=>{var E;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:w}=p.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",p=>{var w,E;if(!h.focused||!p.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",p=>{var _;h.lastCommittedValue=null;const{data:m,target:w}=p,{value:E,selectionStart:g,selectionEnd:b}=w;let x=g,S=b;switch(p.inputType){case"deleteWordBackward":{const k=E.substring(0,g).match(/\w*[^\w]*$/);k&&(x-=k[0].length);break}case"deleteWordForward":{const k=E.substring(g).match(/^[^\w]*\w*/);k&&(S+=k[0].length);break}case"deleteContentBackward":g===b&&(x-=1);break;case"deleteContentForward":g===b&&(S+=1);break}p.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:m||"",willCommit:!1,selStart:x,selEnd:S}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class wC extends eo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class AC extends eo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Xa.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=Eh,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,i)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ox extends eo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(Xa.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Eh,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const u of this._getElementsByName(o,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const h=a===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class xC extends sx{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class SC extends eo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Xa.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Eh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),a=()=>{h.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=o(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){a==null||a();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const w of s.options)w.selected=m.has(w.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,E=>E.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(f){const{index:p,displayValue:m,exportValue:w}=f.detail.insert,E=s.children[p],g=document.createElement("option");g.textContent=m,g.value=w,E?E.before(g):s.append(g),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:w,exportValue:E}=m,g=document.createElement("option");g.textContent=w,g.value=E,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),c=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=o(!0),f=o(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class gm extends Ge{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:Ge._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new EC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${X0}${i}`).join(",")),this.container}}var cl,Cf,Tf,ul,va,Be,Zi,hl,ju,zu,dl,es,Qn,ts,Hu,ns,Bu,ba,wa,Se,wd,mm,lx,cx,ux,hx,Ad,xd,ym;class EC{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:u,parentRect:h,open:d}){A(this,Se);A(this,cl,v(this,Se,ux).bind(this));A(this,Cf,v(this,Se,ym).bind(this));A(this,Tf,v(this,Se,xd).bind(this));A(this,ul,v(this,Se,Ad).bind(this));A(this,va,null);A(this,Be,null);A(this,Zi,null);A(this,hl,null);A(this,ju,null);A(this,zu,null);A(this,dl,null);A(this,es,!1);A(this,Qn,null);A(this,ts,null);A(this,Hu,null);A(this,ns,null);A(this,Bu,null);A(this,ba,null);A(this,wa,!1);var f;y(this,Be,e),y(this,Bu,s),y(this,Zi,a),y(this,ns,o),y(this,zu,c),y(this,va,t),y(this,Hu,u),y(this,dl,h),y(this,ju,i),y(this,hl,K0.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,ul)),p.addEventListener("mouseenter",l(this,Tf)),p.addEventListener("mouseleave",l(this,Cf)),p.classList.add("popupTriggerArea");for(const p of i)(f=p.container)==null||f.addEventListener("keydown",l(this,cl));l(this,Be).hidden=!0,d&&v(this,Se,Ad).call(this)}render(){if(l(this,Qn))return;const e=y(this,Qn,document.createElement("div"));if(e.className="popup",l(this,va)){const r=e.style.outlineColor=B.makeHexColor(...l(this,va));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=B.makeHexColor(...l(this,va).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,Bu),e.append(t),l(this,hl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,hl).valueOf()})),t.append(r)}const s=l(this,Se,wd);if(s)ix.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,Zi));e.append(r)}l(this,Be).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const o=s[r];i.append(document.createTextNode(o)),r<a-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,ba)||y(this,ba,{contentsObj:l(this,Zi),richText:l(this,ns)}),e&&y(this,ts,null),t&&(y(this,ns,v(this,Se,cx).call(this,t)),y(this,Zi,null)),(i=l(this,Qn))==null||i.remove(),y(this,Qn,null)}resetEdited(){var e;l(this,ba)&&({contentsObj:Nt(this,Zi)._,richText:Nt(this,ns)._}=l(this,ba),y(this,ba,null),(e=l(this,Qn))==null||e.remove(),y(this,Qn,null),y(this,ts,null))}forceHide(){y(this,wa,this.isVisible),l(this,wa)&&(l(this,Be).hidden=!0)}maybeShow(){l(this,wa)&&(l(this,Qn)||v(this,Se,xd).call(this),y(this,wa,!1),l(this,Be).hidden=!1)}get isVisible(){return l(this,Be).hidden===!1}}cl=new WeakMap,Cf=new WeakMap,Tf=new WeakMap,ul=new WeakMap,va=new WeakMap,Be=new WeakMap,Zi=new WeakMap,hl=new WeakMap,ju=new WeakMap,zu=new WeakMap,dl=new WeakMap,es=new WeakMap,Qn=new WeakMap,ts=new WeakMap,Hu=new WeakMap,ns=new WeakMap,Bu=new WeakMap,ba=new WeakMap,wa=new WeakMap,Se=new WeakSet,wd=function(){const e=l(this,ns),t=l(this,Zi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,ns).html||null},mm=function(){var e,t,i;return((i=(t=(e=l(this,Se,wd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},lx=function(){var e,t,i;return((i=(t=(e=l(this,Se,wd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},cx=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,Se,lx),fontSize:l(this,Se,mm)?`calc(${l(this,Se,mm)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},ux=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,es))&&v(this,Se,Ad).call(this)},hx=function(){if(l(this,ts)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=l(this,zu);let a=!!l(this,dl),o=a?l(this,dl):l(this,Hu);for(const m of l(this,ju))if(!o||B.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const c=B.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,d=c[0]+h,f=c[1];y(this,ts,[100*(d-s)/t,100*(f-r)/i]);const{style:p}=l(this,Be);p.left=`${l(this,ts)[0]}%`,p.top=`${l(this,ts)[1]}%`},Ad=function(){y(this,es,!l(this,es)),l(this,es)?(v(this,Se,xd).call(this),l(this,Be).addEventListener("click",l(this,ul)),l(this,Be).addEventListener("keydown",l(this,cl))):(v(this,Se,ym).call(this),l(this,Be).removeEventListener("click",l(this,ul)),l(this,Be).removeEventListener("keydown",l(this,cl)))},xd=function(){l(this,Qn)||this.render(),this.isVisible?l(this,es)&&l(this,Be).classList.add("focused"):(v(this,Se,hx).call(this),l(this,Be).hidden=!1,l(this,Be).style.zIndex=parseInt(l(this,Be).style.zIndex)+1e3)},ym=function(){l(this,Be).classList.remove("focused"),!(l(this,es)||!this.isVisible)&&(l(this,Be).hidden=!0,l(this,Be).style.zIndex=parseInt(l(this,Be).style.zIndex)-1e3)};class dx extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Z.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $u;class _C extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,$u,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=vs(t.rect),r=this.svgFactory.create(i,s,!0),a=y(this,$u,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,$u)}addHighlightArea(){this.container.classList.add("highlightArea")}}$u=new WeakMap;var Uu;class kC extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Uu,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=vs(t.rect),r=this.svgFactory.create(i,s,!0),a=t.borderStyle.width,o=y(this,Uu,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Uu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Uu=new WeakMap;var Vu;class CC extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Vu,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=vs(t.rect),r=this.svgFactory.create(i,s,!0),a=t.borderStyle.width,o=y(this,Vu,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",s/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Vu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vu=new WeakMap;var Wu;class fx extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Wu,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:a,height:o}=vs(t),c=this.svgFactory.create(a,o,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-t[0],m=t[3]-i[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=y(this,Wu,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Wu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wu=new WeakMap;class TC extends fx{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class PC extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Gu;class sy extends Ge{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Gu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Z.HIGHLIGHT:Z.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:s,popupRef:r}}=this,{width:a,height:o}=vs(t),c=this.svgFactory.create(a,o,!0);for(const u of i){let h=[];for(let f=0,p=u.length;f<p;f+=2){const m=u[f]-t[0],w=t[3]-u[f+1];h.push(`${m},${w}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,Gu).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,Gu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gu=new WeakMap;class px extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Z.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class RC extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class LC extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class MC extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class gx extends Ge{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Z.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xu,qu,vm;class NC extends Ge{constructor(t){var s;super(t,{isRenderable:!0});A(this,qu);A(this,Xu,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",v(this,qu,vm).bind(this)),y(this,Xu,s);const{isMac:r}=zt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&v(this,qu,vm).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Xu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xu=new WeakMap,qu=new WeakSet,vm=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Yu,Aa,xa,Ku,qa,mx,bm;class IC{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:o}){A(this,qa);A(this,Yu,null);A(this,Aa,null);A(this,xa,new Map);A(this,Ku,null);this.div=e,y(this,Yu,t),y(this,Aa,i),y(this,Ku,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return l(this,xa).size>0}async render(e){var a;const{annotations:t}=e,i=this.div;Wa(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new iy,annotationStorage:e.annotationStorage||new J0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===Qe.POPUP;if(c){const d=s.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=vs(o.rect);if(d<=0||f<=0)continue}r.data=o;const u=yC.create(r);if(!u.isRenderable)continue;if(!c&&o.popupRef){const d=s.get(o.popupRef);d?d.push(u):s.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await v(this,qa,mx).call(this,h,o.id),u._isEditable&&(l(this,xa).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}v(this,qa,bm).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Wa(t,{rotation:e.rotation}),v(this,qa,bm).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,xa).values())}getEditableAnnotation(e){return l(this,xa).get(e)}}Yu=new WeakMap,Aa=new WeakMap,xa=new WeakMap,Ku=new WeakMap,qa=new WeakSet,mx=async function(e,t){var a,o;const i=e.firstChild||e,s=i.id=`${X0}${t}`,r=await((a=l(this,Ku))==null?void 0:a.getAriaAttributes(s));if(r)for(const[c,u]of r)i.setAttribute(c,u);this.div.append(e),(o=l(this,Yu))==null||o.moveElementInDOM(this.div,e,i,!1)},bm=function(){if(!l(this,Aa))return;const e=this.div;for(const[t,i]of l(this,Aa)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}l(this,Aa).clear()};const qh=/\r\n?|\n/g;var Jn,ln,Qu,Sa,cn,Ke,yx,vx,bx,Sd,ws,Ed,_d,wx,Am,Ax;const _e=class _e extends we{constructor(t){super({...t,name:"freeTextEditor"});A(this,Ke);A(this,Jn);A(this,ln,"");A(this,Qu,`${this.id}-editor`);A(this,Sa,null);A(this,cn);y(this,Jn,t.color||_e._defaultColor||we._defaultLineColor),y(this,cn,t.fontSize||_e._defaultFontSize)}static get _keyboardManager(){const t=_e.prototype,i=a=>a.isEmpty(),s=Ga.TRANSLATE_SMALL,r=Ga.TRANSLATE_BIG;return ue(this,"_keyboardManager",new Sh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){we.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case K.FREETEXT_SIZE:_e._defaultFontSize=i;break;case K.FREETEXT_COLOR:_e._defaultColor=i;break}}updateParams(t,i){switch(t){case K.FREETEXT_SIZE:v(this,Ke,yx).call(this,i);break;case K.FREETEXT_COLOR:v(this,Ke,vx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[K.FREETEXT_SIZE,_e._defaultFontSize],[K.FREETEXT_COLOR,_e._defaultColor||we._defaultLineColor]]}get propertiesToUpdate(){return[[K.FREETEXT_SIZE,l(this,cn)],[K.FREETEXT_COLOR,l(this,Jn)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-_e._internalPadding*t,-(_e._internalPadding+l(this,cn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Z.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),y(this,Sa,new AbortController);const t=this._uiManager.combinedSignal(l(this,Sa));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Qu)),this._isDraggable=!0,(t=l(this,Sa))==null||t.abort(),y(this,Sa,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,ln),i=y(this,ln,v(this,Ke,bx).call(this).trimEnd());if(t===i)return;const s=r=>{if(y(this,ln,r),!r){this.remove();return}v(this,Ke,_d).call(this),this._uiManager.rebuild(this),v(this,Ke,Sd).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),v(this,Ke,Sd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){_e._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Qu)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,cn)}px * var(--scale-factor))`,s.color=l(this,Jn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),cf(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,w;switch(this.rotation){case 0:m=t+(o[0]-f)/h,w=i+this.height-(o[1]-p)/d;break;case 90:m=t+(o[0]-f)/h,w=i-(o[1]-p)/d,[c,u]=[u,-c];break;case 180:m=t-this.width+(o[0]-f)/h,w=i-(o[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=t+(o[0]-f-this.height*d)/h,w=i+(o[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,w*a,c,u)}else this.setAt(t*r,i*a,this.width*r,this.height*a);v(this,Ke,_d).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,w,E;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=v(m=_e,ws,Am).call(m,i.getData("text")||"").replaceAll(qh,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(qh,"")),g!==this.editorDiv){let b=h;for(const x of this.editorDiv.childNodes){if(x===g){b=d;continue}b.push(v(w=_e,ws,Ed).call(w,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(qh,""))}else if(c===this.editorDiv){let g=h,b=0;for(const x of this.editorDiv.childNodes)b++===u&&(g=d),g.push(v(E=_e,ws,Ed).call(E,x))}y(this,ln,`${h.join(`
`)}${r}${d.join(`
`)}`),v(this,Ke,_d).call(this);const f=new Range;let p=h.reduce((g,b)=>g+b.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const b=g.nodeValue.length;if(p<=b){f.setStart(g,p),f.setEnd(g,p);break}p-=b}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){var o;let r=null;if(t instanceof dx){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:w,parent:{page:{pageNumber:E}}}=t;if(!m||m.length===0)return null;r=t={annotationType:Z.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:w,pageIndex:E-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(t,i,s);return y(a,cn,t.fontSize),y(a,Jn,B.makeHexColor(...t.color)),y(a,ln,v(o=_e,ws,Am).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=_e._internalPadding*this.parentScale,s=this.getRect(i,i),r=we._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Jn)),a={annotationType:Z.FREETEXT,color:r,fontSize:l(this,cn),value:v(this,Ke,wx).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!v(this,Ke,Ax).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${l(this,cn)}px * var(--scale-factor))`,s.color=l(this,Jn),i.replaceChildren();for(const a of l(this,ln).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}const r=_e._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,ln)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Jn=new WeakMap,ln=new WeakMap,Qu=new WeakMap,Sa=new WeakMap,cn=new WeakMap,Ke=new WeakSet,yx=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,cn))*this.parentScale),y(this,cn,r),v(this,Ke,Sd).call(this)},s=l(this,cn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},vx=function(t){const i=r=>{y(this,Jn,this.editorDiv.style.color=r)},s=l(this,Jn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},bx=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(v(s=_e,ws,Ed).call(s,r)),i=r);return t.join(`
`)},Sd=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},ws=new WeakSet,Ed=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(qh,"")},_d=function(){if(this.editorDiv.replaceChildren(),!!l(this,ln))for(const t of l(this,ln).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},wx=function(){return l(this,ln).replaceAll(""," ")},Am=function(t){return t.replaceAll(" ","")},Ax=function(t){const{value:i,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((o,c)=>o!==r[c])||t.pageIndex!==a},A(_e,ws),Y(_e,"_freeTextDefaultContent",""),Y(_e,"_internalPadding",0),Y(_e,"_defaultColor",null),Y(_e,"_defaultFontSize",10),Y(_e,"_type","freetext"),Y(_e,"_editorType",Z.FREETEXT);let wm=_e;class xx{toSVGPath(){Pe("Abstract method `toSVGPath` must be implemented.")}get box(){Pe("Abstract getter `box` must be implemented.")}serialize(e,t){Pe("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Pe("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Pe("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var un,Zn,fl,pl,ki,se,Ea,_a,Ju,Zu,gl,ml,tr,eh,Pf,Rf,rt,pc,Sx,Ex,_x,kx,Cx,Tx;const Bi=class Bi{constructor({x:e,y:t},i,s,r,a,o=0){A(this,rt);A(this,un);A(this,Zn,[]);A(this,fl);A(this,pl);A(this,ki,[]);A(this,se,new Float64Array(18));A(this,Ea);A(this,_a);A(this,Ju);A(this,Zu);A(this,gl);A(this,ml);A(this,tr,[]);y(this,un,i),y(this,ml,r*s),y(this,pl,a),l(this,se).set([NaN,NaN,NaN,NaN,e,t],6),y(this,fl,o),y(this,Zu,l(Bi,eh)*s),y(this,Ju,l(Bi,Rf)*s),y(this,gl,s),l(this,tr).push(e,t)}isEmpty(){return isNaN(l(this,se)[8])}add({x:e,y:t}){var F;y(this,Ea,e),y(this,_a,t);const[i,s,r,a]=l(this,un);let[o,c,u,h]=l(this,se).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<l(this,Ju))return!1;const m=p-l(this,Zu),w=m/p,E=w*d,g=w*f;let b=o,x=c;o=u,c=h,u+=E,h+=g,(F=l(this,tr))==null||F.push(e,t);const S=-g/m,_=E/m,k=S*l(this,ml),T=_*l(this,ml);return l(this,se).set(l(this,se).subarray(2,8),0),l(this,se).set([u+k,h+T],4),l(this,se).set(l(this,se).subarray(14,18),12),l(this,se).set([u-k,h-T],16),isNaN(l(this,se)[6])?(l(this,ki).length===0&&(l(this,se).set([o+k,c+T],2),l(this,ki).push(NaN,NaN,NaN,NaN,(o+k-i)/r,(c+T-s)/a),l(this,se).set([o-k,c-T],14),l(this,Zn).push(NaN,NaN,NaN,NaN,(o-k-i)/r,(c-T-s)/a)),l(this,se).set([b,x,o,c,u,h],6),!this.isEmpty()):(l(this,se).set([b,x,o,c,u,h],6),Math.abs(Math.atan2(x-c,b-o)-Math.atan2(g,E))<Math.PI/2?([o,c,u,h]=l(this,se).subarray(2,6),l(this,ki).push(NaN,NaN,NaN,NaN,((o+u)/2-i)/r,((c+h)/2-s)/a),[o,c,b,x]=l(this,se).subarray(14,18),l(this,Zn).push(NaN,NaN,NaN,NaN,((b+o)/2-i)/r,((x+c)/2-s)/a),!0):([b,x,o,c,u,h]=l(this,se).subarray(0,6),l(this,ki).push(((b+5*o)/6-i)/r,((x+5*c)/6-s)/a,((5*o+u)/6-i)/r,((5*c+h)/6-s)/a,((o+u)/2-i)/r,((c+h)/2-s)/a),[u,h,o,c,b,x]=l(this,se).subarray(12,18),l(this,Zn).push(((b+5*o)/6-i)/r,((x+5*c)/6-s)/a,((5*o+u)/6-i)/r,((5*c+h)/6-s)/a,((o+u)/2-i)/r,((c+h)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,ki),t=l(this,Zn);if(isNaN(l(this,se)[6])&&!this.isEmpty())return v(this,rt,Sx).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);v(this,rt,_x).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return v(this,rt,Ex).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,r,a){return new Px(e,t,i,s,r,a)}getOutlines(){var d;const e=l(this,ki),t=l(this,Zn),i=l(this,se),[s,r,a,o]=l(this,un),c=new Float64Array((((d=l(this,tr))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,tr)[f]-s)/a,c[f+1]=(l(this,tr)[f+1]-r)/o;if(c[c.length-2]=(l(this,Ea)-s)/a,c[c.length-1]=(l(this,_a)-r)/o,isNaN(i[6])&&!this.isEmpty())return v(this,rt,kx).call(this,c);const u=new Float64Array(l(this,ki).length+24+l(this,Zn).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=v(this,rt,Tx).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return v(this,rt,Cx).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,un),l(this,gl),l(this,fl),l(this,pl))}};un=new WeakMap,Zn=new WeakMap,fl=new WeakMap,pl=new WeakMap,ki=new WeakMap,se=new WeakMap,Ea=new WeakMap,_a=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,gl=new WeakMap,ml=new WeakMap,tr=new WeakMap,eh=new WeakMap,Pf=new WeakMap,Rf=new WeakMap,rt=new WeakSet,pc=function(){const e=l(this,se).subarray(4,6),t=l(this,se).subarray(16,18),[i,s,r,a]=l(this,un);return[(l(this,Ea)+(e[0]-t[0])/2-i)/r,(l(this,_a)+(e[1]-t[1])/2-s)/a,(l(this,Ea)+(t[0]-e[0])/2-i)/r,(l(this,_a)+(t[1]-e[1])/2-s)/a]},Sx=function(){const[e,t,i,s]=l(this,un),[r,a,o,c]=v(this,rt,pc).call(this);return`M${(l(this,se)[2]-e)/i} ${(l(this,se)[3]-t)/s} L${(l(this,se)[4]-e)/i} ${(l(this,se)[5]-t)/s} L${r} ${a} L${o} ${c} L${(l(this,se)[16]-e)/i} ${(l(this,se)[17]-t)/s} L${(l(this,se)[14]-e)/i} ${(l(this,se)[15]-t)/s} Z`},Ex=function(e){const t=l(this,Zn);e.push(`L${t[4]} ${t[5]} Z`)},_x=function(e){const[t,i,s,r]=l(this,un),a=l(this,se).subarray(4,6),o=l(this,se).subarray(16,18),[c,u,h,d]=v(this,rt,pc).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-i)/r} L${c} ${u} L${h} ${d} L${(o[0]-t)/s} ${(o[1]-i)/r}`)},kx=function(e){const t=l(this,se),[i,s,r,a]=l(this,un),[o,c,u,h]=v(this,rt,pc).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/a],0),this.newFreeDrawOutline(d,e,l(this,un),l(this,gl),l(this,fl),l(this,pl))},Cx=function(e,t){const i=l(this,Zn);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},Tx=function(e,t){const i=l(this,se).subarray(4,6),s=l(this,se).subarray(16,18),[r,a,o,c]=l(this,un),[u,h,d,f]=v(this,rt,pc).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/o,(i[1]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/c],t),t+=24},A(Bi,eh,8),A(Bi,Pf,2),A(Bi,Rf,l(Bi,eh)+l(Bi,Pf));let hf=Bi;var yl,ka,is,th,hn,nh,Ve,Zt,gc,mc,Rx;class Px extends xx{constructor(t,i,s,r,a,o){super();A(this,Zt);A(this,yl);A(this,ka,null);A(this,is);A(this,th);A(this,hn);A(this,nh);A(this,Ve);y(this,Ve,t),y(this,hn,i),y(this,yl,s),y(this,nh,r),y(this,is,a),y(this,th,o),v(this,Zt,Rx).call(this,o);const{x:c,y:u,width:h,height:d}=l(this,ka);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,Ve)[4]} ${l(this,Ve)[5]}`];for(let i=6,s=l(this,Ve).length;i<s;i+=6){if(isNaN(l(this,Ve)[i])){t.push(`L${l(this,Ve)[i+4]} ${l(this,Ve)[i+5]}`);continue}t.push(`C${l(this,Ve)[i]} ${l(this,Ve)[i+1]} ${l(this,Ve)[i+2]} ${l(this,Ve)[i+3]} ${l(this,Ve)[i+4]} ${l(this,Ve)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],a){const o=s-t,c=r-i;let u,h;switch(a){case 0:u=v(this,Zt,gc).call(this,l(this,Ve),t,r,o,-c),h=v(this,Zt,gc).call(this,l(this,hn),t,r,o,-c);break;case 90:u=v(this,Zt,mc).call(this,l(this,Ve),t,i,o,c),h=v(this,Zt,mc).call(this,l(this,hn),t,i,o,c);break;case 180:u=v(this,Zt,gc).call(this,l(this,Ve),s,i,-o,c),h=v(this,Zt,gc).call(this,l(this,hn),s,i,-o,c);break;case 270:u=v(this,Zt,mc).call(this,l(this,Ve),s,r,-o,-c),h=v(this,Zt,mc).call(this,l(this,hn),s,r,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,ka)}newOutliner(t,i,s,r,a,o=0){return new hf(t,i,s,r,a,o)}getNewOutline(t,i){const{x:s,y:r,width:a,height:o}=l(this,ka),[c,u,h,d]=l(this,yl),f=a*h,p=o*d,m=s*h+c,w=r*d+u,E=this.newOutliner({x:l(this,hn)[0]*f+m,y:l(this,hn)[1]*p+w},l(this,yl),l(this,nh),t,l(this,th),i??l(this,is));for(let g=2;g<l(this,hn).length;g+=2)E.add({x:l(this,hn)[g]*f+m,y:l(this,hn)[g+1]*p+w});return E.getOutlines()}get mustRemoveSelfIntersections(){return!0}}yl=new WeakMap,ka=new WeakMap,is=new WeakMap,th=new WeakMap,hn=new WeakMap,nh=new WeakMap,Ve=new WeakMap,Zt=new WeakSet,gc=function(t,i,s,r,a){const o=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)o[c]=i+t[c]*r,o[c+1]=s+t[c+1]*a;return o},mc=function(t,i,s,r,a){const o=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)o[c]=i+t[c+1]*r,o[c+1]=s+t[c]*a;return o},Rx=function(t){const i=l(this,Ve);let s=i[4],r=i[5],a=s,o=r,c=s,u=r,h=s,d=r;const f=t?Math.max:Math.min;for(let g=6,b=i.length;g<b;g+=6){if(isNaN(i[g]))a=Math.min(a,i[g+4]),o=Math.min(o,i[g+5]),c=Math.max(c,i[g+4]),u=Math.max(u,i[g+5]),d<i[g+5]?(h=i[g+4],d=i[g+5]):d===i[g+5]&&(h=f(h,i[g+4]));else{const x=B.bezierBoundingBox(s,r,...i.slice(g,g+6));a=Math.min(a,x[0]),o=Math.min(o,x[1]),c=Math.max(c,x[2]),u=Math.max(u,x[3]),d<x[3]?(h=x[2],d=x[3]):d===x[3]&&(h=f(h,x[2]))}s=i[g+4],r=i[g+5]}const p=a-l(this,is),m=o-l(this,is),w=c-a+2*l(this,is),E=u-o+2*l(this,is);y(this,ka,{x:p,y:m,width:w,height:E,lastPoint:[h,d]})};var ih,nr,ei,Bt,Lx,kd,Mx,Nx,xm;class Hv{constructor(e,t=0,i=0,s=!0){A(this,Bt);A(this,ih);A(this,nr,[]);A(this,ei,[]);let r=1/0,a=-1/0,o=1/0,c=-1/0;const u=10**-4;for(const{x:E,y:g,width:b,height:x}of e){const S=Math.floor((E-t)/u)*u,_=Math.ceil((E+b+t)/u)*u,k=Math.floor((g-t)/u)*u,T=Math.ceil((g+x+t)/u)*u,P=[S,k,T,!0],F=[_,k,T,!1];l(this,nr).push(P,F),r=Math.min(r,S),a=Math.max(a,_),o=Math.min(o,k),c=Math.max(c,T)}const h=a-r+2*i,d=c-o+2*i,f=r-i,p=o-i,m=l(this,nr).at(s?-1:-2),w=[m[0],m[2]];for(const E of l(this,nr)){const[g,b,x]=E;E[0]=(g-f)/h,E[1]=(b-p)/d,E[2]=(x-p)/d}y(this,ih,{x:f,y:p,width:h,height:d,lastPoint:w})}getOutlines(){l(this,nr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,nr))t[3]?(e.push(...v(this,Bt,xm).call(this,t)),v(this,Bt,Mx).call(this,t)):(v(this,Bt,Nx).call(this,t),e.push(...v(this,Bt,xm).call(this,t)));return v(this,Bt,Lx).call(this,e)}}ih=new WeakMap,nr=new WeakMap,ei=new WeakMap,Bt=new WeakSet,Lx=function(e){const t=[],i=new Set;for(const a of e){const[o,c,u]=a;t.push([o,c,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],u=t[a+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const a=i.values().next().value;let[o,c,u,h,d]=a;i.delete(a);let f=o,p=c;for(r=[o,u],s.push(r);;){let m;if(i.has(h))m=h;else if(i.has(d))m=d;else break;i.delete(m),[o,c,u,h,d]=m,f!==o&&(r.push(f,p,o,p===c?c:u),f=o),p=p===c?u:c}r.push(f,p)}return new DC(s,l(this,ih))},kd=function(e){const t=l(this,ei);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,a=t[r][0];if(a===e)return r;a<e?i=r+1:s=r-1}return s+1},Mx=function([,e,t]){const i=v(this,Bt,kd).call(this,e);l(this,ei).splice(i,0,[e,t])},Nx=function([,e,t]){const i=v(this,Bt,kd).call(this,e);for(let s=i;s<l(this,ei).length;s++){const[r,a]=l(this,ei)[s];if(r!==e)break;if(r===e&&a===t){l(this,ei).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,a]=l(this,ei)[s];if(r!==e)break;if(r===e&&a===t){l(this,ei).splice(s,1);return}}},xm=function(e){const[t,i,s]=e,r=[[t,i,s]],a=v(this,Bt,kd).call(this,s);for(let o=0;o<a;o++){const[c,u]=l(this,ei)[o];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([t,u,p])}}}return r};var sh,vl;class DC extends xx{constructor(t,i){super();A(this,sh);A(this,vl);y(this,vl,t),y(this,sh,i)}toSVGPath(){const t=[];for(const i of l(this,vl)){let[s,r]=i;t.push(`M${s} ${r}`);for(let a=2;a<i.length;a+=2){const o=i[a],c=i[a+1];o===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],a){const o=[],c=s-t,u=r-i;for(const h of l(this,vl)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;o.push(d)}return o}get box(){return l(this,sh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}sh=new WeakMap,vl=new WeakMap;class Sm extends hf{newFreeDrawOutline(e,t,i,s,r,a){return new FC(e,t,i,s,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class FC extends Px{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,s,r,a=0){return new Sm(e,t,i,s,r,a)}}var ti,Ca,bl,et,rh,wl,ah,oh,ir,ni,Al,lh,xe,Em,_m,km,Ir,Ix,Ls;const Gt=class Gt{constructor({editor:e=null,uiManager:t=null}){A(this,xe);A(this,ti,null);A(this,Ca,null);A(this,bl);A(this,et,null);A(this,rh,!1);A(this,wl,!1);A(this,ah,null);A(this,oh);A(this,ir,null);A(this,ni,null);A(this,Al);var i;e?(y(this,wl,!1),y(this,Al,K.HIGHLIGHT_COLOR),y(this,ah,e)):(y(this,wl,!0),y(this,Al,K.HIGHLIGHT_DEFAULT_COLOR)),y(this,ni,(e==null?void 0:e._uiManager)||t),y(this,oh,l(this,ni)._eventBus),y(this,bl,(e==null?void 0:e.color)||((i=l(this,ni))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(Gt,lh)||y(Gt,lh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ue(this,"_keyboardManager",new Sh([[["Escape","mac+Escape"],Gt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Gt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Gt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Gt.prototype._moveToPrevious],[["Home","mac+Home"],Gt.prototype._moveToBeginning],[["End","mac+End"],Gt.prototype._moveToEnd]]))}renderButton(){const e=y(this,ti,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,ni)._signal;e.addEventListener("click",v(this,xe,Ir).bind(this),{signal:t}),e.addEventListener("keydown",v(this,xe,km).bind(this),{signal:t});const i=y(this,Ca,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,bl),e.append(i),e}renderMainDropdown(){const e=y(this,et,v(this,xe,Em).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,ti)){v(this,xe,Ir).call(this,e);return}const t=e.target.getAttribute("data-color");t&&v(this,xe,_m).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,xe,Ls)){v(this,xe,Ir).call(this,e);return}if(e.target===l(this,ti)){(t=l(this,et).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,et))==null?void 0:t.firstChild)||e.target===l(this,ti)){l(this,xe,Ls)&&this._hideDropdownFromKeyboard();return}l(this,xe,Ls)||v(this,xe,Ir).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,xe,Ls)){v(this,xe,Ir).call(this,e);return}(t=l(this,et).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,xe,Ls)){v(this,xe,Ir).call(this,e);return}(t=l(this,et).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,et))==null||e.classList.add("hidden"),(t=l(this,ir))==null||t.abort(),y(this,ir,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,wl)){if(!l(this,xe,Ls)){(e=l(this,ah))==null||e.unselect();return}this.hideDropdown(),l(this,ti).focus({preventScroll:!0,focusVisible:l(this,rh)})}}updateColor(e){if(l(this,Ca)&&(l(this,Ca).style.backgroundColor=e),!l(this,et))return;const t=l(this,ni).highlightColors.values();for(const i of l(this,et).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,ti))==null||e.remove(),y(this,ti,null),y(this,Ca,null),(t=l(this,et))==null||t.remove(),y(this,et,null)}};ti=new WeakMap,Ca=new WeakMap,bl=new WeakMap,et=new WeakMap,rh=new WeakMap,wl=new WeakMap,ah=new WeakMap,oh=new WeakMap,ir=new WeakMap,ni=new WeakMap,Al=new WeakMap,lh=new WeakMap,xe=new WeakSet,Em=function(){const e=document.createElement("div"),t=l(this,ni)._signal;e.addEventListener("contextmenu",zn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of l(this,ni).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",l(Gt,lh)[i]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===l(this,bl)),r.addEventListener("click",v(this,xe,_m).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",v(this,xe,km).bind(this),{signal:t}),e},_m=function(e,t){t.stopPropagation(),l(this,oh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Al),value:e})},km=function(e){Gt._keyboardManager.exec(this,e)},Ir=function(e){if(l(this,xe,Ls)){this.hideDropdown();return}if(y(this,rh,e.detail===0),l(this,ir)||(y(this,ir,new AbortController),window.addEventListener("pointerdown",v(this,xe,Ix).bind(this),{signal:l(this,ni).combinedSignal(l(this,ir))})),l(this,et)){l(this,et).classList.remove("hidden");return}const t=y(this,et,v(this,xe,Em).call(this));l(this,ti).append(t)},Ix=function(e){var t;(t=l(this,et))!=null&&t.contains(e.target)||this.hideDropdown()},Ls=function(){return l(this,et)&&!l(this,et).classList.contains("hidden")},A(Gt,lh,null);let df=Gt;var xl,ch,ss,Ta,Sl,Cn,uh,hh,Pa,ii,Tt,Yt,El,rs,tt,_l,Tn,dh,J,Cm,Cd,Dx,Fx,Ox,Tm,Dr,Nn,uo,jx,Td,yc,zx,Hx,Bx,$x,Ux;const ge=class ge extends we{constructor(t){super({...t,name:"highlightEditor"});A(this,J);A(this,xl,null);A(this,ch,0);A(this,ss);A(this,Ta,null);A(this,Sl,null);A(this,Cn,null);A(this,uh,null);A(this,hh,0);A(this,Pa,null);A(this,ii,null);A(this,Tt,null);A(this,Yt,!1);A(this,El,null);A(this,rs);A(this,tt,null);A(this,_l,"");A(this,Tn);A(this,dh,"");this.color=t.color||ge._defaultColor,y(this,Tn,t.thickness||ge._defaultThickness),y(this,rs,t.opacity||ge._defaultOpacity),y(this,ss,t.boxes||null),y(this,dh,t.methodOfCreation||""),y(this,_l,t.text||""),this._isDraggable=!1,t.highlightId>-1?(y(this,Yt,!0),v(this,J,Cd).call(this,t),v(this,J,Dr).call(this)):l(this,ss)&&(y(this,xl,t.anchorNode),y(this,ch,t.anchorOffset),y(this,uh,t.focusNode),y(this,hh,t.focusOffset),v(this,J,Cm).call(this),v(this,J,Dr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ge.prototype;return ue(this,"_keyboardManager",new Sh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Yt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Tn),methodOfCreation:l(this,dh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;we.initialize(t,i),ge._defaultColor||(ge._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case K.HIGHLIGHT_DEFAULT_COLOR:ge._defaultColor=i;break;case K.HIGHLIGHT_THICKNESS:ge._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,El)}updateParams(t,i){switch(t){case K.HIGHLIGHT_COLOR:v(this,J,Dx).call(this,i);break;case K.HIGHLIGHT_THICKNESS:v(this,J,Fx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[K.HIGHLIGHT_DEFAULT_COLOR,ge._defaultColor],[K.HIGHLIGHT_THICKNESS,ge._defaultThickness]]}get propertiesToUpdate(){return[[K.HIGHLIGHT_COLOR,this.color||ge._defaultColor],[K.HIGHLIGHT_THICKNESS,l(this,Tn)||ge._defaultThickness],[K.HIGHLIGHT_FREE,l(this,Yt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(y(this,Sl,new df({editor:this})),t.addColorPicker(l(this,Sl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(v(this,J,yc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,v(this,J,yc).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){v(this,J,Tm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(v(this,J,Dr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?v(this,J,Tm).call(this):t&&(v(this,J,Dr).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,a,o;const{drawLayer:i}=this.parent;let s;l(this,Yt)?(t=(t-this.rotation+360)%360,s=v(r=ge,Nn,uo).call(r,l(this,ii).box,t)):s=v(a=ge,Nn,uo).call(a,this,t),i.rotate(l(this,Tt),t),i.rotate(l(this,tt),t),i.updateBox(l(this,Tt),s),i.updateBox(l(this,tt),v(o=ge,Nn,uo).call(o,l(this,Cn).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,_l)&&(t.setAttribute("aria-label",l(this,_l)),t.setAttribute("role","mark")),l(this,Yt)?t.classList.add("free"):this.div.addEventListener("keydown",v(this,J,jx).bind(this),{signal:this._uiManager._signal});const i=y(this,Pa,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,Ta);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),cf(this,l(this,Pa),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,tt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,tt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:v(this,J,Td).call(this,!0);break;case 1:case 3:v(this,J,Td).call(this,!1);break}}select(){var t,i;super.select(),l(this,tt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,tt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,tt),"selected"))}unselect(){var t;super.unselect(),l(this,tt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,tt),"selected"),l(this,Yt)||v(this,J,Td).call(this,!1))}get _mustFixPosition(){return!l(this,Yt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,Tt),t),this.parent.drawLayer.show(l(this,tt),t))}static startHighlighting(t,i,{target:s,x:r,y:a}){const{x:o,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=w=>{w.preventDefault(),w.stopPropagation()},m=w=>{d.abort(),v(this,Nn,$x).call(this,t,w)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",zn,{signal:f}),s.addEventListener("pointermove",v(this,Nn,Bx).bind(this,t),{signal:f}),this._freeHighlight=new Sm({x:r,y:a},[o,c,u,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,s){var w,E,g,b;let r=null;if(t instanceof px){const{data:{quadPoints:x,rect:S,rotation:_,id:k,color:T,opacity:P,popupRef:F},parent:{page:{pageNumber:O}}}=t;r=t={annotationType:Z.HIGHLIGHT,color:Array.from(T),opacity:P,quadPoints:x,boxes:null,pageIndex:O-1,rect:S.slice(0),rotation:_,id:k,deleted:!1,popupRef:F}}else if(t instanceof sy){const{data:{inkLists:x,rect:S,rotation:_,id:k,color:T,borderStyle:{rawWidth:P},popupRef:F},parent:{page:{pageNumber:O}}}=t;r=t={annotationType:Z.HIGHLIGHT,color:Array.from(T),thickness:P,inkLists:x,boxes:null,pageIndex:O-1,rect:S.slice(0),rotation:_,id:k,deleted:!1,popupRef:F}}const{color:a,quadPoints:o,inkLists:c,opacity:u}=t,h=await super.deserialize(t,i,s);h.color=B.makeHexColor(...a),y(h,rs,u||1),c&&y(h,Tn,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(o){const x=y(h,ss,[]);for(let S=0;S<o.length;S+=8)x.push({x:(o[S]-p)/d,y:1-(o[S+1]-m)/f,width:(o[S+2]-o[S])/d,height:(o[S+1]-o[S+5])/f});v(w=h,J,Cm).call(w),v(E=h,J,Dr).call(E),h.rotate(h.rotation)}else if(c){y(h,Yt,!0);const x=c[0],S={x:x[0]-p,y:f-(x[1]-m)},_=new Sm(S,[0,0,d,f],1,l(h,Tn)/2,!0,.001);for(let P=0,F=x.length;P<F;P+=2)S.x=x[P]-p,S.y=f-(x[P+1]-m),_.add(S);const{id:k,clipPathId:T}=i.drawLayer.draw(_,h.color,h._defaultOpacity,!0);v(g=h,J,Cd).call(g,{highlightOutlines:_.getOutlines(),highlightId:k,clipPathId:T}),v(b=h,J,Dr).call(b)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=we._colorManager.convert(this.color),r={annotationType:Z.HIGHLIGHT,color:s,opacity:l(this,rs),thickness:l(this,Tn),quadPoints:v(this,J,zx).call(this),outlines:v(this,J,Hx).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:v(this,J,yc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!v(this,J,Ux).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};xl=new WeakMap,ch=new WeakMap,ss=new WeakMap,Ta=new WeakMap,Sl=new WeakMap,Cn=new WeakMap,uh=new WeakMap,hh=new WeakMap,Pa=new WeakMap,ii=new WeakMap,Tt=new WeakMap,Yt=new WeakMap,El=new WeakMap,rs=new WeakMap,tt=new WeakMap,_l=new WeakMap,Tn=new WeakMap,dh=new WeakMap,J=new WeakSet,Cm=function(){const t=new Hv(l(this,ss),.001);y(this,ii,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,ii).box;const i=new Hv(l(this,ss),.0025,.001,this._uiManager.direction==="ltr");y(this,Cn,i.getOutlines());const{lastPoint:s}=l(this,Cn).box;y(this,El,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Cd=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var d,f;if(y(this,ii,t),y(this,Cn,t.getNewOutline(l(this,Tn)/2+1.5,.0025)),i>=0)y(this,Tt,i),y(this,Ta,s),this.parent.drawLayer.finalizeLine(i,t),y(this,tt,this.parent.drawLayer.drawOutline(l(this,Cn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,Tt),t),this.parent.drawLayer.updateBox(l(this,Tt),v(d=ge,Nn,uo).call(d,l(this,ii).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,tt),l(this,Cn)),this.parent.drawLayer.updateBox(l(this,tt),v(f=ge,Nn,uo).call(f,l(this,Cn).box,p))}const{x:a,y:o,width:c,height:u}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=l(this,Cn).box;y(this,El,[(h[0]-a)/c,(h[1]-o)/u])},Dx=function(t){const i=(a,o)=>{var c,u,h;this.color=a,(c=this.parent)==null||c.drawLayer.changeColor(l(this,Tt),a),(u=l(this,Sl))==null||u.updateColor(a),y(this,rs,o),(h=this.parent)==null||h.drawLayer.changeOpacity(l(this,Tt),o)},s=this.color,r=l(this,rs);this.addCommands({cmd:i.bind(this,t,ge._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Fx=function(t){const i=l(this,Tn),s=r=>{y(this,Tn,r),v(this,J,Ox).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Ox=function(t){if(!l(this,Yt))return;v(this,J,Cd).call(this,{highlightOutlines:l(this,ii).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},Tm=function(){l(this,Tt)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Tt)),y(this,Tt,null),this.parent.drawLayer.remove(l(this,tt)),y(this,tt,null))},Dr=function(t=this.parent){l(this,Tt)===null&&({id:Nt(this,Tt)._,clipPathId:Nt(this,Ta)._}=t.drawLayer.draw(l(this,ii),this.color,l(this,rs)),y(this,tt,t.drawLayer.drawOutline(l(this,Cn))),l(this,Pa)&&(l(this,Pa).style.clipPath=l(this,Ta)))},Nn=new WeakSet,uo=function({x:t,y:i,width:s,height:r},a){switch(a){case 90:return{x:1-i-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-t-s,width:r,height:s}}return{x:t,y:i,width:s,height:r}},jx=function(t){ge._keyboardManager.exec(this,t)},Td=function(t){if(!l(this,xl))return;const i=window.getSelection();t?i.setPosition(l(this,xl),l(this,ch)):i.setPosition(l(this,uh),l(this,hh))},yc=function(){return l(this,Yt)?this.rotation:0},zx=function(){if(l(this,Yt))return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,a=l(this,ss),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of a){const p=u*t+s,m=(1-h-f)*i+r;o[c]=o[c+4]=p,o[c+1]=o[c+3]=m,o[c+2]=o[c+6]=p+d*t,o[c+5]=o[c+7]=m+f*i,c+=8}return o},Hx=function(t){return l(this,ii).serialize(t,v(this,J,yc).call(this))},Bx=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},$x=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Ux=function(t){const{color:i}=this._initialData;return t.color.some((s,r)=>s!==i[r])},A(ge,Nn),Y(ge,"_defaultColor",null),Y(ge,"_defaultOpacity",1),Y(ge,"_defaultThickness",12),Y(ge,"_type","highlight"),Y(ge,"_editorType",Z.HIGHLIGHT),Y(ge,"_freeHighlightId",-1),Y(ge,"_freeHighlight",null),Y(ge,"_freeHighlightClipId","");let ff=ge;var Ra,La,Ci,as,Pn,Ma,Na,Ia,os,kl,Da,Fa,sr,I,Vx,Wx,Gx,Xx,Rm,qx,Lm,Yx,Kx,Qx,Jx,Zx,Fr,Mm,Nm,Im,Pd,Rd,ho,Dm,Ld,ks,e1,Fm,t1,n1,Om,Md,vc;const Ie=class Ie extends we{constructor(t){super({...t,name:"inkEditor"});A(this,I);A(this,Ra,0);A(this,La,0);A(this,Ci,null);A(this,as,new Path2D);A(this,Pn,!1);A(this,Ma,null);A(this,Na,!1);A(this,Ia,!1);A(this,os,null);A(this,kl,null);A(this,Da,0);A(this,Fa,0);A(this,sr,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){we.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case K.INK_THICKNESS:Ie._defaultThickness=i;break;case K.INK_COLOR:Ie._defaultColor=i;break;case K.INK_OPACITY:Ie._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case K.INK_THICKNESS:v(this,I,Vx).call(this,i);break;case K.INK_COLOR:v(this,I,Wx).call(this,i);break;case K.INK_OPACITY:v(this,I,Gx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[K.INK_THICKNESS,Ie._defaultThickness],[K.INK_COLOR,Ie._defaultColor||we._defaultLineColor],[K.INK_OPACITY,Math.round(Ie._defaultOpacity*100)]]}get propertiesToUpdate(){return[[K.INK_THICKNESS,this.thickness||Ie._defaultThickness],[K.INK_COLOR,this.color||Ie._defaultColor||we._defaultLineColor],[K.INK_OPACITY,Math.round(100*(this.opacity??Ie._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(v(this,I,Pd).call(this),v(this,I,Rd).call(this)),this.isAttachedToDOM||(this.parent.add(this),v(this,I,ho).call(this)),v(this,I,vc).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,Ci)&&(clearTimeout(l(this,Ci)),y(this,Ci,null)),(t=l(this,os))==null||t.disconnect(),y(this,os,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,s=this.width*t,r=this.height*i;this.setDimensions(s,r)}enableEditMode(){l(this,Pn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,v(this,I,Mm).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),v(this,I,Nm).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,Pn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),y(this,Pn,!0),this.div.classList.add("disabled"),v(this,I,vc).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,Pn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),v(this,I,qx).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),v(this,I,Lm).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),v(this,I,Im).call(this,t)}canvasPointerleave(t){v(this,I,Im).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,Pn)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,o]=v(this,I,Xx).call(this);if(this.setAt(s,r,0,0),this.setDims(a,o),v(this,I,Pd).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(t*c,i*u,this.width*c,this.height*u),y(this,Ia,!0),v(this,I,ho).call(this),this.setDims(this.width*c,this.height*u),v(this,I,Fr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return v(this,I,Rd).call(this),this.div}setDimensions(t,i){const s=Math.round(t),r=Math.round(i);if(l(this,Da)===s&&l(this,Fa)===r)return;y(this,Da,s),y(this,Fa,r),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=i/o,this.fixAndSetPosition(),l(this,Pn)&&v(this,I,Dm).call(this,t,i),v(this,I,ho).call(this),v(this,I,Fr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,s){var E,g,b;if(t instanceof sy)return null;const r=await super.deserialize(t,i,s);r.thickness=t.thickness,r.color=B.makeHexColor(...t.color),r.opacity=t.opacity;const[a,o]=r.pageDimensions,c=r.width*a,u=r.height*o,h=r.parentScale,d=t.thickness/2;y(r,Pn,!0),y(r,Da,Math.round(c)),y(r,Fa,Math.round(u));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:x}of f){x=v(E=Ie,ks,t1).call(E,x,p,m);const S=[];r.paths.push(S);let _=h*(x[0]-d),k=h*(x[1]-d);for(let P=2,F=x.length;P<F;P+=6){const O=h*(x[P]-d),H=h*(x[P+1]-d),oe=h*(x[P+2]-d),ne=h*(x[P+3]-d),he=h*(x[P+4]-d),fe=h*(x[P+5]-d);S.push([[_,k],[O,H],[oe,ne],[he,fe]]),_=he,k=fe}const T=v(this,ks,e1).call(this,S);r.bezierPath2D.push(T)}const w=v(g=r,I,Om).call(g);return y(r,La,Math.max(we.MIN_SIZE,w[2]-w[0])),y(r,Ra,Math.max(we.MIN_SIZE,w[3]-w[1])),v(b=r,I,Dm).call(b,c,u),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=we._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Z.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:v(this,I,n1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Ra=new WeakMap,La=new WeakMap,Ci=new WeakMap,as=new WeakMap,Pn=new WeakMap,Ma=new WeakMap,Na=new WeakMap,Ia=new WeakMap,os=new WeakMap,kl=new WeakMap,Da=new WeakMap,Fa=new WeakMap,sr=new WeakMap,I=new WeakSet,Vx=function(t){const i=r=>{this.thickness=r,v(this,I,vc).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Wx=function(t){const i=r=>{this.color=r,v(this,I,Fr).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Gx=function(t){const i=r=>{this.opacity=r,v(this,I,Fr).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Xx=function(){const{parentRotation:t,parentDimensions:[i,s]}=this;switch(t){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},Rm=function(){const{ctx:t,color:i,opacity:s,thickness:r,parentScale:a,scaleFactor:o}=this;t.lineWidth=r*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${sk(s)}`},qx=function(t,i){this.canvas.addEventListener("contextmenu",zn,{signal:this._uiManager._signal}),v(this,I,Nm).call(this),y(this,Ma,new AbortController);const s=this._uiManager.combinedSignal(l(this,Ma));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,l(this,Ia)||(y(this,Ia,!0),v(this,I,ho).call(this),this.thickness||(this.thickness=Ie._defaultThickness),this.color||(this.color=Ie._defaultColor||we._defaultLineColor),this.opacity??(this.opacity=Ie._defaultOpacity)),this.currentPath.push([t,i]),y(this,Na,!1),v(this,I,Rm).call(this),y(this,sr,()=>{v(this,I,Qx).call(this),l(this,sr)&&window.requestAnimationFrame(l(this,sr))}),window.requestAnimationFrame(l(this,sr))},Lm=function(t,i){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&i===r)return;const a=this.currentPath;let o=l(this,as);if(a.push([t,i]),y(this,Na,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,i);return}a.length===3&&(y(this,as,o=new Path2D),o.moveTo(...a[0])),v(this,I,Jx).call(this,o,...a.at(-3),...a.at(-2),t,i)},Yx=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,as).lineTo(...t)},Kx=function(t,i){y(this,sr,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),v(this,I,Lm).call(this,t,i),v(this,I,Yx).call(this);let s;if(this.currentPath.length!==1)s=v(this,I,Zx).call(this);else{const u=[t,i];s=[[u,u.slice(),u.slice(),u]]}const r=l(this,as),a=this.currentPath;this.currentPath=[],y(this,as,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(v(this,I,Pd).call(this),v(this,I,Rd).call(this)),v(this,I,vc).call(this))};this.addCommands({cmd:o,undo:c,mustExec:!0})},Qx=function(){if(!l(this,Na))return;y(this,Na,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(o=>o[0]),r=i.map(o=>o[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(l(this,as)),a.restore()},Jx=function(t,i,s,r,a,o,c){const u=(i+r)/2,h=(s+a)/2,d=(r+o)/2,f=(a+c)/2;t.bezierCurveTo(u+2*(r-u)/3,h+2*(a-h)/3,d+2*(r-d)/3,f+2*(a-f)/3,d,f)},Zx=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let s,[r,a]=t[0];for(s=1;s<t.length-2;s++){const[p,m]=t[s],[w,E]=t[s+1],g=(p+w)/2,b=(m+E)/2,x=[r+2*(p-r)/3,a+2*(m-a)/3],S=[g+2*(p-g)/3,b+2*(m-b)/3];i.push([[r,a],x,S,[g,b]]),[r,a]=[g,b]}const[o,c]=t[s],[u,h]=t[s+1],d=[r+2*(o-r)/3,a+2*(c-a)/3],f=[u+2*(o-u)/3,h+2*(c-h)/3];return i.push([[r,a],d,f,[u,h]]),i},Fr=function(){if(this.isEmpty()){v(this,I,Ld).call(this);return}v(this,I,Rm).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),v(this,I,Ld).call(this);for(const s of this.bezierPath2D)i.stroke(s)},Mm=function(){if(l(this,kl))return;y(this,kl,new AbortController);const t=this._uiManager.combinedSignal(l(this,kl));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},Nm=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},Im=function(t){var i;(i=l(this,Ma))==null||i.abort(),y(this,Ma,null),v(this,I,Mm).call(this),l(this,Ci)&&clearTimeout(l(this,Ci)),y(this,Ci,setTimeout(()=>{y(this,Ci,null),this.canvas.removeEventListener("contextmenu",zn)},10)),v(this,I,Kx).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Pd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Rd=function(){y(this,os,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,os).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,os))==null||t.disconnect(),y(this,os,null)},{once:!0})},ho=function(){if(!l(this,Ia))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),v(this,I,Ld).call(this)},Dm=function(t,i){const s=v(this,I,Md).call(this),r=(t-s)/l(this,La),a=(i-s)/l(this,Ra);this.scaleFactor=Math.min(r,a)},Ld=function(){const t=v(this,I,Md).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ks=new WeakSet,e1=function(t){const i=new Path2D;for(let s=0,r=t.length;s<r;s++){const[a,o,c,u]=t[s];s===0&&i.moveTo(...a),i.bezierCurveTo(o[0],o[1],c[0],c[1],u[0],u[1])}return i},Fm=function(t,i,s){const[r,a,o,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+r,t[u+1]=d+a}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=o-t[u],t[u+1]+=a;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=o-t[u+1],t[u+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},t1=function(t,i,s){const[r,a,o,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-a,t[u+1]=d-r}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=o-t[u],t[u+1]-=a;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=c-t[u+1],t[u+1]=o-d}break;default:throw new Error("Invalid rotation")}return t},n1=function(t,i,s,r){var h,d;const a=[],o=this.thickness/2,c=t*i+o,u=t*s+o;for(const f of this.paths){const p=[],m=[];for(let w=0,E=f.length;w<E;w++){const[g,b,x,S]=f[w];if(g[0]===S[0]&&g[1]===S[1]&&E===1){const ne=t*g[0]+c,he=t*g[1]+u;p.push(ne,he),m.push(ne,he);break}const _=t*g[0]+c,k=t*g[1]+u,T=t*b[0]+c,P=t*b[1]+u,F=t*x[0]+c,O=t*x[1]+u,H=t*S[0]+c,oe=t*S[1]+u;w===0&&(p.push(_,k),m.push(_,k)),p.push(T,P,F,O,H,oe),m.push(T,P),w===E-1&&m.push(H,oe)}a.push({bezier:v(h=Ie,ks,Fm).call(h,p,r,this.rotation),points:v(d=Ie,ks,Fm).call(d,m,r,this.rotation)})}return a},Om=function(){let t=1/0,i=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[o,c,u,h]of a){const d=B.bezierBoundingBox(...o,...c,...u,...h);t=Math.min(t,d[0]),s=Math.min(s,d[1]),i=Math.max(i,d[2]),r=Math.max(r,d[3])}return[t,s,i,r]},Md=function(){return l(this,Pn)?Math.ceil(this.thickness*this.parentScale):0},vc=function(t=!1){if(this.isEmpty())return;if(!l(this,Pn)){v(this,I,Fr).call(this);return}const i=v(this,I,Om).call(this),s=v(this,I,Md).call(this);y(this,La,Math.max(we.MIN_SIZE,i[2]-i[0])),y(this,Ra,Math.max(we.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(s+l(this,La)*this.scaleFactor),a=Math.ceil(s+l(this,Ra)*this.scaleFactor),[o,c]=this.parentDimensions;this.width=r/o,this.height=a/c,this.setAspectRatio(r,a);const u=this.translationX,h=this.translationY;this.translationX=-i[0],this.translationY=-i[1],v(this,I,ho).call(this),v(this,I,Fr).call(this),y(this,Da,r),y(this,Fa,a),this.setDims(r,a);const d=t?s/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},A(Ie,ks),Y(Ie,"_defaultColor",null),Y(Ie,"_defaultOpacity",1),Y(Ie,"_defaultThickness",1),Y(Ie,"_type","ink"),Y(Ie,"_editorType",Z.INK);let Pm=Ie;var Fe,mt,rr,ls,ar,Cl,Ti,cs,Pi,dn,Tl,ce,bc,wc,Nd,zm,i1,Id,Hm,Dd,s1,r1;const Nc=class Nc extends we{constructor(t){super({...t,name:"stampEditor"});A(this,ce);A(this,Fe,null);A(this,mt,null);A(this,rr,null);A(this,ls,null);A(this,ar,null);A(this,Cl,"");A(this,Ti,null);A(this,cs,null);A(this,Pi,null);A(this,dn,!1);A(this,Tl,!1);y(this,ls,t.bitmapUrl),y(this,ar,t.bitmapFile)}static initialize(t,i){we.initialize(t,i)}static get supportedTypes(){return ue(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return ue(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Z.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,i;l(this,mt)&&(y(this,Fe,null),this._uiManager.imageManager.deleteId(l(this,mt)),(t=l(this,Ti))==null||t.remove(),y(this,Ti,null),(i=l(this,cs))==null||i.disconnect(),y(this,cs,null),l(this,Pi)&&(clearTimeout(l(this,Pi)),y(this,Pi,null))),super.remove()}rebuild(){if(!this.parent){l(this,mt)&&v(this,ce,Nd).call(this);return}super.rebuild(),this.div!==null&&(l(this,mt)&&l(this,Ti)===null&&v(this,ce,Nd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,rr)||l(this,Fe)||l(this,ls)||l(this,ar)||l(this,mt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Fe)?v(this,ce,zm).call(this):v(this,ce,Nd).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r)}return this.div}copyCanvas(t,i,s=!1){var p;t||(t=224);const{width:r,height:a}=l(this,Fe),o=new Dg;let c=l(this,Fe),u=r,h=a,d=null;if(i){if(r>i||a>i){const P=Math.min(i/r,i/a);u=Math.floor(r*P),h=Math.floor(a*P)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*o.sx),w=d.height=Math.ceil(h*o.sy);l(this,dn)||(c=v(this,ce,Id).call(this,m,w));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let g="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",b="#42414d");const x=15,S=x*o.sx,_=x*o.sy,k=new OffscreenCanvas(S*2,_*2),T=k.getContext("2d");T.fillStyle=g,T.fillRect(0,0,S*2,_*2),T.fillStyle=b,T.fillRect(0,0,S,_),T.fillRect(S,_,S,_),E.fillStyle=E.createPattern(k,"repeat"),E.fillRect(0,0,m,w),E.drawImage(c,0,0,c.width,c.height,0,0,m,w)}let f=null;if(s){let m,w;if(o.symmetric&&c.width<t&&c.height<t)m=c.width,w=c.height;else if(c=l(this,Fe),r>t||a>t){const b=Math.min(t/r,t/a);m=Math.floor(r*b),w=Math.floor(a*b),l(this,dn)||(c=v(this,ce,Id).call(this,m,w))}const g=new OffscreenCanvas(m,w).getContext("2d",{willReadFrequently:!0});g.drawImage(c,0,0,c.width,c.height,0,0,m,w),f={width:m,height:w,data:g.getImageData(0,0,m,w).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,Ti)}static async deserialize(t,i,s){var w;let r=null;if(t instanceof gx){const{data:{rect:E,rotation:g,id:b,structParent:x,popupRef:S},container:_,parent:{page:{pageNumber:k}}}=t,T=_.querySelector("canvas"),P=s.imageManager.getFromCanvas(_.id,T);T.remove();const F=((w=await i._structTree.getAriaAttributes(`${X0}${b}`))==null?void 0:w.get("aria-label"))||"";r=t={annotationType:Z.STAMP,bitmapId:P.id,bitmap:P.bitmap,pageIndex:k-1,rect:E.slice(0),rotation:g,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:x,popupRef:S}}const a=await super.deserialize(t,i,s),{rect:o,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&s.imageManager.isValidId(h)?(y(a,mt,h),c&&y(a,Fe,c)):y(a,ls,u),y(a,dn,d);const[p,m]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/m,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=r,y(a,Tl,!!r),a}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Z.STAMP,bitmapId:l(this,mt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,dn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=v(this,ce,Dd).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=v(this,ce,r1).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const o=l(this,dn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(l(this,mt)))i.stamps.set(l(this,mt),{area:o,serialized:s}),s.bitmap=v(this,ce,Dd).call(this,!1);else if(l(this,dn)){const c=i.stamps.get(l(this,mt));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=v(this,ce,Dd).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Fe=new WeakMap,mt=new WeakMap,rr=new WeakMap,ls=new WeakMap,ar=new WeakMap,Cl=new WeakMap,Ti=new WeakMap,cs=new WeakMap,Pi=new WeakMap,dn=new WeakMap,Tl=new WeakMap,ce=new WeakSet,bc=function(t,i=!1){if(!t){this.remove();return}y(this,Fe,t.bitmap),i||(y(this,mt,t.id),y(this,dn,t.isSvg)),t.file&&y(this,Cl,t.file.name),v(this,ce,zm).call(this)},wc=function(){if(y(this,rr,null),this._uiManager.enableWaiting(!1),!!l(this,Ti)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Fe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Fe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Nd=function(){if(l(this,mt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,mt)).then(s=>v(this,ce,bc).call(this,s,!0)).finally(()=>v(this,ce,wc).call(this));return}if(l(this,ls)){const s=l(this,ls);y(this,ls,null),this._uiManager.enableWaiting(!0),y(this,rr,this._uiManager.imageManager.getFromUrl(s).then(r=>v(this,ce,bc).call(this,r)).finally(()=>v(this,ce,wc).call(this)));return}if(l(this,ar)){const s=l(this,ar);y(this,ar,null),this._uiManager.enableWaiting(!0),y(this,rr,this._uiManager.imageManager.getFromFile(s).then(r=>v(this,ce,bc).call(this,r)).finally(()=>v(this,ce,wc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Nc.supportedTypesStr;const i=this._uiManager._signal;y(this,rr,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),v(this,ce,bc).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>v(this,ce,wc).call(this))),t.click()},zm=function(){const{div:t}=this;let{width:i,height:s}=l(this,Fe);const[r,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*r,s=this.height*a;else if(i>o*r||s>o*a){const d=Math.min(o*r/i,o*a/s);i*=d,s*=d}const[c,u]=this.parentDimensions;this.setDims(i*c/r,s*u/a),this._uiManager.enableWaiting(!1);const h=y(this,Ti,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),v(this,ce,Hm).call(this,i,s),v(this,ce,s1).call(this),l(this,Tl)||(this.parent.addUndoableEditor(this),y(this,Tl,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Cl)&&h.setAttribute("aria-label",l(this,Cl))},i1=function(t,i){var o;const[s,r]=this.parentDimensions;this.width=t/s,this.height=i/r,(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,Pi)!==null&&clearTimeout(l(this,Pi)),y(this,Pi,setTimeout(()=>{y(this,Pi,null),v(this,ce,Hm).call(this,t,i)},200))},Id=function(t,i){const{width:s,height:r}=l(this,Fe);let a=s,o=r,c=l(this,Fe);for(;a>2*t||o>2*i;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(c,0,0,u,h,0,0,a,o),c=d.transferToImageBitmap()}return c},Hm=function(t,i){const s=new Dg,r=Math.ceil(t*s.sx),a=Math.ceil(i*s.sy),o=l(this,Ti);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const c=l(this,dn)?l(this,Fe):v(this,ce,Id).call(this,r,a),u=o.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,r,a)},Dd=function(t){if(t){if(l(this,dn)){const r=this._uiManager.imageManager.getSvgUrl(l(this,mt));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,Fe),i.getContext("2d").drawImage(l(this,Fe),0,0),i.toDataURL()}if(l(this,dn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*xr.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*xr.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(l(this,Fe),0,0,l(this,Fe).width,l(this,Fe).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(l(this,Fe))},s1=function(){this._uiManager._signal&&(y(this,cs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&v(this,ce,i1).call(this,i.width,i.height)})),l(this,cs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,cs))==null||t.disconnect(),y(this,cs,null)},{once:!0}))},r1=function(t){var u;const{rect:i,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,a=t.rect.every((h,d)=>Math.abs(h-i[d])<1),o=t.pageIndex===s,c=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:a&&o&&c,isSameAltText:c}},Y(Nc,"_type","stamp"),Y(Nc,"_editorType",Z.STAMP);let jm=Nc;var Oa,Pl,Ri,or,us,fn,lr,Rl,Ll,Pt,hs,$,cr,bt,a1,$m,Um,Vm,Fd;const $n=class $n{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:c,viewport:u,l10n:h}){A(this,bt);A(this,Oa);A(this,Pl,!1);A(this,Ri,null);A(this,or,null);A(this,us,null);A(this,fn,new Map);A(this,lr,!1);A(this,Rl,!1);A(this,Ll,!1);A(this,Pt,null);A(this,hs,null);A(this,$);const d=[...l($n,cr).values()];if(!$n._initialized){$n._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),y(this,$,e),this.pageIndex=t,this.div=i,y(this,Oa,r),y(this,Ri,a),this.viewport=u,y(this,Pt,c),this.drawLayer=o,this._structTree=s,l(this,$).addLayer(this)}get isEmpty(){return l(this,fn).size===0}get isInvisible(){return this.isEmpty&&l(this,$).getMode()===Z.NONE}updateToolbar(e){l(this,$).updateToolbar(e)}updateMode(e=l(this,$).getMode()){switch(v(this,bt,Fd).call(this),e){case Z.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Z.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Z.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l($n,cr).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Pt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,$).getMode()!==Z.INK)return;if(!e){for(const i of l(this,fn).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,$).setEditingState(e)}addCommands(e){l(this,$).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Ri))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,fn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,$).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,Ri))return;const t=l(this,Ri).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,$).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;y(this,Ll,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,fn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(l(this,Ri)){const r=l(this,Ri).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(l(this,$).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(l(this,$).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}v(this,bt,Fd).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of l($n,cr).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,Ll,!1)}getEditableAnnotation(e){var t;return((t=l(this,Ri))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,$).getActive()!==e&&l(this,$).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Pt))!=null&&e.div&&!l(this,hs)){y(this,hs,new AbortController);const t=l(this,$).combinedSignal(l(this,hs));l(this,Pt).div.addEventListener("pointerdown",v(this,bt,a1).bind(this),{signal:t}),l(this,Pt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Pt))!=null&&e.div&&l(this,hs)&&(l(this,hs).abort(),y(this,hs,null),l(this,Pt).div.classList.remove("highlighting"))}enableClick(){if(l(this,or))return;y(this,or,new AbortController);const e=l(this,$).combinedSignal(l(this,or));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,or))==null||e.abort(),y(this,or,null)}attach(e){l(this,fn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,$).isDeletedAnnotationElement(t)&&l(this,$).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,fn).delete(e.id),(t=l(this,Oa))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,Ll)&&e.annotationElementId&&l(this,$).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,$).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,Rl)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,$).addDeletedAnnotationElement(e.annotationElementId),we.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,$).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,$).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,us)&&(e._focusEventsAllowed=!1,y(this,us,setTimeout(()=>{y(this,us,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,$)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,Oa))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,$).getId()}combinedSignal(e){return l(this,$).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,bt,$m))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,$).updateToolbar(e),l(this,$).updateMode(e);const{offsetX:i,offsetY:s}=v(this,bt,Vm).call(this),r=this.getNextId(),a=v(this,bt,Um).call(this,{parent:this,id:r,x:i,y:s,uiManager:l(this,$),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=l($n,cr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,$)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=v(this,bt,Um).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,$),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(v(this,bt,Vm).call(this),!0)}setSelected(e){l(this,$).setSelected(e)}toggleSelected(e){l(this,$).toggleSelected(e)}unselect(e){l(this,$).unselect(e)}pointerup(e){const{isMac:t}=zt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,lr)){if(y(this,lr,!1),!l(this,Pl)){y(this,Pl,!0);return}if(l(this,$).getMode()===Z.STAMP){l(this,$).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,$).getMode()===Z.HIGHLIGHT&&this.enableTextSelection(),l(this,lr)){y(this,lr,!1);return}const{isMac:t}=zt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;y(this,lr,!0);const i=l(this,$).getActive();y(this,Pl,!i||i.isEmpty())}findNewParent(e,t,i){const s=l(this,$).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,$).getActive())==null?void 0:e.parent)===this&&(l(this,$).commitOrRemove(),l(this,$).setActiveEditor(null)),l(this,us)&&(clearTimeout(l(this,us)),y(this,us,null));for(const i of l(this,fn).values())(t=l(this,Oa))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,fn).clear(),l(this,$).removeLayer(this)}render({viewport:e}){this.viewport=e,Wa(this.div,e);for(const t of l(this,$).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,$).commitOrRemove(),v(this,bt,Fd).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Wa(this.div,{rotation:i}),t!==i)for(const s of l(this,fn).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,$).viewParameters.realScale}};Oa=new WeakMap,Pl=new WeakMap,Ri=new WeakMap,or=new WeakMap,us=new WeakMap,fn=new WeakMap,lr=new WeakMap,Rl=new WeakMap,Ll=new WeakMap,Pt=new WeakMap,hs=new WeakMap,$=new WeakMap,cr=new WeakMap,bt=new WeakSet,a1=function(e){l(this,$).unselectAll();const{target:t}=e;if(t===l(this,Pt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Pt).div.contains(t)){const{isMac:i}=zt.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,$).showAllEditors("highlight",!0,!0),l(this,Pt).div.classList.add("free"),this.toggleDrawing(),ff.startHighlighting(this,l(this,$).direction==="ltr",{target:l(this,Pt).div,x:e.x,y:e.y}),l(this,Pt).div.addEventListener("pointerup",()=>{l(this,Pt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,$)._signal}),e.preventDefault()}},$m=function(){return l($n,cr).get(l(this,$).getMode())},Um=function(e){const t=l(this,bt,$m);return t?new t.prototype.constructor(e):null},Vm=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+s),u=(r+o)/2-e,h=(a+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Fd=function(){y(this,Rl,!0);for(const e of l(this,fn).values())e.isEmpty()&&e.remove();y(this,Rl,!1)},Y($n,"_initialized",!1),A($n,cr,new Map([wm,Pm,jm,ff].map(e=>[e._editorType,e])));let Bm=$n;var Li,fh,qe,ds,ph,Gm,Ya,Xm,o1;const ft=class ft{constructor({pageIndex:e}){A(this,Ya);A(this,Li,null);A(this,fh,0);A(this,qe,new Map);A(this,ds,new Map);this.pageIndex=e}setParent(e){if(!l(this,Li)){y(this,Li,e);return}if(l(this,Li)!==e){if(l(this,qe).size>0)for(const t of l(this,qe).values())t.remove(),e.append(t);y(this,Li,e)}}static get _svgFactory(){return ue(this,"_svgFactory",new iy)}draw(e,t,i,s=!1){const r=Nt(this,fh)._++,a=v(this,Ya,Xm).call(this,e.box);a.classList.add(...e.classNamesForDrawing);const o=ft._svgFactory.createElement("defs");a.append(o);const c=ft._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),s&&l(this,ds).set(r,c);const h=v(this,Ya,o1).call(this,o,u),d=ft._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",t),a.setAttribute("fill-opacity",i),d.setAttribute("href",`#${u}`),l(this,qe).set(r,a),{id:r,clipPathId:`url(#${h})`}}drawOutline(e){const t=Nt(this,fh)._++,i=v(this,Ya,Xm).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const s=ft._svgFactory.createElement("defs");i.append(s);const r=ft._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",a),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.mustRemoveSelfIntersections){const h=ft._svgFactory.createElement("mask");s.append(h),o=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");const d=ft._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=ft._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=ft._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),o&&c.setAttribute("mask",`url(#${o})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),l(this,qe).set(t,i),t}finalizeLine(e,t){const i=l(this,ds).get(e);l(this,ds).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,qe).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,ds).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;v(i=ft,ph,Gm).call(i,l(this,qe).get(e),t)}show(e,t){l(this,qe).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,qe).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,qe).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,qe).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,qe).get(e).classList.add(t)}removeClass(e,t){l(this,qe).get(e).classList.remove(t)}getSVGRoot(e){return l(this,qe).get(e)}remove(e){l(this,ds).delete(e),l(this,Li)!==null&&(l(this,qe).get(e).remove(),l(this,qe).delete(e))}destroy(){y(this,Li,null);for(const e of l(this,qe).values())e.remove();l(this,qe).clear(),l(this,ds).clear()}};Li=new WeakMap,fh=new WeakMap,qe=new WeakMap,ds=new WeakMap,ph=new WeakSet,Gm=function(e,{x:t=0,y:i=0,width:s=1,height:r=1}={}){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},Ya=new WeakSet,Xm=function(e){var i;const t=ft._svgFactory.create(1,1,!0);return l(this,Li).append(t),t.setAttribute("aria-hidden",!0),v(i=ft,ph,Gm).call(i,t,e),t},o1=function(e,t){const i=ft._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=ft._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},A(ft,ph);let Wm=ft;Q.AbortException;Q.AnnotationEditorLayer;Q.AnnotationEditorParamsType;Q.AnnotationEditorType;Q.AnnotationEditorUIManager;Q.AnnotationLayer;Q.AnnotationMode;Q.ColorPicker;Q.DOMSVGFactory;Q.DrawLayer;Q.FeatureTest;var OC=Q.GlobalWorkerOptions;Q.ImageKind;Q.InvalidPDFException;Q.MissingPDFException;Q.OPS;Q.OutputScale;Q.PDFDataRangeTransport;Q.PDFDateString;Q.PDFWorker;Q.PasswordResponses;Q.PermissionFlag;Q.PixelsPerInch;Q.RenderingCancelledException;Q.TextLayer;Q.UnexpectedResponseException;Q.Util;Q.VerbosityLevel;Q.XfaLayer;Q.build;Q.createValidAbsoluteUrl;Q.fetchData;var jC=Q.getDocument;Q.getFilenameFromUrl;Q.getPdfFilenameFromUrl;Q.getXfaPageViewport;Q.isDataScheme;Q.isPdfFile;Q.noContextMenu;Q.normalizeUnicode;Q.setLayerDimensions;Q.shadow;Q.version;const zC="/CVEditor/assets/pdf.worker.min-GB3t0DcA.mjs";OC.workerSrc=zC;const HC=()=>{const[n,e]=U.useState(i_),[t,i]=U.useState(!0),[s,r]=U.useState("styled"),[a,o]=U.useState("personal"),[c,u]=U.useState(iA),[h,d]=U.useState([]),{toggleTheme:f,isDark:p}=T_();U.useRef();const m=U.useMemo(()=>new C_(c),[c]),w=U.useCallback(L=>{u(L)},[]),E=P_(c,w),g=U.useMemo(()=>c.filter(L=>!h.includes(L)),[c,h]),b=U.useCallback(L=>{const N=m.getSectionConfig(L);N!=null&&N.required||d(X=>X.includes(L)?X.filter(q=>q!==L):[...X,L])},[m]),x=(L,N)=>{switch(L){case"personal":return N.personalDetails&&(N.personalDetails.name||N.personalDetails.email);case"profile":return typeof N.profile=="string"&&N.profile.trim().length>0;case"experience":return Array.isArray(N.workExperience)&&N.workExperience.length>0;case"projects":return Array.isArray(N.personalProjects)&&N.personalProjects.length>0;case"certificates":return Array.isArray(N.certificates)&&N.certificates.length>0;case"education":return N.education&&(N.education.degree||N.education.university);case"courses":return typeof N.courses=="string"&&N.courses.trim().length>0;default:return!1}},S=U.useCallback((L,N)=>{e(X=>({...X,personalDetails:{...X.personalDetails,[L]:N}}))},[]),_=U.useCallback(L=>{e(N=>({...N,profile:L}))},[]),k=U.useCallback((L,N)=>{e(X=>({...X,education:{...X.education,[L]:N}}))},[]),T=U.useCallback(L=>{e(N=>({...N,courses:L}))},[]),P=U.useCallback(()=>{e(L=>({...L,workExperience:[...L.workExperience,{title:"",company:"",dates:"",description:"",responsibilities:[""]}]}))},[]),F=U.useCallback((L,N,X)=>{e(q=>({...q,workExperience:q.workExperience.map((ee,Ue)=>Ue===L?{...ee,[N]:X}:ee)}))},[]),O=U.useCallback(L=>{e(N=>({...N,workExperience:N.workExperience.filter((X,q)=>q!==L)}))},[]),H=U.useCallback(L=>{e(N=>({...N,workExperience:N.workExperience.map((X,q)=>q===L?{...X,responsibilities:[...X.responsibilities,""]}:X)}))},[]),oe=U.useCallback((L,N,X)=>{e(q=>({...q,workExperience:q.workExperience.map((ee,Ue)=>Ue===L?{...ee,responsibilities:ee.responsibilities.map((Ce,Vt)=>Vt===N?X:Ce)}:ee)}))},[]),ne=U.useCallback((L,N)=>{e(X=>({...X,workExperience:X.workExperience.map((q,ee)=>ee===L?{...q,responsibilities:q.responsibilities.filter((Ue,Ce)=>Ce!==N)}:q)}))},[]),he=U.useCallback(()=>{e(L=>({...L,personalProjects:[...L.personalProjects,{title:"",technologies:"",responsibilities:[""]}]}))},[]),fe=U.useCallback((L,N,X)=>{e(q=>({...q,personalProjects:q.personalProjects.map((ee,Ue)=>Ue===L?{...ee,[N]:X}:ee)}))},[]),me=U.useCallback(L=>{e(N=>({...N,personalProjects:N.personalProjects.filter((X,q)=>q!==L)}))},[]),V=U.useCallback(L=>{e(N=>({...N,personalProjects:N.personalProjects.map((X,q)=>q===L?{...X,responsibilities:[...X.responsibilities,""]}:X)}))},[]),R=U.useCallback((L,N,X)=>{e(q=>({...q,personalProjects:q.personalProjects.map((ee,Ue)=>Ue===L?{...ee,responsibilities:ee.responsibilities.map((Ce,Vt)=>Vt===N?X:Ce)}:ee)}))},[]),W=U.useCallback((L,N)=>{e(X=>({...X,personalProjects:X.personalProjects.map((q,ee)=>ee===L?{...q,responsibilities:q.responsibilities.filter((Ue,Ce)=>Ce!==N)}:q)}))},[]),G=U.useCallback(()=>{e(L=>({...L,certificates:[...L.certificates,{title:"",description:""}]}))},[]),le=U.useCallback((L,N,X)=>{e(q=>({...q,certificates:q.certificates.map((ee,Ue)=>Ue===L?{...ee,[N]:X}:ee)}))},[]),re=U.useCallback(L=>{e(N=>({...N,certificates:N.certificates.filter((X,q)=>q!==L)}))},[]),Ee=U.useCallback(async L=>{const N=L instanceof ArrayBuffer?L:await L.arrayBuffer(),X=await jC({data:N}).promise,q=[];for(let ee=1;ee<=X.numPages;ee++){const Ce=await(await X.getPage(ee)).getTextContent(),Vt=new Map,Ts=2;for(const Rr of Ce.items){const _h=(Rr.str||"").trim();if(!_h)continue;const ly=Rr.transform||Rr.matrix||[],c1=typeof ly[5]=="number"?ly[5]:0,sp=Math.round(c1/Ts)*Ts;Vt.has(sp)||Vt.set(sp,[]),Vt.get(sp).push(_h)}const l1=Array.from(Vt.keys()).sort((Rr,_h)=>_h-Rr).map(Rr=>Vt.get(Rr).join(" "));q.push(l1.join(`
`))}return q.join(`

`)},[]),At=U.useCallback(()=>{const L=JSON.stringify({cvData:n,sectionOrder:c,hiddenSections:h}),N=window.open("","_blank"),q=bv(n,s,"light",g).replace("</body>",`<!-- CV_DATA:${btoa(L)}:CV_DATA --></body>`);N.document.write(q),N.document.close(),N.focus(),N.print()},[n,s,c,h,g]),Hn=U.useCallback(async L=>{var X,q;const N=(q=(X=L==null?void 0:L.target)==null?void 0:X.files)==null?void 0:q[0];if(N)try{let ee="";if(N.type==="application/pdf"||N.name.toLowerCase().endsWith(".pdf")){const Ce=await Ee(N),Vt=/CV_DATA:([A-Za-z0-9+/=]+):CV_DATA/,Ts=Ce.match(Vt);if(Ts)try{const sn=JSON.parse(atob(Ts[1]));if(sn.cvData){e(sn.cvData),sn.sectionOrder&&u(sn.sectionOrder),sn.hiddenSections&&d(sn.hiddenSections),alert("CV data imported successfully from exported PDF!"),L.target.value="";return}}catch(sn){console.warn("Failed to parse embedded JSON data:",sn)}if(ee=Ce,!ee||ee.trim().length<10){alert("This PDF has no selectable text. Try exporting with selectable text or import a .json/.txt file instead."),L.target.value="";return}}else if(N.type==="text/plain"||N.name.toLowerCase().endsWith(".txt"))ee=await N.text();else if(N.name.toLowerCase().endsWith(".json"))try{const Ce=JSON.parse(await N.text());Ce.cvData?(e(Ce.cvData),Ce.sectionOrder&&u(Ce.sectionOrder),Ce.hiddenSections&&d(Ce.hiddenSections)):e(Ce),alert("CV data imported from JSON file."),L.target.value="";return}catch{alert("Invalid JSON file format."),L.target.value="";return}else{alert("Please upload a PDF, TXT, or JSON file."),L.target.value="";return}const Ue=k_.parseCV(ee);e(Ue.data),Ue.message&&alert(`Import completed: ${Ue.message}`)}catch(ee){console.error("Import error:",ee),alert(`Error reading file: ${(ee==null?void 0:ee.message)??"Unknown error"}`)}finally{L!=null&&L.target&&(L.target.value="")}},[Ee]),Le=U.useMemo(()=>m.getAllSectionConfigs().map(L=>({id:L.id,name:L.name,icon:L.icon})),[m]),pe=U.useCallback(()=>{const L=bv(n,s,p?"dark":"light",g),N=L.match(/<style[^>]*>([\s\S]*?)<\/style>/),X=L.match(/<body[^>]*>([\s\S]*?)<\/body>/),q=N?N[1]:"",ee=X?X[1]:L;return`
      <style>
        ${q}
        /* Preview container adjustments */
        .cv-container {
          max-width: 100% !important;
          width: 100% !important;
          margin: 0 !important;
          padding: 20px !important;
          box-sizing: border-box !important;
        }
        /* Remove any center justification that might be applied by the wrapper */
        * {
          text-align: inherit !important;
        }
        /* Ensure proper text alignment for different sections */
        .header {
          text-align: center !important;
        }
        .personal-details, .section, .profile, .job, .project, .certificate {
          text-align: left !important;
        }
        /* Override any preview-specific centering */
        .cv-preview * {
          text-align: inherit !important;
        }
      </style>
      ${ee}
    `},[n,s,p,g]),ui=U.useCallback(()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 text-base ${p?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,[p]),to=U.useCallback(()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-base ${p?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,[p]),ip=()=>{switch(a){case"personal":return C.jsxs("div",{className:"space-y-6",children:[C.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Details"}),C.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),C.jsx("input",{type:"text",value:n.personalDetails.name,onChange:L=>S("name",L.target.value),className:ui()})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),C.jsx("input",{type:"text",value:n.personalDetails.phone,onChange:L=>S("phone",L.target.value),className:ui()})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address"}),C.jsx("textarea",{value:n.personalDetails.address,onChange:L=>S("address",L.target.value),rows:"3",className:to()})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),C.jsx("input",{type:"email",value:n.personalDetails.email,onChange:L=>S("email",L.target.value),className:ui()})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),C.jsx("input",{type:"text",value:n.personalDetails.website,onChange:L=>S("website",L.target.value),className:ui()})]})]})]});case"profile":return C.jsxs("div",{className:"space-y-6",children:[C.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Professional Profile"}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Profile Description"}),C.jsx("textarea",{value:n.profile,onChange:L=>_(L.target.value),rows:"8",className:to(),placeholder:"Write your professional profile here..."})]})]});case"experience":return C.jsx(R_,{workExperience:n.workExperience,onAdd:P,onUpdate:F,onRemove:O,onAddResponsibility:H,onUpdateResponsibility:oe,onRemoveResponsibility:ne});case"projects":return C.jsx(L_,{personalProjects:n.personalProjects,onAdd:he,onUpdate:fe,onRemove:me,onAddResponsibility:V,onUpdateResponsibility:R,onRemoveResponsibility:W});case"certificates":return C.jsx(M_,{certificates:n.certificates,onAdd:G,onUpdate:le,onRemove:re});case"education":return C.jsx(N_,{education:n.education,onUpdate:k});case"courses":return C.jsx(I_,{courses:n.courses,onUpdate:T});default:return C.jsx("div",{className:"text-center py-8",children:C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Select a section to edit"})})}};return C.jsxs("div",{className:`min-h-screen w-full transition-colors duration-300 ${p?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:[C.jsx("div",{className:`shadow-xl border-b sticky top-0 z-50 backdrop-blur-xl ${p?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:C.jsx("div",{className:"w-full max-w-none px-6 py-4",children:C.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[C.jsxs("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center gap-3",children:[C.jsx(UE,{className:"h-8 w-8 text-purple-600"}),"CV Editor Pro"]}),C.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[C.jsx("button",{onClick:f,className:`p-3 rounded-xl transition-colors ${p?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,title:`Switch to ${p?"light":"dark"} theme`,children:p?C.jsx(qE,{className:"h-5 w-5"}):C.jsx(VE,{className:"h-5 w-5"})}),C.jsxs("div",{className:`flex items-center gap-2 rounded-xl px-3 py-2 ${p?"bg-gray-700":"bg-gray-100"}`,children:[C.jsx(WE,{className:`h-4 w-4 ${p?"text-purple-400":"text-purple-600"}`}),C.jsxs("select",{value:s,onChange:L=>r(L.target.value),className:`bg-transparent text-sm font-medium focus:outline-none cursor-pointer ${p?"text-gray-200":"text-gray-700"}`,children:[C.jsx("option",{value:"styled",children:"Rich Professional"}),C.jsx("option",{value:"plain",children:"Plain Professional"})]})]}),C.jsxs("button",{onClick:()=>i(!t),className:`flex items-center gap-2 px-6 py-3 rounded-xl text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl ${t?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":`bg-gradient-to-r ${p?"from-gray-600 to-gray-700 text-gray-200 hover:from-gray-500 hover:to-gray-600":"from-gray-200 to-gray-300 text-gray-700 hover:from-gray-300 hover:to-gray-400"}`}`,children:[t?C.jsx(Mp,{className:"h-4 w-4"}):C.jsx(GE,{className:"h-4 w-4"}),t?"Preview Mode":"Edit Mode"]}),C.jsxs("label",{className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl text-sm font-medium hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl cursor-pointer",children:[C.jsx(YE,{className:"h-4 w-4"}),"Import",C.jsx("input",{type:"file",accept:".pdf,.txt,.json",onChange:Hn,className:"hidden"})]}),C.jsxs("button",{onClick:At,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl text-sm font-medium hover:from-green-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[C.jsx(BE,{className:"h-4 w-4"}),"Export PDF"]})]})]})})}),C.jsx("div",{className:"w-full max-w-none px-6 py-8",children:C.jsxs("div",{className:`grid gap-8 ${t?"grid-cols-1 lg:grid-cols-12":"grid-cols-1"}`,children:[t&&C.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[C.jsxs("div",{className:`rounded-2xl shadow-xl p-6 border ${p?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:[C.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${p?"text-gray-100":"text-gray-900"}`,children:[C.jsx(XE,{className:"h-5 w-5"}),"Edit Sections"]}),C.jsx("div",{className:"space-y-2",children:c.map((L,N)=>{var Vt,Ts;const X=Le.find(sn=>sn.id===L);if(!X)return null;const q=g.includes(L),ee=x(L,n),Ue=(Vt=sc[L])==null?void 0:Vt.required,Ce=a===L;return C.jsxs("div",{...E.getDropProps(N),className:`
                          relative transition-all duration-300
                          ${E.dragOverIndex===N?`transform scale-105 ${p?"bg-purple-900/20":"bg-purple-50"}`:""}
                        `,children:[C.jsxs("div",{...E.getDragProps(L,N),className:`
                            flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 cursor-move
                            ${Ce?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":`${p?"bg-gray-700/80 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`}
                            ${q?"":"opacity-60"}
                            ${ee?"":"border-l-4 border-orange-400"}
                            ${((Ts=E.draggedItem)==null?void 0:Ts.index)===N?"opacity-50 scale-95":""}
                          `,onClick:()=>o(L),children:[C.jsx(Xf,{className:"h-4 w-4 text-current opacity-60"}),C.jsx("span",{className:"text-base",children:X.icon}),C.jsx("div",{className:"flex-1",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{children:X.name}),!ee&&!Ce&&C.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${p?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-600"}`,children:"Empty"}),Ue&&!Ce&&C.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${p?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600"}`,children:"Required"})]})}),C.jsx("button",{onClick:sn=>{sn.stopPropagation(),b(L)},disabled:Ue,className:`
                              p-1 rounded-lg transition-colors
                              ${Ue?"opacity-50 cursor-not-allowed":"hover:bg-white/20"}
                              ${q?"text-green-400":"text-gray-400"}
                            `,title:Ue?"Required section cannot be hidden":q?"Hide section":"Show section",children:q?C.jsx(Mp,{className:"h-4 w-4"}):C.jsx($E,{className:"h-4 w-4"})})]}),E.dragOverIndex===N&&C.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-dashed border-purple-500 pointer-events-none"})]},L)})}),C.jsx("div",{className:`mt-4 p-3 rounded-lg border ${p?"bg-blue-900/20 border-blue-700 text-blue-300":"bg-blue-50 border-blue-200 text-blue-700"}`,children:C.jsx("p",{className:"text-sm",children:"Drag sections to reorder  Orange border = empty section  Eye icon = show/hide"})})]}),C.jsx("div",{className:`rounded-2xl shadow-xl p-6 border ${p?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:ip()})]}),C.jsx("div",{className:t?"lg:col-span-7":"lg:col-span-12",children:C.jsxs("div",{className:`rounded-2xl shadow-xl border overflow-hidden ${p?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:[C.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-4",children:C.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[C.jsx(Mp,{className:"h-5 w-5"}),"Live Preview"]})}),C.jsx("div",{className:"max-h-screen overflow-y-auto",children:C.jsx("div",{className:"cv-preview transition-colors duration-300",style:{width:"100%",maxWidth:"100%"},dangerouslySetInnerHTML:{__html:pe()}})})]})})]})})]})};function BC(){return C.jsx("div",{className:"App",children:C.jsx(HC,{})})}eA(document.getElementById("root")).render(C.jsx(U.StrictMode,{children:C.jsx(BC,{})}));
