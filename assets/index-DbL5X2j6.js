var YA=Object.defineProperty;var Kv=i=>{throw TypeError(i)};var KA=(i,e,t)=>e in i?YA(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var V=(i,e,t)=>KA(i,typeof e!="symbol"?e+"":e,t),Xf=(i,e,t)=>e.has(i)||Kv("Cannot "+t);var l=(i,e,t)=>(Xf(i,e,"read from private field"),t?t.call(i):e.get(i)),x=(i,e,t)=>e.has(i)?Kv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),v=(i,e,t,n)=>(Xf(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),y=(i,e,t)=>(Xf(i,e,"access private method"),t);var _t=(i,e,t,n)=>({set _(s){v(i,e,s,t)},get _(){return l(i,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var Ty={exports:{}},bf={},Py={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=Symbol.for("react.element"),QA=Symbol.for("react.portal"),ZA=Symbol.for("react.fragment"),JA=Symbol.for("react.strict_mode"),e1=Symbol.for("react.profiler"),t1=Symbol.for("react.provider"),i1=Symbol.for("react.context"),n1=Symbol.for("react.forward_ref"),s1=Symbol.for("react.suspense"),r1=Symbol.for("react.memo"),o1=Symbol.for("react.lazy"),Qv=Symbol.iterator;function a1(i){return i===null||typeof i!="object"?null:(i=Qv&&i[Qv]||i["@@iterator"],typeof i=="function"?i:null)}var Ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ly=Object.assign,My={};function Tl(i,e,t){this.props=i,this.context=e,this.refs=My,this.updater=t||Ry}Tl.prototype.isReactComponent={};Tl.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Tl.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Ny(){}Ny.prototype=Tl.prototype;function Fm(i,e,t){this.props=i,this.context=e,this.refs=My,this.updater=t||Ry}var Dm=Fm.prototype=new Ny;Dm.constructor=Fm;Ly(Dm,Tl.prototype);Dm.isPureReactComponent=!0;var Zv=Array.isArray,Iy=Object.prototype.hasOwnProperty,Om={current:null},Fy={key:!0,ref:!0,__self:!0,__source:!0};function Dy(i,e,t){var n,s={},r=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Iy.call(e,n)&&!Fy.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:sh,type:i,key:r,ref:o,props:s,_owner:Om.current}}function l1(i,e){return{$$typeof:sh,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function jm(i){return typeof i=="object"&&i!==null&&i.$$typeof===sh}function c1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var Jv=/\/+/g;function qf(i,e){return typeof i=="object"&&i!==null&&i.key!=null?c1(""+i.key):e.toString(36)}function jh(i,e,t,n,s){var r=typeof i;(r==="undefined"||r==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case sh:case QA:o=!0}}if(o)return o=i,s=s(o),i=n===""?"."+qf(o,0):n,Zv(s)?(t="",i!=null&&(t=i.replace(Jv,"$&/")+"/"),jh(s,e,t,"",function(u){return u})):s!=null&&(jm(s)&&(s=l1(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Jv,"$&/")+"/")+i)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Zv(i))for(var a=0;a<i.length;a++){r=i[a];var c=n+qf(r,a);o+=jh(r,e,t,c,s)}else if(c=a1(i),typeof c=="function")for(i=c.call(i),a=0;!(r=i.next()).done;)r=r.value,c=n+qf(r,a++),o+=jh(r,e,t,c,s);else if(r==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gh(i,e,t){if(i==null)return i;var n=[],s=0;return jh(i,n,"","",function(r){return e.call(t,r,s++)}),n}function u1(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var It={current:null},$h={transition:null},h1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:$h,ReactCurrentOwner:Om};function Oy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:gh,forEach:function(i,e,t){gh(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return gh(i,function(){e++}),e},toArray:function(i){return gh(i,function(e){return e})||[]},only:function(i){if(!jm(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};te.Component=Tl;te.Fragment=ZA;te.Profiler=e1;te.PureComponent=Fm;te.StrictMode=JA;te.Suspense=s1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h1;te.act=Oy;te.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=Ly({},i.props),s=i.key,r=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Om.current),e.key!==void 0&&(s=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(c in e)Iy.call(e,c)&&!Fy.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:sh,type:i.type,key:s,ref:r,props:n,_owner:o}};te.createContext=function(i){return i={$$typeof:i1,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t1,_context:i},i.Consumer=i};te.createElement=Dy;te.createFactory=function(i){var e=Dy.bind(null,i);return e.type=i,e};te.createRef=function(){return{current:null}};te.forwardRef=function(i){return{$$typeof:n1,render:i}};te.isValidElement=jm;te.lazy=function(i){return{$$typeof:o1,_payload:{_status:-1,_result:i},_init:u1}};te.memo=function(i,e){return{$$typeof:r1,type:i,compare:e===void 0?null:e}};te.startTransition=function(i){var e=$h.transition;$h.transition={};try{i()}finally{$h.transition=e}};te.unstable_act=Oy;te.useCallback=function(i,e){return It.current.useCallback(i,e)};te.useContext=function(i){return It.current.useContext(i)};te.useDebugValue=function(){};te.useDeferredValue=function(i){return It.current.useDeferredValue(i)};te.useEffect=function(i,e){return It.current.useEffect(i,e)};te.useId=function(){return It.current.useId()};te.useImperativeHandle=function(i,e,t){return It.current.useImperativeHandle(i,e,t)};te.useInsertionEffect=function(i,e){return It.current.useInsertionEffect(i,e)};te.useLayoutEffect=function(i,e){return It.current.useLayoutEffect(i,e)};te.useMemo=function(i,e){return It.current.useMemo(i,e)};te.useReducer=function(i,e,t){return It.current.useReducer(i,e,t)};te.useRef=function(i){return It.current.useRef(i)};te.useState=function(i){return It.current.useState(i)};te.useSyncExternalStore=function(i,e,t){return It.current.useSyncExternalStore(i,e,t)};te.useTransition=function(){return It.current.useTransition()};te.version="18.3.1";Py.exports=te;var U=Py.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1=U,f1=Symbol.for("react.element"),p1=Symbol.for("react.fragment"),g1=Object.prototype.hasOwnProperty,m1=d1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v1={key:!0,ref:!0,__self:!0,__source:!0};function jy(i,e,t){var n,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)g1.call(e,n)&&!v1.hasOwnProperty(n)&&(s[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:f1,type:i,key:r,ref:o,props:s,_owner:m1.current}}bf.Fragment=p1;bf.jsx=jy;bf.jsxs=jy;Ty.exports=bf;var P=Ty.exports,$y={exports:{}},hi={},zy={exports:{}},Hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(M,B){var W=M.length;M.push(B);e:for(;0<W;){var re=W-1>>>1,ne=M[re];if(0<s(ne,B))M[re]=B,M[W]=ne,W=re;else break e}}function t(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var B=M[0],W=M.pop();if(W!==B){M[0]=W;e:for(var re=0,ne=M.length,Ee=ne>>>1;re<Ee;){var Dt=2*(re+1)-1,_n=M[Dt],Ie=Dt+1,he=M[Ie];if(0>s(_n,W))Ie<ne&&0>s(he,_n)?(M[re]=he,M[Ie]=W,re=Ie):(M[re]=_n,M[Dt]=W,re=Dt);else if(Ie<ne&&0>s(he,W))M[re]=he,M[Ie]=W,re=Ie;else break e}}return B}function s(M,B){var W=M.sortIndex-B.sortIndex;return W!==0?W:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(M){for(var B=t(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=M)n(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=t(u)}}function S(M){if(w=!1,A(M),!m)if(t(c)!==null)m=!0,me(T);else{var B=t(u);B!==null&&H(S,B.startTime-M)}}function T(M,B){m=!1,w&&(w=!1,g(k),k=-1),p=!0;var W=f;try{for(A(B),d=t(c);d!==null&&(!(d.expirationTime>B)||M&&!D());){var re=d.callback;if(typeof re=="function"){d.callback=null,f=d.priorityLevel;var ne=re(d.expirationTime<=B);B=i.unstable_now(),typeof ne=="function"?d.callback=ne:d===t(c)&&n(c),A(B)}else n(c);d=t(c)}if(d!==null)var Ee=!0;else{var Dt=t(u);Dt!==null&&H(S,Dt.startTime-B),Ee=!1}return Ee}finally{d=null,f=W,p=!1}}var _=!1,C=null,k=-1,R=5,L=-1;function D(){return!(i.unstable_now()-L<R)}function q(){if(C!==null){var M=i.unstable_now();L=M;var B=!0;try{B=C(!0,M)}finally{B?K():(_=!1,C=null)}}else _=!1}var K;if(typeof b=="function")K=function(){b(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ce=ae.port2;ae.port1.onmessage=q,K=function(){ce.postMessage(null)}}else K=function(){E(q,0)};function me(M){C=M,_||(_=!0,K())}function H(M,B){k=E(function(){M(i.unstable_now())},B)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(M){M.callback=null},i.unstable_continueExecution=function(){m||p||(m=!0,me(T))},i.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(M){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var W=f;f=B;try{return M()}finally{f=W}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=f;f=M;try{return B()}finally{f=W}},i.unstable_scheduleCallback=function(M,B,W){var re=i.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?re+W:re):W=re,M){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=W+ne,M={id:h++,callback:B,priorityLevel:M,startTime:W,expirationTime:ne,sortIndex:-1},W>re?(M.sortIndex=W,e(u,M),t(c)===null&&M===t(u)&&(w?(g(k),k=-1):w=!0,H(S,W-re))):(M.sortIndex=ne,e(c,M),m||p||(m=!0,me(T))),M},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(M){var B=f;return function(){var W=f;f=B;try{return M.apply(this,arguments)}finally{f=W}}}})(Hy);zy.exports=Hy;var y1=zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=U,ui=y1;function N(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var By=new Set,Sc={};function zo(i,e){bl(i,e),bl(i+"Capture",e)}function bl(i,e){for(Sc[i]=e,i=0;i<e.length;i++)By.add(e[i])}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cp=Object.prototype.hasOwnProperty,b1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,e0={},t0={};function x1(i){return Cp.call(t0,i)?!0:Cp.call(e0,i)?!1:b1.test(i)?t0[i]=!0:(e0[i]=!0,!1)}function A1(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S1(i,e,t,n){if(e===null||typeof e>"u"||A1(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(i,e,t,n,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){ft[i]=new Ft(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];ft[e]=new Ft(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){ft[i]=new Ft(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){ft[i]=new Ft(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){ft[i]=new Ft(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){ft[i]=new Ft(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){ft[i]=new Ft(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){ft[i]=new Ft(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){ft[i]=new Ft(i,5,!1,i.toLowerCase(),null,!1,!1)});var $m=/[\-:]([a-z])/g;function zm(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace($m,zm);ft[e]=new Ft(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace($m,zm);ft[e]=new Ft(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace($m,zm);ft[e]=new Ft(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){ft[i]=new Ft(i,1,!1,i.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){ft[i]=new Ft(i,1,!1,i.toLowerCase(),null,!0,!0)});function Hm(i,e,t,n){var s=ft.hasOwnProperty(e)?ft[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S1(e,t,s,n)&&(t=null),n||s===null?x1(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):s.mustUseProperty?i[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,n=s.attributeNamespace,t===null?i.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var vs=w1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mh=Symbol.for("react.element"),ta=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),Bm=Symbol.for("react.strict_mode"),kp=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),Wy=Symbol.for("react.context"),Um=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),Pp=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),Vy=Symbol.for("react.offscreen"),i0=Symbol.iterator;function Ml(i){return i===null||typeof i!="object"?null:(i=i0&&i[i0]||i["@@iterator"],typeof i=="function"?i:null)}var Ne=Object.assign,Yf;function Ul(i){if(Yf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Yf=e&&e[1]||""}return`
`+Yf+i}var Kf=!1;function Qf(i,e){if(!i||Kf)return"";Kf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(i,[],e)}else{try{e.call()}catch(u){n=u}i.call(e.prototype)}else{try{throw Error()}catch(u){n=u}i()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=n.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var c=`
`+s[o].replace(" at new "," at ");return i.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",i.displayName)),c}while(1<=o&&0<=a);break}}}finally{Kf=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?Ul(i):""}function E1(i){switch(i.tag){case 5:return Ul(i.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return i=Qf(i.type,!1),i;case 11:return i=Qf(i.type.render,!1),i;case 1:return i=Qf(i.type,!0),i;default:return""}}function Rp(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ia:return"Fragment";case ta:return"Portal";case kp:return"Profiler";case Bm:return"StrictMode";case Tp:return"Suspense";case Pp:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Wy:return(i.displayName||"Context")+".Consumer";case Uy:return(i._context.displayName||"Context")+".Provider";case Um:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Wm:return e=i.displayName||null,e!==null?e:Rp(i.type)||"Memo";case xs:e=i._payload,i=i._init;try{return Rp(i(e))}catch{}}return null}function _1(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rp(e);case 8:return e===Bm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Gy(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C1(i){var e=Gy(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function vh(i){i._valueTracker||(i._valueTracker=C1(i))}function Xy(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=Gy(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function Cd(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Lp(i,e){var t=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function n0(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=cr(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qy(i,e){e=e.checked,e!=null&&Hm(i,"checked",e,!1)}function Mp(i,e){qy(i,e);var t=cr(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?Np(i,e.type,t):e.hasOwnProperty("defaultValue")&&Np(i,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function s0(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function Np(i,e,t){(e!=="number"||Cd(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var Wl=Array.isArray;function pa(i,e,t,n){if(i=i.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<i.length;t++)s=e.hasOwnProperty("$"+i[t].value),i[t].selected!==s&&(i[t].selected=s),s&&n&&(i[t].defaultSelected=!0)}else{for(t=""+cr(t),e=null,s=0;s<i.length;s++){if(i[s].value===t){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}e!==null||i[s].disabled||(e=i[s])}e!==null&&(e.selected=!0)}}function Ip(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function r0(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(N(92));if(Wl(t)){if(1<t.length)throw Error(N(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:cr(t)}}function Yy(i,e){var t=cr(e.value),n=cr(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function o0(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function Ky(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fp(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?Ky(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var yh,Qy=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,s)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(yh=yh||document.createElement("div"),yh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yh.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function Ec(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k1=["Webkit","ms","Moz","O"];Object.keys(uc).forEach(function(i){k1.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),uc[e]=uc[i]})});function Zy(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||uc.hasOwnProperty(i)&&uc[i]?(""+e).trim():e+"px"}function Jy(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=Zy(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,s):i[t]=s}}var T1=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dp(i,e){if(e){if(T1[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Op(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jp=null;function Vm(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var $p=null,ga=null,ma=null;function a0(i){if(i=ah(i)){if(typeof $p!="function")throw Error(N(280));var e=i.stateNode;e&&(e=_f(e),$p(i.stateNode,i.type,e))}}function ew(i){ga?ma?ma.push(i):ma=[i]:ga=i}function tw(){if(ga){var i=ga,e=ma;if(ma=ga=null,a0(i),e)for(i=0;i<e.length;i++)a0(e[i])}}function iw(i,e){return i(e)}function nw(){}var Zf=!1;function sw(i,e,t){if(Zf)return i(e,t);Zf=!0;try{return iw(i,e,t)}finally{Zf=!1,(ga!==null||ma!==null)&&(nw(),tw())}}function _c(i,e){var t=i.stateNode;if(t===null)return null;var n=_f(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(N(231,e,typeof t));return t}var zp=!1;if(hs)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){zp=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{zp=!1}function P1(i,e,t,n,s,r,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var hc=!1,kd=null,Td=!1,Hp=null,R1={onError:function(i){hc=!0,kd=i}};function L1(i,e,t,n,s,r,o,a,c){hc=!1,kd=null,P1.apply(R1,arguments)}function M1(i,e,t,n,s,r,o,a,c){if(L1.apply(this,arguments),hc){if(hc){var u=kd;hc=!1,kd=null}else throw Error(N(198));Td||(Td=!0,Hp=u)}}function Ho(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function rw(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function l0(i){if(Ho(i)!==i)throw Error(N(188))}function N1(i){var e=i.alternate;if(!e){if(e=Ho(i),e===null)throw Error(N(188));return e!==i?null:i}for(var t=i,n=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return l0(s),i;if(r===n)return l0(s),e;r=r.sibling}throw Error(N(188))}if(t.return!==n.return)t=s,n=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,n=r;break}if(a===n){o=!0,n=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,n=s;break}if(a===n){o=!0,n=r,t=s;break}a=a.sibling}if(!o)throw Error(N(189))}}if(t.alternate!==n)throw Error(N(190))}if(t.tag!==3)throw Error(N(188));return t.stateNode.current===t?i:e}function ow(i){return i=N1(i),i!==null?aw(i):null}function aw(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=aw(i);if(e!==null)return e;i=i.sibling}return null}var lw=ui.unstable_scheduleCallback,c0=ui.unstable_cancelCallback,I1=ui.unstable_shouldYield,F1=ui.unstable_requestPaint,je=ui.unstable_now,D1=ui.unstable_getCurrentPriorityLevel,Gm=ui.unstable_ImmediatePriority,cw=ui.unstable_UserBlockingPriority,Pd=ui.unstable_NormalPriority,O1=ui.unstable_LowPriority,uw=ui.unstable_IdlePriority,xf=null,Sn=null;function j1(i){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(xf,i,void 0,(i.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:H1,$1=Math.log,z1=Math.LN2;function H1(i){return i>>>=0,i===0?32:31-($1(i)/z1|0)|0}var wh=64,bh=4194304;function Vl(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Rd(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,s=i.suspendedLanes,r=i.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?n=Vl(a):(r&=o,r!==0&&(n=Vl(r)))}else o=t&~s,o!==0?n=Vl(o):r!==0&&(n=Vl(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-Ki(e),s=1<<t,n|=i[t],e&=~s;return n}function B1(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U1(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,r=i.pendingLanes;0<r;){var o=31-Ki(r),a=1<<o,c=s[o];c===-1?(!(a&t)||a&n)&&(s[o]=B1(a,e)):c<=e&&(i.expiredLanes|=a),r&=~a}}function Bp(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function hw(){var i=wh;return wh<<=1,!(wh&4194240)&&(wh=64),i}function Jf(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function rh(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-Ki(e),i[e]=t}function W1(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var s=31-Ki(t),r=1<<s;e[s]=0,n[s]=-1,i[s]=-1,t&=~r}}function Xm(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-Ki(t),s=1<<n;s&e|i[n]&e&&(i[n]|=e),t&=~s}}var ge=0;function dw(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var fw,qm,pw,gw,mw,Up=!1,xh=[],tr=null,ir=null,nr=null,Cc=new Map,kc=new Map,Ss=[],V1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u0(i,e){switch(i){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Cc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(e.pointerId)}}function Il(i,e,t,n,s,r){return i===null||i.nativeEvent!==r?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},e!==null&&(e=ah(e),e!==null&&qm(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),i)}function G1(i,e,t,n,s){switch(e){case"focusin":return tr=Il(tr,i,e,t,n,s),!0;case"dragenter":return ir=Il(ir,i,e,t,n,s),!0;case"mouseover":return nr=Il(nr,i,e,t,n,s),!0;case"pointerover":var r=s.pointerId;return Cc.set(r,Il(Cc.get(r)||null,i,e,t,n,s)),!0;case"gotpointercapture":return r=s.pointerId,kc.set(r,Il(kc.get(r)||null,i,e,t,n,s)),!0}return!1}function vw(i){var e=kr(i.target);if(e!==null){var t=Ho(e);if(t!==null){if(e=t.tag,e===13){if(e=rw(t),e!==null){i.blockedOn=e,mw(i.priority,function(){pw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zh(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=Wp(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);jp=n,t.target.dispatchEvent(n),jp=null}else return e=ah(t),e!==null&&qm(e),i.blockedOn=t,!1;e.shift()}return!0}function h0(i,e,t){zh(i)&&t.delete(e)}function X1(){Up=!1,tr!==null&&zh(tr)&&(tr=null),ir!==null&&zh(ir)&&(ir=null),nr!==null&&zh(nr)&&(nr=null),Cc.forEach(h0),kc.forEach(h0)}function Fl(i,e){i.blockedOn===e&&(i.blockedOn=null,Up||(Up=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,X1)))}function Tc(i){function e(s){return Fl(s,i)}if(0<xh.length){Fl(xh[0],i);for(var t=1;t<xh.length;t++){var n=xh[t];n.blockedOn===i&&(n.blockedOn=null)}}for(tr!==null&&Fl(tr,i),ir!==null&&Fl(ir,i),nr!==null&&Fl(nr,i),Cc.forEach(e),kc.forEach(e),t=0;t<Ss.length;t++)n=Ss[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Ss.length&&(t=Ss[0],t.blockedOn===null);)vw(t),t.blockedOn===null&&Ss.shift()}var va=vs.ReactCurrentBatchConfig,Ld=!0;function q1(i,e,t,n){var s=ge,r=va.transition;va.transition=null;try{ge=1,Ym(i,e,t,n)}finally{ge=s,va.transition=r}}function Y1(i,e,t,n){var s=ge,r=va.transition;va.transition=null;try{ge=4,Ym(i,e,t,n)}finally{ge=s,va.transition=r}}function Ym(i,e,t,n){if(Ld){var s=Wp(i,e,t,n);if(s===null)cp(i,e,n,Md,t),u0(i,n);else if(G1(s,i,e,t,n))n.stopPropagation();else if(u0(i,n),e&4&&-1<V1.indexOf(i)){for(;s!==null;){var r=ah(s);if(r!==null&&fw(r),r=Wp(i,e,t,n),r===null&&cp(i,e,n,Md,t),r===s)break;s=r}s!==null&&n.stopPropagation()}else cp(i,e,n,null,t)}}var Md=null;function Wp(i,e,t,n){if(Md=null,i=Vm(n),i=kr(i),i!==null)if(e=Ho(i),e===null)i=null;else if(t=e.tag,t===13){if(i=rw(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return Md=i,null}function yw(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D1()){case Gm:return 1;case cw:return 4;case Pd:case O1:return 16;case uw:return 536870912;default:return 16}default:return 16}}var Js=null,Km=null,Hh=null;function ww(){if(Hh)return Hh;var i,e=Km,t=e.length,n,s="value"in Js?Js.value:Js.textContent,r=s.length;for(i=0;i<t&&e[i]===s[i];i++);var o=t-i;for(n=1;n<=o&&e[t-n]===s[r-n];n++);return Hh=s.slice(i,1<n?1-n:void 0)}function Bh(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function Ah(){return!0}function d0(){return!1}function di(i){function e(t,n,s,r,o){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ah:d0,this.isPropagationStopped=d0,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ah)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ah)},persist:function(){},isPersistent:Ah}),e}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qm=di(Pl),oh=Ne({},Pl,{view:0,detail:0}),K1=di(oh),ep,tp,Dl,Af=Ne({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zm,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Dl&&(Dl&&i.type==="mousemove"?(ep=i.screenX-Dl.screenX,tp=i.screenY-Dl.screenY):tp=ep=0,Dl=i),ep)},movementY:function(i){return"movementY"in i?i.movementY:tp}}),f0=di(Af),Q1=Ne({},Af,{dataTransfer:0}),Z1=di(Q1),J1=Ne({},oh,{relatedTarget:0}),ip=di(J1),eS=Ne({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=di(eS),iS=Ne({},Pl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nS=di(iS),sS=Ne({},Pl,{data:0}),p0=di(sS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lS(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=aS[i])?!!e[i]:!1}function Zm(){return lS}var cS=Ne({},oh,{key:function(i){if(i.key){var e=rS[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=Bh(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?oS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zm,charCode:function(i){return i.type==="keypress"?Bh(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Bh(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),uS=di(cS),hS=Ne({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g0=di(hS),dS=Ne({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zm}),fS=di(dS),pS=Ne({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),gS=di(pS),mS=Ne({},Af,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vS=di(mS),yS=[9,13,27,32],Jm=hs&&"CompositionEvent"in window,dc=null;hs&&"documentMode"in document&&(dc=document.documentMode);var wS=hs&&"TextEvent"in window&&!dc,bw=hs&&(!Jm||dc&&8<dc&&11>=dc),m0=" ",v0=!1;function xw(i,e){switch(i){case"keyup":return yS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var na=!1;function bS(i,e){switch(i){case"compositionend":return Aw(e);case"keypress":return e.which!==32?null:(v0=!0,m0);case"textInput":return i=e.data,i===m0&&v0?null:i;default:return null}}function xS(i,e){if(na)return i==="compositionend"||!Jm&&xw(i,e)?(i=ww(),Hh=Km=Js=null,na=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bw&&e.locale!=="ko"?null:e.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y0(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!AS[i.type]:e==="textarea"}function Sw(i,e,t,n){ew(n),e=Nd(e,"onChange"),0<e.length&&(t=new Qm("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var fc=null,Pc=null;function SS(i){Iw(i,0)}function Sf(i){var e=oa(i);if(Xy(e))return i}function ES(i,e){if(i==="change")return e}var Ew=!1;if(hs){var np;if(hs){var sp="oninput"in document;if(!sp){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),sp=typeof w0.oninput=="function"}np=sp}else np=!1;Ew=np&&(!document.documentMode||9<document.documentMode)}function b0(){fc&&(fc.detachEvent("onpropertychange",_w),Pc=fc=null)}function _w(i){if(i.propertyName==="value"&&Sf(Pc)){var e=[];Sw(e,Pc,i,Vm(i)),sw(SS,e)}}function _S(i,e,t){i==="focusin"?(b0(),fc=e,Pc=t,fc.attachEvent("onpropertychange",_w)):i==="focusout"&&b0()}function CS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Sf(Pc)}function kS(i,e){if(i==="click")return Sf(e)}function TS(i,e){if(i==="input"||i==="change")return Sf(e)}function PS(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Zi=typeof Object.is=="function"?Object.is:PS;function Rc(i,e){if(Zi(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!Cp.call(e,s)||!Zi(i[s],e[s]))return!1}return!0}function x0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function A0(i,e){var t=x0(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=x0(t)}}function Cw(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Cw(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function kw(){for(var i=window,e=Cd();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=Cd(i.document)}return e}function ev(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function RS(i){var e=kw(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Cw(t.ownerDocument.documentElement,t)){if(n!==null&&ev(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var s=t.textContent.length,r=Math.min(n.start,s);n=n.end===void 0?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=A0(t,r);var o=A0(t,n);s&&o&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var LS=hs&&"documentMode"in document&&11>=document.documentMode,sa=null,Vp=null,pc=null,Gp=!1;function S0(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Gp||sa==null||sa!==Cd(n)||(n=sa,"selectionStart"in n&&ev(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pc&&Rc(pc,n)||(pc=n,n=Nd(Vp,"onSelect"),0<n.length&&(e=new Qm("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=sa)))}function Sh(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var ra={animationend:Sh("Animation","AnimationEnd"),animationiteration:Sh("Animation","AnimationIteration"),animationstart:Sh("Animation","AnimationStart"),transitionend:Sh("Transition","TransitionEnd")},rp={},Tw={};hs&&(Tw=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Ef(i){if(rp[i])return rp[i];if(!ra[i])return i;var e=ra[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in Tw)return rp[i]=e[t];return i}var Pw=Ef("animationend"),Rw=Ef("animationiteration"),Lw=Ef("animationstart"),Mw=Ef("transitionend"),Nw=new Map,E0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(i,e){Nw.set(i,e),zo(e,[i])}for(var op=0;op<E0.length;op++){var ap=E0[op],MS=ap.toLowerCase(),NS=ap[0].toUpperCase()+ap.slice(1);gr(MS,"on"+NS)}gr(Pw,"onAnimationEnd");gr(Rw,"onAnimationIteration");gr(Lw,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(Mw,"onTransitionEnd");bl("onMouseEnter",["mouseout","mouseover"]);bl("onMouseLeave",["mouseout","mouseover"]);bl("onPointerEnter",["pointerout","pointerover"]);bl("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gl));function _0(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,M1(n,e,void 0,i),i.currentTarget=null}function Iw(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],s=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==r&&s.isPropagationStopped())break e;_0(s,a,u),r=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==r&&s.isPropagationStopped())break e;_0(s,a,u),r=c}}}if(Td)throw i=Hp,Td=!1,Hp=null,i}function xe(i,e){var t=e[Qp];t===void 0&&(t=e[Qp]=new Set);var n=i+"__bubble";t.has(n)||(Fw(e,i,2,!1),t.add(n))}function lp(i,e,t){var n=0;e&&(n|=4),Fw(t,i,n,e)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Lc(i){if(!i[Eh]){i[Eh]=!0,By.forEach(function(t){t!=="selectionchange"&&(IS.has(t)||lp(t,!1,i),lp(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[Eh]||(e[Eh]=!0,lp("selectionchange",!1,e))}}function Fw(i,e,t,n){switch(yw(e)){case 1:var s=q1;break;case 4:s=Y1;break;default:s=Ym}t=s.bind(null,e,t,i),s=void 0,!zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(e,t,{capture:!0,passive:s}):i.addEventListener(e,t,!0):s!==void 0?i.addEventListener(e,t,{passive:s}):i.addEventListener(e,t,!1)}function cp(i,e,t,n,s){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=kr(a),o===null)return;if(c=o.tag,c===5||c===6){n=r=o;continue e}a=a.parentNode}}n=n.return}sw(function(){var u=r,h=Vm(t),d=[];e:{var f=Nw.get(i);if(f!==void 0){var p=Qm,m=i;switch(i){case"keypress":if(Bh(t)===0)break e;case"keydown":case"keyup":p=uS;break;case"focusin":m="focus",p=ip;break;case"focusout":m="blur",p=ip;break;case"beforeblur":case"afterblur":p=ip;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=f0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Z1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fS;break;case Pw:case Rw:case Lw:p=tS;break;case Mw:p=gS;break;case"scroll":p=K1;break;case"wheel":p=vS;break;case"copy":case"cut":case"paste":p=nS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=g0}var w=(e&4)!==0,E=!w&&i==="scroll",g=w?f!==null?f+"Capture":null:f;w=[];for(var b=u,A;b!==null;){A=b;var S=A.stateNode;if(A.tag===5&&S!==null&&(A=S,g!==null&&(S=_c(b,g),S!=null&&w.push(Mc(b,S,A)))),E)break;b=b.return}0<w.length&&(f=new p(f,m,null,t,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=i==="mouseover"||i==="pointerover",p=i==="mouseout"||i==="pointerout",f&&t!==jp&&(m=t.relatedTarget||t.fromElement)&&(kr(m)||m[ds]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?kr(m):null,m!==null&&(E=Ho(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(w=f0,S="onMouseLeave",g="onMouseEnter",b="mouse",(i==="pointerout"||i==="pointerover")&&(w=g0,S="onPointerLeave",g="onPointerEnter",b="pointer"),E=p==null?f:oa(p),A=m==null?f:oa(m),f=new w(S,b+"leave",p,t,h),f.target=E,f.relatedTarget=A,S=null,kr(h)===u&&(w=new w(g,b+"enter",m,t,h),w.target=A,w.relatedTarget=E,S=w),E=S,p&&m)t:{for(w=p,g=m,b=0,A=w;A;A=Vo(A))b++;for(A=0,S=g;S;S=Vo(S))A++;for(;0<b-A;)w=Vo(w),b--;for(;0<A-b;)g=Vo(g),A--;for(;b--;){if(w===g||g!==null&&w===g.alternate)break t;w=Vo(w),g=Vo(g)}w=null}else w=null;p!==null&&C0(d,f,p,w,!1),m!==null&&E!==null&&C0(d,E,m,w,!0)}}e:{if(f=u?oa(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=ES;else if(y0(f))if(Ew)T=TS;else{T=CS;var _=_S}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=kS);if(T&&(T=T(i,u))){Sw(d,T,t,h);break e}_&&_(i,f,u),i==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Np(f,"number",f.value)}switch(_=u?oa(u):window,i){case"focusin":(y0(_)||_.contentEditable==="true")&&(sa=_,Vp=u,pc=null);break;case"focusout":pc=Vp=sa=null;break;case"mousedown":Gp=!0;break;case"contextmenu":case"mouseup":case"dragend":Gp=!1,S0(d,t,h);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":S0(d,t,h)}var C;if(Jm)e:{switch(i){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else na?xw(i,t)&&(k="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(bw&&t.locale!=="ko"&&(na||k!=="onCompositionStart"?k==="onCompositionEnd"&&na&&(C=ww()):(Js=h,Km="value"in Js?Js.value:Js.textContent,na=!0)),_=Nd(u,k),0<_.length&&(k=new p0(k,i,null,t,h),d.push({event:k,listeners:_}),C?k.data=C:(C=Aw(t),C!==null&&(k.data=C)))),(C=wS?bS(i,t):xS(i,t))&&(u=Nd(u,"onBeforeInput"),0<u.length&&(h=new p0("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=C))}Iw(d,e)})}function Mc(i,e,t){return{instance:i,listener:e,currentTarget:t}}function Nd(i,e){for(var t=e+"Capture",n=[];i!==null;){var s=i,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=_c(i,t),r!=null&&n.unshift(Mc(i,r,s)),r=_c(i,e),r!=null&&n.push(Mc(i,r,s))),i=i.return}return n}function Vo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function C0(i,e,t,n,s){for(var r=e._reactName,o=[];t!==null&&t!==n;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,s?(c=_c(t,r),c!=null&&o.unshift(Mc(t,c,a))):s||(c=_c(t,r),c!=null&&o.push(Mc(t,c,a)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var FS=/\r\n?/g,DS=/\u0000|\uFFFD/g;function k0(i){return(typeof i=="string"?i:""+i).replace(FS,`
`).replace(DS,"")}function _h(i,e,t){if(e=k0(e),k0(i)!==e&&t)throw Error(N(425))}function Id(){}var Xp=null,qp=null;function Yp(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kp=typeof setTimeout=="function"?setTimeout:void 0,OS=typeof clearTimeout=="function"?clearTimeout:void 0,T0=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof T0<"u"?function(i){return T0.resolve(null).then(i).catch($S)}:Kp;function $S(i){setTimeout(function(){throw i})}function up(i,e){var t=e,n=0;do{var s=t.nextSibling;if(i.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){i.removeChild(s),Tc(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);Tc(e)}function sr(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function P0(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),xn="__reactFiber$"+Rl,Nc="__reactProps$"+Rl,ds="__reactContainer$"+Rl,Qp="__reactEvents$"+Rl,zS="__reactListeners$"+Rl,HS="__reactHandles$"+Rl;function kr(i){var e=i[xn];if(e)return e;for(var t=i.parentNode;t;){if(e=t[ds]||t[xn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=P0(i);i!==null;){if(t=i[xn])return t;i=P0(i)}return e}i=t,t=i.parentNode}return null}function ah(i){return i=i[xn]||i[ds],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function oa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(N(33))}function _f(i){return i[Nc]||null}var Zp=[],aa=-1;function mr(i){return{current:i}}function Se(i){0>aa||(i.current=Zp[aa],Zp[aa]=null,aa--)}function be(i,e){aa++,Zp[aa]=i.current,i.current=e}var ur={},Et=mr(ur),Gt=mr(!1),Po=ur;function xl(i,e){var t=i.type.contextTypes;if(!t)return ur;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(i){return i=i.childContextTypes,i!=null}function Fd(){Se(Gt),Se(Et)}function R0(i,e,t){if(Et.current!==ur)throw Error(N(168));be(Et,e),be(Gt,t)}function Dw(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(N(108,_1(i)||"Unknown",s));return Ne({},t,n)}function Dd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ur,Po=Et.current,be(Et,i),be(Gt,Gt.current),!0}function L0(i,e,t){var n=i.stateNode;if(!n)throw Error(N(169));t?(i=Dw(i,e,Po),n.__reactInternalMemoizedMergedChildContext=i,Se(Gt),Se(Et),be(Et,i)):Se(Gt),be(Gt,t)}var Mn=null,Cf=!1,hp=!1;function Ow(i){Mn===null?Mn=[i]:Mn.push(i)}function BS(i){Cf=!0,Ow(i)}function vr(){if(!hp&&Mn!==null){hp=!0;var i=0,e=ge;try{var t=Mn;for(ge=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Mn=null,Cf=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(i+1)),lw(Gm,vr),s}finally{ge=e,hp=!1}}return null}var la=[],ca=0,Od=null,jd=0,bi=[],xi=0,Ro=null,ss=1,rs="";function wr(i,e){la[ca++]=jd,la[ca++]=Od,Od=i,jd=e}function jw(i,e,t){bi[xi++]=ss,bi[xi++]=rs,bi[xi++]=Ro,Ro=i;var n=ss;i=rs;var s=32-Ki(n)-1;n&=~(1<<s),t+=1;var r=32-Ki(e)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ss=1<<32-Ki(e)+s|t<<s|n,rs=r+i}else ss=1<<r|t<<s|n,rs=i}function tv(i){i.return!==null&&(wr(i,1),jw(i,1,0))}function iv(i){for(;i===Od;)Od=la[--ca],la[ca]=null,jd=la[--ca],la[ca]=null;for(;i===Ro;)Ro=bi[--xi],bi[xi]=null,rs=bi[--xi],bi[xi]=null,ss=bi[--xi],bi[xi]=null}var li=null,ai=null,Ce=!1,qi=null;function $w(i,e){var t=Ei(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function M0(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,li=i,ai=sr(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,li=i,ai=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ro!==null?{id:ss,overflow:rs}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ei(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,li=i,ai=null,!0):!1;default:return!1}}function Jp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function eg(i){if(Ce){var e=ai;if(e){var t=e;if(!M0(i,e)){if(Jp(i))throw Error(N(418));e=sr(t.nextSibling);var n=li;e&&M0(i,e)?$w(n,t):(i.flags=i.flags&-4097|2,Ce=!1,li=i)}}else{if(Jp(i))throw Error(N(418));i.flags=i.flags&-4097|2,Ce=!1,li=i}}}function N0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;li=i}function Ch(i){if(i!==li)return!1;if(!Ce)return N0(i),Ce=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Yp(i.type,i.memoizedProps)),e&&(e=ai)){if(Jp(i))throw zw(),Error(N(418));for(;e;)$w(i,e),e=sr(e.nextSibling)}if(N0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){ai=sr(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}ai=null}}else ai=li?sr(i.stateNode.nextSibling):null;return!0}function zw(){for(var i=ai;i;)i=sr(i.nextSibling)}function Al(){ai=li=null,Ce=!1}function nv(i){qi===null?qi=[i]:qi.push(i)}var US=vs.ReactCurrentBatchConfig;function Ol(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(N(309));var n=t.stateNode}if(!n)throw Error(N(147,i));var s=n,r=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof i!="string")throw Error(N(284));if(!t._owner)throw Error(N(290,i))}return i}function kh(i,e){throw i=Object.prototype.toString.call(e),Error(N(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function I0(i){var e=i._init;return e(i._payload)}function Hw(i){function e(g,b){if(i){var A=g.deletions;A===null?(g.deletions=[b],g.flags|=16):A.push(b)}}function t(g,b){if(!i)return null;for(;b!==null;)e(g,b),b=b.sibling;return null}function n(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function s(g,b){return g=lr(g,b),g.index=0,g.sibling=null,g}function r(g,b,A){return g.index=A,i?(A=g.alternate,A!==null?(A=A.index,A<b?(g.flags|=2,b):A):(g.flags|=2,b)):(g.flags|=1048576,b)}function o(g){return i&&g.alternate===null&&(g.flags|=2),g}function a(g,b,A,S){return b===null||b.tag!==6?(b=yp(A,g.mode,S),b.return=g,b):(b=s(b,A),b.return=g,b)}function c(g,b,A,S){var T=A.type;return T===ia?h(g,b,A.props.children,S,A.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xs&&I0(T)===b.type)?(S=s(b,A.props),S.ref=Ol(g,b,A),S.return=g,S):(S=Yh(A.type,A.key,A.props,null,g.mode,S),S.ref=Ol(g,b,A),S.return=g,S)}function u(g,b,A,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==A.containerInfo||b.stateNode.implementation!==A.implementation?(b=wp(A,g.mode,S),b.return=g,b):(b=s(b,A.children||[]),b.return=g,b)}function h(g,b,A,S,T){return b===null||b.tag!==7?(b=To(A,g.mode,S,T),b.return=g,b):(b=s(b,A),b.return=g,b)}function d(g,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return b=yp(""+b,g.mode,A),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mh:return A=Yh(b.type,b.key,b.props,null,g.mode,A),A.ref=Ol(g,null,b),A.return=g,A;case ta:return b=wp(b,g.mode,A),b.return=g,b;case xs:var S=b._init;return d(g,S(b._payload),A)}if(Wl(b)||Ml(b))return b=To(b,g.mode,A,null),b.return=g,b;kh(g,b)}return null}function f(g,b,A,S){var T=b!==null?b.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return T!==null?null:a(g,b,""+A,S);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case mh:return A.key===T?c(g,b,A,S):null;case ta:return A.key===T?u(g,b,A,S):null;case xs:return T=A._init,f(g,b,T(A._payload),S)}if(Wl(A)||Ml(A))return T!==null?null:h(g,b,A,S,null);kh(g,A)}return null}function p(g,b,A,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(A)||null,a(b,g,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case mh:return g=g.get(S.key===null?A:S.key)||null,c(b,g,S,T);case ta:return g=g.get(S.key===null?A:S.key)||null,u(b,g,S,T);case xs:var _=S._init;return p(g,b,A,_(S._payload),T)}if(Wl(S)||Ml(S))return g=g.get(A)||null,h(b,g,S,T,null);kh(b,S)}return null}function m(g,b,A,S){for(var T=null,_=null,C=b,k=b=0,R=null;C!==null&&k<A.length;k++){C.index>k?(R=C,C=null):R=C.sibling;var L=f(g,C,A[k],S);if(L===null){C===null&&(C=R);break}i&&C&&L.alternate===null&&e(g,C),b=r(L,b,k),_===null?T=L:_.sibling=L,_=L,C=R}if(k===A.length)return t(g,C),Ce&&wr(g,k),T;if(C===null){for(;k<A.length;k++)C=d(g,A[k],S),C!==null&&(b=r(C,b,k),_===null?T=C:_.sibling=C,_=C);return Ce&&wr(g,k),T}for(C=n(g,C);k<A.length;k++)R=p(C,g,k,A[k],S),R!==null&&(i&&R.alternate!==null&&C.delete(R.key===null?k:R.key),b=r(R,b,k),_===null?T=R:_.sibling=R,_=R);return i&&C.forEach(function(D){return e(g,D)}),Ce&&wr(g,k),T}function w(g,b,A,S){var T=Ml(A);if(typeof T!="function")throw Error(N(150));if(A=T.call(A),A==null)throw Error(N(151));for(var _=T=null,C=b,k=b=0,R=null,L=A.next();C!==null&&!L.done;k++,L=A.next()){C.index>k?(R=C,C=null):R=C.sibling;var D=f(g,C,L.value,S);if(D===null){C===null&&(C=R);break}i&&C&&D.alternate===null&&e(g,C),b=r(D,b,k),_===null?T=D:_.sibling=D,_=D,C=R}if(L.done)return t(g,C),Ce&&wr(g,k),T;if(C===null){for(;!L.done;k++,L=A.next())L=d(g,L.value,S),L!==null&&(b=r(L,b,k),_===null?T=L:_.sibling=L,_=L);return Ce&&wr(g,k),T}for(C=n(g,C);!L.done;k++,L=A.next())L=p(C,g,k,L.value,S),L!==null&&(i&&L.alternate!==null&&C.delete(L.key===null?k:L.key),b=r(L,b,k),_===null?T=L:_.sibling=L,_=L);return i&&C.forEach(function(q){return e(g,q)}),Ce&&wr(g,k),T}function E(g,b,A,S){if(typeof A=="object"&&A!==null&&A.type===ia&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case mh:e:{for(var T=A.key,_=b;_!==null;){if(_.key===T){if(T=A.type,T===ia){if(_.tag===7){t(g,_.sibling),b=s(_,A.props.children),b.return=g,g=b;break e}}else if(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xs&&I0(T)===_.type){t(g,_.sibling),b=s(_,A.props),b.ref=Ol(g,_,A),b.return=g,g=b;break e}t(g,_);break}else e(g,_);_=_.sibling}A.type===ia?(b=To(A.props.children,g.mode,S,A.key),b.return=g,g=b):(S=Yh(A.type,A.key,A.props,null,g.mode,S),S.ref=Ol(g,b,A),S.return=g,g=S)}return o(g);case ta:e:{for(_=A.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===A.containerInfo&&b.stateNode.implementation===A.implementation){t(g,b.sibling),b=s(b,A.children||[]),b.return=g,g=b;break e}else{t(g,b);break}else e(g,b);b=b.sibling}b=wp(A,g.mode,S),b.return=g,g=b}return o(g);case xs:return _=A._init,E(g,b,_(A._payload),S)}if(Wl(A))return m(g,b,A,S);if(Ml(A))return w(g,b,A,S);kh(g,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,b!==null&&b.tag===6?(t(g,b.sibling),b=s(b,A),b.return=g,g=b):(t(g,b),b=yp(A,g.mode,S),b.return=g,g=b),o(g)):t(g,b)}return E}var Sl=Hw(!0),Bw=Hw(!1),$d=mr(null),zd=null,ua=null,sv=null;function rv(){sv=ua=zd=null}function ov(i){var e=$d.current;Se($d),i._currentValue=e}function tg(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function ya(i,e){zd=i,sv=ua=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Wt=!0),i.firstContext=null)}function ki(i){var e=i._currentValue;if(sv!==i)if(i={context:i,memoizedValue:e,next:null},ua===null){if(zd===null)throw Error(N(308));ua=i,zd.dependencies={lanes:0,firstContext:i}}else ua=ua.next=i;return e}var Tr=null;function av(i){Tr===null?Tr=[i]:Tr.push(i)}function Uw(i,e,t,n){var s=e.interleaved;return s===null?(t.next=t,av(e)):(t.next=s.next,s.next=t),e.interleaved=t,fs(i,n)}function fs(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var As=!1;function lv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ww(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function os(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function rr(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,oe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,fs(i,t)}return s=n.interleaved,s===null?(e.next=e,av(n)):(e.next=s.next,s.next=e),n.interleaved=e,fs(i,t)}function Uh(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Xm(i,t)}}function F0(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function Hd(i,e,t,n){var s=i.updateQueue;As=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=i.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,a=r;do{var f=a.lane,p=a.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=i,w=a;switch(f=e,p=t,w.tag){case 1:if(m=w.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Ne({},d,f);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Mo|=o,i.lanes=o,i.memoizedState=d}}function D0(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error(N(191,s));s.call(n)}}}var lh={},En=mr(lh),Ic=mr(lh),Fc=mr(lh);function Pr(i){if(i===lh)throw Error(N(174));return i}function cv(i,e){switch(be(Fc,e),be(Ic,i),be(En,lh),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fp(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=Fp(e,i)}Se(En),be(En,e)}function El(){Se(En),Se(Ic),Se(Fc)}function Vw(i){Pr(Fc.current);var e=Pr(En.current),t=Fp(e,i.type);e!==t&&(be(Ic,i),be(En,t))}function uv(i){Ic.current===i&&(Se(En),Se(Ic))}var Le=mr(0);function Bd(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dp=[];function hv(){for(var i=0;i<dp.length;i++)dp[i]._workInProgressVersionPrimary=null;dp.length=0}var Wh=vs.ReactCurrentDispatcher,fp=vs.ReactCurrentBatchConfig,Lo=0,Me=null,Ye=null,st=null,Ud=!1,gc=!1,Dc=0,WS=0;function pt(){throw Error(N(321))}function dv(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!Zi(i[t],e[t]))return!1;return!0}function fv(i,e,t,n,s,r){if(Lo=r,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wh.current=i===null||i.memoizedState===null?qS:YS,i=t(n,s),gc){r=0;do{if(gc=!1,Dc=0,25<=r)throw Error(N(301));r+=1,st=Ye=null,e.updateQueue=null,Wh.current=KS,i=t(n,s)}while(gc)}if(Wh.current=Wd,e=Ye!==null&&Ye.next!==null,Lo=0,st=Ye=Me=null,Ud=!1,e)throw Error(N(300));return i}function pv(){var i=Dc!==0;return Dc=0,i}function tn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Me.memoizedState=st=i:st=st.next=i,st}function Ti(){if(Ye===null){var i=Me.alternate;i=i!==null?i.memoizedState:null}else i=Ye.next;var e=st===null?Me.memoizedState:st.next;if(e!==null)st=e,Ye=i;else{if(i===null)throw Error(N(310));Ye=i,i={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},st===null?Me.memoizedState=st=i:st=st.next=i}return st}function Oc(i,e){return typeof e=="function"?e(i):e}function pp(i){var e=Ti(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=i;var n=Ye,s=n.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}n.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,n=n.baseState;var a=o=null,c=null,u=r;do{var h=u.lane;if((Lo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:i(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=n):c=c.next=d,Me.lanes|=h,Mo|=h}u=u.next}while(u!==null&&u!==r);c===null?o=n:c.next=a,Zi(n,e.memoizedState)||(Wt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,t.lastRenderedState=n}if(i=t.interleaved,i!==null){s=i;do r=s.lane,Me.lanes|=r,Mo|=r,s=s.next;while(s!==i)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gp(i){var e=Ti(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=i;var n=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=i(r,o.action),o=o.next;while(o!==s);Zi(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,n]}function Gw(){}function Xw(i,e){var t=Me,n=Ti(),s=e(),r=!Zi(n.memoizedState,s);if(r&&(n.memoizedState=s,Wt=!0),n=n.queue,gv(Kw.bind(null,t,n,i),[i]),n.getSnapshot!==e||r||st!==null&&st.memoizedState.tag&1){if(t.flags|=2048,jc(9,Yw.bind(null,t,n,s,e),void 0,null),rt===null)throw Error(N(349));Lo&30||qw(t,e,s)}return s}function qw(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function Yw(i,e,t,n){e.value=t,e.getSnapshot=n,Qw(e)&&Zw(i)}function Kw(i,e,t){return t(function(){Qw(e)&&Zw(i)})}function Qw(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Zi(i,t)}catch{return!0}}function Zw(i){var e=fs(i,1);e!==null&&Qi(e,i,1,-1)}function O0(i){var e=tn();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:i},e.queue=i,i=i.dispatch=XS.bind(null,Me,i),[e.memoizedState,i]}function jc(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function Jw(){return Ti().memoizedState}function Vh(i,e,t,n){var s=tn();Me.flags|=i,s.memoizedState=jc(1|e,t,void 0,n===void 0?null:n)}function kf(i,e,t,n){var s=Ti();n=n===void 0?null:n;var r=void 0;if(Ye!==null){var o=Ye.memoizedState;if(r=o.destroy,n!==null&&dv(n,o.deps)){s.memoizedState=jc(e,t,r,n);return}}Me.flags|=i,s.memoizedState=jc(1|e,t,r,n)}function j0(i,e){return Vh(8390656,8,i,e)}function gv(i,e){return kf(2048,8,i,e)}function eb(i,e){return kf(4,2,i,e)}function tb(i,e){return kf(4,4,i,e)}function ib(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function nb(i,e,t){return t=t!=null?t.concat([i]):null,kf(4,4,ib.bind(null,e,i),t)}function mv(){}function sb(i,e){var t=Ti();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&dv(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function rb(i,e){var t=Ti();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&dv(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function ob(i,e,t){return Lo&21?(Zi(t,e)||(t=hw(),Me.lanes|=t,Mo|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Wt=!0),i.memoizedState=t)}function VS(i,e){var t=ge;ge=t!==0&&4>t?t:4,i(!0);var n=fp.transition;fp.transition={};try{i(!1),e()}finally{ge=t,fp.transition=n}}function ab(){return Ti().memoizedState}function GS(i,e,t){var n=ar(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},lb(i))cb(e,t);else if(t=Uw(i,e,t,n),t!==null){var s=Rt();Qi(t,i,n,s),ub(t,e,n)}}function XS(i,e,t){var n=ar(i),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(lb(i))cb(e,s);else{var r=i.alternate;if(i.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,Zi(a,o)){var c=e.interleaved;c===null?(s.next=s,av(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=Uw(i,e,s,n),t!==null&&(s=Rt(),Qi(t,i,n,s),ub(t,e,n))}}function lb(i){var e=i.alternate;return i===Me||e!==null&&e===Me}function cb(i,e){gc=Ud=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function ub(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Xm(i,t)}}var Wd={readContext:ki,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},qS={readContext:ki,useCallback:function(i,e){return tn().memoizedState=[i,e===void 0?null:e],i},useContext:ki,useEffect:j0,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,Vh(4194308,4,ib.bind(null,e,i),t)},useLayoutEffect:function(i,e){return Vh(4194308,4,i,e)},useInsertionEffect:function(i,e){return Vh(4,2,i,e)},useMemo:function(i,e){var t=tn();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=tn();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=GS.bind(null,Me,i),[n.memoizedState,i]},useRef:function(i){var e=tn();return i={current:i},e.memoizedState=i},useState:O0,useDebugValue:mv,useDeferredValue:function(i){return tn().memoizedState=i},useTransition:function(){var i=O0(!1),e=i[0];return i=VS.bind(null,i[1]),tn().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=Me,s=tn();if(Ce){if(t===void 0)throw Error(N(407));t=t()}else{if(t=e(),rt===null)throw Error(N(349));Lo&30||qw(n,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,j0(Kw.bind(null,n,r,i),[i]),n.flags|=2048,jc(9,Yw.bind(null,n,r,t,e),void 0,null),t},useId:function(){var i=tn(),e=rt.identifierPrefix;if(Ce){var t=rs,n=ss;t=(n&~(1<<32-Ki(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Dc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=WS++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},YS={readContext:ki,useCallback:sb,useContext:ki,useEffect:gv,useImperativeHandle:nb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:rb,useReducer:pp,useRef:Jw,useState:function(){return pp(Oc)},useDebugValue:mv,useDeferredValue:function(i){var e=Ti();return ob(e,Ye.memoizedState,i)},useTransition:function(){var i=pp(Oc)[0],e=Ti().memoizedState;return[i,e]},useMutableSource:Gw,useSyncExternalStore:Xw,useId:ab,unstable_isNewReconciler:!1},KS={readContext:ki,useCallback:sb,useContext:ki,useEffect:gv,useImperativeHandle:nb,useInsertionEffect:eb,useLayoutEffect:tb,useMemo:rb,useReducer:gp,useRef:Jw,useState:function(){return gp(Oc)},useDebugValue:mv,useDeferredValue:function(i){var e=Ti();return Ye===null?e.memoizedState=i:ob(e,Ye.memoizedState,i)},useTransition:function(){var i=gp(Oc)[0],e=Ti().memoizedState;return[i,e]},useMutableSource:Gw,useSyncExternalStore:Xw,useId:ab,unstable_isNewReconciler:!1};function Mi(i,e){if(i&&i.defaultProps){e=Ne({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function ig(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:Ne({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var Tf={isMounted:function(i){return(i=i._reactInternals)?Ho(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=Rt(),s=ar(i),r=os(n,s);r.payload=e,t!=null&&(r.callback=t),e=rr(i,r,s),e!==null&&(Qi(e,i,s,n),Uh(e,i,s))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=Rt(),s=ar(i),r=os(n,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=rr(i,r,s),e!==null&&(Qi(e,i,s,n),Uh(e,i,s))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=Rt(),n=ar(i),s=os(t,n);s.tag=2,e!=null&&(s.callback=e),e=rr(i,s,n),e!==null&&(Qi(e,i,n,t),Uh(e,i,n))}};function $0(i,e,t,n,s,r,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,r,o):e.prototype&&e.prototype.isPureReactComponent?!Rc(t,n)||!Rc(s,r):!0}function hb(i,e,t){var n=!1,s=ur,r=e.contextType;return typeof r=="object"&&r!==null?r=ki(r):(s=Xt(e)?Po:Et.current,n=e.contextTypes,r=(n=n!=null)?xl(i,s):ur),e=new e(t,r),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tf,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=r),e}function z0(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&Tf.enqueueReplaceState(e,e.state,null)}function ng(i,e,t,n){var s=i.stateNode;s.props=t,s.state=i.memoizedState,s.refs={},lv(i);var r=e.contextType;typeof r=="object"&&r!==null?s.context=ki(r):(r=Xt(e)?Po:Et.current,s.context=xl(i,r)),s.state=i.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(ig(i,e,r,t),s.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tf.enqueueReplaceState(s,s.state,null),Hd(i,t,s,n),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function _l(i,e){try{var t="",n=e;do t+=E1(n),n=n.return;while(n);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:i,source:e,stack:s,digest:null}}function mp(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function sg(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QS=typeof WeakMap=="function"?WeakMap:Map;function db(i,e,t){t=os(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Gd||(Gd=!0,pg=n),sg(i,e)},t}function fb(i,e,t){t=os(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;t.payload=function(){return n(s)},t.callback=function(){sg(i,e)}}var r=i.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){sg(i,e),typeof n!="function"&&(or===null?or=new Set([this]):or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function H0(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new QS;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(s.add(t),i=hE.bind(null,i,e,t),e.then(i,i))}function B0(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function U0(i,e,t,n,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=os(-1,1),e.tag=2,rr(t,e,1))),t.lanes|=1),i)}var ZS=vs.ReactCurrentOwner,Wt=!1;function Tt(i,e,t,n){e.child=i===null?Bw(e,null,t,n):Sl(e,i.child,t,n)}function W0(i,e,t,n,s){t=t.render;var r=e.ref;return ya(e,s),n=fv(i,e,t,n,r,s),t=pv(),i!==null&&!Wt?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,ps(i,e,s)):(Ce&&t&&tv(e),e.flags|=1,Tt(i,e,n,s),e.child)}function V0(i,e,t,n,s){if(i===null){var r=t.type;return typeof r=="function"&&!Ev(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,pb(i,e,r,n,s)):(i=Yh(t.type,null,n,e,e.mode,s),i.ref=e.ref,i.return=e,e.child=i)}if(r=i.child,!(i.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Rc,t(o,n)&&i.ref===e.ref)return ps(i,e,s)}return e.flags|=1,i=lr(r,n),i.ref=e.ref,i.return=e,e.child=i}function pb(i,e,t,n,s){if(i!==null){var r=i.memoizedProps;if(Rc(r,n)&&i.ref===e.ref)if(Wt=!1,e.pendingProps=n=r,(i.lanes&s)!==0)i.flags&131072&&(Wt=!0);else return e.lanes=i.lanes,ps(i,e,s)}return rg(i,e,t,n,s)}function gb(i,e,t){var n=e.pendingProps,s=n.children,r=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(da,ri),ri|=t;else{if(!(t&1073741824))return i=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,be(da,ri),ri|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:t,be(da,ri),ri|=n}else r!==null?(n=r.baseLanes|t,e.memoizedState=null):n=t,be(da,ri),ri|=n;return Tt(i,e,s,t),e.child}function mb(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function rg(i,e,t,n,s){var r=Xt(t)?Po:Et.current;return r=xl(e,r),ya(e,s),t=fv(i,e,t,n,r,s),n=pv(),i!==null&&!Wt?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,ps(i,e,s)):(Ce&&n&&tv(e),e.flags|=1,Tt(i,e,t,s),e.child)}function G0(i,e,t,n,s){if(Xt(t)){var r=!0;Dd(e)}else r=!1;if(ya(e,s),e.stateNode===null)Gh(i,e),hb(e,t,n),ng(e,t,n,s),n=!0;else if(i===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=ki(u):(u=Xt(t)?Po:Et.current,u=xl(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==u)&&z0(e,o,n,u),As=!1;var f=e.memoizedState;o.state=f,Hd(e,n,o,s),c=e.memoizedState,a!==n||f!==c||Gt.current||As?(typeof h=="function"&&(ig(e,t,h,n),c=e.memoizedState),(a=As||$0(e,t,a,n,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Ww(i,e),a=e.memoizedProps,u=e.type===e.elementType?a:Mi(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=ki(c):(c=Xt(t)?Po:Et.current,c=xl(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&z0(e,o,n,c),As=!1,f=e.memoizedState,o.state=f,Hd(e,n,o,s);var m=e.memoizedState;a!==d||f!==m||Gt.current||As?(typeof p=="function"&&(ig(e,t,p,n),m=e.memoizedState),(u=As||$0(e,t,u,n,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),n=!1)}return og(i,e,t,n,r,s)}function og(i,e,t,n,s,r){mb(i,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&L0(e,t,!1),ps(i,e,r);n=e.stateNode,ZS.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&o?(e.child=Sl(e,i.child,null,r),e.child=Sl(e,null,a,r)):Tt(i,e,a,r),e.memoizedState=n.state,s&&L0(e,t,!0),e.child}function vb(i){var e=i.stateNode;e.pendingContext?R0(i,e.pendingContext,e.pendingContext!==e.context):e.context&&R0(i,e.context,!1),cv(i,e.containerInfo)}function X0(i,e,t,n,s){return Al(),nv(s),e.flags|=256,Tt(i,e,t,n),e.child}var ag={dehydrated:null,treeContext:null,retryLane:0};function lg(i){return{baseLanes:i,cachePool:null,transitions:null}}function yb(i,e,t){var n=e.pendingProps,s=Le.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=i!==null&&i.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),be(Le,s&1),i===null)return eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,i=n.fallback,r?(n=e.mode,r=e.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Lf(o,n,0,null),i=To(i,n,t,null),r.return=e,i.return=e,r.sibling=i,e.child=r,e.child.memoizedState=lg(t),e.memoizedState=ag,i):vv(e,o));if(s=i.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return JS(i,e,o,n,a,s,t);if(r){r=n.fallback,o=e.mode,s=i.child,a=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=lr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=lr(a,r):(r=To(r,o,t,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,o=i.child.memoizedState,o=o===null?lg(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=i.childLanes&~t,e.memoizedState=ag,n}return r=i.child,i=r.sibling,n=lr(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function vv(i,e){return e=Lf({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function Th(i,e,t,n){return n!==null&&nv(n),Sl(e,i.child,null,t),i=vv(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function JS(i,e,t,n,s,r,o){if(t)return e.flags&256?(e.flags&=-257,n=mp(Error(N(422))),Th(i,e,o,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(r=n.fallback,s=e.mode,n=Lf({mode:"visible",children:n.children},s,0,null),r=To(r,s,o,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&Sl(e,i.child,null,o),e.child.memoizedState=lg(o),e.memoizedState=ag,r);if(!(e.mode&1))return Th(i,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,r=Error(N(419)),n=mp(r,n,void 0),Th(i,e,o,n)}if(a=(o&i.childLanes)!==0,Wt||a){if(n=rt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,fs(i,s),Qi(n,i,s,-1))}return Sv(),n=mp(Error(N(421))),Th(i,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=i.child,e=dE.bind(null,i),s._reactRetry=e,null):(i=r.treeContext,ai=sr(s.nextSibling),li=e,Ce=!0,qi=null,i!==null&&(bi[xi++]=ss,bi[xi++]=rs,bi[xi++]=Ro,ss=i.id,rs=i.overflow,Ro=e),e=vv(e,n.children),e.flags|=4096,e)}function q0(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),tg(i.return,e,t)}function vp(i,e,t,n,s){var r=i.memoizedState;r===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=t,r.tailMode=s)}function wb(i,e,t){var n=e.pendingProps,s=n.revealOrder,r=n.tail;if(Tt(i,e,n.children,t),n=Le.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&q0(i,t,e);else if(i.tag===19)q0(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(be(Le,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)i=t.alternate,i!==null&&Bd(i)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),vp(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(i=s.alternate,i!==null&&Bd(i)===null){e.child=s;break}i=s.sibling,s.sibling=t,t=s,s=i}vp(e,!0,t,null,r);break;case"together":vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gh(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function ps(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),Mo|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(N(153));if(e.child!==null){for(i=e.child,t=lr(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=lr(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function eE(i,e,t){switch(e.tag){case 3:vb(e),Al();break;case 5:Vw(e);break;case 1:Xt(e.type)&&Dd(e);break;case 4:cv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;be($d,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(be(Le,Le.current&1),e.flags|=128,null):t&e.child.childLanes?yb(i,e,t):(be(Le,Le.current&1),i=ps(i,e,t),i!==null?i.sibling:null);be(Le,Le.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return wb(i,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Le,Le.current),n)break;return null;case 22:case 23:return e.lanes=0,gb(i,e,t)}return ps(i,e,t)}var bb,cg,xb,Ab;bb=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};cg=function(){};xb=function(i,e,t,n){var s=i.memoizedProps;if(s!==n){i=e.stateNode,Pr(En.current);var r=null;switch(t){case"input":s=Lp(i,s),n=Lp(i,n),r=[];break;case"select":s=Ne({},s,{value:void 0}),n=Ne({},n,{value:void 0}),r=[];break;case"textarea":s=Ip(i,s),n=Ip(i,n),r=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=Id)}Dp(t,n);var o;t=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sc.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var c=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xe("scroll",i),r||a===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Ab=function(i,e,t,n){t!==n&&(e.flags|=4)};function jl(i,e){if(!Ce)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function gt(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function tE(i,e,t){var n=e.pendingProps;switch(iv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Xt(e.type)&&Fd(),gt(e),null;case 3:return n=e.stateNode,El(),Se(Gt),Se(Et),hv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(Ch(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qi!==null&&(vg(qi),qi=null))),cg(i,e),gt(e),null;case 5:uv(e);var s=Pr(Fc.current);if(t=e.type,i!==null&&e.stateNode!=null)xb(i,e,t,n,s),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(N(166));return gt(e),null}if(i=Pr(En.current),Ch(e)){n=e.stateNode,t=e.type;var r=e.memoizedProps;switch(n[xn]=e,n[Nc]=r,i=(e.mode&1)!==0,t){case"dialog":xe("cancel",n),xe("close",n);break;case"iframe":case"object":case"embed":xe("load",n);break;case"video":case"audio":for(s=0;s<Gl.length;s++)xe(Gl[s],n);break;case"source":xe("error",n);break;case"img":case"image":case"link":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"input":n0(n,r),xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},xe("invalid",n);break;case"textarea":r0(n,r),xe("invalid",n)}Dp(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?n.textContent!==a&&(r.suppressHydrationWarning!==!0&&_h(n.textContent,a,i),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&_h(n.textContent,a,i),s=["children",""+a]):Sc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",n)}switch(t){case"input":vh(n),s0(n,r,!0);break;case"textarea":vh(n),o0(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=Id)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ky(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(t,{is:n.is}):(i=o.createElement(t),t==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,t),i[xn]=e,i[Nc]=n,bb(i,e,!1,!1),e.stateNode=i;e:{switch(o=Op(t,n),t){case"dialog":xe("cancel",i),xe("close",i),s=n;break;case"iframe":case"object":case"embed":xe("load",i),s=n;break;case"video":case"audio":for(s=0;s<Gl.length;s++)xe(Gl[s],i);s=n;break;case"source":xe("error",i),s=n;break;case"img":case"image":case"link":xe("error",i),xe("load",i),s=n;break;case"details":xe("toggle",i),s=n;break;case"input":n0(i,n),s=Lp(i,n),xe("invalid",i);break;case"option":s=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},s=Ne({},n,{value:void 0}),xe("invalid",i);break;case"textarea":r0(i,n),s=Ip(i,n),xe("invalid",i);break;default:s=n}Dp(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var c=a[r];r==="style"?Jy(i,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qy(i,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Ec(i,c):typeof c=="number"&&Ec(i,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Sc.hasOwnProperty(r)?c!=null&&r==="onScroll"&&xe("scroll",i):c!=null&&Hm(i,r,c,o))}switch(t){case"input":vh(i),s0(i,n,!1);break;case"textarea":vh(i),o0(i);break;case"option":n.value!=null&&i.setAttribute("value",""+cr(n.value));break;case"select":i.multiple=!!n.multiple,r=n.value,r!=null?pa(i,!!n.multiple,r,!1):n.defaultValue!=null&&pa(i,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=Id)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(i&&e.stateNode!=null)Ab(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(N(166));if(t=Pr(Fc.current),Pr(En.current),Ch(e)){if(n=e.stateNode,t=e.memoizedProps,n[xn]=e,(r=n.nodeValue!==t)&&(i=li,i!==null))switch(i.tag){case 3:_h(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&_h(n.nodeValue,t,(i.mode&1)!==0)}r&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[xn]=e,e.stateNode=n}return gt(e),null;case 13:if(Se(Le),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ce&&ai!==null&&e.mode&1&&!(e.flags&128))zw(),Al(),e.flags|=98560,r=!1;else if(r=Ch(e),n!==null&&n.dehydrated!==null){if(i===null){if(!r)throw Error(N(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(N(317));r[xn]=e}else Al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),r=!1}else qi!==null&&(vg(qi),qi=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||Le.current&1?Qe===0&&(Qe=3):Sv())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return El(),cg(i,e),i===null&&Lc(e.stateNode.containerInfo),gt(e),null;case 10:return ov(e.type._context),gt(e),null;case 17:return Xt(e.type)&&Fd(),gt(e),null;case 19:if(Se(Le),r=e.memoizedState,r===null)return gt(e),null;if(n=(e.flags&128)!==0,o=r.rendering,o===null)if(n)jl(r,!1);else{if(Qe!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(o=Bd(i),o!==null){for(e.flags|=128,jl(r,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)r=t,i=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return be(Le,Le.current&1|2),e.child}i=i.sibling}r.tail!==null&&je()>Cl&&(e.flags|=128,n=!0,jl(r,!1),e.lanes=4194304)}else{if(!n)if(i=Bd(o),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),jl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ce)return gt(e),null}else 2*je()-r.renderingStartTime>Cl&&t!==1073741824&&(e.flags|=128,n=!0,jl(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=je(),e.sibling=null,t=Le.current,be(Le,n?t&1|2:t&1),e):(gt(e),null);case 22:case 23:return Av(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ri&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function iE(i,e){switch(iv(e),e.tag){case 1:return Xt(e.type)&&Fd(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return El(),Se(Gt),Se(Et),hv(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return uv(e),null;case 13:if(Se(Le),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Al()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return Se(Le),null;case 4:return El(),null;case 10:return ov(e.type._context),null;case 22:case 23:return Av(),null;case 24:return null;default:return null}}var Ph=!1,At=!1,nE=typeof WeakSet=="function"?WeakSet:Set,j=null;function ha(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){De(i,e,n)}else t.current=null}function ug(i,e,t){try{t()}catch(n){De(i,e,n)}}var Y0=!1;function sE(i,e){if(Xp=Ld,i=kw(),ev(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=i,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==r||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===i)break t;if(f===t&&++u===s&&(a=o),f===r&&++h===n&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(qp={focusedElem:i,selectionRange:t},Ld=!1,j=e;j!==null;)if(e=j,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,j=i;else for(;j!==null;){e=j;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,E=m.memoizedState,g=e.stateNode,b=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Mi(e.type,w),E);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(S){De(e,e.return,S)}if(i=e.sibling,i!==null){i.return=e.return,j=i;break}j=e.return}return m=Y0,Y0=!1,m}function mc(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&i)===i){var r=s.destroy;s.destroy=void 0,r!==void 0&&ug(e,t,r)}s=s.next}while(s!==n)}}function Pf(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function hg(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function Sb(i){var e=i.alternate;e!==null&&(i.alternate=null,Sb(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[xn],delete e[Nc],delete e[Qp],delete e[zS],delete e[HS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Eb(i){return i.tag===5||i.tag===3||i.tag===4}function K0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Eb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dg(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Id));else if(n!==4&&(i=i.child,i!==null))for(dg(i,e,t),i=i.sibling;i!==null;)dg(i,e,t),i=i.sibling}function fg(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(fg(i,e,t),i=i.sibling;i!==null;)fg(i,e,t),i=i.sibling}var ut=null,Xi=!1;function ys(i,e,t){for(t=t.child;t!==null;)_b(i,e,t),t=t.sibling}function _b(i,e,t){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(xf,t)}catch{}switch(t.tag){case 5:At||ha(t,e);case 6:var n=ut,s=Xi;ut=null,ys(i,e,t),ut=n,Xi=s,ut!==null&&(Xi?(i=ut,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):ut.removeChild(t.stateNode));break;case 18:ut!==null&&(Xi?(i=ut,t=t.stateNode,i.nodeType===8?up(i.parentNode,t):i.nodeType===1&&up(i,t),Tc(i)):up(ut,t.stateNode));break;case 4:n=ut,s=Xi,ut=t.stateNode.containerInfo,Xi=!0,ys(i,e,t),ut=n,Xi=s;break;case 0:case 11:case 14:case 15:if(!At&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ug(t,e,o),s=s.next}while(s!==n)}ys(i,e,t);break;case 1:if(!At&&(ha(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){De(t,e,a)}ys(i,e,t);break;case 21:ys(i,e,t);break;case 22:t.mode&1?(At=(n=At)||t.memoizedState!==null,ys(i,e,t),At=n):ys(i,e,t);break;default:ys(i,e,t)}}function Q0(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new nE),e.forEach(function(n){var s=fE.bind(null,i,n);t.has(n)||(t.add(n),n.then(s,s))})}}function Ri(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var r=i,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,Xi=!1;break e;case 3:ut=a.stateNode.containerInfo,Xi=!0;break e;case 4:ut=a.stateNode.containerInfo,Xi=!0;break e}a=a.return}if(ut===null)throw Error(N(160));_b(r,o,s),ut=null,Xi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){De(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cb(e,i),e=e.sibling}function Cb(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ri(e,i),Ji(i),n&4){try{mc(3,i,i.return),Pf(3,i)}catch(w){De(i,i.return,w)}try{mc(5,i,i.return)}catch(w){De(i,i.return,w)}}break;case 1:Ri(e,i),Ji(i),n&512&&t!==null&&ha(t,t.return);break;case 5:if(Ri(e,i),Ji(i),n&512&&t!==null&&ha(t,t.return),i.flags&32){var s=i.stateNode;try{Ec(s,"")}catch(w){De(i,i.return,w)}}if(n&4&&(s=i.stateNode,s!=null)){var r=i.memoizedProps,o=t!==null?t.memoizedProps:r,a=i.type,c=i.updateQueue;if(i.updateQueue=null,c!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&qy(s,r),Op(a,o);var u=Op(a,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Jy(s,d):h==="dangerouslySetInnerHTML"?Qy(s,d):h==="children"?Ec(s,d):Hm(s,h,d,u)}switch(a){case"input":Mp(s,r);break;case"textarea":Yy(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?pa(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?pa(s,!!r.multiple,r.defaultValue,!0):pa(s,!!r.multiple,r.multiple?[]:"",!1))}s[Nc]=r}catch(w){De(i,i.return,w)}}break;case 6:if(Ri(e,i),Ji(i),n&4){if(i.stateNode===null)throw Error(N(162));s=i.stateNode,r=i.memoizedProps;try{s.nodeValue=r}catch(w){De(i,i.return,w)}}break;case 3:if(Ri(e,i),Ji(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Tc(e.containerInfo)}catch(w){De(i,i.return,w)}break;case 4:Ri(e,i),Ji(i);break;case 13:Ri(e,i),Ji(i),s=i.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(bv=je())),n&4&&Q0(i);break;case 22:if(h=t!==null&&t.memoizedState!==null,i.mode&1?(At=(u=At)||h,Ri(e,i),At=u):Ri(e,i),Ji(i),n&8192){if(u=i.memoizedState!==null,(i.stateNode.isHidden=u)&&!h&&i.mode&1)for(j=i,h=i.child;h!==null;){for(d=j=h;j!==null;){switch(f=j,p=f.child,f.tag){case 0:case 11:case 14:case 15:mc(4,f,f.return);break;case 1:ha(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(w){De(n,t,w)}}break;case 5:ha(f,f.return);break;case 22:if(f.memoizedState!==null){J0(d);continue}}p!==null?(p.return=f,j=p):J0(d)}h=h.sibling}e:for(h=null,d=i;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Zy("display",o))}catch(w){De(i,i.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){De(i,i.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===i)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ri(e,i),Ji(i),n&4&&Q0(i);break;case 21:break;default:Ri(e,i),Ji(i)}}function Ji(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(Eb(t)){var n=t;break e}t=t.return}throw Error(N(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ec(s,""),n.flags&=-33);var r=K0(i);fg(i,r,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=K0(i);dg(i,a,o);break;default:throw Error(N(161))}}catch(c){De(i,i.return,c)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function rE(i,e,t){j=i,kb(i)}function kb(i,e,t){for(var n=(i.mode&1)!==0;j!==null;){var s=j,r=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Ph;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||At;a=Ph;var u=At;if(Ph=o,(At=c)&&!u)for(j=s;j!==null;)o=j,c=o.child,o.tag===22&&o.memoizedState!==null?ey(s):c!==null?(c.return=o,j=c):ey(s);for(;r!==null;)j=r,kb(r),r=r.sibling;j=s,Ph=a,At=u}Z0(i)}else s.subtreeFlags&8772&&r!==null?(r.return=s,j=r):Z0(i)}}function Z0(i){for(;j!==null;){var e=j;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Pf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!At)if(t===null)n.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Mi(e.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&D0(e,r,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}D0(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Tc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}At||e.flags&512&&hg(e)}catch(f){De(e,e.return,f)}}if(e===i){j=null;break}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}}function J0(i){for(;j!==null;){var e=j;if(e===i){j=null;break}var t=e.sibling;if(t!==null){t.return=e.return,j=t;break}j=e.return}}function ey(i){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Pf(4,e)}catch(c){De(e,t,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){De(e,s,c)}}var r=e.return;try{hg(e)}catch(c){De(e,r,c)}break;case 5:var o=e.return;try{hg(e)}catch(c){De(e,o,c)}}}catch(c){De(e,e.return,c)}if(e===i){j=null;break}var a=e.sibling;if(a!==null){a.return=e.return,j=a;break}j=e.return}}var oE=Math.ceil,Vd=vs.ReactCurrentDispatcher,yv=vs.ReactCurrentOwner,_i=vs.ReactCurrentBatchConfig,oe=0,rt=null,Be=null,ht=0,ri=0,da=mr(0),Qe=0,$c=null,Mo=0,Rf=0,wv=0,vc=null,Ut=null,bv=0,Cl=1/0,Pn=null,Gd=!1,pg=null,or=null,Rh=!1,er=null,Xd=0,yc=0,gg=null,Xh=-1,qh=0;function Rt(){return oe&6?je():Xh!==-1?Xh:Xh=je()}function ar(i){return i.mode&1?oe&2&&ht!==0?ht&-ht:US.transition!==null?(qh===0&&(qh=hw()),qh):(i=ge,i!==0||(i=window.event,i=i===void 0?16:yw(i.type)),i):1}function Qi(i,e,t,n){if(50<yc)throw yc=0,gg=null,Error(N(185));rh(i,t,n),(!(oe&2)||i!==rt)&&(i===rt&&(!(oe&2)&&(Rf|=t),Qe===4&&Es(i,ht)),qt(i,n),t===1&&oe===0&&!(e.mode&1)&&(Cl=je()+500,Cf&&vr()))}function qt(i,e){var t=i.callbackNode;U1(i,e);var n=Rd(i,i===rt?ht:0);if(n===0)t!==null&&c0(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&c0(t),e===1)i.tag===0?BS(ty.bind(null,i)):Ow(ty.bind(null,i)),jS(function(){!(oe&6)&&vr()}),t=null;else{switch(dw(n)){case 1:t=Gm;break;case 4:t=cw;break;case 16:t=Pd;break;case 536870912:t=uw;break;default:t=Pd}t=Fb(t,Tb.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function Tb(i,e){if(Xh=-1,qh=0,oe&6)throw Error(N(327));var t=i.callbackNode;if(wa()&&i.callbackNode!==t)return null;var n=Rd(i,i===rt?ht:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=qd(i,n);else{e=n;var s=oe;oe|=2;var r=Rb();(rt!==i||ht!==e)&&(Pn=null,Cl=je()+500,ko(i,e));do try{cE();break}catch(a){Pb(i,a)}while(!0);rv(),Vd.current=r,oe=s,Be!==null?e=0:(rt=null,ht=0,e=Qe)}if(e!==0){if(e===2&&(s=Bp(i),s!==0&&(n=s,e=mg(i,s))),e===1)throw t=$c,ko(i,0),Es(i,n),qt(i,je()),t;if(e===6)Es(i,n);else{if(s=i.current.alternate,!(n&30)&&!aE(s)&&(e=qd(i,n),e===2&&(r=Bp(i),r!==0&&(n=r,e=mg(i,r))),e===1))throw t=$c,ko(i,0),Es(i,n),qt(i,je()),t;switch(i.finishedWork=s,i.finishedLanes=n,e){case 0:case 1:throw Error(N(345));case 2:br(i,Ut,Pn);break;case 3:if(Es(i,n),(n&130023424)===n&&(e=bv+500-je(),10<e)){if(Rd(i,0)!==0)break;if(s=i.suspendedLanes,(s&n)!==n){Rt(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=Kp(br.bind(null,i,Ut,Pn),e);break}br(i,Ut,Pn);break;case 4:if(Es(i,n),(n&4194240)===n)break;for(e=i.eventTimes,s=-1;0<n;){var o=31-Ki(n);r=1<<o,o=e[o],o>s&&(s=o),n&=~r}if(n=s,n=je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*oE(n/1960))-n,10<n){i.timeoutHandle=Kp(br.bind(null,i,Ut,Pn),n);break}br(i,Ut,Pn);break;case 5:br(i,Ut,Pn);break;default:throw Error(N(329))}}}return qt(i,je()),i.callbackNode===t?Tb.bind(null,i):null}function mg(i,e){var t=vc;return i.current.memoizedState.isDehydrated&&(ko(i,e).flags|=256),i=qd(i,e),i!==2&&(e=Ut,Ut=t,e!==null&&vg(e)),i}function vg(i){Ut===null?Ut=i:Ut.push.apply(Ut,i)}function aE(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],r=s.getSnapshot;s=s.value;try{if(!Zi(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Es(i,e){for(e&=~wv,e&=~Rf,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-Ki(e),n=1<<t;i[t]=-1,e&=~n}}function ty(i){if(oe&6)throw Error(N(327));wa();var e=Rd(i,0);if(!(e&1))return qt(i,je()),null;var t=qd(i,e);if(i.tag!==0&&t===2){var n=Bp(i);n!==0&&(e=n,t=mg(i,n))}if(t===1)throw t=$c,ko(i,0),Es(i,e),qt(i,je()),t;if(t===6)throw Error(N(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,br(i,Ut,Pn),qt(i,je()),null}function xv(i,e){var t=oe;oe|=1;try{return i(e)}finally{oe=t,oe===0&&(Cl=je()+500,Cf&&vr())}}function No(i){er!==null&&er.tag===0&&!(oe&6)&&wa();var e=oe;oe|=1;var t=_i.transition,n=ge;try{if(_i.transition=null,ge=1,i)return i()}finally{ge=n,_i.transition=t,oe=e,!(oe&6)&&vr()}}function Av(){ri=da.current,Se(da)}function ko(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,OS(t)),Be!==null)for(t=Be.return;t!==null;){var n=t;switch(iv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fd();break;case 3:El(),Se(Gt),Se(Et),hv();break;case 5:uv(n);break;case 4:El();break;case 13:Se(Le);break;case 19:Se(Le);break;case 10:ov(n.type._context);break;case 22:case 23:Av()}t=t.return}if(rt=i,Be=i=lr(i.current,null),ht=ri=e,Qe=0,$c=null,wv=Rf=Mo=0,Ut=vc=null,Tr!==null){for(e=0;e<Tr.length;e++)if(t=Tr[e],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,n.next=o}t.pending=n}Tr=null}return i}function Pb(i,e){do{var t=Be;try{if(rv(),Wh.current=Wd,Ud){for(var n=Me.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ud=!1}if(Lo=0,st=Ye=Me=null,gc=!1,Dc=0,yv.current=null,t===null||t.return===null){Qe=1,$c=e,Be=null;break}e:{var r=i,o=t.return,a=t,c=e;if(e=ht,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=B0(o);if(p!==null){p.flags&=-257,U0(p,o,a,r,e),p.mode&1&&H0(r,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var w=new Set;w.add(c),e.updateQueue=w}else m.add(c);break e}else{if(!(e&1)){H0(r,u,e),Sv();break e}c=Error(N(426))}}else if(Ce&&a.mode&1){var E=B0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),U0(E,o,a,r,e),nv(_l(c,a));break e}}r=c=_l(c,a),Qe!==4&&(Qe=2),vc===null?vc=[r]:vc.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=db(r,c,e);F0(r,g);break e;case 1:a=c;var b=r.type,A=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(or===null||!or.has(A)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=fb(r,a,e);F0(r,S);break e}}r=r.return}while(r!==null)}Mb(t)}catch(T){e=T,Be===t&&t!==null&&(Be=t=t.return);continue}break}while(!0)}function Rb(){var i=Vd.current;return Vd.current=Wd,i===null?Wd:i}function Sv(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),rt===null||!(Mo&268435455)&&!(Rf&268435455)||Es(rt,ht)}function qd(i,e){var t=oe;oe|=2;var n=Rb();(rt!==i||ht!==e)&&(Pn=null,ko(i,e));do try{lE();break}catch(s){Pb(i,s)}while(!0);if(rv(),oe=t,Vd.current=n,Be!==null)throw Error(N(261));return rt=null,ht=0,Qe}function lE(){for(;Be!==null;)Lb(Be)}function cE(){for(;Be!==null&&!I1();)Lb(Be)}function Lb(i){var e=Ib(i.alternate,i,ri);i.memoizedProps=i.pendingProps,e===null?Mb(i):Be=e,yv.current=null}function Mb(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=iE(t,e),t!==null){t.flags&=32767,Be=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Qe=6,Be=null;return}}else if(t=tE(t,e,ri),t!==null){Be=t;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=i}while(e!==null);Qe===0&&(Qe=5)}function br(i,e,t){var n=ge,s=_i.transition;try{_i.transition=null,ge=1,uE(i,e,t,n)}finally{_i.transition=s,ge=n}return null}function uE(i,e,t,n){do wa();while(er!==null);if(oe&6)throw Error(N(327));t=i.finishedWork;var s=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(N(177));i.callbackNode=null,i.callbackPriority=0;var r=t.lanes|t.childLanes;if(W1(i,r),i===rt&&(Be=rt=null,ht=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Rh||(Rh=!0,Fb(Pd,function(){return wa(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=_i.transition,_i.transition=null;var o=ge;ge=1;var a=oe;oe|=4,yv.current=null,sE(i,t),Cb(t,i),RS(qp),Ld=!!Xp,qp=Xp=null,i.current=t,rE(t),F1(),oe=a,ge=o,_i.transition=r}else i.current=t;if(Rh&&(Rh=!1,er=i,Xd=s),r=i.pendingLanes,r===0&&(or=null),j1(t.stateNode),qt(i,je()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)s=e[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(Gd)throw Gd=!1,i=pg,pg=null,i;return Xd&1&&i.tag!==0&&wa(),r=i.pendingLanes,r&1?i===gg?yc++:(yc=0,gg=i):yc=0,vr(),null}function wa(){if(er!==null){var i=dw(Xd),e=_i.transition,t=ge;try{if(_i.transition=null,ge=16>i?16:i,er===null)var n=!1;else{if(i=er,er=null,Xd=0,oe&6)throw Error(N(331));var s=oe;for(oe|=4,j=i.current;j!==null;){var r=j,o=r.child;if(j.flags&16){var a=r.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(j=u;j!==null;){var h=j;switch(h.tag){case 0:case 11:case 15:mc(8,h,r)}var d=h.child;if(d!==null)d.return=h,j=d;else for(;j!==null;){h=j;var f=h.sibling,p=h.return;if(Sb(h),h===u){j=null;break}if(f!==null){f.return=p,j=f;break}j=p}}}var m=r.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}j=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,j=o;else e:for(;j!==null;){if(r=j,r.flags&2048)switch(r.tag){case 0:case 11:case 15:mc(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,j=g;break e}j=r.return}}var b=i.current;for(j=b;j!==null;){o=j;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,j=A;else e:for(o=b;j!==null;){if(a=j,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pf(9,a)}}catch(T){De(a,a.return,T)}if(a===o){j=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,j=S;break e}j=a.return}}if(oe=s,vr(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(xf,i)}catch{}n=!0}return n}finally{ge=t,_i.transition=e}}return!1}function iy(i,e,t){e=_l(t,e),e=db(i,e,1),i=rr(i,e,1),e=Rt(),i!==null&&(rh(i,1,e),qt(i,e))}function De(i,e,t){if(i.tag===3)iy(i,i,t);else for(;e!==null;){if(e.tag===3){iy(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(or===null||!or.has(n))){i=_l(t,i),i=fb(e,i,1),e=rr(e,i,1),i=Rt(),e!==null&&(rh(e,1,i),qt(e,i));break}}e=e.return}}function hE(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=Rt(),i.pingedLanes|=i.suspendedLanes&t,rt===i&&(ht&t)===t&&(Qe===4||Qe===3&&(ht&130023424)===ht&&500>je()-bv?ko(i,0):wv|=t),qt(i,e)}function Nb(i,e){e===0&&(i.mode&1?(e=bh,bh<<=1,!(bh&130023424)&&(bh=4194304)):e=1);var t=Rt();i=fs(i,e),i!==null&&(rh(i,e,t),qt(i,t))}function dE(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),Nb(i,t)}function fE(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(e),Nb(i,t)}var Ib;Ib=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Gt.current)Wt=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Wt=!1,eE(i,e,t);Wt=!!(i.flags&131072)}else Wt=!1,Ce&&e.flags&1048576&&jw(e,jd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Gh(i,e),i=e.pendingProps;var s=xl(e,Et.current);ya(e,t),s=fv(null,e,n,i,s,t);var r=pv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(n)?(r=!0,Dd(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lv(e),s.updater=Tf,e.stateNode=s,s._reactInternals=e,ng(e,n,i,t),e=og(null,e,n,!0,r,t)):(e.tag=0,Ce&&r&&tv(e),Tt(null,e,s,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Gh(i,e),i=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=gE(n),i=Mi(n,i),s){case 0:e=rg(null,e,n,i,t);break e;case 1:e=G0(null,e,n,i,t);break e;case 11:e=W0(null,e,n,i,t);break e;case 14:e=V0(null,e,n,Mi(n.type,i),t);break e}throw Error(N(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mi(n,s),rg(i,e,n,s,t);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mi(n,s),G0(i,e,n,s,t);case 3:e:{if(vb(e),i===null)throw Error(N(387));n=e.pendingProps,r=e.memoizedState,s=r.element,Ww(i,e),Hd(e,n,null,t);var o=e.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=_l(Error(N(423)),e),e=X0(i,e,n,t,s);break e}else if(n!==s){s=_l(Error(N(424)),e),e=X0(i,e,n,t,s);break e}else for(ai=sr(e.stateNode.containerInfo.firstChild),li=e,Ce=!0,qi=null,t=Bw(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Al(),n===s){e=ps(i,e,t);break e}Tt(i,e,n,t)}e=e.child}return e;case 5:return Vw(e),i===null&&eg(e),n=e.type,s=e.pendingProps,r=i!==null?i.memoizedProps:null,o=s.children,Yp(n,s)?o=null:r!==null&&Yp(n,r)&&(e.flags|=32),mb(i,e),Tt(i,e,o,t),e.child;case 6:return i===null&&eg(e),null;case 13:return yb(i,e,t);case 4:return cv(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Sl(e,null,n,t):Tt(i,e,n,t),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mi(n,s),W0(i,e,n,s,t);case 7:return Tt(i,e,e.pendingProps,t),e.child;case 8:return Tt(i,e,e.pendingProps.children,t),e.child;case 12:return Tt(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,be($d,n._currentValue),n._currentValue=o,r!==null)if(Zi(r.value,o)){if(r.children===s.children&&!Gt.current){e=ps(i,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(r.tag===1){c=os(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),tg(r.return,t,e),a.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(N(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),tg(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Tt(i,e,s.children,t),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ya(e,t),s=ki(s),n=n(s),e.flags|=1,Tt(i,e,n,t),e.child;case 14:return n=e.type,s=Mi(n,e.pendingProps),s=Mi(n.type,s),V0(i,e,n,s,t);case 15:return pb(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mi(n,s),Gh(i,e),e.tag=1,Xt(n)?(i=!0,Dd(e)):i=!1,ya(e,t),hb(e,n,s),ng(e,n,s,t),og(null,e,n,!0,i,t);case 19:return wb(i,e,t);case 22:return gb(i,e,t)}throw Error(N(156,e.tag))};function Fb(i,e){return lw(i,e)}function pE(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(i,e,t,n){return new pE(i,e,t,n)}function Ev(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gE(i){if(typeof i=="function")return Ev(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Um)return 11;if(i===Wm)return 14}return 2}function lr(i,e){var t=i.alternate;return t===null?(t=Ei(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function Yh(i,e,t,n,s,r){var o=2;if(n=i,typeof i=="function")Ev(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case ia:return To(t.children,s,r,e);case Bm:o=8,s|=8;break;case kp:return i=Ei(12,t,e,s|2),i.elementType=kp,i.lanes=r,i;case Tp:return i=Ei(13,t,e,s),i.elementType=Tp,i.lanes=r,i;case Pp:return i=Ei(19,t,e,s),i.elementType=Pp,i.lanes=r,i;case Vy:return Lf(t,s,r,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Uy:o=10;break e;case Wy:o=9;break e;case Um:o=11;break e;case Wm:o=14;break e;case xs:o=16,n=null;break e}throw Error(N(130,i==null?i:typeof i,""))}return e=Ei(o,t,e,s),e.elementType=i,e.type=n,e.lanes=r,e}function To(i,e,t,n){return i=Ei(7,i,n,e),i.lanes=t,i}function Lf(i,e,t,n){return i=Ei(22,i,n,e),i.elementType=Vy,i.lanes=t,i.stateNode={isHidden:!1},i}function yp(i,e,t){return i=Ei(6,i,null,e),i.lanes=t,i}function wp(i,e,t){return e=Ei(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function mE(i,e,t,n,s){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jf(0),this.expirationTimes=Jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jf(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _v(i,e,t,n,s,r,o,a,c){return i=new mE(i,e,t,a,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Ei(3,null,null,e),i.current=r,r.stateNode=i,r.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},lv(r),i}function vE(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function Db(i){if(!i)return ur;i=i._reactInternals;e:{if(Ho(i)!==i||i.tag!==1)throw Error(N(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(i.tag===1){var t=i.type;if(Xt(t))return Dw(i,t,e)}return e}function Ob(i,e,t,n,s,r,o,a,c){return i=_v(t,n,!0,i,s,r,o,a,c),i.context=Db(null),t=i.current,n=Rt(),s=ar(t),r=os(n,s),r.callback=e??null,rr(t,r,s),i.current.lanes=s,rh(i,s,n),qt(i,n),i}function Mf(i,e,t,n){var s=e.current,r=Rt(),o=ar(s);return t=Db(t),e.context===null?e.context=t:e.pendingContext=t,e=os(r,o),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=rr(s,e,o),i!==null&&(Qi(i,s,o,r),Uh(i,s,o)),o}function Yd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ny(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function Cv(i,e){ny(i,e),(i=i.alternate)&&ny(i,e)}function yE(){return null}var jb=typeof reportError=="function"?reportError:function(i){console.error(i)};function kv(i){this._internalRoot=i}Nf.prototype.render=kv.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(N(409));Mf(i,e,null,null)};Nf.prototype.unmount=kv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;No(function(){Mf(null,i,null,null)}),e[ds]=null}};function Nf(i){this._internalRoot=i}Nf.prototype.unstable_scheduleHydration=function(i){if(i){var e=gw();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Ss.length&&e!==0&&e<Ss[t].priority;t++);Ss.splice(t,0,i),t===0&&vw(i)}};function Tv(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function If(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function sy(){}function wE(i,e,t,n,s){if(s){if(typeof n=="function"){var r=n;n=function(){var u=Yd(o);r.call(u)}}var o=Ob(e,n,i,0,null,!1,!1,"",sy);return i._reactRootContainer=o,i[ds]=o.current,Lc(i.nodeType===8?i.parentNode:i),No(),o}for(;s=i.lastChild;)i.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=Yd(c);a.call(u)}}var c=_v(i,0,!1,null,null,!1,!1,"",sy);return i._reactRootContainer=c,i[ds]=c.current,Lc(i.nodeType===8?i.parentNode:i),No(function(){Mf(e,c,t,n)}),c}function Ff(i,e,t,n,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var c=Yd(o);a.call(c)}}Mf(e,o,i,s)}else o=wE(t,e,i,s,n);return Yd(o)}fw=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vl(e.pendingLanes);t!==0&&(Xm(e,t|1),qt(e,je()),!(oe&6)&&(Cl=je()+500,vr()))}break;case 13:No(function(){var n=fs(i,1);if(n!==null){var s=Rt();Qi(n,i,1,s)}}),Cv(i,1)}};qm=function(i){if(i.tag===13){var e=fs(i,134217728);if(e!==null){var t=Rt();Qi(e,i,134217728,t)}Cv(i,134217728)}};pw=function(i){if(i.tag===13){var e=ar(i),t=fs(i,e);if(t!==null){var n=Rt();Qi(t,i,e,n)}Cv(i,e)}};gw=function(){return ge};mw=function(i,e){var t=ge;try{return ge=i,e()}finally{ge=t}};$p=function(i,e,t){switch(e){case"input":if(Mp(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var s=_f(n);if(!s)throw Error(N(90));Xy(n),Mp(n,s)}}}break;case"textarea":Yy(i,t);break;case"select":e=t.value,e!=null&&pa(i,!!t.multiple,e,!1)}};iw=xv;nw=No;var bE={usingClientEntryPoint:!1,Events:[ah,oa,_f,ew,tw,xv]},$l={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xE={bundleType:$l.bundleType,version:$l.version,rendererPackageName:$l.rendererPackageName,rendererConfig:$l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=ow(i),i===null?null:i.stateNode},findFiberByHostInstance:$l.findFiberByHostInstance||yE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{xf=Lh.inject(xE),Sn=Lh}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bE;hi.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tv(e))throw Error(N(200));return vE(i,e,null,t)};hi.createRoot=function(i,e){if(!Tv(i))throw Error(N(299));var t=!1,n="",s=jb;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_v(i,1,!1,null,null,t,!1,n,s),i[ds]=e.current,Lc(i.nodeType===8?i.parentNode:i),new kv(e)};hi.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(N(188)):(i=Object.keys(i).join(","),Error(N(268,i)));return i=ow(e),i=i===null?null:i.stateNode,i};hi.flushSync=function(i){return No(i)};hi.hydrate=function(i,e,t){if(!If(e))throw Error(N(200));return Ff(null,i,e,!0,t)};hi.hydrateRoot=function(i,e,t){if(!Tv(i))throw Error(N(405));var n=t!=null&&t.hydratedSources||null,s=!1,r="",o=jb;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Ob(e,null,i,1,t??null,s,!1,r,o),i[ds]=e.current,Lc(i),n)for(i=0;i<n.length;i++)t=n[i],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Nf(e)};hi.render=function(i,e,t){if(!If(e))throw Error(N(200));return Ff(null,i,e,!1,t)};hi.unmountComponentAtNode=function(i){if(!If(i))throw Error(N(40));return i._reactRootContainer?(No(function(){Ff(null,null,i,!1,function(){i._reactRootContainer=null,i[ds]=null})}),!0):!1};hi.unstable_batchedUpdates=xv;hi.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!If(t))throw Error(N(200));if(i==null||i._reactInternals===void 0)throw Error(N(38));return Ff(i,e,t,!1,n)};hi.version="18.3.1-next-f1338f8080-20240426";function $b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($b)}catch(i){console.error(i)}}$b(),$y.exports=hi;var AE=$y.exports,zb,ry=AE;zb=ry.createRoot,ry.hydrateRoot;var SE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EE=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_E=(i,e)=>{const t=U.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,children:a,...c},u)=>U.createElement("svg",{ref:u,...SE,width:s,height:s,stroke:n,strokeWidth:o?Number(r)*24/Number(s):r,className:`lucide lucide-${EE(i)}`,...c},[...e.map(([h,d])=>U.createElement(h,d)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${i}`,t};var fi=_E;const CE=fi("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),kE=fi("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Pv=fi("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),TE=fi("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Df=fi("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),PE=fi("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),RE=fi("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),LE=fi("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Rv=fi("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ME=fi("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),NE=fi("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Lv=fi("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),IE=fi("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);class ch{constructor(e,t,n){this.id=e,this.name=t,this.description=n}generateHTML(e,t,n,s=!1){var a;const r=this.generateStyles(t,s),o=this.generateBody(e,n);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${((a=e.personalDetails)==null?void 0:a.name)||"CV"}</title>
    <style>
        ${r}
    </style>
</head>
<body>
    ${o}
</body>
</html>`}generateStyles(e,t=!1){throw new Error("generateStyles must be implemented by subclass")}generateBody(e,t){throw new Error("generateBody must be implemented by subclass")}shouldRenderSection(e,t,n){var s,r,o,a,c,u,h,d,f;if(!t.includes(e))return!1;switch(e){case"personal":return((s=n.personalDetails)==null?void 0:s.name)||((r=n.personalDetails)==null?void 0:r.email);case"profile":return(o=n.profile)==null?void 0:o.trim();case"experience":return((a=n.workExperience)==null?void 0:a.length)>0;case"projects":return((c=n.personalProjects)==null?void 0:c.length)>0;case"certificates":return((u=n.certificates)==null?void 0:u.length)>0;case"education":return((h=n.education)==null?void 0:h.degree)||((d=n.education)==null?void 0:d.university);case"courses":return(f=n.courses)==null?void 0:f.trim();default:return!1}}getColorScheme(e,t=!1){const n={primaryText:"#1a202c",secondaryText:"#4a5568",mutedText:"#718096",background:"#ffffff",cardBackground:"#f7fafc",accentPrimary:"#4299e1",accentSecondary:"#3182ce",accentGradientStart:"#667eea",accentGradientEnd:"#764ba2",borderColor:"#e2e8f0",borderAccent:"#4299e1"};return t?n:e==="dark"?{...n,primaryText:"#f7fafc",secondaryText:"#e2e8f0",mutedText:"#cbd5e0",background:"#1a202c",cardBackground:"#2d3748",borderColor:"#4a5568"}:n}}class FE{constructor(){this.templates=new Map}registerTemplate(e){if(!(e instanceof ch))throw new Error("Template must extend CVTemplate class");this.templates.set(e.id,e)}getTemplate(e){const t=this.templates.get(e);if(!t){const n=Array.from(this.templates.values())[0];if(n)return console.warn(`Template with ID "${e}" not found, falling back to ${n.id}`),n;throw new Error(`Template with ID "${e}" not found and no fallback available`)}return t}getAllTemplates(){return Array.from(this.templates.values())}getTemplateOptions(){return this.getAllTemplates().map(e=>({value:e.id,label:e.name,description:e.description}))}generateHTML(e,t,n="light",s=[]){return this.getTemplate(e).generateHTML(t,n,s,!1)}generateExportHTML(e,t,n=[]){return this.getTemplate(e).generateHTML(t,"light",n,!0)}hasTemplate(e){return this.templates.has(e)}getTemplateInfo(e){const t=this.templates.get(e);return t?{id:t.id,name:t.name,description:t.description}:null}getTemplateCount(){return this.templates.size}clearTemplates(){this.templates.clear()}getTemplateIds(){return Array.from(this.templates.keys())}}class DE extends ch{constructor(){super("rich-professional","Rich Professional","Professional classic two-column layout with sidebar for personal details")}generateStyles(e,t=!1){const n=this.getColorScheme(e,t),s=800,r=10,o=16,a=260,c=.92,u=`
      * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    `,h=t?`
      .cv-container {
        max-width: ${s}px !important;
        width: 100% !important;
        margin: 0 auto !important;
        padding: 22px !important; /* slightly tighter padding */
      }
    `:"";return`
      ${u}

      .cv-container {
        text-align: initial;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        font-size: ${c}em;
        line-height: 1.5;                     /* a touch tighter */
        color: ${n.primaryText};
        background: ${n.background};
        padding: 22px;                        /* a touch tighter */
        max-width: ${s}px;
        margin: 0 auto;
        border-radius: ${r}px;
        overflow: hidden;
      }

      /* Name header */
      .cv-container .name-header {
        text-align: center;
        margin-bottom: ${o}px;
      }
      .cv-container .name-header h1 {
        margin: 0;
        font-size: 1.9em;                     /* slightly smaller */
        letter-spacing: 0.4px;
        font-weight: 800;
        color: ${n.primaryText};
      }

      /* Two-column grid */
      .cv-container .layout {
        display: grid;
        grid-template-columns: ${a}px 1fr;
        gap: ${o}px;
      }

      /* Sidebar */
      .cv-container .sidebar {
        border: 1px solid ${n.borderColor};
        border-radius: ${r}px;
        background: ${n.cardBackground};
        padding: 12px 12px;                   /* tighter */
      }
      .cv-container .sidebar .sidebar-title {
        font-size: 0.92em;                    /* smaller title */
        font-weight: 800;
        text-transform: uppercase;
        color: ${n.primaryText};
        border-bottom: 2px solid ${n.borderAccent};
        padding-bottom: 6px;
        margin-bottom: 8px;
      }
      .cv-container .sidebar .kv { margin-bottom: 8px; }
      .cv-container .sidebar .kv .label {
        display: block;
        font-size: 0.78em;                    /* smaller label */
        text-transform: uppercase;
        color: ${n.mutedText};
        letter-spacing: 0.35px;
      }
      .cv-container .sidebar .kv .value {
        display: block;
        font-weight: 700;
        color: ${n.primaryText};
        margin-top: 2px;
        word-break: break-word;
      }
      .cv-container .sidebar ul { list-style: none; padding: 0; margin: 0; }
      .cv-container .sidebar li { margin: 5px 0; color: ${n.secondaryText}; }

      /* Main sections */
      .cv-container .main .section {
        border: 1px solid ${n.borderColor};
        border-radius: ${r}px;
        background: ${n.cardBackground};
        padding: 14px 16px;                   /* tighter */
        margin-bottom: ${o}px;
      }
      .cv-container .main .section-title {
        display: inline-block;
        font-size: 0.98em;                    /* tighter */
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.28px;
        color: ${n.primaryText};
        border-bottom: 2px solid ${n.borderAccent};
        padding-bottom: 5px;
        margin-bottom: 8px;
      }

      /* Work Experience: extra-tight rhythm */
      .cv-container .section-experience .item { margin-bottom: 30px; }
      .cv-container .section-experience .job-head {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        align-items: baseline;
        flex-wrap: wrap;
      }
      .cv-container .section-experience .job-title {
        font-weight: 700;
        color: ${n.primaryText};
      }
      .cv-container .section-experience .job-meta {
        color: ${n.mutedText};
        font-weight: 600;
        font-size: 0.92em;                    /* slightly smaller meta */
      }
      .cv-container .section-experience .description {
        margin-top: 4px;                      /* tighter */
        color: ${n.secondaryText};
        white-space: pre-line;
      }
      .cv-container .section-experience ul.bullets {
        margin-top: 4px;                      /* tighter */
        margin-bottom: 0;
        padding-left: 16px;                   /* smaller indent */
      }
      .cv-container .section-experience ul.bullets li {
        margin-bottom: 2px;                   /* tighter */
        color: ${n.secondaryText};
      }

      /* Generic items (non-experience) */
      .cv-container .item { margin-bottom: 12px; }
      .cv-container .item:last-child { margin-bottom: 0; }

      .cv-container .job-head {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: baseline;
        flex-wrap: wrap;
      }
      .cv-container .job-title { font-weight: 700; color: ${n.primaryText}; }
      .cv-container .job-meta { color: ${n.mutedText}; font-weight: 600; }
      .cv-container .description { margin-top: 6px; color: ${n.secondaryText}; white-space: pre-line; }

      .cv-container ul.bullets { margin-top: 6px; margin-bottom: 0; padding-left: 18px; }
      .cv-container ul.bullets li { margin-bottom: 4px; color: ${n.secondaryText}; }

      ${h}

      @media print {
        .cv-container {
          max-width: ${s}px !important;
          margin: 0 auto !important;
        }
      }
    `}generateBody(e,t){const n=e.personalDetails||{},s=o=>this.shouldRenderSection(o,t,e);let r='<div class="cv-container">';if(r+=`
      <div class="name-header">
        <h1>${n.name||""}</h1>
      </div>
    `,r+='<div class="layout">',r+='<aside class="sidebar">',s("personal")&&(r+='<div class="sidebar-title">Personal Details</div>',[["Name",n.name],["Address",n.address],["Phone",n.phone],["Email",n.email],["Website",n.website]].filter(([,a])=>a).forEach(([a,c])=>{r+=`
          <div class="kv">
            <span class="label">${a}</span>
            <span class="value">${c}</span>
          </div>
        `})),r+="</aside>",r+='<main class="main">',s("profile")&&(r+=`
        <section class="section">
          <div class="section-title">Professional Profile</div>
          <div class="description">${e.profile||""}</div>
        </section>
      `),s("experience")&&(r+='<section class="section section-experience"><div class="section-title">Work Experience</div>',(e.workExperience||[]).forEach(o=>{const a=o.title||"",c=[o.company,o.dates].filter(Boolean).join(" • ");r+=`
          <div class="item">
            <div class="job-head">
              <div class="job-title">${a}</div>
              <div class="job-meta">${c}</div>
            </div>
            ${o.description?`<div class="description">${o.description}</div>`:""}
            ${o.responsibilities&&o.responsibilities.length?`<ul class="bullets">${o.responsibilities.map(u=>u!=null&&u.trim()?`<li>${u}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),r+="</section>"),s("projects")&&(r+='<section class="section"><div class="section-title">Personal Projects</div>',(e.personalProjects||[]).forEach(o=>{r+=`
          <div class="item">
            <div class="job-head">
              <div class="job-title">${o.title||""}</div>
              <div class="job-meta">${o.technologies||""}</div>
            </div>
            ${o.responsibilities&&o.responsibilities.length?`<ul class="bullets">${o.responsibilities.map(a=>a!=null&&a.trim()?`<li>${a}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),r+="</section>"),s("education")){const o=e.education||{},a=[o.university,o.dates,o.grade].filter(Boolean).join(" • ");r+=`
        <section class="section">
          <div class="section-title">Education</div>
          <div class="item">
            <div class="job-head">
              <div class="job-title">${o.degree||""}</div>
              <div class="job-meta">${a}</div>
            </div>
          </div>
        </section>
      `}return s("certificates")&&(r+='<section class="section"><div class="section-title">Certificates</div>',(e.certificates||[]).forEach(o=>{r+=`
          <div class="item">
            <div class="job-title">${o.title||""}</div>
            ${o.description?`<div class="description">${o.description}</div>`:""}
          </div>
        `}),r+="</section>"),s("courses")&&(r+=`
        <section class="section">
          <div class="section-title">Courses & Qualifications</div>
          <div class="description">${e.courses||""}</div>
        </section>
      `),r+="</main></div></div>",r}}class OE extends ch{constructor(){super("plain-professional","Plain Professional","Clean, minimal template suitable for ATS systems")}generateStyles(e,t=!1){const n=this.getColorScheme(e,t);return`
        /* Reset for CV preview - scoped to prevent editor interference */
        .cv-container * {
         font-size: 0.95em;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            text-align: left;
        }

        /* All styles scoped to .cv-container to prevent editor interference */
        .cv-container {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: ${n.primaryText};
            background: ${n.background};
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Header styling - always left aligned for consistent layout */
        .cv-container .header {
            text-align: left;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid ${n.borderAccent};
        }

        .cv-container .header h1 {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: ${n.primaryText};
            text-align: left;
        }

        .cv-container .contact-info {
            line-height: 1.4;
            color: ${n.secondaryText};
            text-align: left;
        }

        .cv-container .content {
            max-width: 100%;
        }

        .cv-container .section {
            margin-bottom: 25px;
        }

        .cv-container .section-title {
            font-size: 1.3em;
            font-weight: bold;
            color: ${n.primaryText};
            margin-bottom: 15px;
            text-transform: uppercase;
            border-bottom: 1px solid ${n.borderAccent};
            padding-bottom: 5px;
            text-align: left;
        }

        .cv-container .profile {
            line-height: 1.6;
            text-align: left;
            margin-bottom: 15px;
            white-space: pre-line;
            color: ${n.secondaryText};
        }

        .cv-container .job, 
        .cv-container .project, 
        .cv-container .certificate {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dotted ${n.borderColor};
            text-align: left;
        }

        .cv-container .job:last-child, 
        .cv-container .project:last-child, 
        .cv-container .certificate:last-child {
            border-bottom: none;
        }

        .cv-container .job-title, 
        .cv-container .project-title, 
        .cv-container .certificate-title {
            font-weight: bold;
            color: ${n.primaryText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .job-company, 
        .cv-container .project-tech {
            font-weight: bold;
            color: ${n.mutedText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .job-dates {
            color: ${n.mutedText};
            font-style: italic;
            margin-bottom: 8px;
            text-align: left;
        }

        .cv-container .job-description, 
        .cv-container .certificate-description {
            margin-bottom: 8px;
            color: ${n.secondaryText};
            white-space: pre-line;
            text-align: left;
        }

        .cv-container .responsibilities {
            list-style: disc;
            padding-left: 20px;
            margin: 0;
            text-align: left;
        }

        .cv-container .responsibilities li {
            margin-bottom: 3px;
            color: ${n.secondaryText};
            text-align: left;
        }

        .cv-container .education-item {
            margin-bottom: 15px;
            text-align: left;
        }

        .cv-container .degree {
            font-weight: bold;
            color: ${n.primaryText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .university {
            font-weight: bold;
            color: ${n.mutedText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .education-dates, 
        .cv-container .education-grade {
            color: ${n.mutedText};
            margin-bottom: 3px;
            text-align: left;
        }

        .cv-container .courses-content {
            line-height: 1.6;
            white-space: pre-line;
            color: ${n.secondaryText};
            text-align: left;
        }

        /* Print styles - maintain exact same layout as screen */
        @media print {
            .cv-container {
                padding: 10px;
                background: white !important;
                color: #1a202c !important;
                max-width: none !important;
            }

            .cv-container .header {
                border-bottom: 2px solid #4299e1 !important;
                text-align: left !important;
            }

            .cv-container .header h1 {
                color: #1a202c !important;
                text-align: left !important;
            }

            .cv-container .contact-info {
                color: #4a5568 !important;
                text-align: left !important;
            }

            .cv-container .section-title {
                color: #1a202c !important;
                border-bottom: 1px solid #4299e1 !important;
                text-align: left !important;
            }

            .cv-container .job-title, 
            .cv-container .project-title, 
            .cv-container .certificate-title, 
            .cv-container .degree {
                color: #1a202c !important;
                text-align: left !important;
            }

            .cv-container .job-company,
            .cv-container .project-tech,
            .cv-container .university,
            .cv-container .job-dates,
            .cv-container .education-dates,
            .cv-container .education-grade {
                color: #718096 !important;
                text-align: left !important;
            }

            .cv-container .profile,
            .cv-container .job-description,
            .cv-container .certificate-description,
            .cv-container .courses-content,
            .cv-container .responsibilities li {
                color: #4a5568 !important;
                text-align: left !important;
            }

            /* Ensure all elements maintain left alignment in print */
            .cv-container * {
                text-align: left !important;
            }
        }
    `}generateBody(e,t){var s,r,o,a,c,u,h,d,f,p,m,w;let n='<div class="cv-container">';return this.shouldRenderSection("personal",t,e)&&(n+=`
        <div class="header">
          <h1>${((s=e.personalDetails)==null?void 0:s.name)||""}</h1>
          <div class="contact-info">
            ${((r=e.personalDetails)==null?void 0:r.phone)||""}${(o=e.personalDetails)!=null&&o.phone&&((a=e.personalDetails)!=null&&a.email)?" | ":""}
            ${((c=e.personalDetails)==null?void 0:c.email)||""}${((u=e.personalDetails)!=null&&u.phone||(h=e.personalDetails)!=null&&h.email)&&((d=e.personalDetails)!=null&&d.address)?"<br>":""}
            ${((f=e.personalDetails)==null?void 0:f.address)||""}${(p=e.personalDetails)!=null&&p.address&&((m=e.personalDetails)!=null&&m.website)?"<br>":""}
            ${((w=e.personalDetails)==null?void 0:w.website)||""}
          </div>
        </div>
      `),n+='<div class="content">',t.forEach(E=>{var g,b,A,S,T,_,C;switch(E){case"profile":this.shouldRenderSection("profile",t,e)&&(n+=`
              <div class="section">
                <h2 class="section-title">Professional Profile</h2>
                <div class="profile">${e.profile||""}</div>
              </div>
            `);break;case"experience":this.shouldRenderSection("experience",t,e)&&(n+='<div class="section"><h2 class="section-title">Work Experience</h2>',(g=e.workExperience)==null||g.forEach(k=>{var R;n+=`
                <div class="job">
                  <div class="job-title">${k.title||""}</div>
                  <div class="job-company">${k.company||""}</div>
                  <div class="job-dates">${k.dates||""}</div>
                  ${k.description?`<div class="job-description">${k.description}</div>`:""}
                  ${((R=k.responsibilities)==null?void 0:R.length)>0?`
                    <ul class="responsibilities">
                      ${k.responsibilities.map(L=>L.trim()?`<li>${L}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),n+="</div>");break;case"projects":this.shouldRenderSection("projects",t,e)&&(n+='<div class="section"><h2 class="section-title">Personal Projects</h2>',(b=e.personalProjects)==null||b.forEach(k=>{var R;n+=`
                <div class="project">
                  <div class="project-title">${k.title||""}</div>
                  <div class="project-tech">${k.technologies||""}</div>
                  ${((R=k.responsibilities)==null?void 0:R.length)>0?`
                    <ul class="responsibilities">
                      ${k.responsibilities.map(L=>L.trim()?`<li>${L}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),n+="</div>");break;case"education":this.shouldRenderSection("education",t,e)&&(n+=`
              <div class="section">
                <h2 class="section-title">Education</h2>
                <div class="education-item">
                  <div class="degree">${((A=e.education)==null?void 0:A.degree)||""}</div>
                  <div class="university">${((S=e.education)==null?void 0:S.university)||""}</div>
                  <div class="education-dates">${((T=e.education)==null?void 0:T.dates)||""}</div>
                  <div class="education-grade">${((_=e.education)==null?void 0:_.grade)||""}</div>
                </div>
              </div>
            `);break;case"certificates":this.shouldRenderSection("certificates",t,e)&&(n+='<div class="section"><h2 class="section-title">Certificates</h2>',(C=e.certificates)==null||C.forEach(k=>{n+=`
                <div class="certificate">
                  <div class="certificate-title">${k.title||""}</div>
                  <div class="certificate-description">${k.description||""}</div>
                </div>
              `}),n+="</div>");break;case"courses":this.shouldRenderSection("courses",t,e)&&(n+=`
              <div class="section">
                <h2 class="section-title">Additional Courses</h2>
                <div class="courses-content">${e.courses||""}</div>
              </div>
            `);break}}),n+="</div></div>",n}}class jE extends ch{constructor(){super("modern-creative","Modern Creative","Polished, modern layout with strong accents")}generateStyles(e,t=!1){const n=this.getColorScheme(e,t),s=14,r=`
      * {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    `,o=t?`
      .cv-container {
        max-width: 800px !important;   /* match preview exactly */
        width: 100% !important;
        margin: 0 auto !important;
        padding: 24px !important;
        /* keep same background, shadows, radius as preview */
      }
      /* drop blur for PDF reliability (both markups) */
      .cv-container .contact .chip,
      .cv-container .contact-info .contact-item {
        backdrop-filter: none !important;
        background: #eef2ff !important;      /* soft indigo */
        color: #1f2937 !important;           /* slate-800 */
        border: 1px solid #c7d2fe !important;/* indigo-200 */
      }
    `:"";return`
      ${r}

      /* Root container */
      .cv-container {
        font-size: 0.95em;
        text-align: initial; /* fence off app-level alignments */
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        line-height: 1.55;
        color: ${n.primaryText};
        background: ${n.background};
        padding: 24px;
        max-width: 800px;
        margin: 0 auto;
        border-radius: ${s}px;
        overflow: hidden;
      }

      /* Header wrapper card (with border) */
      .cv-container .header {
        border-radius: ${s}px;
        overflow: hidden;
        margin-bottom: 24px;
        border: 1px solid ${n.borderColor};
        background: ${n.cardBackground};
      }

      /* Gradient header bar — support BOTH markups */
      /* New style: .header-bar */
      .cv-container .header-bar {
        background: linear-gradient(135deg, ${n.accentGradientStart}, ${n.accentGradientEnd});
        padding: 18px 20px;
        color: #fff;
        text-align: center;
      }
      .cv-container .header-bar h1 {
        margin: 0;
        font-size: 1.8em;
        font-weight: 800;
        letter-spacing: .2px;
   
        text-shadow: 0 1px 2px rgba(0,0,0,.20);
        display: inline-block;
      }

      /* Old style (no .header-bar): style .header directly */
      .cv-container .header > h1 {
        background: linear-gradient(135deg, ${n.accentGradientStart}, ${n.accentGradientEnd});
        -webkit-background-clip: text;
        background-clip: text;
        display: block;
        text-align: center;
        margin: 18px 20px 0 20px;
        font-size: 1.8em;
        font-weight: 800;
        letter-spacing: .2px;
        text-shadow: 0 1px 2px rgba(0,0,0,.10);
      }

      /* Contact row — support BOTH markups */
      .cv-container .contact,
      .cv-container .contact-info {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 8px 10px;
        padding: 14px 20px 18px;
      }

      /* Contact chips — BOTH markups */
      .cv-container .contact .chip,
      .cv-container .contact-info .contact-item {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,.35);
        background: rgba(255,255,255,.18);
        backdrop-filter: blur(10px); /* pretty in preview; disabled in exportTweaks */
        font-weight: 600;
      }

      /* Sections */
      .cv-container .section {
        border: 1px solid ${n.borderColor};
        border-radius: ${s}px;
        padding: 18px 20px;
        margin-bottom: 18px;
        background: ${n.cardBackground};
      }
      .cv-container .section-title {
        display: inline-block;
        font-size: 1.00em;
        font-weight: 800;
        letter-spacing: .3px;
        text-transform: uppercase;
        color: ${n.primaryText};
        border-bottom: 2px solid ${n.borderAccent};
        padding-bottom: 6px;
        margin-bottom: 12px;
      }

      /* Items & text */
      .cv-container .item { margin-bottom: 30px; }
      .cv-container .item:last-child { margin-bottom: 0; }
      .cv-container .job-title,
      .cv-container .project-title,
      .cv-container .certificate-title,
      .cv-container .degree {
        font-weight: 700; color: ${n.primaryText};
      }
      .cv-container .meta {
        color: ${n.mutedText}; font-weight: 600; margin-top: 2px;
      }
      .cv-container .description {
        margin-top: 6px; color: ${n.secondaryText}; white-space: pre-line;
      }
      .cv-container ul.bullets { margin-top: 6px; margin-bottom: 0; padding-left: 20px; }
      .cv-container ul.bullets li { margin-bottom: 4px; color: ${n.secondaryText}; }

      ${o}

      /* Safety net for print paths that honour @media print */
      @media print {
        .cv-container {
          max-width: 800px !important;
          margin: 0 auto !important;
          border-radius: ${s}px !important;
        }
        .cv-container .header,
        .cv-container .section {
          border-radius: ${s}px !important;
        }
      }
    `}generateBody(e,t){const n=e.personalDetails||{};let s='<div class="cv-container">';if(this.shouldRenderSection("personal",t,e)&&(s+=`
        <div class="header">
          <div class="header-bar">
            <h1>${n.name||""}</h1>
          </div>
          <div class="contact-info">
            ${n.phone?`<span class="contact-item">📱 ${n.phone}</span>`:""}
            ${n.email?`<span class="contact-item">✉️ ${n.email}</span>`:""}
            ${n.website?`<span class="contact-item">🌐 ${n.website}</span>`:""}
            ${n.address?`<span class="contact-item">📍 ${n.address}</span>`:""}
          </div>
        </div>
      `),this.shouldRenderSection("profile",t,e)&&(s+=`
        <div class="section">
          <div class="section-title">Professional Profile</div>
          <div class="description">${e.profile||""}</div>
        </div>
      `),this.shouldRenderSection("experience",t,e)&&(s+='<div class="section"><div class="section-title">Work Experience</div>',(e.workExperience||[]).forEach(r=>{s+=`
          <div class="item">
            <div class="job-title">${r.title||""}</div>
            <div class="meta">${[r.company,r.dates].filter(Boolean).join(" • ")}</div>
            ${r.description?`<div class="description">${r.description}</div>`:""}
            ${r.responsibilities&&r.responsibilities.length?`<ul class="bullets">${r.responsibilities.map(o=>o!=null&&o.trim()?`<li>${o}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),s+="</div>"),this.shouldRenderSection("projects",t,e)&&(s+='<div class="section"><div class="section-title">Personal Projects</div>',(e.personalProjects||[]).forEach(r=>{s+=`
          <div class="item">
            <div class="project-title">${r.title||""}</div>
            <div class="meta">${r.technologies||""}</div>
            ${r.responsibilities&&r.responsibilities.length?`<ul class="bullets">${r.responsibilities.map(o=>o!=null&&o.trim()?`<li>${o}</li>`:"").join("")}</ul>`:""}
          </div>
        `}),s+="</div>"),this.shouldRenderSection("education",t,e)){const r=e.education||{};s+=`
        <div class="section">
          <div class="section-title">Education</div>
          <div class="item">
            <div class="degree">${r.degree||""}</div>
            <div class="meta">${[r.university,r.dates,r.grade].filter(Boolean).join(" • ")}</div>
          </div>
        </div>
      `}return this.shouldRenderSection("certificates",t,e)&&(s+='<div class="section"><div class="section-title">Certificates</div>',(e.certificates||[]).forEach(r=>{s+=`
          <div class="item">
            <div class="certificate-title">${r.title||""}</div>
            ${r.description?`<div class="description">${r.description}</div>`:""}
          </div>
        `}),s+="</div>"),this.shouldRenderSection("courses",t,e)&&(s+=`
        <div class="section">
          <div class="section-title">Additional Courses</div>
          <div class="description">${e.courses||""}</div>
        </div>
      `),s+="</div>",s}}class $E extends ch{constructor(){super("minimal-executive","Minimal Executive","Clean, sophisticated design for executive-level positions")}generateStyles(e){const t=e==="dark";return`
        /* Reset for CV preview - scoped to prevent editor interference */
        .cv-container * {
            font-size: 0.95em;
              text-align: left;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* All styles scoped to .cv-container to prevent editor interference */
        .cv-container {
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            color: ${t?"#f3f4f6":"#1a202c"};
            background: ${t?"#1a202c":"#ffffff"};
    
            max-width: 750px;
            margin: 0 auto;
        }

        .cv-container .header {
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 3px solid ${t?"#4a5568":"#1a202c"};
        }

        .cv-container .header h1 {
            font-size: 2.8em;
            font-weight: normal;
            margin-bottom: 15px;
            color: ${t?"#f7fafc":"#1a202c"};
            letter-spacing: 2px;
        }

        .cv-container .contact-info {
            line-height: 1.8;
            color: ${t?"#cbd5e0":"#4a5568"};
        }

        .cv-container .contact-info div {
            margin-bottom: 5px;
        }

        .cv-container .content {
            max-width: 100%;
        }

        .cv-container .section {
            margin-bottom: 45px;
        }

        .cv-container .section-title {
            font-size: 1.4em;
            font-weight: normal;
            color: ${t?"#f7fafc":"#1a202c"};
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 3px;
            position: relative;
        }

        .cv-container .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 1px;
            background: ${t?"#4a5568":"#1a202c"};
        }

        .cv-container .profile {
            line-height: 1.8;
            margin-bottom: 20px;
            color: ${t?"#cbd5e0":"#2d3748"};
            max-width: 90%;
            white-space: pre-line;
        }

        .cv-container .job, 
        .cv-container .project, 
        .cv-container .certificate {
            margin-bottom: 35px;
            text-align: left;
        }

        .cv-container .job-title, 
        .cv-container .project-title, 
        .cv-container .certificate-title {
            font-weight: bold;
            color: ${t?"#f7fafc":"#1a202c"};
            margin-bottom: 5px;
        }

        .cv-container .job-company, 
        .cv-container .project-tech {
            font-style: italic;
            color: ${t?"#a0aec0":"#4a5568"};
            margin-bottom: 5px;
        }

        .cv-container .job-dates {
            color: ${t?"#a0aec0":"#718096"};
            margin-bottom: 10px;
        }

        .cv-container .job-description, 
        .cv-container .certificate-description {
            color: ${t?"#cbd5e0":"#4a5568"};
            margin-bottom: 10px;
            line-height: 1.7;
            white-space: pre-line;
        }

        .cv-container .responsibilities {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .cv-container .responsibilities li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 6px;
            color: ${t?"#cbd5e0":"#4a5568"};
            line-height: 1.6;
        }

        .cv-container .responsibilities li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: ${t?"#a0aec0":"#718096"};
        }

        .cv-container .education-item {
            margin-bottom: 15px;
            text-align: left;
        }

        .cv-container .degree {
            font-weight: bold;
            color: ${t?"#f7fafc":"#1a202c"};
            margin-bottom: 5px;
        }

        .cv-container .university {
            font-style: italic;
            color: ${t?"#a0aec0":"#4a5568"};
            margin-bottom: 5px;
        }

        .cv-container .education-dates, 
        .cv-container .education-grade {
            color: ${t?"#a0aec0":"#718096"};
            margin-bottom: 5px;
        }

        .cv-container .courses-content {
            line-height: 1.7;
            color: ${t?"#cbd5e0":"#4a5568"};
            white-space: pre-line;
            max-width: 90%;
        }

        /* Print styles scoped to cv-container */
        @media print {
            .cv-container {
                padding: 20px;
                background: white;
                color: black;
            }

            .cv-container .header {
                border-bottom: 3px solid #1a202c;
            }

            .cv-container .section-title {
                color: #1a202c;
            }

            .cv-container .section-title::after {
                background: #1a202c;
            }

            .cv-container .job-title, 
            .cv-container .project-title, 
            .cv-container .certificate-title, 
            .cv-container .degree {
                color: #1a202c;
            }
        }
    `}generateBody(e,t){var s,r,o,a,c;let n='<div class="cv-container">';return this.shouldRenderSection("personal",t,e)&&(n+=`
        <div class="header">
          <h1>${((s=e.personalDetails)==null?void 0:s.name)||""}</h1>
          <div class="contact-info">
            ${(r=e.personalDetails)!=null&&r.phone?`<div>${e.personalDetails.phone}</div>`:""}
            ${(o=e.personalDetails)!=null&&o.email?`<div>${e.personalDetails.email}</div>`:""}
            ${(a=e.personalDetails)!=null&&a.address?`<div>${e.personalDetails.address}</div>`:""}
            ${(c=e.personalDetails)!=null&&c.website?`<div>${e.personalDetails.website}</div>`:""}
          </div>
        </div>
      `),n+='<div class="content">',t.forEach(u=>{var h,d,f,p,m,w,E;switch(u){case"profile":this.shouldRenderSection("profile",t,e)&&(n+=`
              <div class="section">
                <h2 class="section-title">Executive Summary</h2>
                <div class="profile">${e.profile||""}</div>
              </div>
            `);break;case"experience":this.shouldRenderSection("experience",t,e)&&(n+='<div class="section"><h2 class="section-title">Professional Experience</h2>',(h=e.workExperience)==null||h.forEach(g=>{var b;n+=`
                <div class="job">
                  <div class="job-title">${g.title||""}</div>
                  <div class="job-company">${g.company||""}</div>
                  <div class="job-dates">${g.dates||""}</div>
                  ${g.description?`<div class="job-description">${g.description}</div>`:""}
                  ${((b=g.responsibilities)==null?void 0:b.length)>0?`
                    <ul class="responsibilities">
                      ${g.responsibilities.map(A=>A.trim()?`<li>${A}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),n+="</div>");break;case"projects":this.shouldRenderSection("projects",t,e)&&(n+='<div class="section"><h2 class="section-title">Key Projects</h2>',(d=e.personalProjects)==null||d.forEach(g=>{var b;n+=`
                <div class="project">
                  <div class="project-title">${g.title||""}</div>
                  <div class="project-tech">${g.technologies||""}</div>
                  ${((b=g.responsibilities)==null?void 0:b.length)>0?`
                    <ul class="responsibilities">
                      ${g.responsibilities.map(A=>A.trim()?`<li>${A}</li>`:"").join("")}
                    </ul>
                  `:""}
                </div>
              `}),n+="</div>");break;case"education":this.shouldRenderSection("education",t,e)&&(n+=`
              <div class="section">
                <h2 class="section-title">Education</h2>
                <div class="education-item">
                  <div class="degree">${((f=e.education)==null?void 0:f.degree)||""}</div>
                  <div class="university">${((p=e.education)==null?void 0:p.university)||""}</div>
                  <div class="education-dates">${((m=e.education)==null?void 0:m.dates)||""}</div>
                  <div class="education-grade">${((w=e.education)==null?void 0:w.grade)||""}</div>
                </div>
              </div>
            `);break;case"certificates":this.shouldRenderSection("certificates",t,e)&&(n+='<div class="section"><h2 class="section-title">Professional Certifications</h2>',(E=e.certificates)==null||E.forEach(g=>{n+=`
                <div class="certificate">
                  <div class="certificate-title">${g.title||""}</div>
                  <div class="certificate-description">${g.description||""}</div>
                </div>
              `}),n+="</div>");break;case"courses":this.shouldRenderSection("courses",t,e)&&(n+=`
              <div class="section">
                <h2 class="section-title">Additional Qualifications</h2>
                <div class="courses-content">${e.courses||""}</div>
              </div>
            `);break}}),n+="</div></div>",n}}const Io=new FE;Io.registerTemplate(new DE);Io.registerTemplate(new OE);Io.registerTemplate(new jE);Io.registerTemplate(new $E);const zE={personalDetails:{name:"Allegra Bourne",phone:"(+44) 7854 943 193",address:"14 Lewis Road, Northallerton, North Yorkshire, UK. DL6 3RX",email:"allegrabourne@gmail.com",website:"allegrabourne.github.io/"},profile:`Software Engineer with 15+ years of experience delivering event driven, AI powered and scalable solutions for local, national and multinational businesses in both the private and public sectors across diverse industries, including finance, supply chain and transportation systems.

Adept at translating business requirements into technical solutions and working with modern development frameworks, cloud services, and enterprise messaging solutions with an emphasis on test-driven development and design patterns.

Advocate of mentoring and collaboration. Seeking to contribute technical expertise to innovative projects.`,workExperience:[{title:"Senior Software Engineer",company:"Ligentia, Leeds, England, United Kingdom",dates:"Jun 2022 - Present",description:"Ligentia is a leading supply chain technology and services provider specialising in manufacturing, consumer brands, pharmaceuticals and the retail sector.",responsibilities:["Development of new Consignment Delivery Management portal with API development utilising Fast Endpoints, messaging via Azure ServiceBus and Angular for UI development.","Worked to develop the new Landed Cost portal, a project which helped to retain Myer; Australia's largest department store, as a customer. Providing Myer with accurate landed cost and end-to-end visibility of their supply chain, from production confirmation, to freight booking, through to delivery to stores spanning Australia.","Azure DevOps / Octopus Deploy for CI and release management, creation and maintenance of deployment pipelines inline with industry practice.","Development of the Ligentix supply chain platform, giving the customer the most cost-effective, efficient version of their supply chain.","Blazor utilised for the developmental concept for the new Client onboarding web application.","Business analysis of legacy processes where knowledge had been lost with a view of replacing them with newer tech stacks."]},{title:"Full Stack Developer",company:"Refract - an Allego company, Newcastle upon Tyne, England, United Kingdom",dates:"Apr 2021 - Jun 2022",description:"Refract utilises AI technology to deliver personalised insight, based on the business and their reps, showing the actions and words that align with top performers and results. Allego sets out to improve onboarding and messaging consistency with high-quality, reliable and secure video learning, communication and collaboration. Engaging new hires quickly, developing critical skills and driving faster results for an organisation.",responsibilities:["Introduced multilingual capabilities to the Refract platform.","Worked on introducing new 'road map' features to the Refract platform such as Call Analytics, Platform Usage and Deal Intelligence dashboards.",".Net, Angular and SQL utilising code first and EF migrations.","Azure development utilising blob containers.","Emphasis on TDD and design patterns to ensure quality of work."]},{title:"Integrations Developer",company:"XCM, York, England, United Kingdom",dates:"Apr 2020 - Apr 2021",description:"XCM are marketing specialists working with some of the biggest retailers in the UK to leverage competitive advantage via the use of specialist data tools, analysis and CRM services.",responsibilities:["Client integration utilising .Net Core and Kafka to ensure real time distributed streaming of big data from Google PubSub.","Docker used for Kafka containerisation.","TSQL / KSQL development.","Google Cloud / PubSub integration.","Apache AVRO for binary serialisation of messages for faster processing.","Data migration and integration.","Single Customer View.","Development of the XCM Horizon data warehouse.","Web Services development using .Net Core hosted in Kestrel."]},{title:"Software Engineer",company:"Cubic Corporation, Stockton-On-Tees, United Kingdom",dates:"Jan 2019 - Apr 2020",description:"Cubic Transportation Systems is one arm of Cubic Corporation that produces public transport solutions, traffic management platforms and fare reading and payment systems.",responsibilities:["Development of ICMP - the traffic management platform utilised by New South Wales, Australia. The platform formed part of TfNSW's $123 million intelligent congestion management program which enabled better traffic management through real-time data and predictive technology.","Frontend development utilising Angular / Typescript / SignalR.","Enterprise messaging conducted utilising NServiceBus / RabbitMQ.","Micro service development utilising AZURE Service Fabric / Topshelf / WebAPI services.","Continuous integration via Jenkins with SonarCube code smells and Octopus.","Development undertaken accordingly with Agile/SCRUM methodologies."]},{title:"Solution Developer",company:"Vianet Group plc, Stockton-On-Tees, United Kingdom",dates:"Jun 2017 - Dec 2018",description:"Vianet are UK leader in providing draught beer quality and waste management services.",responsibilities:["Worked on the IDraught IOT platform on the consumption of data that would empower customer's strategic decisions on metrics and business intelligence, these insights were then used to measure metrics such as wastage, temperature, in identifying missing drinks and improving drink quality.","Frontend development on the new 'Vianet IOT Portal' utilising AngularJS 2 / Typescript.","WebAPI services via the use of .Net Core and hosted using Kestrel.","AZURE web app services and message queueing.","Big data processing via HBASE.","JAVA / Apache SPARK / Hadoop number crunching business logic utilising IntelliJ GUI and taking on a TDD approach.","Introduced an emphasis on TDD and introduced concepts attaining to Agile/SCRUM and mentoring junior members of the team."]},{title:"Lead Software Developer",company:"ZyroFisher, Darlington, United Kingdom",dates:"Apr 2017 - Jun 2017",description:"ZyroFisher are the leading distributor of Parts, Accessories and Clothing to the UK and Irish cycling markets.",responsibilities:["Integrated new Altura Cycling customer facing commercial website with their backend ordering system and payment provider (included implementing Sage/SagePay API) utilising RabbitMQ, RESTful API services and HMAC authentication enabling customers to make online purchases for the first time.","Front-end development utilising NodeJS.","Emphasis on quality test driven development utilising NCrunch and MOQ."]},{title:"Software Developer",company:"Lowell Group, Leeds, United Kingdom",dates:"Apr 2012 - Apr 2017",description:"Lowell are one of Europe's largest credit management companies, operating in the UK and the DACH and Nordic regions.",responsibilities:["RESTful Web API services self hosted utilising Topshelf.","MVC5/Rest/CMS Umbraco - development of the new Lowell website, designed to give customers control over their accounts and manage payments securely through Verifone, similar to leading banking websites. In its first year, the platform saw over 150,000 customer registrations.","Automated deployment via Octopus deploy and continuous builds using TeamCity.","Test driven .Net development. NCrunch, MOQ.","Service Orientated Architecture - development of person matching and address cleansing services utilising WCF and RabbitMQ.","T-SQL utilising CLR functions.","ORM implemented using NHibernate.","Agile software development utilising SCRUM.","Development of LIMA - Lowell's main tracing application.","Provided third line support as required."]},{title:"Collections Development Analyst",company:"Lowell, Leeds, United Kingdom",dates:"Feb 2011 - Apr 2012",description:"",responsibilities:["Core business process mapping and improvement.","Business process automation utilising SSIS, T-SQL and C#/VB.net in order to create dynamic DTSX packages.","Data analysis utilising Crystal Reports and SSAS.","Systems support, project and change management.","Automated de-duping processes for enabling single view of customers with multiple accounts saving Lowell £40k (quoted by system supplier to scope out possible automation).","Mentored colleagues in the use of source control, TFS, .NET and SSIS."]},{title:"Integrated Systems Officer",company:"North Yorkshire County Council, Northallerton, United Kingdom",dates:"Feb 2009 - Feb 2011",description:"",responsibilities:["Project managed the deployment of CACI's 'Children's Centre Management System to the 40 Children's Centres throughout North Yorkshire.","Project managed the deployment of North Yorkshire's new integrated online Admissions system.","Aided in the deployment and integration of IMPULSE; the integrated system for children in North Yorkshire.","Instigated a drive in data quality, this included the creation of a number of XML cleansing macros utilising VBA and xpath to cleanse data received from Schools.","Aided with the implementation and accreditation of the prescribed national child reference system - ContactPoint and took the lead during Instance Accreditation for North Yorkshire and partners.","Provided augmented services when required."]},{title:"Systems Administrative Assistant (Internship)",company:"State Street, Luxembourg",dates:"Sep 2006 - Sep 2007",description:"State Street Corporation is a financial services company that provides investment management services for institutional investors.",responsibilities:["Data warehousing / mining and core applications development for fund compliance.","Java, Oracle and PL/SQL development.","VBA (Contingency macros).","Worked on the development of a data warehousing solution which pooled various assets, funds and investment information from different locations throughout the world. This information would then be used for investment analysis, fund accounting and various other investment strategies."]}],personalProjects:[{title:"AI-Powered Wildlife Health Monitoring Field Lab",technologies:"Python, PyTorch, Raspberry Pi, FastAPI, librosa, Deep Learning, Bioacoustics",responsibilities:["Developed an IoT edge field lab using Python, Raspberry Pi 4, and PyTorch with a custom convolutional neural network to detect hedgehog respiratory illness from acoustic signals, supporting faster interventions and conservation efforts.","Designed a real-time audio analysis pipeline that records 5-second clips, converts them into spectrograms, and classifies breathing patterns using a neural network, achieving ~75% accuracy and 0.91 precision.","Engineered a modular architecture with FastAPI, automated night-time recording, remote inference server on GPU hardware, and Pushbullet alerting.","Applied non-invasive bioacoustic monitoring aligned with UK conservation ethics, demonstrating cross-disciplinary innovation with potential applications in both wildlife conservation and healthcare."]}],certificates:[{title:"IBM Data Science Professional Certificate",description:"A comprehensive, ACE-recommended (12 college credits) and FIBAA-accredited (6 ECTS credits) program covering key data science skills, including Python, regression analysis, statistical modeling, and machine learning."},{title:"IBM AI Developer Professional Certificate",description:"A comprehensive program focused on the essential skills for developing AI applications, including machine learning, deep learning, and natural language processing."}],education:{degree:"BSc (HONS) BUSINESS COMPUTING",university:"University of Teesside",dates:"2004 - 2008",grade:"With Second Class Honours Division One (2:1)"},courses:"Please see LinkedIn for a comprehensive list of completed courses and qualifications"},Hb=["personal","profile","experience","projects","certificates","education","courses"],Xl={personal:{id:"personal",name:"Personal Details",icon:"👤",required:!0,exportable:!0},profile:{id:"profile",name:"Profile",icon:"📄",required:!1,exportable:!0},experience:{id:"experience",name:"Work Experience",icon:"💼",required:!1,exportable:!0},projects:{id:"projects",name:"Personal Projects",icon:"🚀",required:!1,exportable:!0},certificates:{id:"certificates",name:"Certificates",icon:"🏆",required:!1,exportable:!0},education:{id:"education",name:"Education",icon:"🎓",required:!1,exportable:!0},courses:{id:"courses",name:"Additional Courses",icon:"📚",required:!1,exportable:!0}};class HE{constructor(e=Hb){this.sectionOrder=[...e]}getSectionOrder(){return[...this.sectionOrder]}setSectionOrder(e){if(!Object.values(Xl).filter(s=>s.required).map(s=>s.id).every(s=>e.includes(s)))throw new Error("Missing required sections in new order");return this.sectionOrder=[...e],this.sectionOrder}moveSection(e,t){const n=[...this.sectionOrder],[s]=n.splice(e,1);return n.splice(t,0,s),this.setSectionOrder(n)}getSectionConfig(e){return Xl[e]||null}getAllSectionConfigs(){return this.sectionOrder.map(e=>Xl[e]).filter(Boolean)}getExportableSections(){return this.sectionOrder.map(e=>Xl[e]).filter(e=>e&&e.exportable)}validateSectionData(e,t){if(!this.getSectionConfig(e))return!1;switch(e){case"personal":return t.personalDetails&&(t.personalDetails.name||t.personalDetails.email);case"profile":return typeof t.profile=="string"&&t.profile.trim().length>0;case"experience":return Array.isArray(t.workExperience)&&t.workExperience.some(s=>s.title||s.company);case"projects":return Array.isArray(t.personalProjects)&&t.personalProjects.some(s=>s.title);case"certificates":return Array.isArray(t.certificates)&&t.certificates.some(s=>s.title);case"education":return t.education&&(t.education.degree||t.education.university);case"courses":return typeof t.courses=="string"&&t.courses.trim().length>0;default:return!1}}getVisibleSections(e){return this.sectionOrder.filter(t=>{const n=this.getSectionConfig(t);return n?n.required?!0:this.validateSectionData(t,e):!1})}}const BE=()=>{const[i,e]=U.useState(()=>{if(typeof window<"u"){const n=localStorage.getItem("theme");return n||"light"}return"light"});return U.useEffect(()=>{i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",i)},[i]),{theme:i,toggleTheme:()=>{e(n=>n==="light"?"dark":"light")},isDark:i==="dark"}},UE=(i,e)=>{const[t,n]=U.useState(null),[s,r]=U.useState(null),o=U.useCallback((p,m,w)=>{n({item:m,index:w}),p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML),setTimeout(()=>{p.target.style.opacity="0.5"},0)},[]),a=U.useCallback(p=>{p.target.style.opacity="1",n(null),r(null)},[]),c=U.useCallback((p,m)=>{p.preventDefault(),p.dataTransfer.dropEffect="move",r(m)},[]),u=U.useCallback(p=>{const m=p.currentTarget.getBoundingClientRect(),w=p.clientX,E=p.clientY;(w<m.left||w>m.right||E<m.top||E>m.bottom)&&r(null)},[]),h=U.useCallback((p,m)=>{if(p.preventDefault(),!t||t.index===m){n(null),r(null);return}const w=[...i],[E]=w.splice(t.index,1),g=t.index<m?m-1:m;w.splice(g,0,E),e(w),n(null),r(null)},[t,i,e]),d=U.useCallback((p,m)=>({draggable:!0,onDragStart:w=>o(w,p,m),onDragEnd:a,style:{cursor:"grab",userSelect:"none",...(t==null?void 0:t.index)===m&&{opacity:.5,transform:"scale(0.95)"}}}),[t,o,a]),f=U.useCallback(p=>({onDragOver:m=>c(m,p),onDragLeave:u,onDrop:m=>h(m,p),"data-drop-target":!0,style:{...s===p&&{backgroundColor:"rgba(168, 85, 247, 0.1)",borderColor:"rgba(168, 85, 247, 0.5)",transform:"scale(1.02)"}}}),[s,c,u,h]);return{draggedItem:t,dragOverIndex:s,getDragProps:d,getDropProps:f,isDragging:!!t}},WE=i=>{const[e,t]=U.useState(i),n=U.useCallback((_,C)=>{t(k=>({...k,personalDetails:{...k.personalDetails,[_]:C}}))},[]),s=U.useCallback(_=>{t(C=>({...C,profile:_}))},[]),r=U.useCallback((_,C)=>{t(k=>({...k,education:{...k.education,[_]:C}}))},[]),o=U.useCallback(_=>{t(C=>({...C,courses:_}))},[]),a=U.useCallback(()=>{t(_=>({..._,workExperience:[..._.workExperience,{title:"",company:"",dates:"",description:"",responsibilities:[""]}]}))},[]),c=U.useCallback((_,C,k)=>{t(R=>({...R,workExperience:R.workExperience.map((L,D)=>D===_?{...L,[C]:k}:L)}))},[]),u=U.useCallback(_=>{t(C=>({...C,workExperience:C.workExperience.filter((k,R)=>R!==_)}))},[]),h=U.useCallback(_=>{t(C=>({...C,workExperience:C.workExperience.map((k,R)=>R===_?{...k,responsibilities:[...k.responsibilities,""]}:k)}))},[]),d=U.useCallback((_,C,k)=>{t(R=>({...R,workExperience:R.workExperience.map((L,D)=>D===_?{...L,responsibilities:L.responsibilities.map((q,K)=>K===C?k:q)}:L)}))},[]),f=U.useCallback((_,C)=>{t(k=>({...k,workExperience:k.workExperience.map((R,L)=>L===_?{...R,responsibilities:R.responsibilities.filter((D,q)=>q!==C)}:R)}))},[]),p=U.useCallback(()=>{t(_=>({..._,personalProjects:[..._.personalProjects,{title:"",technologies:"",responsibilities:[""]}]}))},[]),m=U.useCallback((_,C,k)=>{t(R=>({...R,personalProjects:R.personalProjects.map((L,D)=>D===_?{...L,[C]:k}:L)}))},[]),w=U.useCallback(_=>{t(C=>({...C,personalProjects:C.personalProjects.filter((k,R)=>R!==_)}))},[]),E=U.useCallback(_=>{t(C=>({...C,personalProjects:C.personalProjects.map((k,R)=>R===_?{...k,responsibilities:[...k.responsibilities,""]}:k)}))},[]),g=U.useCallback((_,C,k)=>{t(R=>({...R,personalProjects:R.personalProjects.map((L,D)=>D===_?{...L,responsibilities:L.responsibilities.map((q,K)=>K===C?k:q)}:L)}))},[]),b=U.useCallback((_,C)=>{t(k=>({...k,personalProjects:k.personalProjects.map((R,L)=>L===_?{...R,responsibilities:R.responsibilities.filter((D,q)=>q!==C)}:R)}))},[]),A=U.useCallback(()=>{t(_=>({..._,certificates:[..._.certificates,{title:"",description:""}]}))},[]),S=U.useCallback((_,C,k)=>{t(R=>({...R,certificates:R.certificates.map((L,D)=>D===_?{...L,[C]:k}:L)}))},[]),T=U.useCallback(_=>{t(C=>({...C,certificates:C.certificates.filter((k,R)=>R!==_)}))},[]);return{cvData:e,setCvData:t,updatePersonalDetails:n,updateProfile:s,updateEducation:r,updateCourses:o,addWorkExperience:a,updateWorkExperience:c,removeWorkExperience:u,addResponsibility:h,updateResponsibility:d,removeResponsibility:f,addPersonalProject:p,updatePersonalProject:m,removePersonalProject:w,addProjectResponsibility:E,updateProjectResponsibility:g,removeProjectResponsibility:b,addCertificate:A,updateCertificate:S,removeCertificate:T}},VE="modulepreload",GE=function(i){return"/CVEditor/"+i},oy={},Mh=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=GE(c),c in oy)return;oy[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":VE,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var wc={};wc.d=(i,e)=>{for(var t in e)wc.o(e,t)&&!wc.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};wc.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var X=globalThis.pdfjsLib={};wc.d(X,{AbortException:()=>Uo,AnnotationEditorLayer:()=>Tm,AnnotationEditorParamsType:()=>G,AnnotationEditorType:()=>Q,AnnotationEditorUIManager:()=>Do,AnnotationLayer:()=>WC,AnnotationMode:()=>_s,ColorPicker:()=>Jd,DOMSVGFactory:()=>Uv,DrawLayer:()=>Mm,FeatureTest:()=>Lt,GlobalWorkerOptions:()=>ns,ImageKind:()=>Kh,InvalidPDFException:()=>Ub,MissingPDFException:()=>Bo,OPS:()=>Ni,OutputScale:()=>Ag,PDFDataRangeTransport:()=>$x,PDFDateString:()=>Dv,PDFWorker:()=>xa,PasswordResponses:()=>KE,PermissionFlag:()=>YE,PixelsPerInch:()=>hr,RenderingCancelledException:()=>Iv,TextLayer:()=>zc,UnexpectedResponseException:()=>zf,Util:()=>$,VerbosityLevel:()=>Of,XfaLayer:()=>Hx,build:()=>EC,createValidAbsoluteUrl:()=>e_,fetchData:()=>Bf,getDocument:()=>gC,getFilenameFromUrl:()=>c_,getPdfFilenameFromUrl:()=>u_,getXfaPageViewport:()=>h_,isDataScheme:()=>Uf,isPdfFile:()=>Fv,noContextMenu:()=>Pi,normalizeUnicode:()=>o_,setLayerDimensions:()=>Fo,shadow:()=>se,version:()=>SC});const St=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Bb=[1,0,0,1,0,0],yg=[.001,0,0,.001,0,0],XE=1e7,bp=1.35,si={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},qE="pdfjs_internal_editor_",Q={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},G={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},YE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},mt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Kh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},We={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},zl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Of={ERRORS:0,WARNINGS:1,INFOS:5},Ni={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},KE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let jf=Of.WARNINGS;function QE(i){Number.isInteger(i)&&(jf=i)}function ZE(){return jf}function $f(i){jf>=Of.INFOS&&console.log(`Info: ${i}`)}function J(i){jf>=Of.WARNINGS&&console.log(`Warning: ${i}`)}function Ae(i){throw new Error(i)}function Ke(i,e){i||Ae(e)}function JE(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function e_(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=r_(i)}catch{}}const n=e?new URL(i,e):new URL(i);if(JE(n))return n}catch{}return null}function se(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const yr=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class wg extends yr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class bg extends yr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ub extends yr{constructor(e){super(e,"InvalidPDFException")}}class Bo extends yr{constructor(e){super(e,"MissingPDFException")}}class zf extends yr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class t_ extends yr{constructor(e){super(e,"FormatError")}}class Uo extends yr{constructor(e){super(e,"AbortException")}}function Wb(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Ae("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=i.subarray(s,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Hf(i){typeof i!="string"&&Ae("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function i_(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Mv(i){const e=Object.create(null);for(const[t,n]of i)e[t]=n;return e}function n_(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function s_(){try{return new Function(""),!0}catch{return!1}}class Lt{static get isLittleEndian(){return se(this,"isLittleEndian",n_())}static get isEvalSupported(){return se(this,"isEvalSupported",s_())}static get isOffscreenCanvasSupported(){return se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?se(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):se(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return se(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const xp=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var cs,Qh,xg;class ${static makeHexColor(e,t,n){return`#${xp[e]}${xp[t]}${xp[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[n,s]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[s,r]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],r[0],o[0]),Math.min(n[1],s[1],r[1],o[1]),Math.max(n[0],s[0],r[0],o[0]),Math.max(n[1],s[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(n+o)/2,c=Math.sqrt((n+o)**2-4*(n*o-r*s))/2,u=a+c||1,h=a-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[n,r,s,o]}static bezierBoundingBox(e,t,n,s,r,o,a,c,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,a),Math.min(t,c),Math.max(e,a),Math.max(t,c)],y(this,cs,xg).call(this,e,n,r,a,t,s,o,c,3*(-e+3*(n-r)+a),6*(e-2*n+r),3*(n-e),u),y(this,cs,xg).call(this,e,n,r,a,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),u),u}}cs=new WeakSet,Qh=function(e,t,n,s,r,o,a,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*e+3*u*t)+3*f*n)+p*s,w=d*(d*(d*r+3*u*o)+3*f*a)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],w)},xg=function(e,t,n,s,r,o,a,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&y(this,cs,Qh).call(this,e,t,n,s,r,o,a,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),w=2*u;y(this,cs,Qh).call(this,e,t,n,s,r,o,a,c,(-h+m)/w,f),y(this,cs,Qh).call(this,e,t,n,s,r,o,a,c,(-h-m)/w,f)},x($,cs);function r_(i){return decodeURIComponent(escape(i))}let Ap=null,ay=null;function o_(i){return Ap||(Ap=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ay=new Map([["ﬅ","ſt"]])),i.replaceAll(Ap,(e,t,n)=>t?t.normalize("NFKC"):ay.get(n))}function a_(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return Wb(i)}const Nv="pdfjs_internal_id_",Cn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function l_(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(Wb(i))}const Tn="http://www.w3.org/2000/svg",_r=class _r{};V(_r,"CSS",96),V(_r,"PDF",72),V(_r,"PDF_TO_CSS_UNITS",_r.CSS/_r.PDF);let hr=_r;async function Bf(i,e="text"){if(ql(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class uh{constructor({viewBox:e,scale:t,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=s,this.offsetY=r;const a=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,w,E;u===0?(p=Math.abs(c-e[1])*t+s,m=Math.abs(a-e[0])*t+r,w=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(p=Math.abs(a-e[0])*t+s,m=Math.abs(c-e[1])*t+r,w=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,p-u*t*a-d*t*c,m-h*t*a-f*t*c],this.width=w,this.height=E}get rawDims(){const{viewBox:e}=this;return se(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new uh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return $.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=$.applyTransform([e[0],e[1]],this.transform),n=$.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return $.applyInverseTransform([e,t],this.transform)}}class Iv extends yr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Uf(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function Fv(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function c_(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function u_(i,e="document.pdf"){if(typeof i!="string")return e;if(Uf(i))return J('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||e}class ly{constructor(){V(this,"started",Object.create(null));V(this,"times",[])}time(e){e in this.started&&J(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||J(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-s}ms
`);return e.join("")}}function ql(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function Pi(i){i.preventDefault()}function cy(i){console.log("Deprecated API usage: "+i)}var Uc;class Dv{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,Uc)||v(this,Uc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,Uc).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(n,s,r,o,a,c))}}Uc=new WeakMap,x(Dv,Uc);function h_(i,{scale:e=1,rotation:t=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new uh({viewBox:r,scale:e,rotation:t})}function Ov(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(J(`Not a valid color format: "${i}"`),[0,0,0])}function d_(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,Ov(n))}e.remove()}function Re(i){const{a:e,b:t,c:n,d:s,e:r,f:o}=i.getTransform();return[e,t,n,s,r,o]}function kn(i){const{a:e,b:t,c:n,d:s,e:r,f:o}=i.getTransform().invertSelf();return[e,t,n,s,r,o]}function Fo(i,e,t=!1,n=!0){if(e instanceof uh){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=i,a=Lt.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,h=a?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}n&&i.setAttribute("data-main-rotation",e.rotation)}class Ag{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Cs,Rr,Ii,Lr,Wc,Vc,nf,Vb,Mt,Gb,Xb,Zh,qb,Eg;const Rn=class Rn{constructor(e){x(this,Mt);x(this,Cs,null);x(this,Rr,null);x(this,Ii);x(this,Lr,null);x(this,Wc,null);v(this,Ii,e),l(Rn,Vc)||v(Rn,Vc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=v(this,Cs,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Ii)._uiManager._signal;e.addEventListener("contextmenu",Pi,{signal:t}),e.addEventListener("pointerdown",y(Rn,nf,Vb),{signal:t});const n=v(this,Lr,document.createElement("div"));n.className="buttons",e.append(n);const s=l(this,Ii).toolbarPosition;if(s){const{style:r}=e,o=l(this,Ii)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return y(this,Mt,qb).call(this),e}get div(){return l(this,Cs)}hide(){var e;l(this,Cs).classList.add("hidden"),(e=l(this,Rr))==null||e.hideDropdown()}show(){var e;l(this,Cs).classList.remove("hidden"),(e=l(this,Wc))==null||e.shown()}async addAltText(e){const t=await e.render();y(this,Mt,Zh).call(this,t),l(this,Lr).prepend(t,l(this,Mt,Eg)),v(this,Wc,e)}addColorPicker(e){v(this,Rr,e);const t=e.renderButton();y(this,Mt,Zh).call(this,t),l(this,Lr).prepend(t,l(this,Mt,Eg))}remove(){var e;l(this,Cs).remove(),(e=l(this,Rr))==null||e.destroy(),v(this,Rr,null)}};Cs=new WeakMap,Rr=new WeakMap,Ii=new WeakMap,Lr=new WeakMap,Wc=new WeakMap,Vc=new WeakMap,nf=new WeakSet,Vb=function(e){e.stopPropagation()},Mt=new WeakSet,Gb=function(e){l(this,Ii)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},Xb=function(e){l(this,Ii)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Zh=function(e){const t=l(this,Ii)._uiManager._signal;e.addEventListener("focusin",y(this,Mt,Gb).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",y(this,Mt,Xb).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Pi,{signal:t})},qb=function(){const{editorType:e,_uiManager:t}=l(this,Ii),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",l(Rn,Vc)[e]),y(this,Mt,Zh).call(this,n),n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,Lr).append(n)},Eg=function(){const e=document.createElement("div");return e.className="divider",e},x(Rn,nf),x(Rn,Vc,null);let Sg=Rn;var Gc,Mr,Nr,fr,Yb,Kb,Qb;class f_{constructor(e){x(this,fr);x(this,Gc,null);x(this,Mr,null);x(this,Nr);v(this,Nr,e)}show(e,t,n){const[s,r]=y(this,fr,Kb).call(this,t,n),{style:o}=l(this,Mr)||v(this,Mr,y(this,fr,Yb).call(this));e.append(l(this,Mr)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Mr).remove()}}Gc=new WeakMap,Mr=new WeakMap,Nr=new WeakMap,fr=new WeakSet,Yb=function(){const e=v(this,Mr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Pi,{signal:l(this,Nr)._signal});const t=v(this,Gc,document.createElement("div"));return t.className="buttons",e.append(t),y(this,fr,Qb).call(this),e},Kb=function(e,t){let n=0,s=0;for(const r of e){const o=r.y+r.height;if(o<n)continue;const a=r.x+(t?r.width:0);if(o>n){s=a,n=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,n]},Qb=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=l(this,Nr)._signal;e.addEventListener("contextmenu",Pi,{signal:n}),e.addEventListener("click",()=>{l(this,Nr).highlightSelection("floating_button")},{signal:n}),l(this,Gc).append(e)};function Kd(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}function p_(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var sf;class g_{constructor(){x(this,sf,0)}get id(){return`${qE}${_t(this,sf)._++}`}}sf=new WeakMap;var Aa,Xc,yt,Sa,Jh;const Xv=class Xv{constructor(){x(this,Sa);x(this,Aa,a_());x(this,Xc,0);x(this,yt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return se(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:r}=e;return y(this,Sa,Jh).call(this,`${t}_${n}_${s}_${r}`,e)}async getFromUrl(e){return y(this,Sa,Jh).call(this,e,e)}async getFromBlob(e,t){const n=await t;return y(this,Sa,Jh).call(this,e,n)}async getFromId(e){l(this,yt)||v(this,yt,new Map);const t=l(this,yt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,yt)||v(this,yt,new Map);let n=l(this,yt).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${l(this,Aa)}_${_t(this,Xc)._++}`,refCounter:1,isSvg:!1},l(this,yt).set(e,n),l(this,yt).set(n.id,n),n}getSvgUrl(e){const t=l(this,yt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,yt)||v(this,yt,new Map);const t=l(this,yt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Aa)}_`)}};Aa=new WeakMap,Xc=new WeakMap,yt=new WeakMap,Sa=new WeakSet,Jh=async function(e,t){l(this,yt)||v(this,yt,new Map);let n=l(this,yt).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Aa)}_${_t(this,Xc)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await Bf(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=Xv._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,u()},o.onload=async()=>{const d=n.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return l(this,yt).set(e,n),n&&l(this,yt).set(n.id,n),n};let _g=Xv;var Je,ks,qc,et;class m_{constructor(e=128){x(this,Je,[]);x(this,ks,!1);x(this,qc);x(this,et,-1);v(this,qc,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),l(this,ks))return;const c={cmd:e,undo:t,post:n,type:r};if(l(this,et)===-1){l(this,Je).length>0&&(l(this,Je).length=0),v(this,et,0),l(this,Je).push(c);return}if(o&&l(this,Je)[l(this,et)].type===r){a&&(c.undo=l(this,Je)[l(this,et)].undo),l(this,Je)[l(this,et)]=c;return}const u=l(this,et)+1;u===l(this,qc)?l(this,Je).splice(0,1):(v(this,et,u),u<l(this,Je).length&&l(this,Je).splice(u)),l(this,Je).push(c)}undo(){if(l(this,et)===-1)return;v(this,ks,!0);const{undo:e,post:t}=l(this,Je)[l(this,et)];e(),t==null||t(),v(this,ks,!1),v(this,et,l(this,et)-1)}redo(){if(l(this,et)<l(this,Je).length-1){v(this,et,l(this,et)+1),v(this,ks,!0);const{cmd:e,post:t}=l(this,Je)[l(this,et)];e(),t==null||t(),v(this,ks,!1)}}hasSomethingToUndo(){return l(this,et)!==-1}hasSomethingToRedo(){return l(this,et)<l(this,Je).length-1}destroy(){v(this,Je,null)}}Je=new WeakMap,ks=new WeakMap,qc=new WeakMap,et=new WeakMap;var rf,Zb;class hh{constructor(e){x(this,rf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Lt.platform;for(const[n,s,r={}]of e)for(const o of n){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(y(this,rf,Zb).call(this,t));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=n;a&&!a(e,t)||(s.bind(e,...o,t)(),r||(t.stopPropagation(),t.preventDefault()))}}rf=new WeakSet,Zb=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const of=class of{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return d_(e),se(this,"_colors",e)}convert(e){const t=Ov(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((r,o)=>r===t[o]))return of._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?$.makeHexColor(...t):e}};V(of,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Cg=of;var Ea,Kt,Ge,at,_a,Nn,Ca,Fi,Ts,ka,Ir,nn,Di,Fr,Yc,Kc,Ta,Qc,sn,Ps,Pa,Rs,rn,af,Ls,Zc,Ms,Dr,Jc,eu,tt,de,In,Or,tu,iu,Ns,on,Fn,nu,gi,F,ed,kg,Jb,ex,td,tx,ix,nx,Tg,sx,Pg,Rg,rx,Ct,ws,ox,ax,Lg,lx,Yl,Mg;const fa=class fa{constructor(e,t,n,s,r,o,a,c,u,h,d){x(this,F);x(this,Ea,new AbortController);x(this,Kt,null);x(this,Ge,new Map);x(this,at,new Map);x(this,_a,null);x(this,Nn,null);x(this,Ca,null);x(this,Fi,new m_);x(this,Ts,null);x(this,ka,0);x(this,Ir,new Set);x(this,nn,null);x(this,Di,null);x(this,Fr,new Set);x(this,Yc,!1);x(this,Kc,!1);x(this,Ta,!1);x(this,Qc,null);x(this,sn,null);x(this,Ps,null);x(this,Pa,null);x(this,Rs,!1);x(this,rn,null);x(this,af,new g_);x(this,Ls,!1);x(this,Zc,!1);x(this,Ms,null);x(this,Dr,null);x(this,Jc,null);x(this,eu,null);x(this,tt,Q.NONE);x(this,de,new Set);x(this,In,null);x(this,Or,null);x(this,tu,null);x(this,iu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Ns,[0,0]);x(this,on,null);x(this,Fn,null);x(this,nu,null);x(this,gi,null);const f=this._signal=l(this,Ea).signal;v(this,Fn,e),v(this,nu,t),v(this,_a,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),y(this,F,tx).call(this),y(this,F,rx).call(this),y(this,F,Tg).call(this),v(this,Nn,r.annotationStorage),v(this,Qc,r.filterFactory),v(this,Or,o),v(this,Pa,a||null),v(this,Yc,c),v(this,Kc,u),v(this,Ta,h),v(this,eu,d||null),this.viewParameters={realScale:hr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=fa.prototype,t=o=>l(o,Fn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return se(this,"_keyboardManager",new hh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Fn).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Fn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,n,s;(e=l(this,gi))==null||e.resolve(),v(this,gi,null),(t=l(this,Ea))==null||t.abort(),v(this,Ea,null),this._signal=null;for(const r of l(this,at).values())r.destroy();l(this,at).clear(),l(this,Ge).clear(),l(this,Fr).clear(),v(this,Kt,null),l(this,de).clear(),l(this,Fi).destroy(),(n=l(this,_a))==null||n.destroy(),(s=l(this,rn))==null||s.hide(),v(this,rn,null),l(this,sn)&&(clearTimeout(l(this,sn)),v(this,sn,null)),l(this,on)&&(clearTimeout(l(this,on)),v(this,on,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,eu)}get useNewAltTextFlow(){return l(this,Kc)}get useNewAltTextWhenAddingImage(){return l(this,Ta)}get hcmFilter(){return se(this,"hcmFilter",l(this,Or)?l(this,Qc).addHCMFilter(l(this,Or).foreground,l(this,Or).background):"none")}get direction(){return se(this,"direction",getComputedStyle(l(this,Fn)).direction)}get highlightColors(){return se(this,"highlightColors",l(this,Pa)?new Map(l(this,Pa).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){v(this,Jc,e)}editAltText(e,t=!1){var n;(n=l(this,_a))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":v(this,Ta,t);break}}onPageChanging({pageNumber:e}){v(this,ka,e-1)}focusMainContainer(){l(this,Fn).focus()}findParent(e,t){for(const n of l(this,at).values()){const{x:s,y:r,width:o,height:a}=n.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+a)return n}return null}disableUserSelect(e=!1){l(this,nu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Fr).add(e)}removeShouldRescale(e){l(this,Fr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*hr.PDF_TO_CSS_UNITS;for(const t of l(this,Fr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:o}=t,a=t.toString(),u=y(this,F,ed).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=y(this,F,kg).call(this,u),f=l(this,tt)===Q.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Q.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Nn)&&!l(this,Nn).has(e.id)&&l(this,Nn).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Rs)&&(v(this,Rs,!1),y(this,F,td).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,de))if(t.div.contains(e)){v(this,Dr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Dr))return;const[e,t]=l(this,Dr);v(this,Dr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){y(this,F,Tg).call(this),y(this,F,Pg).call(this)}removeEditListeners(){y(this,F,sx).call(this),y(this,F,Rg).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of l(this,Di))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of l(this,Di))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=l(this,Kt))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,de)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of l(this,Di))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){J(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of n){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)y(this,F,Lg).call(this,c);y(this,F,Mg).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){J(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,tt)!==Q.NONE&&!this.isEditorHandlingKeyboard&&fa._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Rs)&&(v(this,Rs,!1),y(this,F,td).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(y(this,F,ix).call(this),y(this,F,Pg).call(this),y(this,F,Ct).call(this,{isEditing:l(this,tt)!==Q.NONE,isEmpty:y(this,F,Yl).call(this),hasSomethingToUndo:l(this,Fi).hasSomethingToUndo(),hasSomethingToRedo:l(this,Fi).hasSomethingToRedo(),hasSelectedEditor:!1})):(y(this,F,nx).call(this),y(this,F,Rg).call(this),y(this,F,Ct).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Di)){v(this,Di,e);for(const t of l(this,Di))y(this,F,ws).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,af).id}get currentLayer(){return l(this,at).get(l(this,ka))}getLayer(e){return l(this,at).get(e)}get currentPageIndex(){return l(this,ka)}addLayer(e){l(this,at).set(e.pageIndex,e),l(this,Ls)?e.enable():e.disable()}removeLayer(e){l(this,at).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){if(l(this,tt)!==e&&!(l(this,gi)&&(await l(this,gi).promise,!l(this,gi)))){if(v(this,gi,Promise.withResolvers()),v(this,tt,e),e===Q.NONE){this.setEditingState(!1),y(this,F,ax).call(this),l(this,gi).resolve();return}this.setEditingState(!0),await y(this,F,ox).call(this),this.unselectAll();for(const s of l(this,at).values())s.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),l(this,gi).resolve();return}for(const s of l(this,Ge).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();l(this,gi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,tt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(l(this,Di)){switch(e){case G.CREATE:this.currentLayer.addNewEditor();return;case G.HIGHLIGHT_DEFAULT_COLOR:(n=l(this,Jc))==null||n.updateColor(t);break;case G.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,tu)||v(this,tu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,de))s.updateParams(e,t);for(const s of l(this,Di))s.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var r;for(const o of l(this,Ge).values())o.editorType===e&&o.show(t);(((r=l(this,tu))==null?void 0:r.get(G.HIGHLIGHT_SHOW_ALL))??!0)!==t&&y(this,F,ws).call(this,[[G.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Zc)!==e){v(this,Zc,e);for(const t of l(this,at).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of l(this,Ge).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return l(this,Ge).get(e)}addEditor(e){l(this,Ge).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,sn)&&clearTimeout(l(this,sn)),v(this,sn,setTimeout(()=>{this.focusMainContainer(),v(this,sn,null)},0))),l(this,Ge).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Ir).has(e.annotationElementId))&&((t=l(this,Nn))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Ir).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Ir).has(e)}removeDeletedAnnotationElement(e){l(this,Ir).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Kt)!==e&&(v(this,Kt,e),e&&y(this,F,ws).call(this,e.propertiesToUpdate))}updateUI(e){l(this,F,lx)===e&&y(this,F,ws).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,de).has(e)){l(this,de).delete(e),e.unselect(),y(this,F,Ct).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,de).add(e),e.select(),y(this,F,ws).call(this,e.propertiesToUpdate),y(this,F,Ct).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,de))t!==e&&t.unselect();l(this,de).clear(),l(this,de).add(e),e.select(),y(this,F,ws).call(this,e.propertiesToUpdate),y(this,F,Ct).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,de).has(e)}get firstSelectedEditor(){return l(this,de).values().next().value}unselect(e){e.unselect(),l(this,de).delete(e),y(this,F,Ct).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,de).size!==0}get isEnterHandled(){return l(this,de).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Fi).undo(),y(this,F,Ct).call(this,{hasSomethingToUndo:l(this,Fi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:y(this,F,Yl).call(this)})}redo(){l(this,Fi).redo(),y(this,F,Ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Fi).hasSomethingToRedo(),isEmpty:y(this,F,Yl).call(this)})}addCommands(e){l(this,Fi).add(e),y(this,F,Ct).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:y(this,F,Yl).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,de)],t=()=>{for(const s of e)s.remove()},n=()=>{for(const s of e)y(this,F,Lg).call(this,s)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Kt))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Kt)||this.hasSelection}selectAll(){for(const e of l(this,de))e.commit();y(this,F,Mg).call(this,l(this,Ge).values())}unselectAll(){if(!(l(this,Kt)&&(l(this,Kt).commitOrRemove(),l(this,tt)!==Q.NONE))&&this.hasSelection){for(const e of l(this,de))e.unselect();l(this,de).clear(),y(this,F,Ct).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,Ns)[0]+=e,l(this,Ns)[1]+=t;const[s,r]=l(this,Ns),o=[...l(this,de)],a=1e3;l(this,on)&&clearTimeout(l(this,on)),v(this,on,setTimeout(()=>{v(this,on,null),l(this,Ns)[0]=l(this,Ns)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,Ge).has(c.id)&&c.translateInPage(s,r)},undo:()=>{for(const c of o)l(this,Ge).has(c.id)&&c.translateInPage(-s,-r)},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,nn,new Map);for(const e of l(this,de))l(this,nn).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,nn))return!1;this.disableUserSelect(!1);const e=l(this,nn);v(this,nn,null);let t=!1;for(const[{x:s,y:r,pageIndex:o},a]of e)a.newX=s,a.newY=r,a.newPageIndex=o,t||(t=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const n=(s,r,o,a)=>{if(l(this,Ge).has(s.id)){const c=l(this,at).get(a);c?s._setParentAndPosition(c,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of e)n(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of e)n(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,nn))for(const n of l(this,nn).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,de).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Kt)===e}getActive(){return l(this,Kt)}getMode(){return l(this,tt)}get imageManager(){return se(this,"imageManager",new _g)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-n)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-n)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-n)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-n)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:w}of d.getClientRects())m===0||w===0||c.push(a(f,p,m,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Ca)||v(this,Ca,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Ca))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,Ca))==null?void 0:s.get(e.data.id);if(!t)return;const n=l(this,Nn).getRawValue(t);n&&(l(this,tt)===Q.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Ea=new WeakMap,Kt=new WeakMap,Ge=new WeakMap,at=new WeakMap,_a=new WeakMap,Nn=new WeakMap,Ca=new WeakMap,Fi=new WeakMap,Ts=new WeakMap,ka=new WeakMap,Ir=new WeakMap,nn=new WeakMap,Di=new WeakMap,Fr=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,Ta=new WeakMap,Qc=new WeakMap,sn=new WeakMap,Ps=new WeakMap,Pa=new WeakMap,Rs=new WeakMap,rn=new WeakMap,af=new WeakMap,Ls=new WeakMap,Zc=new WeakMap,Ms=new WeakMap,Dr=new WeakMap,Jc=new WeakMap,eu=new WeakMap,tt=new WeakMap,de=new WeakMap,In=new WeakMap,Or=new WeakMap,tu=new WeakMap,iu=new WeakMap,Ns=new WeakMap,on=new WeakMap,Fn=new WeakMap,nu=new WeakMap,gi=new WeakMap,F=new WeakSet,ed=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},kg=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of l(this,at).values())if(n.hasTextLayer(e))return n;return null},Jb=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=y(this,F,ed).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(l(this,rn)||v(this,rn,new f_(this)),l(this,rn).show(n,s,this.direction==="ltr"))},ex=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,In)&&((r=l(this,rn))==null||r.hide(),v(this,In,null),y(this,F,Ct).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,In))return;const s=y(this,F,ed).call(this,e).closest(".textLayer");if(!s){l(this,In)&&((o=l(this,rn))==null||o.hide(),v(this,In,null),y(this,F,Ct).call(this,{hasSelectedText:!1}));return}if((a=l(this,rn))==null||a.hide(),v(this,In,t),y(this,F,Ct).call(this,{hasSelectedText:!0}),!(l(this,tt)!==Q.HIGHLIGHT&&l(this,tt)!==Q.NONE)&&(l(this,tt)===Q.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,Rs,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,tt)===Q.HIGHLIGHT?y(this,F,kg).call(this,s):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&y(this,F,td).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},td=function(e=""){l(this,tt)===Q.HIGHLIGHT?this.highlightSelection(e):l(this,Yc)&&y(this,F,Jb).call(this)},tx=function(){document.addEventListener("selectionchange",y(this,F,ex).bind(this),{signal:this._signal})},ix=function(){if(l(this,Ps))return;v(this,Ps,new AbortController);const e=this.combinedSignal(l(this,Ps));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},nx=function(){var e;(e=l(this,Ps))==null||e.abort(),v(this,Ps,null)},Tg=function(){if(l(this,Ms))return;v(this,Ms,new AbortController);const e=this.combinedSignal(l(this,Ms));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},sx=function(){var e;(e=l(this,Ms))==null||e.abort(),v(this,Ms,null)},Pg=function(){if(l(this,Ts))return;v(this,Ts,new AbortController);const e=this.combinedSignal(l(this,Ts));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Rg=function(){var e;(e=l(this,Ts))==null||e.abort(),v(this,Ts,null)},rx=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ct=function(e){Object.entries(e).some(([n,s])=>l(this,iu)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,iu),e)}),l(this,tt)===Q.HIGHLIGHT&&e.hasSelectedEditor===!1&&y(this,F,ws).call(this,[[G.HIGHLIGHT_FREE,!0]]))},ws=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},ox=async function(){if(!l(this,Ls)){v(this,Ls,!0);const e=[];for(const t of l(this,at).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Ge).values())t.enable()}},ax=function(){if(this.unselectAll(),l(this,Ls)){v(this,Ls,!1);for(const e of l(this,at).values())e.disable();for(const e of l(this,Ge).values())e.disable()}},Lg=function(e){const t=l(this,at).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},lx=function(){let e=null;for(e of l(this,de));return e},Yl=function(){if(l(this,Ge).size===0)return!0;if(l(this,Ge).size===1)for(const e of l(this,Ge).values())return e.isEmpty();return!1},Mg=function(e){for(const t of l(this,de))t.unselect();l(this,de).clear();for(const t of e)t.isEmpty()||(l(this,de).add(t),t.select());y(this,F,Ct).call(this,{hasSelectedEditor:this.hasSelection})},V(fa,"TRANSLATE_SMALL",1),V(fa,"TRANSLATE_BIG",10);let Do=fa;var it,an,Oi,Ra,ln,Qt,La,cn,$t,Dn,jr,un,Is,Yi,Kl,id;const kt=class kt{constructor(e){x(this,Yi);x(this,it,null);x(this,an,!1);x(this,Oi,null);x(this,Ra,null);x(this,ln,null);x(this,Qt,null);x(this,La,!1);x(this,cn,null);x(this,$t,null);x(this,Dn,null);x(this,jr,null);x(this,un,!1);v(this,$t,e),v(this,un,e._uiManager.useNewAltTextFlow),l(kt,Is)||v(kt,Is,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){kt._l10n??(kt._l10n=e)}async render(){const e=v(this,Oi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=v(this,Ra,document.createElement("span"));e.append(t),l(this,un)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(kt,Is).missing),t.setAttribute("data-l10n-id",l(kt,Is)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,$t)._uiManager._signal;e.addEventListener("contextmenu",Pi,{signal:n}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),l(this,$t)._uiManager.editAltText(l(this,$t)),l(this,un)&&l(this,$t)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Yi,Kl)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(v(this,La,!0),s(r))},{signal:n}),await y(this,Yi,id).call(this),e}finish(){l(this,Oi)&&(l(this,Oi).focus({focusVisible:l(this,La)}),v(this,La,!1))}isEmpty(){return l(this,un)?l(this,it)===null:!l(this,it)&&!l(this,an)}hasData(){return l(this,un)?l(this,it)!==null||!!l(this,Dn):this.isEmpty()}get guessedText(){return l(this,Dn)}async setGuessedText(e){l(this,it)===null&&(v(this,Dn,e),v(this,jr,await kt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),y(this,Yi,id).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,un)||l(this,it)){(t=l(this,cn))==null||t.remove(),v(this,cn,null);return}if(!l(this,cn)){const n=v(this,cn,document.createElement("div"));n.className="noAltTextBadge",l(this,$t).div.append(n)}l(this,cn).classList.toggle("hidden",!e)}serialize(e){let t=l(this,it);return!e&&l(this,Dn)===t&&(t=l(this,jr)),{altText:t,decorative:l(this,an),guessedText:l(this,Dn),textWithDisclaimer:l(this,jr)}}get data(){return{altText:l(this,it),decorative:l(this,an)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(v(this,Dn,n),v(this,jr,s)),!(l(this,it)===e&&l(this,an)===t)&&(r||(v(this,it,e),v(this,an,t)),y(this,Yi,id).call(this))}toggle(e=!1){l(this,Oi)&&(!e&&l(this,Qt)&&(clearTimeout(l(this,Qt)),v(this,Qt,null)),l(this,Oi).disabled=!e)}shown(){l(this,$t)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Yi,Kl)}})}destroy(){var e,t;(e=l(this,Oi))==null||e.remove(),v(this,Oi,null),v(this,Ra,null),v(this,ln,null),(t=l(this,cn))==null||t.remove(),v(this,cn,null)}};it=new WeakMap,an=new WeakMap,Oi=new WeakMap,Ra=new WeakMap,ln=new WeakMap,Qt=new WeakMap,La=new WeakMap,cn=new WeakMap,$t=new WeakMap,Dn=new WeakMap,jr=new WeakMap,un=new WeakMap,Is=new WeakMap,Yi=new WeakSet,Kl=function(){return l(this,it)&&"added"||l(this,it)===null&&this.guessedText&&"review"||"missing"},id=async function(){var s,r,o;const e=l(this,Oi);if(!e)return;if(l(this,un)){if(e.classList.toggle("done",!!l(this,it)),e.setAttribute("data-l10n-id",l(kt,Is)[l(this,Yi,Kl)]),(s=l(this,Ra))==null||s.setAttribute("data-l10n-id",l(kt,Is)[`${l(this,Yi,Kl)}-label`]),!l(this,it)){(r=l(this,ln))==null||r.remove();return}}else{if(!l(this,it)&&!l(this,an)){e.classList.remove("done"),(o=l(this,ln))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,ln);if(!t){v(this,ln,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,$t).id}`;const a=100,c=l(this,$t)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,Qt)),v(this,Qt,null)},{once:!0}),e.addEventListener("mouseenter",()=>{v(this,Qt,setTimeout(()=>{v(this,Qt,null),l(this,ln).classList.add("show"),l(this,$t)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,Qt)&&(clearTimeout(l(this,Qt)),v(this,Qt,null)),(u=l(this,ln))==null||u.classList.remove("show")},{signal:c})}l(this,an)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,it)),t.parentNode||e.append(t);const n=l(this,$t).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},x(kt,Is,null),V(kt,"_l10n",null);let Qd=kt;var $r,ji,Te,Ma,zr,lt,Hr,Fs,su,Br,Ds,ru,Ur,On,hn,Na,Ia,mi,ou,lf,Z,Ng,au,Ig,Fg,cx,ux,Dg,Og,jg,hx,$g,dx,fx,px,zg,Ql;const ue=class ue{constructor(e){x(this,Z);x(this,$r,null);x(this,ji,null);x(this,Te,null);x(this,Ma,!1);x(this,zr,!1);x(this,lt,null);x(this,Hr,null);x(this,Fs,null);x(this,su,"");x(this,Br,!1);x(this,Ds,null);x(this,ru,!1);x(this,Ur,!1);x(this,On,!1);x(this,hn,null);x(this,Na,0);x(this,Ia,0);x(this,mi,null);V(this,"_editToolbar",null);V(this,"_initialOptions",Object.create(null));V(this,"_initialData",null);V(this,"_isVisible",!0);V(this,"_uiManager",null);V(this,"_focusEventsAllowed",!0);x(this,ou,!1);x(this,lf,ue._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ue.prototype._resizeWithKeyboard,t=Do.TRANSLATE_SMALL,n=Do.TRANSLATE_BIG;return se(this,"_resizerKeyboardManager",new hh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new v_({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ue._l10n??(ue._l10n=e),ue._l10nResizer||(ue._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ue._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);ue._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ae("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,ou)}set _isDraggable(e){var t;v(this,ou,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,lf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):y(this,Z,Ql).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Br)?v(this,Br,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[r,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/r,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){y(this,Z,Ng).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Ds)||v(this,Ds,[this.x,this.y]),y(this,Z,Ng).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Ds)||v(this,Ds,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,c]=this.getBaseTranslation();r+=a,o+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Ds)&&(l(this,Ds)[0]!==this.x||l(this,Ds)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=ue,s=n/e,r=n/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:s,y:r,width:o,height:a}=this;if(o*=t,a*=n,s*=t,r*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),r=Math.max(0,Math.min(n-a,r));break;case 90:s=Math.max(0,Math.min(t-a,s)),r=Math.min(n,Math.max(o,r));break;case 180:s=Math.min(t,Math.max(o,s)),r=Math.min(n,Math.max(a,r));break;case 270:s=Math.min(t,Math.max(a,s)),r=Math.max(0,Math.min(n-o,r));break}this.x=s/=t,this.y=r/=n;const[c,u]=this.getBaseTranslation();s+=c,r+=u;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return y(n=ue,au,Ig).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return y(n=ue,au,Ig).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,l(this,zr)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),r=!l(this,zr)&&t.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!l(this,zr)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,Te))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,Ur)?this._editToolbar:(this._editToolbar=new Sg(this),this.div.append(this._editToolbar.render()),l(this,Te)&&await this._editToolbar.addAltText(l(this,Te)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,Te))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Te)||(Qd.initialize(ue._l10n),v(this,Te,new Qd(this)),l(this,$r)&&(l(this,Te).data=l(this,$r),v(this,$r,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,Te))==null?void 0:e.data}set altTextData(e){l(this,Te)&&(l(this,Te).data=e)}get guessedAltText(){var e;return(e=l(this,Te))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,Te))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,Te))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,Te)&&!l(this,Te).isEmpty()}hasAltTextData(){var e;return((e=l(this,Te))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Ma)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),y(this,Z,$g).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),Kd(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Lt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(v(this,Br,!0),this._isDraggable){y(this,Z,hx).call(this,e);return}y(this,Z,jg).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,hn)&&clearTimeout(l(this,hn)),v(this,hn,setTimeout(()=>{var e;v(this,hn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/s,h=t/s,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(n){case 0:return[d+u+a,o-f-h-m+c,d+u+p+a,o-f-h+c];case 90:return[d+h+a,o-f+u+c,d+h+m+a,o-f+u+p+c];case 180:return[d-u-p+a,o-f+h+c,d-u+a,o-f+h+m+c];case 270:return[d-h-m+a,o-f-u-p+c,d-h+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,r,o]=e,a=r-n,c=o-s;switch(this.rotation){case 0:return[n,t-o,a,c];case 90:return[n,t-s,c,a];case 180:return[r,t-s,a,c];case 270:return[r,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){v(this,Ur,!0)}disableEditMode(){v(this,Ur,!1)}isInEditMode(){return l(this,Ur)}shouldGetKeyboardEvents(){return l(this,On)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){y(this,Z,$g).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ae("An editor must be serializable")}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation,v(s,$r,e.accessibilityData);const[r,o]=s.pageDimensions,[a,c,u,h]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Fs))==null||e.abort(),v(this,Fs,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,hn)&&(clearTimeout(l(this,hn)),v(this,hn,null)),y(this,Z,Ql).call(this),this.removeEditToolbar(),l(this,mi)){for(const t of l(this,mi).values())clearTimeout(t);v(this,mi,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(y(this,Z,cx).call(this),l(this,lt).classList.remove("hidden"),Kd(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),v(this,Hr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,lt).children;if(!l(this,ji)){v(this,ji,Array.from(t));const o=y(this,Z,dx).bind(this),a=y(this,Z,fx).bind(this),c=this._uiManager._signal;for(const u of l(this,ji)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",y(this,Z,px).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",ue._l10nResizer[h])}}const n=l(this,ji)[0];let s=0;for(const o of t){if(o===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,ji).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)l(this,lt).append(l(this,lt).firstChild);else if(r>s)for(let a=0;a<r-s;a++)l(this,lt).firstChild.before(l(this,lt).lastChild);let o=0;for(const a of t){const u=l(this,ji)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ue._l10nResizer[u])}}y(this,Z,zg).call(this,0),v(this,On,!0),l(this,lt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,On)&&y(this,Z,Og).call(this,l(this,su),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){y(this,Z,Ql).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(n=l(this,Te))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,s,r;(e=l(this,lt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=l(this,Te))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,ru)}set isEditing(e){v(this,ru,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){v(this,zr,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,mi)||v(this,mi,new Map);const{action:n}=e;let s=l(this,mi).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,mi).delete(n),l(this,mi).size===0&&v(this,mi,null)},ue._telemetryTimeout),l(this,mi).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),v(this,Ma,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,Ma,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};$r=new WeakMap,ji=new WeakMap,Te=new WeakMap,Ma=new WeakMap,zr=new WeakMap,lt=new WeakMap,Hr=new WeakMap,Fs=new WeakMap,su=new WeakMap,Br=new WeakMap,Ds=new WeakMap,ru=new WeakMap,Ur=new WeakMap,On=new WeakMap,hn=new WeakMap,Na=new WeakMap,Ia=new WeakMap,mi=new WeakMap,ou=new WeakMap,lf=new WeakMap,Z=new WeakSet,Ng=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this.fixAndSetPosition()},au=new WeakSet,Ig=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Fg=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},cx=function(){if(l(this,lt))return;v(this,lt,document.createElement("div")),l(this,lt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");l(this,lt).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",y(this,Z,ux).bind(this,n),{signal:t}),s.addEventListener("contextmenu",Pi,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,lt))},ux=function(e,t){var m;t.preventDefault();const{isMac:n}=Lt.platform;if(t.button!==0||t.ctrlKey&&n)return;(m=l(this,Te))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",y(this,Z,Og).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",Pi,{signal:o});const a=this.x,c=this.y,u=this.width,h=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var w;r.abort(),this.parent.togglePointerEvents(!0),(w=l(this,Te))==null||w.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=f,y(this,Z,Dg).call(this,a,c,u,h)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},Dg=function(e,t,n,s){const r=this.x,o=this.y,a=this.width,c=this.height;r===e&&o===t&&a===n&&c===s||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=r,this.y=o;const[u,h]=this.parentDimensions;this.setDims(u*a,h*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*n,h*s),this.fixAndSetPosition()},mustExec:!0})},Og=function(e,t){const[n,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,u=ue.MIN_SIZE/n,h=ue.MIN_SIZE/s,d=H=>Math.round(H*1e4)/1e4,f=y(this,Z,Fg).call(this,this.rotation),p=(H,M)=>[f[0]*H+f[2]*M,f[1]*H+f[3]*M],m=y(this,Z,Fg).call(this,360-this.rotation),w=(H,M)=>[m[0]*H+m[2]*M,m[1]*H+m[3]*M];let E,g,b=!1,A=!1;switch(e){case"topLeft":b=!0,E=(H,M)=>[0,0],g=(H,M)=>[H,M];break;case"topMiddle":E=(H,M)=>[H/2,0],g=(H,M)=>[H/2,M];break;case"topRight":b=!0,E=(H,M)=>[H,0],g=(H,M)=>[0,M];break;case"middleRight":A=!0,E=(H,M)=>[H,M/2],g=(H,M)=>[0,M/2];break;case"bottomRight":b=!0,E=(H,M)=>[H,M],g=(H,M)=>[0,0];break;case"bottomMiddle":E=(H,M)=>[H/2,M],g=(H,M)=>[H/2,0];break;case"bottomLeft":b=!0,E=(H,M)=>[0,M],g=(H,M)=>[H,0];break;case"middleLeft":A=!0,E=(H,M)=>[0,M/2],g=(H,M)=>[H,M/2];break}const S=E(a,c),T=g(a,c);let _=p(...T);const C=d(r+_[0]),k=d(o+_[1]);let R=1,L=1,[D,q]=this.screenToPageTranslation(t.movementX,t.movementY);if([D,q]=w(D/n,q/s),b){const H=Math.hypot(a,c);R=L=Math.max(Math.min(Math.hypot(T[0]-S[0]-D,T[1]-S[1]-q)/H,1/a,1/c),u/a,h/c)}else A?R=Math.max(u,Math.min(1,Math.abs(T[0]-S[0]-D)))/a:L=Math.max(h,Math.min(1,Math.abs(T[1]-S[1]-q)))/c;const K=d(a*R),ae=d(c*L);_=p(...g(K,ae));const ce=C-_[0],me=k-_[1];this.width=K,this.height=ae,this.x=ce,this.y=me,this.setDims(n*K,s*ae),this.fixAndSetPosition()},jg=function(e){const{isMac:t}=Lt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},hx=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,s=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),v(this,Na,e.clientX),v(this,Ia,e.clientY);const o=a=>{const{clientX:c,clientY:u}=a,[h,d]=this.screenToPageTranslation(c-l(this,Na),u-l(this,Ia));v(this,Na,c),v(this,Ia,u),this._uiManager.dragSelectedEditors(h,d)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:s})}const r=()=>{n.abort(),t&&this.div.classList.remove("moving"),v(this,Br,!1),this._uiManager.endDragSession()||y(this,Z,jg).call(this,e)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},$g=function(){if(l(this,Fs)||!this.div)return;v(this,Fs,new AbortController);const e=this._uiManager.combinedSignal(l(this,Fs));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},dx=function(e){ue._resizerKeyboardManager.exec(this,e)},fx=function(e){var t;l(this,On)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,lt)&&y(this,Z,Ql).call(this)},px=function(e){v(this,su,l(this,On)?e:"")},zg=function(e){if(l(this,ji))for(const t of l(this,ji))t.tabIndex=e},Ql=function(){if(v(this,On,!1),y(this,Z,zg).call(this,-1),l(this,Hr)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=l(this,Hr);y(this,Z,Dg).call(this,e,t,n,s),v(this,Hr,null)}},x(ue,au),V(ue,"_l10n",null),V(ue,"_l10nResizer",null),V(ue,"_borderLineWidth",-1),V(ue,"_colorManager",new Cg),V(ue,"_zIndex",1),V(ue,"_telemetryTimeout",1e3);let pe=ue;class v_ extends pe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const uy=3285377520,pi=4294901760,en=65535;class gx{constructor(e){this.h1=e?e&4294967295:uy,this.h2=e?e&4294967295:uy}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let w=0,E=e.length;w<E;w++){const g=e.charCodeAt(w);g<=255?t[n++]=g:(t[n++]=g>>>8,t[n++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&en,m=f&en;for(let w=0;w<s;w++)w&1?(a=o[w],a=a*d&pi|a*p&en,a=a<<15|a>>>17,a=a*f&pi|a*m&en,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[w],c=c*d&pi|c*p&en,c=c<<15|c>>>17,c=c*f&pi|c*m&en,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*d&pi|a*p&en,a=a<<15|a>>>17,a=a*f&pi|a*m&en,s&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&pi|e*36045&en,t=t*4283543511&pi|((t<<16|e>>>16)*2950163797&pi)>>>16,e^=t>>>1,e=e*444984403&pi|e*60499&en,t=t*3301882366&pi|((t<<16|e>>>16)*3120437893&pi)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Hg=Object.freeze({map:null,hash:"",transfer:void 0});var Wr,Vr,nt,cf,mx;class jv{constructor(){x(this,cf);x(this,Wr,!1);x(this,Vr,null);x(this,nt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=l(this,nt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return l(this,nt).get(e)}remove(e){if(l(this,nt).delete(e),l(this,nt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,nt).values())if(t instanceof pe)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=l(this,nt).get(e);let s=!1;if(n!==void 0)for(const[r,o]of Object.entries(t))n[r]!==o&&(s=!0,n[r]=o);else s=!0,l(this,nt).set(e,t);s&&y(this,cf,mx).call(this),t instanceof pe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,nt).has(e)}getAll(){return l(this,nt).size>0?Mv(l(this,nt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return l(this,nt).size}resetModified(){l(this,Wr)&&(v(this,Wr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new vx(this)}get serializable(){if(l(this,nt).size===0)return Hg;const e=new Map,t=new gx,n=[],s=Object.create(null);let r=!1;for(const[o,a]of l(this,nt)){const c=a instanceof pe?a.serialize(!1,s):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Hg}get editorStats(){let e=null;const t=new Map;for(const n of l(this,nt).values()){if(!(n instanceof pe))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,c]of Object.entries(s)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){v(this,Vr,null)}get modifiedIds(){if(l(this,Vr))return l(this,Vr);const e=[];for(const t of l(this,nt).values())!(t instanceof pe)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return v(this,Vr,{ids:new Set(e),hash:e.join(",")})}}Wr=new WeakMap,Vr=new WeakMap,nt=new WeakMap,cf=new WeakSet,mx=function(){l(this,Wr)||(v(this,Wr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var lu;class vx extends jv{constructor(t){super();x(this,lu);const{map:n,hash:s,transfer:r}=t.serializable,o=structuredClone(n,r?{transfer:r}:null);v(this,lu,{map:o,hash:s,transfer:r})}get print(){Ae("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,lu)}get modifiedIds(){return se(this,"modifiedIds",{ids:new Set,hash:""})}}lu=new WeakMap;var Fa;class y_{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,Fa,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Fa).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Fa).has(e.loadedName))){if(Ke(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=e,o=new FontFace(n,s,r);this.addNativeFontFace(o);try{await o.load(),l(this,Fa).add(n),t==null||t(e)}catch{J(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ae("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw J(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return se(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(St||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),se(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ke(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return se(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(S,T){return S.charCodeAt(T)<<24|S.charCodeAt(T+1)<<16|S.charCodeAt(T+2)<<8|S.charCodeAt(T+3)&255}function s(S,T,_,C){const k=S.substring(0,T),R=S.substring(T+_);return k+C+R}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function h(S,T){if(++u>30){J("Load test font never loaded."),T();return}if(c.font="30px "+S,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,S,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const m=16,w=1482184792;let E=n(f,m);for(r=0,o=d.length-3;r<o;r+=4)E=E-w+n(d,r)|0;r<d.length&&(E=E-w+n(d+"XXX",r)|0),f=s(f,m,4,i_(E));const g=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${g}}`;this.insertRule(b);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const S of[e.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=S,A.append(T)}this._document.body.append(A),h(d,()=>{A.remove(),t.complete()})}}Fa=new WeakMap;class w_{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${l_(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(r){J(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(r,o){};const s=[];for(let r=0,o=n.length;r<o;)switch(n[r++]){case Cn.BEZIER_CURVE_TO:{const[a,c,u,h,d,f]=n.slice(r,r+6);s.push(p=>p.bezierCurveTo(a,c,u,h,d,f)),r+=6}break;case Cn.MOVE_TO:{const[a,c]=n.slice(r,r+2);s.push(u=>u.moveTo(a,c)),r+=2}break;case Cn.LINE_TO:{const[a,c]=n.slice(r,r+2);s.push(u=>u.lineTo(a,c)),r+=2}break;case Cn.QUADRATIC_CURVE_TO:{const[a,c,u,h]=n.slice(r,r+4);s.push(d=>d.quadraticCurveTo(a,c,u,h)),r+=4}break;case Cn.RESTORE:s.push(a=>a.restore());break;case Cn.SAVE:s.push(a=>a.save());break;case Cn.SCALE:Ke(s.length===2,"Scale command is only valid at the third position.");break;case Cn.TRANSFORM:{const[a,c,u,h,d,f]=n.slice(r,r+6);s.push(p=>p.transform(a,c,u,h,d,f)),r+=6}break;case Cn.TRANSLATE:{const[a,c]=n.slice(r,r+2);s.push(u=>u.translate(a,c)),r+=2}break}return this.compiledGlyphs[t]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let c=2,u=s.length;c<u;c++)s[c](o)}}}var cu;class yx{constructor({enableHWA:e=!1}){x(this,cu,!1);v(this,cu,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,cu)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ae("Abstract method `_createCanvas` called.")}}cu=new WeakMap;class b_ extends yx{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class wx{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ae("Abstract method `_fetch` called.")}}class bx extends wx{async _fetch(e){const t=await Bf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hf(t)}}class xx{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,r){return"none"}destroy(e=!1){}}var Gr,Xr,dn,jn,wt,uf,qr,O,vt,Xo,qo,nd,Yo,Ax,Bg,Ko,Zl,Jl,Ug,ec;class x_ extends xx{constructor({docId:t,ownerDocument:n=globalThis.document}){super();x(this,O);x(this,Gr);x(this,Xr);x(this,dn);x(this,jn);x(this,wt);x(this,uf);x(this,qr,0);v(this,jn,t),v(this,wt,n)}addFilter(t){if(!t)return"none";let n=l(this,O,vt).get(t);if(n)return n;const[s,r,o]=y(this,O,nd).call(this,t),a=t.length===1?s:`${s}${r}${o}`;if(n=l(this,O,vt).get(a),n)return l(this,O,vt).set(t,n),n;const c=`g_${l(this,jn)}_transfer_map_${_t(this,qr)._++}`,u=y(this,O,Yo).call(this,c);l(this,O,vt).set(t,u),l(this,O,vt).set(a,u);const h=y(this,O,Ko).call(this,c);return y(this,O,Jl).call(this,s,r,o,h),u}addHCMFilter(t,n){var m;const s=`${t}-${n}`,r="base";let o=l(this,O,Xo).get(r);if((o==null?void 0:o.key)===s||(o?((m=o.filter)==null||m.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,O,Xo).set(r,o)),!t||!n))return o.url;const a=y(this,O,ec).call(this,t);t=$.makeHexColor(...a);const c=y(this,O,ec).call(this,n);if(n=$.makeHexColor(...c),l(this,O,qo).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const u=new Array(256);for(let w=0;w<=255;w++){const E=w/255;u[w]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,jn)}_hcm_filter`,f=o.filter=y(this,O,Ko).call(this,d);y(this,O,Jl).call(this,h,h,h,f),y(this,O,Bg).call(this,f);const p=(w,E)=>{const g=a[w]/255,b=c[w]/255,A=new Array(E+1);for(let S=0;S<=E;S++)A[S]=g+S/E*(b-g);return A.join(",")};return y(this,O,Jl).call(this,p(0,5),p(1,5),p(2,5),f),o.url=y(this,O,Yo).call(this,d),o.url}addAlphaFilter(t){let n=l(this,O,vt).get(t);if(n)return n;const[s]=y(this,O,nd).call(this,[t]),r=`alpha_${s}`;if(n=l(this,O,vt).get(r),n)return l(this,O,vt).set(t,n),n;const o=`g_${l(this,jn)}_alpha_map_${_t(this,qr)._++}`,a=y(this,O,Yo).call(this,o);l(this,O,vt).set(t,a),l(this,O,vt).set(r,a);const c=y(this,O,Ko).call(this,o);return y(this,O,Ug).call(this,s,c),a}addLuminosityFilter(t){let n=l(this,O,vt).get(t||"luminosity");if(n)return n;let s,r;if(t?([s]=y(this,O,nd).call(this,[t]),r=`luminosity_${s}`):r="luminosity",n=l(this,O,vt).get(r),n)return l(this,O,vt).set(t,n),n;const o=`g_${l(this,jn)}_luminosity_map_${_t(this,qr)._++}`,a=y(this,O,Yo).call(this,o);l(this,O,vt).set(t,a),l(this,O,vt).set(r,a);const c=y(this,O,Ko).call(this,o);return y(this,O,Ax).call(this,c),t&&y(this,O,Ug).call(this,s,c),a}addHighlightHCMFilter(t,n,s,r,o){var b;const a=`${n}-${s}-${r}-${o}`;let c=l(this,O,Xo).get(t);if((c==null?void 0:c.key)===a||(c?((b=c.filter)==null||b.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,O,Xo).set(t,c)),!n||!s))return c.url;const[u,h]=[n,s].map(y(this,O,ec).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(y(this,O,ec).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,O,qo).style.color="";const w=(A,S,T)=>{const _=new Array(256),C=(f-d)/T,k=A/255,R=(S-A)/(255*T);let L=0;for(let D=0;D<=T;D++){const q=Math.round(d+D*C),K=k+D*R;for(let ae=L;ae<=q;ae++)_[ae]=K;L=q+1}for(let D=L;D<256;D++)_[D]=_[L-1];return _.join(",")},E=`g_${l(this,jn)}_hcm_${t}_filter`,g=c.filter=y(this,O,Ko).call(this,E);return y(this,O,Bg).call(this,g),y(this,O,Jl).call(this,w(p[0],m[0],5),w(p[1],m[1],5),w(p[2],m[2],5),g),c.url=y(this,O,Yo).call(this,E),c.url}destroy(t=!1){t&&l(this,O,Xo).size!==0||(l(this,dn)&&(l(this,dn).parentNode.parentNode.remove(),v(this,dn,null)),l(this,Xr)&&(l(this,Xr).clear(),v(this,Xr,null)),v(this,qr,0))}}Gr=new WeakMap,Xr=new WeakMap,dn=new WeakMap,jn=new WeakMap,wt=new WeakMap,uf=new WeakMap,qr=new WeakMap,O=new WeakSet,vt=function(){return l(this,Xr)||v(this,Xr,new Map)},Xo=function(){return l(this,uf)||v(this,uf,new Map)},qo=function(){if(!l(this,dn)){const t=l(this,wt).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=l(this,wt).createElementNS(Tn,"svg");s.setAttribute("width",0),s.setAttribute("height",0),v(this,dn,l(this,wt).createElementNS(Tn,"defs")),t.append(s),s.append(l(this,dn)),l(this,wt).body.append(t)}return l(this,dn)},nd=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[n,s,r]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=n[u]/255,a[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),a.join(","),c.join(",")]},Yo=function(t){if(l(this,Gr)===void 0){v(this,Gr,"");const n=l(this,wt).URL;n!==l(this,wt).baseURI&&(Uf(n)?J('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,Gr,n.split("#",1)[0]))}return`url(${l(this,Gr)}#${t})`},Ax=function(t){const n=l(this,wt).createElementNS(Tn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Bg=function(t){const n=l(this,wt).createElementNS(Tn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Ko=function(t){const n=l(this,wt).createElementNS(Tn,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),l(this,O,qo).append(n),n},Zl=function(t,n,s){const r=l(this,wt).createElementNS(Tn,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},Jl=function(t,n,s,r){const o=l(this,wt).createElementNS(Tn,"feComponentTransfer");r.append(o),y(this,O,Zl).call(this,o,"feFuncR",t),y(this,O,Zl).call(this,o,"feFuncG",n),y(this,O,Zl).call(this,o,"feFuncB",s)},Ug=function(t,n){const s=l(this,wt).createElementNS(Tn,"feComponentTransfer");n.append(s),y(this,O,Zl).call(this,s,"feFuncA",t)},ec=function(t){return l(this,O,qo).style.color=t,Ov(getComputedStyle(l(this,O,qo)).getPropertyValue("color"))};class Sx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ae("Abstract method `_fetch` called.")}}class Ex extends Sx{async _fetch(e){const t=await Bf(e,"arraybuffer");return new Uint8Array(t)}}if(St){var Wg=Promise.withResolvers(),bc=null;(async()=>{const e=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,o;return new Map(Object.entries({fs:e,http:t,https:n,url:s,canvas:r,path2d:o}))})().then(e=>{bc=e,Wg.resolve()},e=>{J(`loadPackages: ${e}`),bc=new Map,Wg.resolve()})}class dr{static get promise(){return Wg.promise}static get(e){return bc==null?void 0:bc.get(e)}}async function _x(i){const t=await dr.get("fs").promises.readFile(i);return new Uint8Array(t)}class A_ extends xx{}class S_ extends yx{_createCanvas(e,t){return dr.get("canvas").createCanvas(e,t)}}class E_ extends wx{async _fetch(e){return _x(e)}}class __ extends Sx{async _fetch(e){return _x(e)}}const Pt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Vg(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),i.clip(s)}class $v{getPattern(){Ae("Abstract method `getPattern` called.")}}class C_ extends $v{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let r;if(s===Pt.STROKE||s===Pt.FILL){const o=t.current.getClippedPathBoundingBox(s,Re(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=$.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Vg(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else Vg(e,this._bbox),r=this._createGradient(e);return r}}function Sp(i,e,t,n,s,r,o,a){const c=e.coords,u=e.colors,h=i.data,d=i.width*4;let f;c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=r,r=o,o=f),c[n+1]>c[s+1]&&(f=n,n=s,s=f,f=o,o=a,a=f),c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=r,r=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,w=(c[n]+e.offsetX)*e.scaleX,E=(c[n+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,b=(c[s+1]+e.offsetY)*e.scaleY;if(m>=b)return;const A=u[r],S=u[r+1],T=u[r+2],_=u[o],C=u[o+1],k=u[o+2],R=u[a],L=u[a+1],D=u[a+2],q=Math.round(m),K=Math.round(b);let ae,ce,me,H,M,B,W,re;for(let ne=q;ne<=K;ne++){if(ne<E){const he=ne<m?0:(m-ne)/(m-E);ae=p-(p-w)*he,ce=A-(A-_)*he,me=S-(S-C)*he,H=T-(T-k)*he}else{let he;ne>b?he=1:E===b?he=0:he=(E-ne)/(E-b),ae=w-(w-g)*he,ce=_-(_-R)*he,me=C-(C-L)*he,H=k-(k-D)*he}let Ee;ne<m?Ee=0:ne>b?Ee=1:Ee=(m-ne)/(m-b),M=p-(p-g)*Ee,B=A-(A-R)*Ee,W=S-(S-L)*Ee,re=T-(T-D)*Ee;const Dt=Math.round(Math.min(ae,M)),_n=Math.round(Math.max(ae,M));let Ie=d*ne+Dt*4;for(let he=Dt;he<=_n;he++)Ee=(ae-he)/(ae-M),Ee<0?Ee=0:Ee>1&&(Ee=1),h[Ie++]=ce-(ce-B)*Ee|0,h[Ie++]=me-(me-W)*Ee|0,h[Ie++]=H-(H-re)*Ee|0,h[Ie++]=255}}function k_(i,e,t){const n=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(n.length/a)-1,u=a-1;for(r=0;r<c;r++){let h=r*a;for(let d=0;d<u;d++,h++)Sp(i,t,n[h],n[h+1],n[h+a],s[h],s[h+1],s[h+a]),Sp(i,t,n[h+a+1],n[h+1],n[h+a],s[h+a+1],s[h+1],s[h+a])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)Sp(i,t,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class T_ extends $v{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,m=h/f,w={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/m},E=d+2*2,g=f+2*2,b=n.getCanvas("mesh",E,g),A=b.context,S=A.createImageData(d,f);if(t){const _=S.data;for(let C=0,k=_.length;C<k;C+=4)_[C]=t[0],_[C+1]=t[1],_[C+2]=t[2],_[C+3]=255}for(const _ of this._figures)k_(S,_,w);return A.putImageData(S,2,2),{canvas:b.canvas,offsetX:a-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(e,t,n,s){Vg(e,this._bbox);let r;if(s===Pt.SHADING)r=$.singularValueDecompose2dScale(Re(e));else if(r=$.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=$.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,s===Pt.SHADING?null:this._background,t.cachedCanvases);return s!==Pt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class P_ extends $v{getPattern(){return"hotpink"}}function R_(i){switch(i[0]){case"RadialAxial":return new C_(i);case"Mesh":return new T_(i);case"Dummy":return new P_}throw new Error(`Unknown IR type: ${i[0]}`)}const hy={COLORED:1,UNCOLORED:2},hf=class hf{constructor(e,t,n,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),$f("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],m=f-h,w=p-d,E=$.singularValueDecompose2dScale(this.matrix),g=$.singularValueDecompose2dScale(this.baseTransform),b=E[0]*g[0],A=E[1]*g[1];let S=m,T=w,_=!1,C=!1;const k=Math.ceil(c*b),R=Math.ceil(u*A),L=Math.ceil(m*b),D=Math.ceil(w*A);k>=L?S=c:_=!0,R>=D?T=u:C=!0;const q=this.getSizeAndScale(S,this.ctx.canvas.width,b),K=this.getSizeAndScale(T,this.ctx.canvas.height,A),ae=e.cachedCanvases.getCanvas("pattern",q.size,K.size),ce=ae.context,me=a.createCanvasGraphics(ce);if(me.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(me,s,o),ce.translate(-q.scale*h,-K.scale*d),me.transform(q.scale,0,0,K.scale,0,0),ce.save(),this.clipBbox(me,h,d,f,p),me.baseTransform=Re(me.ctx),me.executeOperatorList(n),me.endDrawing(),ce.restore(),_||C){const H=ae.canvas;_&&(S=c),C&&(T=u);const M=this.getSizeAndScale(S,this.ctx.canvas.width,b),B=this.getSizeAndScale(T,this.ctx.canvas.height,A),W=M.size,re=B.size,ne=e.cachedCanvases.getCanvas("pattern-workaround",W,re),Ee=ne.context,Dt=_?Math.floor(m/c):0,_n=C?Math.floor(w/u):0;for(let Ie=0;Ie<=Dt;Ie++)for(let he=0;he<=_n;he++)Ee.drawImage(H,W*Ie,re*he,W,re,0,0,W,re);return{canvas:ne.canvas,scaleX:M.scale,scaleY:B.scale,offsetX:h,offsetY:d}}return{canvas:ae.canvas,scaleX:q.scale,scaleY:K.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){const s=Math.max(hf.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,s,r){const o=s-t,a=r-n;e.ctx.rect(t,n,o,a),e.current.updateRectMinMax(Re(e.ctx),[t,n,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,r=e.current;switch(t){case hy.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case hy.UNCOLORED:const a=$.makeHexColor(n[0],n[1],n[2]);s.fillStyle=a,s.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new t_(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let r=n;s!==Pt.SHADING&&(r=$.transform(r,t.baseTransform),this.matrix&&(r=$.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};V(hf,"MAX_PATTERN_SIZE",3e3);let Gg=hf;function L_({src:i,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Lt.isLittleEndian?4278190080:255,[c,u]=o?[r,a]:[a,r],h=n>>3,d=n&7,f=i.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<s;m++){for(const E=e+h;e<E;e++){const g=e<f?i[e]:255;t[p++]=g&128?u:c,t[p++]=g&64?u:c,t[p++]=g&32?u:c,t[p++]=g&16?u:c,t[p++]=g&8?u:c,t[p++]=g&4?u:c,t[p++]=g&2?u:c,t[p++]=g&1?u:c}if(d===0)continue;const w=e<f?i[e++]:255;for(let E=0;E<d;E++)t[p++]=w&1<<7-E?u:c}return{srcPos:e,destPos:p}}const dy=16,fy=100,M_=15,py=10,gy=1e3,Bt=16;function N_(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,s){e.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){e.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,r,o,a,c){e.transform(n,s,r,o,a,c),this.__originalTransform(n,s,r,o,a,c)},i.setTransform=function(n,s,r,o,a,c){e.setTransform(n,s,r,o,a,c),this.__originalSetTransform(n,s,r,o,a,c)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,s,r,o,a){e.bezierCurveTo(t,n,s,r,o,a),this.__originalBezierCurveTo(t,n,s,r,o,a)},i.rect=function(t,n,s,r){e.rect(t,n,s,r),this.__originalRect(t,n,s,r)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class I_{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Nh(i,e,t,n,s,r,o,a,c,u){const[h,d,f,p,m,w]=Re(i);if(d===0&&f===0){const b=o*h+m,A=Math.round(b),S=a*p+w,T=Math.round(S),_=(o+c)*h+m,C=Math.abs(Math.round(_)-A)||1,k=(a+u)*p+w,R=Math.abs(Math.round(k)-T)||1;return i.setTransform(Math.sign(h),0,0,Math.sign(p),A,T),i.drawImage(e,t,n,s,r,0,0,C,R),i.setTransform(h,d,f,p,m,w),[C,R]}if(h===0&&p===0){const b=a*f+m,A=Math.round(b),S=o*d+w,T=Math.round(S),_=(a+u)*f+m,C=Math.abs(Math.round(_)-A)||1,k=(o+c)*d+w,R=Math.abs(Math.round(k)-T)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,A,T),i.drawImage(e,t,n,s,r,0,0,R,C),i.setTransform(h,d,f,p,m,w),[R,C]}i.drawImage(e,t,n,s,r,o,a,c,u);const E=Math.hypot(h,d),g=Math.hypot(f,p);return[E*c,g*u]}function F_(i){const{width:e,height:t}=i;if(e>gy||t>gy)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),a,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const g of i.data){let b=128;for(;b>0;)d[f++]=g&b?0:255,b>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),a=1;a<t;a++){f=a*h,u=a*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let g=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)g=(g>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[g]&&(o[u+c]=s[g],++p),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++p),p>n)return null}for(f=h*(t-1),u=a*r,d[f]!==0&&(o[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+c]=4,++p),p>n)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),w=new Path2D;for(a=0;p&&a<=t;a++){let g=a*r;const b=g+e;for(;g<b&&!o[g];)g++;if(g===b)continue;w.moveTo(g%r,a);const A=g;let S=o[g];do{const T=m[S];do g+=T;while(!o[g]);const _=o[g];_!==5&&_!==10?(S=_,o[g]=0):(S=_&51*S>>4,o[g]&=S>>2|S<<2),w.lineTo(g%r,g/r|0),o[g]||--p}while(A!==g);--a}return d=null,o=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(w),g.beginPath(),g.restore()}}class my{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Bb,this.textMatrixScale=1,this.fontMatrix=yg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=mt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=$.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=$.applyTransform(t,e),s=$.applyTransform(t.slice(2),e),r=$.applyTransform([t[0],t[3]],e),o=$.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],o[1])}updateScalingPathMinMax(e,t){$.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,r,o,a,c,u,h){const d=$.bezierBoundingBox(t,n,s,r,o,a,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Pt.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Pt.STROKE){t||Ae("Stroke bounding box must include transform.");const s=$.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const e=$.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Pt.FILL,t=null){return $.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function vy(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%Bt,r=(t-s)/Bt,o=s===0?r:r+1,a=i.createImageData(n,Bt);let c=0,u;const h=e.data,d=a.data;let f,p,m,w;if(e.kind===Kh.GRAYSCALE_1BPP){const E=h.byteLength,g=new Uint32Array(d.buffer,0,d.byteLength>>2),b=g.length,A=n+7>>3,S=4294967295,T=Lt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?Bt:s,u=0,p=0;p<m;p++){const _=E-c;let C=0;const k=_>A?n:_*8-7,R=k&-8;let L=0,D=0;for(;C<R;C+=8)D=h[c++],g[u++]=D&128?S:T,g[u++]=D&64?S:T,g[u++]=D&32?S:T,g[u++]=D&16?S:T,g[u++]=D&8?S:T,g[u++]=D&4?S:T,g[u++]=D&2?S:T,g[u++]=D&1?S:T;for(;C<k;C++)L===0&&(D=h[c++],L=128),g[u++]=D&L?S:T,L>>=1}for(;u<b;)g[u++]=0;i.putImageData(a,0,f*Bt)}}else if(e.kind===Kh.RGBA_32BPP){for(p=0,w=n*Bt*4,f=0;f<r;f++)d.set(h.subarray(c,c+w)),c+=w,i.putImageData(a,0,p),p+=Bt;f<o&&(w=n*s*4,d.set(h.subarray(c,c+w)),i.putImageData(a,0,p))}else if(e.kind===Kh.RGB_24BPP)for(m=Bt,w=n*m,f=0;f<o;f++){for(f>=r&&(m=s,w=n*m),u=0,p=w;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;i.putImageData(a,0,f*Bt)}else throw new Error(`bad image kind: ${e.kind}`)}function yy(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%Bt,r=(t-s)/Bt,o=s===0?r:r+1,a=i.createImageData(n,Bt);let c=0;const u=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?Bt:s;({srcPos:c}=L_({src:u,srcPos:c,dest:h,width:n,height:f,nonBlackColor:0})),i.putImageData(a,0,d*Bt)}}function Hl(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Ih(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!St){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function wy(i,e){if(e)return!0;const t=$.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*hr.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const D_=["butt","round","square"],O_=["miter","round","bevel"],j_={},by={};var pr,Xg,qg;const qv=class qv{constructor(e,t,n,s,r,{optionalContentConfig:o,markedContentStack:a=null},c,u){x(this,pr);this.ctx=e,this.current=new my(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new I_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,n){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Re(this.compositeCtx))}this.ctx.save(),Ih(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Re(this.ctx)}executeOperatorList(e,t,n,s){const r=e.argsArray,o=e.fnArray;let a=t||0;const c=r.length;if(c===a)return a;const u=c-a>py&&typeof n=="function",h=u?Date.now()+M_:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,n),a;if(m=o[a],m!==Ni.dependency)this[m].apply(this,r[a]);else for(const w of r[a]){const E=w.startsWith("g_")?f:p;if(!E.has(w))return E.get(w,n),a}if(a++,a===c)return a;if(u&&++d>py){if(Date.now()>h)return n(),a;d=0}}}endDrawing(){y(this,pr,Xg).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),y(this,pr,qg).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=n,c=s,u="prescale1",h,d;for(;r>2&&a>1||o>2&&c>1;){let f=a,p=c;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,a,c,0,0,f,p),e=h.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,r=this.current.fillColor,o=this.current.patternFill,a=Re(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const k=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(k),c||(c=new Map,this._cachedBitmapsMap.set(k,c));const R=c.get(u);if(R&&!o){const L=Math.round(Math.min(a[0],a[2])+a[4]),D=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:R,offsetX:L,offsetY:D}}h=R}h||(d=this.cachedCanvases.getCanvas("maskCanvas",n,s),yy(d.context,e));let f=$.transform(a,[1/n,0,0,-1/s,0,0]);f=$.transform(f,[1,0,0,1,0,-s]);const[p,m,w,E]=$.getAxialAlignedBoundingBox([0,0,n,s],f),g=Math.round(w-p)||1,b=Math.round(E-m)||1,A=this.cachedCanvases.getCanvas("fillCanvas",g,b),S=A.context,T=p,_=m;S.translate(-T,-_),S.transform(...f),h||(h=this._scaleImage(d.canvas,kn(S)),h=h.img,c&&o&&c.set(u,h)),S.imageSmoothingEnabled=wy(Re(S),e.interpolate),Nh(S,h,0,0,h.width,h.height,0,0,n,s),S.globalCompositeOperation="source-in";const C=$.transform(kn(S),[1,0,0,1,-T,-_]);return S.fillStyle=o?r.getPattern(t,this,C,Pt.FILL):r,S.fillRect(0,0,n,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,A.canvas)),{canvas:A.canvas,offsetX:Math.round(T),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=D_[e]}setLineJoin(e){this.ctx.lineJoin=O_[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Re(this.suspendedCtx)),Hl(this.suspendedCtx,r),N_(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Hl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const r=s[0],o=s[1],a=s[2]-r,c=s[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,n,a,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,r,o,a,c,u,h,d){let f=e.canvas,p=c-h,m=u-d;if(o){const E=$.makeHexColor(...o);if(p<0||m<0||p+n>f.width||m+s>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",n,s),b=g.context;b.drawImage(f,-p,-m),b.globalCompositeOperation="destination-atop",b.fillStyle=E,b.fillRect(0,0,n,s),b.globalCompositeOperation="source-over",f=g.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,m,n,s),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(p,m,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const w=new Path2D;w.rect(c,u,n,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,n,s,c,u,n,s),t.restore()}save(){this.inSMaskMode?(Hl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Hl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,r,o){this.ctx.transform(e,t,n,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,r=this.current;let o=r.x,a=r.y,c,u;const h=Re(s),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?n.slice(0):null;for(let p=0,m=0,w=e.length;p<w;p++)switch(e[p]|0){case Ni.rectangle:o=t[m++],a=t[m++];const E=t[m++],g=t[m++],b=o+E,A=a+g;s.moveTo(o,a),E===0||g===0?s.lineTo(b,A):(s.lineTo(b,a),s.lineTo(b,A),s.lineTo(o,A)),d||r.updateRectMinMax(h,[o,a,b,A]),s.closePath();break;case Ni.moveTo:o=t[m++],a=t[m++],s.moveTo(o,a),d||r.updatePathMinMax(h,o,a);break;case Ni.lineTo:o=t[m++],a=t[m++],s.lineTo(o,a),d||r.updatePathMinMax(h,o,a);break;case Ni.curveTo:c=o,u=a,o=t[m+4],a=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],t[m+2],t[m+3],o,a,f),m+=6;break;case Ni.curveTo2:c=o,u=a,s.bezierCurveTo(o,a,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,c,u,o,a,t[m],t[m+1],t[m+2],t[m+3],f),o=t[m+2],a=t[m+3],m+=4;break;case Ni.curveTo3:c=o,u=a,o=t[m+2],a=t[m+3],s.bezierCurveTo(t[m],t[m+1],o,a,o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],o,a,o,a,f),m+=4;break;case Ni.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,kn(t),Pt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,kn(t),Pt.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=j_}eoClip(){this.pendingClip=by}beginText(){this.current.textMatrix=Bb,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||yg,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&J("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const r=n.loadedName||"sans-serif",o=((h=n.systemFontInfo)==null?void 0:h.css)||`"${r}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const c=n.italic?"italic":"normal";let u=t;t<dy?u=dy:t>fy&&(u=fy),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,r,o){this.current.textMatrix=[e,t,n,s,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){const r=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&mt.FILL_STROKE_MASK,d=!!(c&mt.ADD_TO_PATH_FLAG),f=o.patternFill&&!a.missingFile;let p;(a.disableFontFace||d||f)&&(p=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||f?(r.save(),r.translate(t,n),r.beginPath(),p(r,u),s&&r.setTransform(...s),(h===mt.FILL||h===mt.FILL_STROKE)&&r.fill(),(h===mt.STROKE||h===mt.FILL_STROKE)&&r.stroke(),r.restore()):((h===mt.FILL||h===mt.FILL_STROKE)&&r.fillText(e,t,n),(h===mt.STROKE||h===mt.FILL_STROKE)&&r.strokeText(e,t,n)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Re(r),x:t,y:n,fontSize:u,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return se(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=n.vertical,p=f?1:-1,m=n.defaultVMetrics,w=s*t.fontMatrix[0],E=t.textRenderingMode===mt.FILL&&!n.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let g;if(t.patternFill){r.save();const _=t.fillColor.getPattern(r,this,kn(r),Pt.FILL);g=Re(r),r.restore(),r.fillStyle=_}let b=t.lineWidth;const A=t.textMatrixScale;if(A===0||b===0){const _=t.textRenderingMode&mt.FILL_STROKE_MASK;(_===mt.STROKE||_===mt.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=A;if(o!==1&&(r.scale(o,o),b/=o),r.lineWidth=b,n.isInvalidPDFjsFont){const _=[];let C=0;for(const k of e)_.push(k.unicode),C+=k.width;r.fillText(_.join(""),0,0),t.x+=C*w*h,r.restore(),this.compose();return}let S=0,T;for(T=0;T<d;++T){const _=e[T];if(typeof _=="number"){S+=p*_*s/1e3;continue}let C=!1;const k=(_.isSpace?c:0)+a,R=_.fontChar,L=_.accent;let D,q,K=_.width;if(f){const ce=_.vmetric||m,me=-(_.vmetric?ce[1]:K*.5)*w,H=ce[2]*w;K=ce?-ce[0]:K,D=me/o,q=(S+H)/o}else D=S/o,q=0;if(n.remeasure&&K>0){const ce=r.measureText(R).width*1e3/s*o;if(K<ce&&this.isFontSubpixelAAEnabled){const me=K/ce;C=!0,r.save(),r.scale(me,1),D/=me}else K!==ce&&(D+=(K-ce)/2e3*s/o)}if(this.contentVisible&&(_.isInFont||n.missingFile)){if(E&&!L)r.fillText(R,D,q);else if(this.paintChar(R,D,q,g),L){const ce=D+s*L.offset.x/o,me=q-s*L.offset.y/o;this.paintChar(L.fontChar,ce,me,g)}}const ae=f?K*w-k*u:K*w+k*u;S+=ae,C&&r.restore()}f?t.y-=S:t.x+=S*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,r=n.fontSize,o=n.fontDirection,a=s.vertical?1:-1,c=n.charSpacing,u=n.wordSpacing,h=n.textHScale*o,d=n.fontMatrix||yg,f=e.length,p=n.textRenderingMode===mt.INVISIBLE;let m,w,E,g;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(h,o),m=0;m<f;++m){if(w=e[m],typeof w=="number"){g=a*w*r/1e3,this.ctx.translate(g,0),n.x+=g*h;continue}const b=(w.isSpace?u:0)+c,A=s.charProcOperatorList[w.operatorListId];if(!A){J(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(A),this.restore()),E=$.applyTransform([w.width,0],d)[0]*r+b,t.translate(E,0),n.x+=E*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,r,o){this.ctx.rect(n,s,r-n,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],s=this.baseTransform||Re(this.ctx),r={createCanvasGraphics:o=>new qv(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Gg(e,n,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=$.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=$.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=R_(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,kn(t),Pt.SHADING);const s=kn(t);if(s){const{width:r,height:o}=t.canvas,[a,c,u,h]=$.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(a,c,u-a,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ae("Should not call beginInlineImage")}beginImageData(){Ae("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Re(this.ctx),t)){const n=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],n,s),this.current.updateRectMinMax(Re(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||$f("TODO: Support non-isolated groups."),e.knockout&&J("Knockout groups not supported.");const n=Re(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=$.getAxialAlignedBoundingBox(e.bbox,Re(t));const r=[0,0,t.canvas.width,t.canvas.height];s=$.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-a),f.transform(...n),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Hl(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Re(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=$.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,n,s,r){if(y(this,pr,Xg).call(this),Ih(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[c,u]=$.singularValueDecompose2dScale(Re(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,a*u),Ih(this.ctx)}else Ih(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new my(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),y(this,pr,qg).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=F_(e)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(e),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=Re(a);a.transform(t,n,s,r,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=$.transform(c,[t,n,s,r,o[h],o[h+1]]),[p,m]=$.applyTransform([0,0],f);a.drawImage(u.canvas,p,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:o,width:a,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,c),d=h.context;d.save();const f=this.getObject(o,r);yy(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?n.getPattern(d,this,kn(t),Pt.FILL):n,d.fillRect(0,0,a,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Nh(t,h.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){J("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){J("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let u=0,h=s.length;u<h;u+=2)c.push({transform:[t,0,0,n,s[u],s[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!St){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/n);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;vy(c,e),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,kn(s));s.imageSmoothingEnabled=wy(Re(s),e.interpolate),Nh(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;vy(c,e),s=this.applyTransferMapsToCanvas(c)}for(const r of t)n.save(),n.transform(...r.transform),n.scale(1,-1),Nh(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===by?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Re(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:r}=this.ctx.getTransform();let o,a;if(n===0&&s===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=a=1/c;else{const h=c*e;o=a=h<1?1/h:1}else if(e===0)o=1/c,a=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const c=Math.abs(t*r-n*s),u=Math.hypot(t,n),h=Math.hypot(s,r);if(e===0)o=h/c,a=u/c;else{const d=e*c;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=n||1,s===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,r),o.length>0){const a=Math.max(s,r);t.setLineDash(o.map(c=>c/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};pr=new WeakSet,Xg=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},qg=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ba=qv;for(const i in Ni)ba.prototype[i]!==void 0&&(ba.prototype[Ni[i]]=ba.prototype[i]);var uu,hu;class ns{static get workerPort(){return l(this,uu)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");v(this,uu,e)}static get workerSrc(){return l(this,hu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");v(this,hu,e)}}uu=new WeakMap,hu=new WeakMap,x(ns,uu,null),x(ns,hu,"");const Fh={DATA:1,ERROR:2},ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Yt(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Ae('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Uo(i.message);case"MissingPDFException":return new Bo(i.message);case"PasswordException":return new wg(i.message,i.code);case"UnexpectedResponseException":return new zf(i.message,i.status);case"UnknownErrorException":return new bg(i.message,i.details);default:return new bg(i.message,i.toString())}}var Da,Ci,Cx,kx,Tx,sd;class tc{constructor(e,t,n){x(this,Ci);x(this,Da,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",y(this,Ci,Cx).bind(this),{signal:l(this,Da).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,n,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:a,stream:ze.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ke(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:ze.CANCEL,streamId:r,reason:Yt(u)}),h.promise}},n)}destroy(){var e;(e=l(this,Da))==null||e.abort(),v(this,Da,null)}}Da=new WeakMap,Ci=new WeakSet,Cx=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){y(this,Ci,Tx).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Fh.DATA)s.resolve(e.data);else if(e.callback===Fh.ERROR)s.reject(Yt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,r=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){r.postMessage({sourceName:n,targetName:s,callback:Fh.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:s,callback:Fh.ERROR,callbackId:e.callbackId,reason:Yt(o)})});return}if(e.streamId){y(this,Ci,kx).call(this,e);return}t(e.data)},kx=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:ze.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ze.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Ke(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:ze.ERROR,streamId:t,reason:Yt(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(a(e.data,c))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ze.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:n,targetName:s,stream:ze.START_COMPLETE,streamId:t,reason:Yt(u)})})},Tx=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case ze.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Yt(e.reason));break;case ze.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Yt(e.reason));break;case ze.PULL:if(!a){r.postMessage({sourceName:n,targetName:s,stream:ze.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(c){var u;c((u=a.onPull)==null?void 0:u.call(a))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ze.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:s,stream:ze.PULL_COMPLETE,streamId:t,reason:Yt(c)})});break;case ze.ENQUEUE:if(Ke(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case ze.CLOSE:if(Ke(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),y(this,Ci,sd).call(this,o,t);break;case ze.ERROR:Ke(o,"error should have stream controller"),o.controller.error(Yt(e.reason)),y(this,Ci,sd).call(this,o,t);break;case ze.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Yt(e.reason)),y(this,Ci,sd).call(this,o,t);break;case ze.CANCEL:if(!a)break;new Promise(function(c){var u;c((u=a.onCancel)==null?void 0:u.call(a,Yt(e.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:ze.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:s,stream:ze.CANCEL_COMPLETE,streamId:t,reason:Yt(c)})}),a.sinkCapability.reject(Yt(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},sd=async function(e,t){var n,s,r;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Yr,du;class $_{constructor({parsedData:e,rawData:t}){x(this,Yr);x(this,du);v(this,Yr,e),v(this,du,t)}getRaw(){return l(this,du)}get(e){return l(this,Yr).get(e)??null}getAll(){return Mv(l(this,Yr))}has(e){return l(this,Yr).has(e)}}Yr=new WeakMap,du=new WeakMap;const Qo=Symbol("INTERNAL");var fu,pu,gu,Oa;class z_{constructor(e,{name:t,intent:n,usage:s,rbGroups:r}){x(this,fu,!1);x(this,pu,!1);x(this,gu,!1);x(this,Oa,!0);v(this,fu,!!(e&si.DISPLAY)),v(this,pu,!!(e&si.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(l(this,gu))return l(this,Oa);if(!l(this,Oa))return!1;const{print:e,view:t}=this.usage;return l(this,fu)?(t==null?void 0:t.viewState)!=="OFF":l(this,pu)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Qo&&Ae("Internal method `_setVisible` called."),v(this,gu,n),v(this,Oa,t)}}fu=new WeakMap,pu=new WeakMap,gu=new WeakMap,Oa=new WeakMap;var Os,fe,ja,$a,mu,Yg;class H_{constructor(e,t=si.DISPLAY){x(this,mu);x(this,Os,null);x(this,fe,new Map);x(this,ja,null);x(this,$a,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,v(this,$a,e.order);for(const n of e.groups)l(this,fe).set(n.id,new z_(t,n));if(e.baseState==="OFF")for(const n of l(this,fe).values())n._setVisible(Qo,!1);for(const n of e.on)l(this,fe).get(n)._setVisible(Qo,!0);for(const n of e.off)l(this,fe).get(n)._setVisible(Qo,!1);v(this,ja,this.getHash())}}isVisible(e){if(l(this,fe).size===0)return!0;if(!e)return $f("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,fe).has(e.id)?l(this,fe).get(e.id).visible:(J(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return y(this,mu,Yg).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(l(this,fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(!l(this,fe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(!l(this,fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,fe).has(t))return J(`Optional content group not found: ${t}`),!0;if(l(this,fe).get(t).visible)return!1}return!0}return J(`Unknown optional content policy ${e.policy}.`),!0}return J(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var r;const s=l(this,fe).get(e);if(!s){J(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((r=l(this,fe).get(a))==null||r._setVisible(Qo,!1,!0));s._setVisible(Qo,!!t,!0),v(this,Os,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=l(this,fe).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}v(this,Os,null)}get hasInitialVisibility(){return l(this,ja)===null||this.getHash()===l(this,ja)}getOrder(){return l(this,fe).size?l(this,$a)?l(this,$a).slice():[...l(this,fe).keys()]:null}getGroups(){return l(this,fe).size>0?Mv(l(this,fe)):null}getGroup(e){return l(this,fe).get(e)||null}getHash(){if(l(this,Os)!==null)return l(this,Os);const e=new gx;for(const[t,n]of l(this,fe))e.update(`${t}:${n.visible}`);return v(this,Os,e.hexdigest())}}Os=new WeakMap,fe=new WeakMap,ja=new WeakMap,$a=new WeakMap,mu=new WeakSet,Yg=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=y(this,mu,Yg).call(this,r);else if(l(this,fe).has(r))o=l(this,fe).get(r).visible;else return J(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class B_{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ke(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});Ke(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,r;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new U_(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new W_(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class U_{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=Fv(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class W_{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function V_(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let h=a(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(i),t){const h=u(t);return r(h)}if(t=n("filename","i").exec(i),t){t=t[1];let h=a(t);return h=u(h),r(h)}function n(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Hf(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,w,E,g]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[E,g]}const m=[];for(let w=0;w<d.length&&w in d;++w){let[E,g]=d[w];g=a(g),E&&(g=unescape(g),w===0&&(g=c(g))),m.push(g)}return m.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return s(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function zv(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function Hv({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Bv(i){const e=i.get("Content-Disposition");if(e){let t=V_(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Fv(t))return t}return null}function Wf(i,e){return i===404||i===0&&e.startsWith("file:")?new Bo('Missing PDF "'+e+'".'):new zf(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function Px(i){return i===200||i===206}function Rx(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Lx(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(J(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class xy{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=zv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new G_(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new X_(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class G_{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,Rx(n,this._withCredentials,this._abortController)).then(r=>{if(!Px(r.status))throw Wf(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=Hv({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=Bv(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Uo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Lx(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class X_{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${n-1}`);const o=s.url;fetch(o,Rx(r,this._withCredentials,this._abortController)).then(a=>{if(!Px(a.status))throw Wf(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Lx(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Ep=200,_p=206;function q_(i){const e=i.response;return typeof e!="string"?e:Hf(e).buffer}class Y_{constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=zv(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const s={begin:e,end:t};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=_p):s.expectedStatus=Ep,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){var c,u,h;const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=n.onError)==null||c.call(n,s.status);return}const r=s.status||Ep;if(!(r===Ep&&n.expectedStatus===_p)&&r!==n.expectedStatus){(u=n.onError)==null||u.call(n,s.status);return}const a=q_(s);if(r===_p){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);n.onDone({begin:parseInt(f[1],10),chunk:a})}else a?n.onDone({begin:0,chunk:a}):(h=n.onError)==null||h.call(n,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class K_{constructor(e){this._source=e,this._manager=new Y_(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Q_(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Z_(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Q_{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...c]=o.split(": ");return[a,c.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=Hv({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Bv(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Wf(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Z_{constructor(e,t,n){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Wf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const J_=/^[a-z][a-z0-9\-+.]+:/i;function eC(i){if(J_.test(i))return new URL(i);const e=dr.get("url");return new URL(e.pathToFileURL(i))}function Mx(i,e,t){return i.protocol==="http:"?dr.get("http").request(i,{headers:e},t):dr.get("https").request(i,{headers:e},t)}class tC{constructor(e){this.source=e,this.url=eC(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=zv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new sC(this):new iC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new rC(this,e,t):new nC(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Nx{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Uo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ix{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class iC extends Nx{constructor(e){super(e);const t=Object.fromEntries(e.headers),n=s=>{if(s.statusCode===404){const c=new Bo(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=Hv({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=Bv(r)};this._request=Mx(this._url,t,n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class nC extends Ix{constructor(e,t,n){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${n-1}`;const r=o=>{if(o.statusCode===404){const a=new Bo(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=Mx(this._url,s,r),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class sC extends Nx{constructor(e){super(e);const t=dr.get("fs");t.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Bo(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class rC extends Ix{constructor(e,t,n){super(e);const s=dr.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}}const oC=1e5,Ot=30,aC=.8;var ky,js,zt,vu,yu,Kr,$n,wu,bu,Qr,za,Ha,$s,Ba,xu,Ua,Zr,Au,Su,Jr,eo,Eu,zs,Wa,gs,Fx,Dx,Kg,ci,rd,Qg,Ox,jx;const Ve=class Ve{constructor({textContentSource:e,container:t,viewport:n}){x(this,gs);x(this,js,Promise.withResolvers());x(this,zt,null);x(this,vu,!1);x(this,yu,!!((ky=globalThis.FontInspector)!=null&&ky.enabled));x(this,Kr,null);x(this,$n,null);x(this,wu,0);x(this,bu,0);x(this,Qr,null);x(this,za,null);x(this,Ha,0);x(this,$s,0);x(this,Ba,Object.create(null));x(this,xu,[]);x(this,Ua,null);x(this,Zr,[]);x(this,Au,new WeakMap);x(this,Su,null);var c;if(e instanceof ReadableStream)v(this,Ua,e);else if(typeof e=="object")v(this,Ua,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,zt,v(this,za,t)),v(this,$s,n.scale*(globalThis.devicePixelRatio||1)),v(this,Ha,n.rotation),v(this,$n,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=n.rawDims;v(this,Su,[1,0,0,-1,-o,a+r]),v(this,bu,s),v(this,wu,r),y(c=Ve,ci,Ox).call(c),Fo(t,n),l(this,js).promise.finally(()=>{l(Ve,Wa).delete(this),v(this,$n,null),v(this,Ba,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Lt.platform;return se(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Qr).read().then(({value:t,done:n})=>{if(n){l(this,js).resolve();return}l(this,Kr)??v(this,Kr,t.lang),Object.assign(l(this,Ba),t.styles),y(this,gs,Fx).call(this,t.items),e()},l(this,js).reject)};return v(this,Qr,l(this,Ua).getReader()),l(Ve,Wa).add(this),e(),l(this,js).promise}update({viewport:e,onBefore:t=null}){var r;const n=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,Ha)&&(t==null||t(),v(this,Ha,s),Fo(l(this,za),{rotation:s})),n!==l(this,$s)){t==null||t(),v(this,$s,n);const o={div:null,properties:null,ctx:y(r=Ve,ci,rd).call(r,l(this,Kr))};for(const a of l(this,Zr))o.properties=l(this,Au).get(a),o.div=a,y(this,gs,Kg).call(this,o)}}cancel(){var t;const e=new Uo("TextLayer task cancelled.");(t=l(this,Qr))==null||t.cancel(e).catch(()=>{}),v(this,Qr,null),l(this,js).reject(e)}get textDivs(){return l(this,Zr)}get textContentItemsStr(){return l(this,xu)}static cleanup(){if(!(l(this,Wa).size>0)){l(this,Jr).clear();for(const{canvas:e}of l(this,eo).values())e.remove();l(this,eo).clear()}}};js=new WeakMap,zt=new WeakMap,vu=new WeakMap,yu=new WeakMap,Kr=new WeakMap,$n=new WeakMap,wu=new WeakMap,bu=new WeakMap,Qr=new WeakMap,za=new WeakMap,Ha=new WeakMap,$s=new WeakMap,Ba=new WeakMap,xu=new WeakMap,Ua=new WeakMap,Zr=new WeakMap,Au=new WeakMap,Su=new WeakMap,Jr=new WeakMap,eo=new WeakMap,Eu=new WeakMap,zs=new WeakMap,Wa=new WeakMap,gs=new WeakSet,Fx=function(e){var s,r;if(l(this,vu))return;(r=l(this,$n)).ctx??(r.ctx=y(s=Ve,ci,rd).call(s,l(this,Kr)));const t=l(this,Zr),n=l(this,xu);for(const o of e){if(t.length>oC){J("Ignoring additional textDivs for performance reasons."),v(this,vu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,zt);v(this,zt,document.createElement("span")),l(this,zt).classList.add("markedContent"),o.id!==null&&l(this,zt).setAttribute("id",`${o.id}`),a.append(l(this,zt))}else o.type==="endMarkedContent"&&v(this,zt,l(this,zt).parentNode);continue}n.push(o.str),y(this,gs,Dx).call(this,o)}},Dx=function(e){var w;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Zr).push(t);const s=$.transform(l(this,Su),e.transform);let r=Math.atan2(s[1],s[0]);const o=l(this,Ba)[e.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,yu)&&o.fontSubstitution||o.fontFamily;a=Ve.fontFamilyMap.get(a)||a;const c=Math.hypot(s[2],s[3]),u=c*y(w=Ve,ci,jx).call(w,a,l(this,Kr));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;l(this,zt)===l(this,za)?(p.left=`${(100*h/l(this,bu)).toFixed(2)}%`,p.top=`${(100*d/l(this,wu)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(Ve,zs)*c).toFixed(2)}px)`,p.fontFamily=a,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,yu)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(n.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);E!==g&&Math.max(E,g)/Math.min(E,g)>1.5&&(m=!0)}if(m&&(n.canvasWidth=o.vertical?e.height:e.width),l(this,Au).set(t,n),l(this,$n).div=t,l(this,$n).properties=n,y(this,gs,Kg).call(this,l(this,$n)),n.hasText&&l(this,zt).append(t),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,zt).append(E)}},Kg=function(e){var a;const{div:t,properties:n,ctx:s}=e,{style:r}=t;let o="";if(l(Ve,zs)>1&&(o=`scale(${1/l(Ve,zs)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=n;y(a=Ve,ci,Qg).call(a,s,h*l(this,$s),c);const{width:d}=s.measureText(t.textContent);d>0&&(o=`scaleX(${u*l(this,$s)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},ci=new WeakSet,rd=function(e=null){let t=l(this,eo).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,eo).set(e,t),l(this,Eu).set(t,{size:0,family:""})}return t},Qg=function(e,t,n){const s=l(this,Eu).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},Ox=function(){if(l(this,zs)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),v(this,zs,e.getBoundingClientRect().height),e.remove()},jx=function(e,t){const n=l(this,Jr).get(e);if(n)return n;const s=y(this,ci,rd).call(this,t);s.canvas.width=s.canvas.height=Ot,y(this,ci,Qg).call(this,s,Ot,e);const r=s.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+a);return l(this,Jr).set(e,h),s.canvas.width=s.canvas.height=0,h}s.strokeStyle="red",s.clearRect(0,0,Ot,Ot),s.strokeText("g",0,0);let c=s.getImageData(0,0,Ot,Ot).data;a=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){a=Math.ceil(h/4/Ot);break}s.clearRect(0,0,Ot,Ot),s.strokeText("A",0,Ot),c=s.getImageData(0,0,Ot,Ot).data,o=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){o=Ot-Math.floor(h/4/Ot);break}s.canvas.width=s.canvas.height=0;const u=o?o/(o+a):aC;return l(this,Jr).set(e,u),u},x(Ve,ci),x(Ve,Jr,new Map),x(Ve,eo,new Map),x(Ve,Eu,new WeakMap),x(Ve,zs,null),x(Ve,Wa,new Set);let zc=Ve;class Hc{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(Hc.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const lC=65536,cC=100,uC=5e3,hC=St?S_:b_,dC=St?E_:bx,fC=St?A_:x_,pC=St?__:Ex;function gC(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new Zg,{docId:t}=e,n=i.url?mC(i.url):null,s=i.data?vC(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,c=i.range instanceof $x?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:lC;let h=i.worker instanceof xa?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Uf(i.docBaseUrl)?i.docBaseUrl:null,p=typeof i.cMapUrl=="string"?i.cMapUrl:null,m=i.cMapPacked!==!1,w=i.CMapReaderFactory||dC,E=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,g=i.StandardFontDataFactory||pC,b=i.stopAtErrors!==!0,A=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,S=i.isEvalSupported!==!1,T=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!St,_=typeof i.isChrome=="boolean"?i.isChrome:!Lt.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),C=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,k=typeof i.disableFontFace=="boolean"?i.disableFontFace:St,R=i.fontExtraProperties===!0,L=i.enableXfa===!0,D=i.ownerDocument||globalThis.document,q=i.disableRange===!0,K=i.disableStream===!0,ae=i.disableAutoFetch===!0,ce=i.pdfBug===!0,me=i.CanvasFactory||hC,H=i.FilterFactory||fC,M=i.enableHWA===!0,B=c?c.length:i.length??NaN,W=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!St&&!k,re=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:w===bx&&g===Ex&&p&&E&&ql(p,document.baseURI)&&ql(E,document.baseURI);i.canvasFactory&&cy("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&cy("`filterFactory`-instance option, please use `FilterFactory` instead.");const ne=null;QE(d);const Ee={canvasFactory:new me({ownerDocument:D,enableHWA:M}),filterFactory:new H({docId:t,ownerDocument:D}),cMapReaderFactory:re?null:new w({baseUrl:p,isCompressed:m}),standardFontDataFactory:re?null:new g({baseUrl:E})};if(!h){const Ie={verbosity:d,port:ns.workerPort};h=Ie.port?xa.fromPort(Ie):new xa(Ie),e._worker=h}const Dt={docId:t,apiVersion:"4.8.69",data:s,password:a,disableAutoFetch:ae,rangeChunkSize:u,length:B,docBaseUrl:f,enableXfa:L,evaluatorOptions:{maxImageSize:A,disableFontFace:k,ignoreErrors:b,isEvalSupported:S,isOffscreenCanvasSupported:T,isChrome:_,canvasMaxAreaInBytes:C,fontExtraProperties:R,useSystemFonts:W,cMapUrl:re?p:null,standardFontDataUrl:re?E:null}},_n={disableFontFace:k,fontExtraProperties:R,ownerDocument:D,pdfBug:ce,styleElement:ne,loadingParams:{disableAutoFetch:ae,enableXfa:L}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ie=h.messageHandler.sendWithPromise("GetDocRequest",Dt,s?[s.buffer]:null);let he;if(c)he=new B_(c,{disableRange:q,disableStream:K});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Ll;St?Ll=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&ql(n)?xy:tC:Ll=ql(n)?xy:K_,he=new Ll({url:n,length:B,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:q,disableStream:K})}return Ie.then(Ll=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Gf=new tc(t,Ll,h.port),qA=new xC(Gf,e,he,_n,Ee);e._transport=qA,Gf.send("Ready",null)})}).catch(e._capability.reject),e}function mC(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(St&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function vC(i){if(St&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Hf(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ay(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var df;const ff=class ff{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${_t(ff,df)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};df=new WeakMap,x(ff,df,0);let Zg=ff;class $x{constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ae("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class yC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Hs,zn,Ai,Zo,od;class wC{constructor(e,t,n,s=!1){x(this,Ai);x(this,Hs,null);x(this,zn,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new ly:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new zx,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new uh({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=_s.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var S,T;(S=this._stats)==null||S.time("Overall");const f=this._transport.getRenderingIntent(n,s,h,d),{renderingIntent:p,cacheKey:m}=f;v(this,zn,!1),y(this,Ai,od).call(this),a||(a=this._transport.getOptionalContentConfig(p));let w=this._intentStates.get(m);w||(w=Object.create(null),this._intentStates.set(m,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const E=!!(p&si.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(f));const g=_=>{var C;w.renderTasks.delete(b),(this._maybeCleanupAfterRender||E)&&v(this,zn,!0),y(this,Ai,Zo).call(this,!E),_?(b.capability.reject(_),this._abortOperatorList({intentState:w,reason:_ instanceof Error?_:new Error(_)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(C=globalThis.Stats)!=null&&C.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new em({callback:g,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(w.renderTasks||(w.renderTasks=new Set)).add(b);const A=b.task;return Promise.all([w.displayReadyCapability.promise,a]).then(([_,C])=>{var k;if(this.destroyed){g();return}if((k=this._stats)==null||k.time("Rendering"),!(C.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:_,optionalContentConfig:C}),b.operatorListChanged()}).catch(g),A}getOperatorList({intent:e="display",annotationMode:t=_s.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,n,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Hc.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function r(){o.read().then(function({value:c,done:u}){if(u){n(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),v(this,zn,!1),y(this,Ai,od).call(this),Promise.all(e)}cleanup(e=!1){v(this,zn,!0);const t=y(this,Ai,Zo).call(this,!1);return e&&t&&this._stats&&(this._stats=new ly),t}_startRenderPage(e,t){var s,r;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&y(this,Ai,Zo).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();y(this,Ai,Zo).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Iv){let s=cC;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Uo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Hs=new WeakMap,zn=new WeakMap,Ai=new WeakSet,Zo=function(e=!1){if(y(this,Ai,od).call(this),!l(this,zn)||this.destroyed)return!1;if(e)return v(this,Hs,setTimeout(()=>{v(this,Hs,null),y(this,Ai,Zo).call(this,!1)},uC)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,zn,!1),!0},od=function(){l(this,Hs)&&(clearTimeout(l(this,Hs)),v(this,Hs,null))};var Hn,pf;class bC{constructor(){x(this,Hn,new Map);x(this,pf,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};l(this,pf).then(()=>{for(const[s]of l(this,Hn))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){J("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,Hn).set(t,s)}removeEventListener(e,t){const n=l(this,Hn).get(t);n==null||n(),l(this,Hn).delete(t)}terminate(){for(const[,e]of l(this,Hn))e==null||e();l(this,Hn).clear()}}Hn=new WeakMap,pf=new WeakMap;var gf,to,io,Va,ad,Ga,ld;const _e=class _e{constructor({name:e=null,port:t=null,verbosity:n=ZE()}={}){x(this,Va);var s;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(_e,io))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(_e,io)||v(_e,io,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return St?Promise.all([dr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new tc("main","worker",e),this._messageHandler.on("ready",function(){}),y(this,Va,ad).call(this)}_initialize(){if(l(_e,to)||l(_e,Ga,ld)){this._setupFakeWorker();return}let{workerSrc:e}=_e;try{_e._isSameOrigin(window.location.href,e)||(e=_e._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new tc("main","worker",t),s=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),n.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}this._messageHandler=n,this._port=t,this._webWorker=t,y(this,Va,ad).call(this)}),n.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{$f("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(_e,to)||(J("Setting up fake worker."),v(_e,to,!0)),_e._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new bC;this._port=t;const n=`fake${_t(_e,gf)._++}`,s=new tc(n+"_worker",n,t);e.setup(s,t),this._messageHandler=new tc(n,n+"_worker",t),y(this,Va,ad).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(_e,io))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=l(this,io))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new _e(e)}static get workerSrc(){if(ns.workerSrc)return ns.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return se(this,"_setupFakeWorkerGlobal",(async()=>l(this,Ga,ld)?l(this,Ga,ld):(await import(this.workerSrc)).WorkerMessageHandler)())}};gf=new WeakMap,to=new WeakMap,io=new WeakMap,Va=new WeakSet,ad=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ga=new WeakSet,ld=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(_e,Ga),x(_e,gf,0),x(_e,to,!1),x(_e,io),St&&(v(_e,to,!0),ns.workerSrc||(ns.workerSrc="./pdf.worker.mjs")),_e._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(t,n);return n.origin===s.origin},_e._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let xa=_e;var Bn,fn,Xa,qa,pn,no,ic;class xC{constructor(e,t,n,s,r){x(this,no);x(this,Bn,new Map);x(this,fn,new Map);x(this,Xa,new Map);x(this,qa,new Map);x(this,pn,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new zx,this.fontLoader=new y_({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return se(this,"annotationStorage",new jv)}getRenderingIntent(e,t=_s.ENABLE,n=null,s=!1,r=!1){let o=si.DISPLAY,a=Hg;switch(e){case"any":o=si.ANY;break;case"display":break;case"print":o=si.PRINT;break;default:J(`getRenderingIntent - invalid intent: ${e}`)}const c=o&si.PRINT&&n instanceof vx?n:this.annotationStorage;switch(t){case _s.DISABLE:o+=si.ANNOTATIONS_DISABLE;break;case _s.ENABLE:break;case _s.ENABLE_FORMS:o+=si.ANNOTATIONS_FORMS;break;case _s.ENABLE_STORAGE:o+=si.ANNOTATIONS_STORAGE,a=c.serializable;break;default:J(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=si.IS_EDITING),r&&(o+=si.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,pn))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,fn).values())e.push(s._destroy());l(this,fn).clear(),l(this,Xa).clear(),l(this,qa).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Bn).clear(),this.filterFactory.destroy(),zc.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Uo("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}Ke(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(n,s)=>{Ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}Ke(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new yC(n,this))}),e.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new wg(n.message,n.code);break;case"InvalidPDFException":s=new Ub(n.message);break;case"MissingPDFException":s=new Bo(n.message);break;case"UnexpectedResponseException":s=new zf(n.message,n.status);break;case"UnknownErrorException":s=new bg(n.message,n.details);break;default:Ae("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",n=>{if(v(this,pn,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?l(this,pn).reject(r):l(this,pn).resolve({password:r})};try{t.onPassword(s,n.code)}catch(r){l(this,pn).reject(r)}}else l(this,pn).reject(new wg(n.message,n.code));return l(this,pn).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,fn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;J(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new w_(r,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Ke(f,"The imageRef must be defined.");for(const p of l(this,fn).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,r,o])=>{var c;if(this.destroyed)return;const a=l(this,fn).get(s);if(!a.objs.has(n)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":a.objs.resolve(n,o),(o==null?void 0:o.dataLen)>XE&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&J("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=l(this,Xa).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,qa).set(r.refStr,e);const o=new wC(t,r,this,this._params.pdfBug);return l(this,fn).set(t,o),o});return l(this,Xa).set(t,s),s}getPageIndex(e){return Ay(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return y(this,no,ic).call(this,"GetFieldObjects")}hasJSActions(){return y(this,no,ic).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return y(this,no,ic).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return y(this,no,ic).call(this,"GetOptionalContentConfig").then(t=>new H_(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Bn).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new $_(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,Bn).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,fn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Bn).clear(),this.filterFactory.destroy(!0),zc.cleanup()}}cachedPageNumber(e){if(!Ay(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,qa).get(t)??null}}Bn=new WeakMap,fn=new WeakMap,Xa=new WeakMap,qa=new WeakMap,pn=new WeakMap,no=new WeakSet,ic=function(e,t=null){const n=l(this,Bn).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return l(this,Bn).set(e,s),s};const Dh=Symbol("INITIAL_DATA");var $i,_u,Jg;class zx{constructor(){x(this,_u);x(this,$i,Object.create(null))}get(e,t=null){if(t){const s=y(this,_u,Jg).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=l(this,$i)[e];if(!n||n.data===Dh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=l(this,$i)[e];return!!t&&t.data!==Dh}resolve(e,t=null){const n=y(this,_u,Jg).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in l(this,$i)){const{data:n}=l(this,$i)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}v(this,$i,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,$i)){const{data:t}=l(this,$i)[e];t!==Dh&&(yield[e,t])}}}$i=new WeakMap,_u=new WeakSet,Jg=function(e){var t;return(t=l(this,$i))[e]||(t[e]={...Promise.withResolvers(),data:Dh})};var Bs;class AC{constructor(e){x(this,Bs,null);v(this,Bs,e),this.onContinue=null}get promise(){return l(this,Bs).capability.promise}cancel(e=0){l(this,Bs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Bs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Bs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Bs=new WeakMap;var Us,so;const Cr=class Cr{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){x(this,Us,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new AC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(Cr,so).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Cr,so).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:o}=this.params;this.gfx=new ba(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,Us)&&(window.cancelAnimationFrame(l(this,Us)),v(this,Us,null)),l(Cr,so).delete(this._canvas),this.callback(e||new Iv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,Us,window.requestAnimationFrame(()=>{v(this,Us,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Cr,so).delete(this._canvas),this.callback())))}};Us=new WeakMap,so=new WeakMap,x(Cr,so,new WeakSet);let em=Cr;const SC="4.8.69",EC="3634dab10";function Sy(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Bl(i){return Math.max(0,Math.min(255,255*i))}class Ey{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Bl(e),[e,e,e]}static G_HTML([e]){const t=Sy(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Bl)}static RGB_HTML(e){return`#${e.map(Sy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[Bl(1-Math.min(1,e+s)),Bl(1-Math.min(1,n+s)),Bl(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,r=1-t,o=1-n,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class _C{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ae("Abstract method `_createSVG` called.")}}class Uv extends _C{_createSVG(e){return document.createElementNS(Tn,e)}}class Hx{static setupStorage(e,t,n,s,r){const o=s.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&r.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var d,f;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:n});const a=r!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&Hc.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,m,w]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const E=p.children[++h.at(-1)[1]];if(E===null)continue;const{name:g}=E;if(g==="#text"){const A=document.createTextNode(E.value);u.push(A),w.append(A);continue}const b=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,g):document.createElement(g);if(w.append(b),E.attributes&&this.setAttributes({html:b,element:E,storage:t,intent:r,linkService:n}),((f=E.children)==null?void 0:f.length)>0)h.push([E,-1,b]);else if(E.value){const A=document.createTextNode(E.value);a&&Hc.shouldBuildText(g)&&u.push(A),b.append(A)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dh=1e3,CC=9,Oo=new WeakSet;function as(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class kC{static create(e){switch(e.data.annotationType){case We.LINK:return new Bx(e);case We.TEXT:return new TC(e);case We.WIDGET:switch(e.data.fieldType){case"Tx":return new PC(e);case"Btn":return e.data.radioButton?new Vx(e):e.data.checkBox?new LC(e):new MC(e);case"Ch":return new NC(e);case"Sig":return new RC(e)}return new Wo(e);case We.POPUP:return new im(e);case We.FREETEXT:return new Kx(e);case We.LINE:return new FC(e);case We.SQUARE:return new DC(e);case We.CIRCLE:return new OC(e);case We.POLYLINE:return new Qx(e);case We.CARET:return new $C(e);case We.INK:return new Wv(e);case We.POLYGON:return new jC(e);case We.HIGHLIGHT:return new Zx(e);case We.UNDERLINE:return new zC(e);case We.SQUIGGLY:return new HC(e);case We.STRIKEOUT:return new BC(e);case We.STAMP:return new Jx(e);case We.FILEATTACHMENT:return new UC(e);default:return new $e(e)}}}var ro,Ya,Ka,Cu,tm;const Yv=class Yv{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){x(this,Cu);x(this,ro,null);x(this,Ya,!1);x(this,Ka,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Yv._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;l(this,ro)||v(this,ro,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&y(this,Cu,tm).call(this,t),(n=l(this,Ka))==null||n.popup.updateEdited(e)}resetEdited(){var e;l(this,ro)&&(y(this,Cu,tm).call(this,l(this,ro).rect),(e=l(this,Ka))==null||e.popup.resetEdited(),v(this,ro,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Wo||(r.tabIndex=dh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof im){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:a,height:c}=as(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(w>0||E>0){const b=`calc(${w}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;o.borderRadius=b}else if(this instanceof Vx){const b=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case zl.SOLID:o.borderStyle="solid";break;case zl.DASHED:o.borderStyle="dashed";break;case zl.BEVELED:J("Unimplemented border style: beveled");break;case zl.INSET:J("Unimplemented border style: inset");break;case zl.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(v(this,Ya,!0),o.borderColor=$.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const u=$.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=as(this.data.rect);let a,c;e%180===0?(a=100*r/n,c=100*o/s):(a=100*o/n,c=100*r/s),t.style.width=`${a}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const r=s.detail[t],o=r[0],a=r.slice(1);s.target.style[n]=Ey[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:Ey[`${o}_rgb`](a)})};return se(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||n[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,r]of Object.entries(t)){const o=n[s];if(o){const a={detail:{[s]:r},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,g,b]=e.subarray(2,6);if(s===w&&r===E&&t===g&&n===b)return}const{style:o}=this.container;let a;if(l(this,Ya)){const{borderColor:w,borderWidth:E}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=s-t,u=r-n,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let w=2,E=e.length;w<E;w+=8){const g=e[w],b=e[w+1],A=e[w+2],S=e[w+3],T=h.createElement("rect"),_=(A-t)/c,C=(r-b)/u,k=(g-A)/c,R=(b-S)/u;T.setAttribute("x",_),T.setAttribute("y",C),T.setAttribute("width",k),T.setAttribute("height",R),p.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${C}" width="${k}" height="${R}"/>`)}l(this,Ya)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=v(this,Ka,new im({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Ae("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Oo.has(u)){J(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:u})}return n}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&Oo.has(s)&&n.push({id:o,exportValue:r,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ro=new WeakMap,Ya=new WeakMap,Ka=new WeakMap,Cu=new WeakSet,tm=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:u,height:h}=as(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*u/r}%`,t.height=`${100*h/o}%`):this.setRotation(s)};let $e=Yv;var oi,xr,Ux,Wx;class Bx extends $e{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});x(this,oi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(y(this,oi,Ux).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(y(this,oi,Wx).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&y(this,oi,xr).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),y(this,oi,xr).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=s.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),y(this,oi,xr).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),y(this,oi,xr).call(this),!this._fieldObjects){J('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:a}=n,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:w}of m)f.add(w)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(p,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(p,{value:w});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Oo.has(m)){J(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}oi=new WeakSet,xr=function(){this.container.setAttribute("data-internal-link","")},Ux=function(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,s),!1},y(this,oi,xr).call(this)},Wx=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),y(this,oi,xr).call(this)};class TC extends $e{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Wo extends $e{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Lt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,r){n.includes("mouse")?e.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var a;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(e,t,n,s){var r,o,a;for(const[c,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":$.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||CC,r=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(bp*s))||1,d=u/h;o=Math.min(s,c(d/bp))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,c(u/bp))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=$.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class PC extends Wo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),r.setValue(o.id,{[s]:n})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",u??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Oo.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=dh,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";n.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",p=>{var w;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(w){h.userValue=w.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:E}=w.detail;h.formattedValue=E,E!=null&&w.target!==document.activeElement&&(w.target.value=E),e.setValue(t,{formattedValue:E})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var A;const{charLimit:E}=w.detail,{target:g}=w;if(E===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",E);let b=h.userValue;!b||b.length<=E||(b=b.slice(0,E),g.value=h.userValue=b,e.setValue(t,{value:b}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),n.addEventListener("keydown",p=>{var E;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:w}=p.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",p=>{var w,E;if(!h.focused||!p.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",p=>{var T;h.lastCommittedValue=null;const{data:m,target:w}=p,{value:E,selectionStart:g,selectionEnd:b}=w;let A=g,S=b;switch(p.inputType){case"deleteWordBackward":{const _=E.substring(0,g).match(/\w*[^\w]*$/);_&&(A-=_[0].length);break}case"deleteWordForward":{const _=E.substring(g).match(/^[^\w]*\w*/);_&&(S+=_[0].length);break}case"deleteContentBackward":g===b&&(A-=1);break;case"deleteContentForward":g===b&&(S+=1);break}p.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:m||"",willCommit:!1,selStart:A,selEnd:S}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class RC extends Wo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class LC extends Wo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Oo.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=dh,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,n)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Vx extends Wo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Oo.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=dh,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===n;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class MC extends Bx{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class NC extends Wo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Oo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=dh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,n.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const w of s.options)w.selected=m.has(w.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,E=>E.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:w}=f.detail.insert,E=s.children[p],g=document.createElement("option");g.textContent=m,g.value=w,E?E.before(g):s.append(g),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:w,exportValue:E}=m,g=document.createElement("option");g.textContent=w,g.value=E,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class im extends $e{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:$e._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new IC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Nv}${n}`).join(",")),this.container}}var Qa,mf,vf,Za,oo,Fe,Un,Ja,ku,Tu,el,Wn,zi,Vn,Pu,Gn,Ru,ao,lo,ye,cd,nm,Gx,Xx,qx,Yx,ud,hd,sm;class IC{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:u,parentRect:h,open:d}){x(this,ye);x(this,Qa,y(this,ye,qx).bind(this));x(this,mf,y(this,ye,sm).bind(this));x(this,vf,y(this,ye,hd).bind(this));x(this,Za,y(this,ye,ud).bind(this));x(this,oo,null);x(this,Fe,null);x(this,Un,null);x(this,Ja,null);x(this,ku,null);x(this,Tu,null);x(this,el,null);x(this,Wn,!1);x(this,zi,null);x(this,Vn,null);x(this,Pu,null);x(this,Gn,null);x(this,Ru,null);x(this,ao,null);x(this,lo,!1);var f;v(this,Fe,e),v(this,Ru,s),v(this,Un,o),v(this,Gn,a),v(this,Tu,c),v(this,oo,t),v(this,Pu,u),v(this,el,h),v(this,ku,n),v(this,Ja,Dv.toDateObject(r)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,Za)),p.addEventListener("mouseenter",l(this,vf)),p.addEventListener("mouseleave",l(this,mf)),p.classList.add("popupTriggerArea");for(const p of n)(f=p.container)==null||f.addEventListener("keydown",l(this,Qa));l(this,Fe).hidden=!0,d&&y(this,ye,ud).call(this)}render(){if(l(this,zi))return;const e=v(this,zi,document.createElement("div"));if(e.className="popup",l(this,oo)){const r=e.style.outlineColor=$.makeHexColor(...l(this,oo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=$.makeHexColor(...l(this,oo).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=l(this,Ru),e.append(t),l(this,Ja)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Ja).valueOf()})),t.append(r)}const s=l(this,ye,cd);if(s)Hx.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,Un));e.append(r)}l(this,Fe).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];n.append(document.createTextNode(a)),r<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;l(this,ao)||v(this,ao,{contentsObj:l(this,Un),richText:l(this,Gn)}),e&&v(this,Vn,null),t&&(v(this,Gn,y(this,ye,Xx).call(this,t)),v(this,Un,null)),(n=l(this,zi))==null||n.remove(),v(this,zi,null)}resetEdited(){var e;l(this,ao)&&({contentsObj:_t(this,Un)._,richText:_t(this,Gn)._}=l(this,ao),v(this,ao,null),(e=l(this,zi))==null||e.remove(),v(this,zi,null),v(this,Vn,null))}forceHide(){v(this,lo,this.isVisible),l(this,lo)&&(l(this,Fe).hidden=!0)}maybeShow(){l(this,lo)&&(l(this,zi)||y(this,ye,hd).call(this),v(this,lo,!1),l(this,Fe).hidden=!1)}get isVisible(){return l(this,Fe).hidden===!1}}Qa=new WeakMap,mf=new WeakMap,vf=new WeakMap,Za=new WeakMap,oo=new WeakMap,Fe=new WeakMap,Un=new WeakMap,Ja=new WeakMap,ku=new WeakMap,Tu=new WeakMap,el=new WeakMap,Wn=new WeakMap,zi=new WeakMap,Vn=new WeakMap,Pu=new WeakMap,Gn=new WeakMap,Ru=new WeakMap,ao=new WeakMap,lo=new WeakMap,ye=new WeakSet,cd=function(){const e=l(this,Gn),t=l(this,Un);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Gn).html||null},nm=function(){var e,t,n;return((n=(t=(e=l(this,ye,cd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},Gx=function(){var e,t,n;return((n=(t=(e=l(this,ye,cd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},Xx=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,ye,Gx),fontSize:l(this,ye,nm)?`calc(${l(this,ye,nm)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return n},qx=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Wn))&&y(this,ye,ud).call(this)},Yx=function(){if(l(this,Vn)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:r}}}=l(this,Tu);let o=!!l(this,el),a=o?l(this,el):l(this,Pu);for(const m of l(this,ku))if(!a||$.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=$.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,d=c[0]+h,f=c[1];v(this,Vn,[100*(d-s)/t,100*(f-r)/n]);const{style:p}=l(this,Fe);p.left=`${l(this,Vn)[0]}%`,p.top=`${l(this,Vn)[1]}%`},ud=function(){v(this,Wn,!l(this,Wn)),l(this,Wn)?(y(this,ye,hd).call(this),l(this,Fe).addEventListener("click",l(this,Za)),l(this,Fe).addEventListener("keydown",l(this,Qa))):(y(this,ye,sm).call(this),l(this,Fe).removeEventListener("click",l(this,Za)),l(this,Fe).removeEventListener("keydown",l(this,Qa)))},hd=function(){l(this,zi)||this.render(),this.isVisible?l(this,Wn)&&l(this,Fe).classList.add("focused"):(y(this,ye,Yx).call(this),l(this,Fe).hidden=!1,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)+1e3)},sm=function(){l(this,Fe).classList.remove("focused"),!(l(this,Wn)||!this.isVisible)&&(l(this,Fe).hidden=!0,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)-1e3)};class Kx extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Q.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Lu;class FC extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Lu,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:s}=as(t.rect),r=this.svgFactory.create(n,s,!0),o=v(this,Lu,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Lu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lu=new WeakMap;var Mu;class DC extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Mu,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:s}=as(t.rect),r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,a=v(this,Mu,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Mu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mu=new WeakMap;var Nu;class OC extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Nu,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:s}=as(t.rect),r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,a=v(this,Nu,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",s/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Nu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nu=new WeakMap;var Iu;class Qx extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Iu,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:r}}=this;if(!n)return this.container;const{width:o,height:a}=as(t),c=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-t[0],m=t[3]-n[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=v(this,Iu,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Iu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Iu=new WeakMap;class jC extends Qx{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $C extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Fu;class Wv extends $e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Fu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Q.HIGHLIGHT:Q.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:s,popupRef:r}}=this,{width:o,height:a}=as(t),c=this.svgFactory.create(o,a,!0);for(const u of n){let h=[];for(let f=0,p=u.length;f<p;f+=2){const m=u[f]-t[0],w=t[3]-u[f+1];h.push(`${m},${w}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,Fu).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,Fu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fu=new WeakMap;class Zx extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Q.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class zC extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class HC extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class BC extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Jx extends $e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Q.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Du,Ou,rm;class UC extends $e{constructor(t){var s;super(t,{isRenderable:!0});x(this,Ou);x(this,Du,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",y(this,Ou,rm).bind(this)),v(this,Du,s);const{isMac:r}=Lt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&y(this,Ou,rm).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Du)}addHighlightArea(){this.container.classList.add("highlightArea")}}Du=new WeakMap,Ou=new WeakSet,rm=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ju,co,uo,$u,jo,eA,om;class WC{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a}){x(this,jo);x(this,ju,null);x(this,co,null);x(this,uo,new Map);x(this,$u,null);this.div=e,v(this,ju,t),v(this,co,n),v(this,$u,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return l(this,uo).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;Fo(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Uv,annotationStorage:e.annotationStorage||new jv,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===We.POPUP;if(c){const d=s.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=as(a.rect);if(d<=0||f<=0)continue}r.data=a;const u=kC.create(r);if(!u.isRenderable)continue;if(!c&&a.popupRef){const d=s.get(a.popupRef);d?d.push(u):s.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await y(this,jo,eA).call(this,h,a.id),u._isEditable&&(l(this,uo).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}y(this,jo,om).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Fo(t,{rotation:e.rotation}),y(this,jo,om).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,uo).values())}getEditableAnnotation(e){return l(this,uo).get(e)}}ju=new WeakMap,co=new WeakMap,uo=new WeakMap,$u=new WeakMap,jo=new WeakSet,eA=async function(e,t){var o,a;const n=e.firstChild||e,s=n.id=`${Nv}${t}`,r=await((o=l(this,$u))==null?void 0:o.getAriaAttributes(s));if(r)for(const[c,u]of r)n.setAttribute(c,u);this.div.append(e),(a=l(this,ju))==null||a.moveElementInDOM(this.div,e,n,!1)},om=function(){if(!l(this,co))return;const e=this.div;for(const[t,n]of l(this,co)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n)}l(this,co).clear()};const Oh=/\r\n?|\n/g;var Hi,Zt,zu,ho,Jt,Ue,tA,iA,nA,dd,us,fd,pd,sA,lm,rA;const we=class we extends pe{constructor(t){super({...t,name:"freeTextEditor"});x(this,Ue);x(this,Hi);x(this,Zt,"");x(this,zu,`${this.id}-editor`);x(this,ho,null);x(this,Jt);v(this,Hi,t.color||we._defaultColor||pe._defaultLineColor),v(this,Jt,t.fontSize||we._defaultFontSize)}static get _keyboardManager(){const t=we.prototype,n=o=>o.isEmpty(),s=Do.TRANSLATE_SMALL,r=Do.TRANSLATE_BIG;return se(this,"_keyboardManager",new hh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(t,n){pe.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case G.FREETEXT_SIZE:we._defaultFontSize=n;break;case G.FREETEXT_COLOR:we._defaultColor=n;break}}updateParams(t,n){switch(t){case G.FREETEXT_SIZE:y(this,Ue,tA).call(this,n);break;case G.FREETEXT_COLOR:y(this,Ue,iA).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[G.FREETEXT_SIZE,we._defaultFontSize],[G.FREETEXT_COLOR,we._defaultColor||pe._defaultLineColor]]}get propertiesToUpdate(){return[[G.FREETEXT_SIZE,l(this,Jt)],[G.FREETEXT_COLOR,l(this,Hi)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-we._internalPadding*t,-(we._internalPadding+l(this,Jt))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Q.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,ho,new AbortController);const t=this._uiManager.combinedSignal(l(this,ho));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,zu)),this._isDraggable=!0,(t=l(this,ho))==null||t.abort(),v(this,ho,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,Zt),n=v(this,Zt,y(this,Ue,nA).call(this).trimEnd());if(t===n)return;const s=r=>{if(v(this,Zt,r),!r){this.remove();return}y(this,Ue,pd).call(this),this._uiManager.rebuild(this),y(this,Ue,dd).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),y(this,Ue,dd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){we._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,zu)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,Jt)}px * var(--scale-factor))`,s.color=l(this,Hi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Kd(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,w;switch(this.rotation){case 0:m=t+(a[0]-f)/h,w=n+this.height-(a[1]-p)/d;break;case 90:m=t+(a[0]-f)/h,w=n-(a[1]-p)/d,[c,u]=[u,-c];break;case 180:m=t-this.width+(a[0]-f)/h,w=n-(a[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=t+(a[0]-f-this.height*d)/h,w=n+(a[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,w*o,c,u)}else this.setAt(t*r,n*o,this.width*r,this.height*o);y(this,Ue,pd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,w,E;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=y(m=we,us,lm).call(m,n.getData("text")||"").replaceAll(Oh,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Oh,"")),g!==this.editorDiv){let b=h;for(const A of this.editorDiv.childNodes){if(A===g){b=d;continue}b.push(y(w=we,us,fd).call(w,A))}}h.push(c.nodeValue.slice(0,u).replaceAll(Oh,""))}else if(c===this.editorDiv){let g=h,b=0;for(const A of this.editorDiv.childNodes)b++===u&&(g=d),g.push(y(E=we,us,fd).call(E,A))}v(this,Zt,`${h.join(`
`)}${r}${d.join(`
`)}`),y(this,Ue,pd).call(this);const f=new Range;let p=h.reduce((g,b)=>g+b.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const b=g.nodeValue.length;if(p<=b){f.setStart(g,p),f.setEnd(g,p);break}p-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,s){var a;let r=null;if(t instanceof Kx){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:w,parent:{page:{pageNumber:E}}}=t;if(!m||m.length===0)return null;r=t={annotationType:Q.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:w,pageIndex:E-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,n,s);return v(o,Jt,t.fontSize),v(o,Hi,$.makeHexColor(...t.color)),v(o,Zt,y(a=we,us,lm).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=we._internalPadding*this.parentScale,s=this.getRect(n,n),r=pe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Hi)),o={annotationType:Q.FREETEXT,color:r,fontSize:l(this,Jt),value:y(this,Ue,sA).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!y(this,Ue,rA).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${l(this,Jt)}px * var(--scale-factor))`,s.color=l(this,Hi),n.replaceChildren();for(const o of l(this,Zt).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),n.append(a)}const r=we._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,Zt)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Hi=new WeakMap,Zt=new WeakMap,zu=new WeakMap,ho=new WeakMap,Jt=new WeakMap,Ue=new WeakSet,tA=function(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,Jt))*this.parentScale),v(this,Jt,r),y(this,Ue,dd).call(this)},s=l(this,Jt);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},iA=function(t){const n=r=>{v(this,Hi,this.editorDiv.style.color=r)},s=l(this,Hi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},nA=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(y(s=we,us,fd).call(s,r)),n=r);return t.join(`
`)},dd=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},us=new WeakSet,fd=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Oh,"")},pd=function(){if(this.editorDiv.replaceChildren(),!!l(this,Zt))for(const t of l(this,Zt).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},sA=function(){return l(this,Zt).replaceAll(" "," ")},lm=function(t){return t.replaceAll(" "," ")},rA=function(t){const{value:n,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((a,c)=>a!==r[c])||t.pageIndex!==o},x(we,us),V(we,"_freeTextDefaultContent",""),V(we,"_internalPadding",0),V(we,"_defaultColor",null),V(we,"_defaultFontSize",10),V(we,"_type","freetext"),V(we,"_editorType",Q.FREETEXT);let am=we;class oA{toSVGPath(){Ae("Abstract method `toSVGPath` must be implemented.")}get box(){Ae("Abstract getter `box` must be implemented.")}serialize(e,t){Ae("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Ae("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Ae("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var ei,Bi,tl,il,gn,ee,fo,po,Hu,Bu,nl,sl,Ws,Uu,yf,wf,Ze,nc,aA,lA,cA,uA,hA,dA;const Ln=class Ln{constructor({x:e,y:t},n,s,r,o,a=0){x(this,Ze);x(this,ei);x(this,Bi,[]);x(this,tl);x(this,il);x(this,gn,[]);x(this,ee,new Float64Array(18));x(this,fo);x(this,po);x(this,Hu);x(this,Bu);x(this,nl);x(this,sl);x(this,Ws,[]);v(this,ei,n),v(this,sl,r*s),v(this,il,o),l(this,ee).set([NaN,NaN,NaN,NaN,e,t],6),v(this,tl,a),v(this,Bu,l(Ln,Uu)*s),v(this,Hu,l(Ln,wf)*s),v(this,nl,s),l(this,Ws).push(e,t)}isEmpty(){return isNaN(l(this,ee)[8])}add({x:e,y:t}){var R;v(this,fo,e),v(this,po,t);const[n,s,r,o]=l(this,ei);let[a,c,u,h]=l(this,ee).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<l(this,Hu))return!1;const m=p-l(this,Bu),w=m/p,E=w*d,g=w*f;let b=a,A=c;a=u,c=h,u+=E,h+=g,(R=l(this,Ws))==null||R.push(e,t);const S=-g/m,T=E/m,_=S*l(this,sl),C=T*l(this,sl);return l(this,ee).set(l(this,ee).subarray(2,8),0),l(this,ee).set([u+_,h+C],4),l(this,ee).set(l(this,ee).subarray(14,18),12),l(this,ee).set([u-_,h-C],16),isNaN(l(this,ee)[6])?(l(this,gn).length===0&&(l(this,ee).set([a+_,c+C],2),l(this,gn).push(NaN,NaN,NaN,NaN,(a+_-n)/r,(c+C-s)/o),l(this,ee).set([a-_,c-C],14),l(this,Bi).push(NaN,NaN,NaN,NaN,(a-_-n)/r,(c-C-s)/o)),l(this,ee).set([b,A,a,c,u,h],6),!this.isEmpty()):(l(this,ee).set([b,A,a,c,u,h],6),Math.abs(Math.atan2(A-c,b-a)-Math.atan2(g,E))<Math.PI/2?([a,c,u,h]=l(this,ee).subarray(2,6),l(this,gn).push(NaN,NaN,NaN,NaN,((a+u)/2-n)/r,((c+h)/2-s)/o),[a,c,b,A]=l(this,ee).subarray(14,18),l(this,Bi).push(NaN,NaN,NaN,NaN,((b+a)/2-n)/r,((A+c)/2-s)/o),!0):([b,A,a,c,u,h]=l(this,ee).subarray(0,6),l(this,gn).push(((b+5*a)/6-n)/r,((A+5*c)/6-s)/o,((5*a+u)/6-n)/r,((5*c+h)/6-s)/o,((a+u)/2-n)/r,((c+h)/2-s)/o),[u,h,a,c,b,A]=l(this,ee).subarray(12,18),l(this,Bi).push(((b+5*a)/6-n)/r,((A+5*c)/6-s)/o,((5*a+u)/6-n)/r,((5*c+h)/6-s)/o,((a+u)/2-n)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,gn),t=l(this,Bi);if(isNaN(l(this,ee)[6])&&!this.isEmpty())return y(this,Ze,aA).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);y(this,Ze,cA).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return y(this,Ze,lA).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,r,o){return new fA(e,t,n,s,r,o)}getOutlines(){var d;const e=l(this,gn),t=l(this,Bi),n=l(this,ee),[s,r,o,a]=l(this,ei),c=new Float64Array((((d=l(this,Ws))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,Ws)[f]-s)/o,c[f+1]=(l(this,Ws)[f+1]-r)/a;if(c[c.length-2]=(l(this,fo)-s)/o,c[c.length-1]=(l(this,po)-r)/a,isNaN(n[6])&&!this.isEmpty())return y(this,Ze,uA).call(this,c);const u=new Float64Array(l(this,gn).length+24+l(this,Bi).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=y(this,Ze,dA).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return y(this,Ze,hA).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,ei),l(this,nl),l(this,tl),l(this,il))}};ei=new WeakMap,Bi=new WeakMap,tl=new WeakMap,il=new WeakMap,gn=new WeakMap,ee=new WeakMap,fo=new WeakMap,po=new WeakMap,Hu=new WeakMap,Bu=new WeakMap,nl=new WeakMap,sl=new WeakMap,Ws=new WeakMap,Uu=new WeakMap,yf=new WeakMap,wf=new WeakMap,Ze=new WeakSet,nc=function(){const e=l(this,ee).subarray(4,6),t=l(this,ee).subarray(16,18),[n,s,r,o]=l(this,ei);return[(l(this,fo)+(e[0]-t[0])/2-n)/r,(l(this,po)+(e[1]-t[1])/2-s)/o,(l(this,fo)+(t[0]-e[0])/2-n)/r,(l(this,po)+(t[1]-e[1])/2-s)/o]},aA=function(){const[e,t,n,s]=l(this,ei),[r,o,a,c]=y(this,Ze,nc).call(this);return`M${(l(this,ee)[2]-e)/n} ${(l(this,ee)[3]-t)/s} L${(l(this,ee)[4]-e)/n} ${(l(this,ee)[5]-t)/s} L${r} ${o} L${a} ${c} L${(l(this,ee)[16]-e)/n} ${(l(this,ee)[17]-t)/s} L${(l(this,ee)[14]-e)/n} ${(l(this,ee)[15]-t)/s} Z`},lA=function(e){const t=l(this,Bi);e.push(`L${t[4]} ${t[5]} Z`)},cA=function(e){const[t,n,s,r]=l(this,ei),o=l(this,ee).subarray(4,6),a=l(this,ee).subarray(16,18),[c,u,h,d]=y(this,Ze,nc).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-n)/r} L${c} ${u} L${h} ${d} L${(a[0]-t)/s} ${(a[1]-n)/r}`)},uA=function(e){const t=l(this,ee),[n,s,r,o]=l(this,ei),[a,c,u,h]=y(this,Ze,nc).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-s)/o],0),this.newFreeDrawOutline(d,e,l(this,ei),l(this,nl),l(this,tl),l(this,il))},hA=function(e,t){const n=l(this,Bi);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},dA=function(e,t){const n=l(this,ee).subarray(4,6),s=l(this,ee).subarray(16,18),[r,o,a,c]=l(this,ei),[u,h,d,f]=y(this,Ze,nc).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/c],t),t+=24},x(Ln,Uu,8),x(Ln,yf,2),x(Ln,wf,l(Ln,Uu)+l(Ln,yf));let Zd=Ln;var rl,go,Xn,Wu,ti,Vu,Oe,Vt,sc,rc,pA;class fA extends oA{constructor(t,n,s,r,o,a){super();x(this,Vt);x(this,rl);x(this,go,null);x(this,Xn);x(this,Wu);x(this,ti);x(this,Vu);x(this,Oe);v(this,Oe,t),v(this,ti,n),v(this,rl,s),v(this,Vu,r),v(this,Xn,o),v(this,Wu,a),y(this,Vt,pA).call(this,a);const{x:c,y:u,width:h,height:d}=l(this,go);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-c)/h,n[f+1]=(n[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,Oe)[4]} ${l(this,Oe)[5]}`];for(let n=6,s=l(this,Oe).length;n<s;n+=6){if(isNaN(l(this,Oe)[n])){t.push(`L${l(this,Oe)[n+4]} ${l(this,Oe)[n+5]}`);continue}t.push(`C${l(this,Oe)[n]} ${l(this,Oe)[n+1]} ${l(this,Oe)[n+2]} ${l(this,Oe)[n+3]} ${l(this,Oe)[n+4]} ${l(this,Oe)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,r],o){const a=s-t,c=r-n;let u,h;switch(o){case 0:u=y(this,Vt,sc).call(this,l(this,Oe),t,r,a,-c),h=y(this,Vt,sc).call(this,l(this,ti),t,r,a,-c);break;case 90:u=y(this,Vt,rc).call(this,l(this,Oe),t,n,a,c),h=y(this,Vt,rc).call(this,l(this,ti),t,n,a,c);break;case 180:u=y(this,Vt,sc).call(this,l(this,Oe),s,n,-a,c),h=y(this,Vt,sc).call(this,l(this,ti),s,n,-a,c);break;case 270:u=y(this,Vt,rc).call(this,l(this,Oe),s,r,-a,-c),h=y(this,Vt,rc).call(this,l(this,ti),s,r,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,go)}newOutliner(t,n,s,r,o,a=0){return new Zd(t,n,s,r,o,a)}getNewOutline(t,n){const{x:s,y:r,width:o,height:a}=l(this,go),[c,u,h,d]=l(this,rl),f=o*h,p=a*d,m=s*h+c,w=r*d+u,E=this.newOutliner({x:l(this,ti)[0]*f+m,y:l(this,ti)[1]*p+w},l(this,rl),l(this,Vu),t,l(this,Wu),n??l(this,Xn));for(let g=2;g<l(this,ti).length;g+=2)E.add({x:l(this,ti)[g]*f+m,y:l(this,ti)[g+1]*p+w});return E.getOutlines()}get mustRemoveSelfIntersections(){return!0}}rl=new WeakMap,go=new WeakMap,Xn=new WeakMap,Wu=new WeakMap,ti=new WeakMap,Vu=new WeakMap,Oe=new WeakMap,Vt=new WeakSet,sc=function(t,n,s,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=n+t[c]*r,a[c+1]=s+t[c+1]*o;return a},rc=function(t,n,s,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=n+t[c+1]*r,a[c+1]=s+t[c]*o;return a},pA=function(t){const n=l(this,Oe);let s=n[4],r=n[5],o=s,a=r,c=s,u=r,h=s,d=r;const f=t?Math.max:Math.min;for(let g=6,b=n.length;g<b;g+=6){if(isNaN(n[g]))o=Math.min(o,n[g+4]),a=Math.min(a,n[g+5]),c=Math.max(c,n[g+4]),u=Math.max(u,n[g+5]),d<n[g+5]?(h=n[g+4],d=n[g+5]):d===n[g+5]&&(h=f(h,n[g+4]));else{const A=$.bezierBoundingBox(s,r,...n.slice(g,g+6));o=Math.min(o,A[0]),a=Math.min(a,A[1]),c=Math.max(c,A[2]),u=Math.max(u,A[3]),d<A[3]?(h=A[2],d=A[3]):d===A[3]&&(h=f(h,A[2]))}s=n[g+4],r=n[g+5]}const p=o-l(this,Xn),m=a-l(this,Xn),w=c-o+2*l(this,Xn),E=u-a+2*l(this,Xn);v(this,go,{x:p,y:m,width:w,height:E,lastPoint:[h,d]})};var Gu,Vs,Ui,Nt,gA,gd,mA,vA,cm;class _y{constructor(e,t=0,n=0,s=!0){x(this,Nt);x(this,Gu);x(this,Vs,[]);x(this,Ui,[]);let r=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:E,y:g,width:b,height:A}of e){const S=Math.floor((E-t)/u)*u,T=Math.ceil((E+b+t)/u)*u,_=Math.floor((g-t)/u)*u,C=Math.ceil((g+A+t)/u)*u,k=[S,_,C,!0],R=[T,_,C,!1];l(this,Vs).push(k,R),r=Math.min(r,S),o=Math.max(o,T),a=Math.min(a,_),c=Math.max(c,C)}const h=o-r+2*n,d=c-a+2*n,f=r-n,p=a-n,m=l(this,Vs).at(s?-1:-2),w=[m[0],m[2]];for(const E of l(this,Vs)){const[g,b,A]=E;E[0]=(g-f)/h,E[1]=(b-p)/d,E[2]=(A-p)/d}v(this,Gu,{x:f,y:p,width:h,height:d,lastPoint:w})}getOutlines(){l(this,Vs).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of l(this,Vs))t[3]?(e.push(...y(this,Nt,cm).call(this,t)),y(this,Nt,mA).call(this,t)):(y(this,Nt,vA).call(this,t),e.push(...y(this,Nt,cm).call(this,t)));return y(this,Nt,gA).call(this,e)}}Gu=new WeakMap,Vs=new WeakMap,Ui=new WeakMap,Nt=new WeakSet,gA=function(e){const t=[],n=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const s=[];let r;for(;n.size>0;){const o=n.values().next().value;let[a,c,u,h,d]=o;n.delete(o);let f=a,p=c;for(r=[a,u],s.push(r);;){let m;if(n.has(h))m=h;else if(n.has(d))m=d;else break;n.delete(m),[a,c,u,h,d]=m,f!==a&&(r.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}r.push(f,p)}return new VC(s,l(this,Gu))},gd=function(e){const t=l(this,Ui);let n=0,s=t.length-1;for(;n<=s;){const r=n+s>>1,o=t[r][0];if(o===e)return r;o<e?n=r+1:s=r-1}return s+1},mA=function([,e,t]){const n=y(this,Nt,gd).call(this,e);l(this,Ui).splice(n,0,[e,t])},vA=function([,e,t]){const n=y(this,Nt,gd).call(this,e);for(let s=n;s<l(this,Ui).length;s++){const[r,o]=l(this,Ui)[s];if(r!==e)break;if(r===e&&o===t){l(this,Ui).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,o]=l(this,Ui)[s];if(r!==e)break;if(r===e&&o===t){l(this,Ui).splice(s,1);return}}},cm=function(e){const[t,n,s]=e,r=[[t,n,s]],o=y(this,Nt,gd).call(this,s);for(let a=0;a<o;a++){const[c,u]=l(this,Ui)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([t,u,p])}}}return r};var Xu,ol;class VC extends oA{constructor(t,n){super();x(this,Xu);x(this,ol);v(this,ol,t),v(this,Xu,n)}toSVGPath(){const t=[];for(const n of l(this,ol)){let[s,r]=n;t.push(`M${s} ${r}`);for(let o=2;o<n.length;o+=2){const a=n[o],c=n[o+1];a===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,n,s,r],o){const a=[],c=s-t,u=r-n;for(const h of l(this,ol)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return l(this,Xu)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Xu=new WeakMap,ol=new WeakMap;class um extends Zd{newFreeDrawOutline(e,t,n,s,r,o){return new GC(e,t,n,s,r,o)}get classNamesForDrawing(){return["highlight","free"]}}class GC extends fA{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,s,r,o=0){return new um(e,t,n,s,r,o)}}var Wi,mo,al,Xe,qu,ll,Yu,Ku,Gs,Vi,cl,Qu,ve,hm,dm,fm,Ar,yA,bs;const jt=class jt{constructor({editor:e=null,uiManager:t=null}){x(this,ve);x(this,Wi,null);x(this,mo,null);x(this,al);x(this,Xe,null);x(this,qu,!1);x(this,ll,!1);x(this,Yu,null);x(this,Ku);x(this,Gs,null);x(this,Vi,null);x(this,cl);var n;e?(v(this,ll,!1),v(this,cl,G.HIGHLIGHT_COLOR),v(this,Yu,e)):(v(this,ll,!0),v(this,cl,G.HIGHLIGHT_DEFAULT_COLOR)),v(this,Vi,(e==null?void 0:e._uiManager)||t),v(this,Ku,l(this,Vi)._eventBus),v(this,al,(e==null?void 0:e.color)||((n=l(this,Vi))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),l(jt,Qu)||v(jt,Qu,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return se(this,"_keyboardManager",new hh([[["Escape","mac+Escape"],jt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],jt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],jt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],jt.prototype._moveToPrevious],[["Home","mac+Home"],jt.prototype._moveToBeginning],[["End","mac+End"],jt.prototype._moveToEnd]]))}renderButton(){const e=v(this,Wi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Vi)._signal;e.addEventListener("click",y(this,ve,Ar).bind(this),{signal:t}),e.addEventListener("keydown",y(this,ve,fm).bind(this),{signal:t});const n=v(this,mo,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=l(this,al),e.append(n),e}renderMainDropdown(){const e=v(this,Xe,y(this,ve,hm).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Wi)){y(this,ve,Ar).call(this,e);return}const t=e.target.getAttribute("data-color");t&&y(this,ve,dm).call(this,t,e)}_moveToNext(e){var t,n;if(!l(this,ve,bs)){y(this,ve,Ar).call(this,e);return}if(e.target===l(this,Wi)){(t=l(this,Xe).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=l(this,Xe))==null?void 0:t.firstChild)||e.target===l(this,Wi)){l(this,ve,bs)&&this._hideDropdownFromKeyboard();return}l(this,ve,bs)||y(this,ve,Ar).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!l(this,ve,bs)){y(this,ve,Ar).call(this,e);return}(t=l(this,Xe).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ve,bs)){y(this,ve,Ar).call(this,e);return}(t=l(this,Xe).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Xe))==null||e.classList.add("hidden"),(t=l(this,Gs))==null||t.abort(),v(this,Gs,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,ll)){if(!l(this,ve,bs)){(e=l(this,Yu))==null||e.unselect();return}this.hideDropdown(),l(this,Wi).focus({preventScroll:!0,focusVisible:l(this,qu)})}}updateColor(e){if(l(this,mo)&&(l(this,mo).style.backgroundColor=e),!l(this,Xe))return;const t=l(this,Vi).highlightColors.values();for(const n of l(this,Xe).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Wi))==null||e.remove(),v(this,Wi,null),v(this,mo,null),(t=l(this,Xe))==null||t.remove(),v(this,Xe,null)}};Wi=new WeakMap,mo=new WeakMap,al=new WeakMap,Xe=new WeakMap,qu=new WeakMap,ll=new WeakMap,Yu=new WeakMap,Ku=new WeakMap,Gs=new WeakMap,Vi=new WeakMap,cl=new WeakMap,Qu=new WeakMap,ve=new WeakSet,hm=function(){const e=document.createElement("div"),t=l(this,Vi)._signal;e.addEventListener("contextmenu",Pi,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of l(this,Vi).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",l(jt,Qu)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===l(this,al)),r.addEventListener("click",y(this,ve,dm).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",y(this,ve,fm).bind(this),{signal:t}),e},dm=function(e,t){t.stopPropagation(),l(this,Ku).dispatch("switchannotationeditorparams",{source:this,type:l(this,cl),value:e})},fm=function(e){jt._keyboardManager.exec(this,e)},Ar=function(e){if(l(this,ve,bs)){this.hideDropdown();return}if(v(this,qu,e.detail===0),l(this,Gs)||(v(this,Gs,new AbortController),window.addEventListener("pointerdown",y(this,ve,yA).bind(this),{signal:l(this,Vi).combinedSignal(l(this,Gs))})),l(this,Xe)){l(this,Xe).classList.remove("hidden");return}const t=v(this,Xe,y(this,ve,hm).call(this));l(this,Wi).append(t)},yA=function(e){var t;(t=l(this,Xe))!=null&&t.contains(e.target)||this.hideDropdown()},bs=function(){return l(this,Xe)&&!l(this,Xe).classList.contains("hidden")},x(jt,Qu,null);let Jd=jt;var ul,Zu,qn,vo,hl,vi,Ju,eh,yo,Gi,bt,Ht,dl,Yn,qe,fl,yi,th,Y,pm,md,wA,bA,xA,gm,Sr,Si,Jo,AA,vd,oc,SA,EA,_A,CA,kA;const le=class le extends pe{constructor(t){super({...t,name:"highlightEditor"});x(this,Y);x(this,ul,null);x(this,Zu,0);x(this,qn);x(this,vo,null);x(this,hl,null);x(this,vi,null);x(this,Ju,null);x(this,eh,0);x(this,yo,null);x(this,Gi,null);x(this,bt,null);x(this,Ht,!1);x(this,dl,null);x(this,Yn);x(this,qe,null);x(this,fl,"");x(this,yi);x(this,th,"");this.color=t.color||le._defaultColor,v(this,yi,t.thickness||le._defaultThickness),v(this,Yn,t.opacity||le._defaultOpacity),v(this,qn,t.boxes||null),v(this,th,t.methodOfCreation||""),v(this,fl,t.text||""),this._isDraggable=!1,t.highlightId>-1?(v(this,Ht,!0),y(this,Y,md).call(this,t),y(this,Y,Sr).call(this)):l(this,qn)&&(v(this,ul,t.anchorNode),v(this,Zu,t.anchorOffset),v(this,Ju,t.focusNode),v(this,eh,t.focusOffset),y(this,Y,pm).call(this),y(this,Y,Sr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=le.prototype;return se(this,"_keyboardManager",new hh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Ht)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,yi),methodOfCreation:l(this,th)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;pe.initialize(t,n),le._defaultColor||(le._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case G.HIGHLIGHT_DEFAULT_COLOR:le._defaultColor=n;break;case G.HIGHLIGHT_THICKNESS:le._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return l(this,dl)}updateParams(t,n){switch(t){case G.HIGHLIGHT_COLOR:y(this,Y,wA).call(this,n);break;case G.HIGHLIGHT_THICKNESS:y(this,Y,bA).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[G.HIGHLIGHT_DEFAULT_COLOR,le._defaultColor],[G.HIGHLIGHT_THICKNESS,le._defaultThickness]]}get propertiesToUpdate(){return[[G.HIGHLIGHT_COLOR,this.color||le._defaultColor],[G.HIGHLIGHT_THICKNESS,l(this,yi)||le._defaultThickness],[G.HIGHLIGHT_FREE,l(this,Ht)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(v(this,hl,new Jd({editor:this})),t.addColorPicker(l(this,hl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(y(this,Y,oc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,y(this,Y,oc).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){y(this,Y,gm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(y(this,Y,Sr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?y(this,Y,gm).call(this):t&&(y(this,Y,Sr).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var r,o,a;const{drawLayer:n}=this.parent;let s;l(this,Ht)?(t=(t-this.rotation+360)%360,s=y(r=le,Si,Jo).call(r,l(this,Gi).box,t)):s=y(o=le,Si,Jo).call(o,this,t),n.rotate(l(this,bt),t),n.rotate(l(this,qe),t),n.updateBox(l(this,bt),s),n.updateBox(l(this,qe),y(a=le,Si,Jo).call(a,l(this,vi).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,fl)&&(t.setAttribute("aria-label",l(this,fl)),t.setAttribute("role","mark")),l(this,Ht)?t.classList.add("free"):this.div.addEventListener("keydown",y(this,Y,AA).bind(this),{signal:this._uiManager._signal});const n=v(this,yo,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,vo);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Kd(this,l(this,yo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,qe),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,qe),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:y(this,Y,vd).call(this,!0);break;case 1:case 3:y(this,Y,vd).call(this,!1);break}}select(){var t,n;super.select(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(l(this,qe),"selected"))}unselect(){var t;super.unselect(),l(this,qe)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,qe),"selected"),l(this,Ht)||y(this,Y,vd).call(this,!1))}get _mustFixPosition(){return!l(this,Ht)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,bt),t),this.parent.drawLayer.show(l(this,qe),t))}static startHighlighting(t,n,{target:s,x:r,y:o}){const{x:a,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=w=>{w.preventDefault(),w.stopPropagation()},m=w=>{d.abort(),y(this,Si,CA).call(this,t,w)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Pi,{signal:f}),s.addEventListener("pointermove",y(this,Si,_A).bind(this,t),{signal:f}),this._freeHighlight=new um({x:r,y:o},[a,c,u,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,n,s){var w,E,g,b;let r=null;if(t instanceof Zx){const{data:{quadPoints:A,rect:S,rotation:T,id:_,color:C,opacity:k,popupRef:R},parent:{page:{pageNumber:L}}}=t;r=t={annotationType:Q.HIGHLIGHT,color:Array.from(C),opacity:k,quadPoints:A,boxes:null,pageIndex:L-1,rect:S.slice(0),rotation:T,id:_,deleted:!1,popupRef:R}}else if(t instanceof Wv){const{data:{inkLists:A,rect:S,rotation:T,id:_,color:C,borderStyle:{rawWidth:k},popupRef:R},parent:{page:{pageNumber:L}}}=t;r=t={annotationType:Q.HIGHLIGHT,color:Array.from(C),thickness:k,inkLists:A,boxes:null,pageIndex:L-1,rect:S.slice(0),rotation:T,id:_,deleted:!1,popupRef:R}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,h=await super.deserialize(t,n,s);h.color=$.makeHexColor(...o),v(h,Yn,u||1),c&&v(h,yi,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(a){const A=v(h,qn,[]);for(let S=0;S<a.length;S+=8)A.push({x:(a[S]-p)/d,y:1-(a[S+1]-m)/f,width:(a[S+2]-a[S])/d,height:(a[S+1]-a[S+5])/f});y(w=h,Y,pm).call(w),y(E=h,Y,Sr).call(E),h.rotate(h.rotation)}else if(c){v(h,Ht,!0);const A=c[0],S={x:A[0]-p,y:f-(A[1]-m)},T=new um(S,[0,0,d,f],1,l(h,yi)/2,!0,.001);for(let k=0,R=A.length;k<R;k+=2)S.x=A[k]-p,S.y=f-(A[k+1]-m),T.add(S);const{id:_,clipPathId:C}=n.drawLayer.draw(T,h.color,h._defaultOpacity,!0);y(g=h,Y,md).call(g,{highlightOutlines:T.getOutlines(),highlightId:_,clipPathId:C}),y(b=h,Y,Sr).call(b)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=pe._colorManager.convert(this.color),r={annotationType:Q.HIGHLIGHT,color:s,opacity:l(this,Yn),thickness:l(this,yi),quadPoints:y(this,Y,SA).call(this),outlines:y(this,Y,EA).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:y(this,Y,oc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!y(this,Y,kA).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ul=new WeakMap,Zu=new WeakMap,qn=new WeakMap,vo=new WeakMap,hl=new WeakMap,vi=new WeakMap,Ju=new WeakMap,eh=new WeakMap,yo=new WeakMap,Gi=new WeakMap,bt=new WeakMap,Ht=new WeakMap,dl=new WeakMap,Yn=new WeakMap,qe=new WeakMap,fl=new WeakMap,yi=new WeakMap,th=new WeakMap,Y=new WeakSet,pm=function(){const t=new _y(l(this,qn),.001);v(this,Gi,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Gi).box;const n=new _y(l(this,qn),.0025,.001,this._uiManager.direction==="ltr");v(this,vi,n.getOutlines());const{lastPoint:s}=l(this,vi).box;v(this,dl,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},md=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var d,f;if(v(this,Gi,t),v(this,vi,t.getNewOutline(l(this,yi)/2+1.5,.0025)),n>=0)v(this,bt,n),v(this,vo,s),this.parent.drawLayer.finalizeLine(n,t),v(this,qe,this.parent.drawLayer.drawOutline(l(this,vi)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,bt),t),this.parent.drawLayer.updateBox(l(this,bt),y(d=le,Si,Jo).call(d,l(this,Gi).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,qe),l(this,vi)),this.parent.drawLayer.updateBox(l(this,qe),y(f=le,Si,Jo).call(f,l(this,vi).box,p))}const{x:o,y:a,width:c,height:u}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=l(this,vi).box;v(this,dl,[(h[0]-o)/c,(h[1]-a)/u])},wA=function(t){const n=(o,a)=>{var c,u,h;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(l(this,bt),o),(u=l(this,hl))==null||u.updateColor(o),v(this,Yn,a),(h=this.parent)==null||h.drawLayer.changeOpacity(l(this,bt),a)},s=this.color,r=l(this,Yn);this.addCommands({cmd:n.bind(this,t,le._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},bA=function(t){const n=l(this,yi),s=r=>{v(this,yi,r),y(this,Y,xA).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},xA=function(t){if(!l(this,Ht))return;y(this,Y,md).call(this,{highlightOutlines:l(this,Gi).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},gm=function(){l(this,bt)===null||!this.parent||(this.parent.drawLayer.remove(l(this,bt)),v(this,bt,null),this.parent.drawLayer.remove(l(this,qe)),v(this,qe,null))},Sr=function(t=this.parent){l(this,bt)===null&&({id:_t(this,bt)._,clipPathId:_t(this,vo)._}=t.drawLayer.draw(l(this,Gi),this.color,l(this,Yn)),v(this,qe,t.drawLayer.drawOutline(l(this,vi))),l(this,yo)&&(l(this,yo).style.clipPath=l(this,vo)))},Si=new WeakSet,Jo=function({x:t,y:n,width:s,height:r},o){switch(o){case 90:return{x:1-n-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-t-s,width:r,height:s}}return{x:t,y:n,width:s,height:r}},AA=function(t){le._keyboardManager.exec(this,t)},vd=function(t){if(!l(this,ul))return;const n=window.getSelection();t?n.setPosition(l(this,ul),l(this,Zu)):n.setPosition(l(this,Ju),l(this,eh))},oc=function(){return l(this,Ht)?this.rotation:0},SA=function(){if(l(this,Ht))return null;const[t,n]=this.pageDimensions,[s,r]=this.pageTranslation,o=l(this,qn),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*t+s,m=(1-h-f)*n+r;a[c]=a[c+4]=p,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=p+d*t,a[c+5]=a[c+7]=m+f*n,c+=8}return a},EA=function(t){return l(this,Gi).serialize(t,y(this,Y,oc).call(this))},_A=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},CA=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},kA=function(t){const{color:n}=this._initialData;return t.color.some((s,r)=>s!==n[r])},x(le,Si),V(le,"_defaultColor",null),V(le,"_defaultOpacity",1),V(le,"_defaultThickness",12),V(le,"_type","highlight"),V(le,"_editorType",Q.HIGHLIGHT),V(le,"_freeHighlightId",-1),V(le,"_freeHighlight",null),V(le,"_freeHighlightClipId","");let ef=le;var wo,bo,mn,Kn,wi,xo,Ao,So,Qn,pl,Eo,_o,Xs,I,TA,PA,RA,LA,vm,MA,ym,NA,IA,FA,DA,OA,Er,wm,bm,xm,yd,wd,ea,Am,bd,ms,jA,Sm,$A,zA,Em,xd,ac;const ke=class ke extends pe{constructor(t){super({...t,name:"inkEditor"});x(this,I);x(this,wo,0);x(this,bo,0);x(this,mn,null);x(this,Kn,new Path2D);x(this,wi,!1);x(this,xo,null);x(this,Ao,!1);x(this,So,!1);x(this,Qn,null);x(this,pl,null);x(this,Eo,0);x(this,_o,0);x(this,Xs,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){pe.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case G.INK_THICKNESS:ke._defaultThickness=n;break;case G.INK_COLOR:ke._defaultColor=n;break;case G.INK_OPACITY:ke._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case G.INK_THICKNESS:y(this,I,TA).call(this,n);break;case G.INK_COLOR:y(this,I,PA).call(this,n);break;case G.INK_OPACITY:y(this,I,RA).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[G.INK_THICKNESS,ke._defaultThickness],[G.INK_COLOR,ke._defaultColor||pe._defaultLineColor],[G.INK_OPACITY,Math.round(ke._defaultOpacity*100)]]}get propertiesToUpdate(){return[[G.INK_THICKNESS,this.thickness||ke._defaultThickness],[G.INK_COLOR,this.color||ke._defaultColor||pe._defaultLineColor],[G.INK_OPACITY,Math.round(100*(this.opacity??ke._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(y(this,I,yd).call(this),y(this,I,wd).call(this)),this.isAttachedToDOM||(this.parent.add(this),y(this,I,ea).call(this)),y(this,I,ac).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,mn)&&(clearTimeout(l(this,mn)),v(this,mn,null)),(t=l(this,Qn))==null||t.disconnect(),v(this,Qn,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,s=this.width*t,r=this.height*n;this.setDimensions(s,r)}enableEditMode(){l(this,wi)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,y(this,I,wm).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),y(this,I,bm).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,wi)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),v(this,wi,!0),this.div.classList.add("disabled"),y(this,I,ac).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,wi)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),y(this,I,MA).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),y(this,I,ym).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),y(this,I,xm).call(this,t)}canvasPointerleave(t){y(this,I,xm).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,wi)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,o,a]=y(this,I,LA).call(this);if(this.setAt(s,r,0,0),this.setDims(o,a),y(this,I,yd).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(t*c,n*u,this.width*c,this.height*u),v(this,So,!0),y(this,I,ea).call(this),this.setDims(this.width*c,this.height*u),y(this,I,Er).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return y(this,I,wd).call(this),this.div}setDimensions(t,n){const s=Math.round(t),r=Math.round(n);if(l(this,Eo)===s&&l(this,_o)===r)return;v(this,Eo,s),v(this,_o,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=n/a,this.fixAndSetPosition(),l(this,wi)&&y(this,I,Am).call(this,t,n),y(this,I,ea).call(this),y(this,I,Er).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,n,s){var E,g,b;if(t instanceof Wv)return null;const r=await super.deserialize(t,n,s);r.thickness=t.thickness,r.color=$.makeHexColor(...t.color),r.opacity=t.opacity;const[o,a]=r.pageDimensions,c=r.width*o,u=r.height*a,h=r.parentScale,d=t.thickness/2;v(r,wi,!0),v(r,Eo,Math.round(c)),v(r,_o,Math.round(u));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:A}of f){A=y(E=ke,ms,$A).call(E,A,p,m);const S=[];r.paths.push(S);let T=h*(A[0]-d),_=h*(A[1]-d);for(let k=2,R=A.length;k<R;k+=6){const L=h*(A[k]-d),D=h*(A[k+1]-d),q=h*(A[k+2]-d),K=h*(A[k+3]-d),ae=h*(A[k+4]-d),ce=h*(A[k+5]-d);S.push([[T,_],[L,D],[q,K],[ae,ce]]),T=ae,_=ce}const C=y(this,ms,jA).call(this,S);r.bezierPath2D.push(C)}const w=y(g=r,I,Em).call(g);return v(r,bo,Math.max(pe.MIN_SIZE,w[2]-w[0])),v(r,wo,Math.max(pe.MIN_SIZE,w[3]-w[1])),y(b=r,I,Am).call(b,c,u),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=pe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Q.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:y(this,I,zA).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};wo=new WeakMap,bo=new WeakMap,mn=new WeakMap,Kn=new WeakMap,wi=new WeakMap,xo=new WeakMap,Ao=new WeakMap,So=new WeakMap,Qn=new WeakMap,pl=new WeakMap,Eo=new WeakMap,_o=new WeakMap,Xs=new WeakMap,I=new WeakSet,TA=function(t){const n=r=>{this.thickness=r,y(this,I,ac).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},PA=function(t){const n=r=>{this.color=r,y(this,I,Er).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RA=function(t){const n=r=>{this.opacity=r,y(this,I,Er).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},LA=function(){const{parentRotation:t,parentDimensions:[n,s]}=this;switch(t){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},vm=function(){const{ctx:t,color:n,opacity:s,thickness:r,parentScale:o,scaleFactor:a}=this;t.lineWidth=r*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${p_(s)}`},MA=function(t,n){this.canvas.addEventListener("contextmenu",Pi,{signal:this._uiManager._signal}),y(this,I,bm).call(this),v(this,xo,new AbortController);const s=this._uiManager.combinedSignal(l(this,xo));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,l(this,So)||(v(this,So,!0),y(this,I,ea).call(this),this.thickness||(this.thickness=ke._defaultThickness),this.color||(this.color=ke._defaultColor||pe._defaultLineColor),this.opacity??(this.opacity=ke._defaultOpacity)),this.currentPath.push([t,n]),v(this,Ao,!1),y(this,I,vm).call(this),v(this,Xs,()=>{y(this,I,FA).call(this),l(this,Xs)&&window.requestAnimationFrame(l(this,Xs))}),window.requestAnimationFrame(l(this,Xs))},ym=function(t,n){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&n===r)return;const o=this.currentPath;let a=l(this,Kn);if(o.push([t,n]),v(this,Ao,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,n);return}o.length===3&&(v(this,Kn,a=new Path2D),a.moveTo(...o[0])),y(this,I,DA).call(this,a,...o.at(-3),...o.at(-2),t,n)},NA=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,Kn).lineTo(...t)},IA=function(t,n){v(this,Xs,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),y(this,I,ym).call(this,t,n),y(this,I,NA).call(this);let s;if(this.currentPath.length!==1)s=y(this,I,OA).call(this);else{const u=[t,n];s=[[u,u.slice(),u.slice(),u]]}const r=l(this,Kn),o=this.currentPath;this.currentPath=[],v(this,Kn,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(y(this,I,yd).call(this),y(this,I,wd).call(this)),y(this,I,ac).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},FA=function(){if(!l(this,Ao))return;v(this,Ao,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(a=>a[0]),r=n.map(a=>a[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(l(this,Kn)),o.restore()},DA=function(t,n,s,r,o,a,c){const u=(n+r)/2,h=(s+o)/2,d=(r+a)/2,f=(o+c)/2;t.bezierCurveTo(u+2*(r-u)/3,h+2*(o-h)/3,d+2*(r-d)/3,f+2*(o-f)/3,d,f)},OA=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let s,[r,o]=t[0];for(s=1;s<t.length-2;s++){const[p,m]=t[s],[w,E]=t[s+1],g=(p+w)/2,b=(m+E)/2,A=[r+2*(p-r)/3,o+2*(m-o)/3],S=[g+2*(p-g)/3,b+2*(m-b)/3];n.push([[r,o],A,S,[g,b]]),[r,o]=[g,b]}const[a,c]=t[s],[u,h]=t[s+1],d=[r+2*(a-r)/3,o+2*(c-o)/3],f=[u+2*(a-u)/3,h+2*(c-h)/3];return n.push([[r,o],d,f,[u,h]]),n},Er=function(){if(this.isEmpty()){y(this,I,bd).call(this);return}y(this,I,vm).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),y(this,I,bd).call(this);for(const s of this.bezierPath2D)n.stroke(s)},wm=function(){if(l(this,pl))return;v(this,pl,new AbortController);const t=this._uiManager.combinedSignal(l(this,pl));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},bm=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},xm=function(t){var n;(n=l(this,xo))==null||n.abort(),v(this,xo,null),y(this,I,wm).call(this),l(this,mn)&&clearTimeout(l(this,mn)),v(this,mn,setTimeout(()=>{v(this,mn,null),this.canvas.removeEventListener("contextmenu",Pi)},10)),y(this,I,IA).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},yd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},wd=function(){v(this,Qn,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),l(this,Qn).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Qn))==null||t.disconnect(),v(this,Qn,null)},{once:!0})},ea=function(){if(!l(this,So))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),y(this,I,bd).call(this)},Am=function(t,n){const s=y(this,I,xd).call(this),r=(t-s)/l(this,bo),o=(n-s)/l(this,wo);this.scaleFactor=Math.min(r,o)},bd=function(){const t=y(this,I,xd).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ms=new WeakSet,jA=function(t){const n=new Path2D;for(let s=0,r=t.length;s<r;s++){const[o,a,c,u]=t[s];s===0&&n.moveTo(...o),n.bezierCurveTo(a[0],a[1],c[0],c[1],u[0],u[1])}return n},Sm=function(t,n,s){const[r,o,a,c]=n;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+r,t[u+1]=d+o}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]+=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=a-t[u+1],t[u+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},$A=function(t,n,s){const[r,o,a,c]=n;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-o,t[u+1]=d-r}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]-=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=c-t[u+1],t[u+1]=a-d}break;default:throw new Error("Invalid rotation")}return t},zA=function(t,n,s,r){var h,d;const o=[],a=this.thickness/2,c=t*n+a,u=t*s+a;for(const f of this.paths){const p=[],m=[];for(let w=0,E=f.length;w<E;w++){const[g,b,A,S]=f[w];if(g[0]===S[0]&&g[1]===S[1]&&E===1){const K=t*g[0]+c,ae=t*g[1]+u;p.push(K,ae),m.push(K,ae);break}const T=t*g[0]+c,_=t*g[1]+u,C=t*b[0]+c,k=t*b[1]+u,R=t*A[0]+c,L=t*A[1]+u,D=t*S[0]+c,q=t*S[1]+u;w===0&&(p.push(T,_),m.push(T,_)),p.push(C,k,R,L,D,q),m.push(C,k),w===E-1&&m.push(D,q)}o.push({bezier:y(h=ke,ms,Sm).call(h,p,r,this.rotation),points:y(d=ke,ms,Sm).call(d,m,r,this.rotation)})}return o},Em=function(){let t=1/0,n=-1/0,s=1/0,r=-1/0;for(const o of this.paths)for(const[a,c,u,h]of o){const d=$.bezierBoundingBox(...a,...c,...u,...h);t=Math.min(t,d[0]),s=Math.min(s,d[1]),n=Math.max(n,d[2]),r=Math.max(r,d[3])}return[t,s,n,r]},xd=function(){return l(this,wi)?Math.ceil(this.thickness*this.parentScale):0},ac=function(t=!1){if(this.isEmpty())return;if(!l(this,wi)){y(this,I,Er).call(this);return}const n=y(this,I,Em).call(this),s=y(this,I,xd).call(this);v(this,bo,Math.max(pe.MIN_SIZE,n[2]-n[0])),v(this,wo,Math.max(pe.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(s+l(this,bo)*this.scaleFactor),o=Math.ceil(s+l(this,wo)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=r/a,this.height=o/c,this.setAspectRatio(r,o);const u=this.translationX,h=this.translationY;this.translationX=-n[0],this.translationY=-n[1],y(this,I,ea).call(this),y(this,I,Er).call(this),v(this,Eo,r),v(this,_o,o),this.setDims(r,o);const d=t?s/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},x(ke,ms),V(ke,"_defaultColor",null),V(ke,"_defaultOpacity",1),V(ke,"_defaultThickness",1),V(ke,"_type","ink"),V(ke,"_editorType",Q.INK);let mm=ke;var Pe,ct,qs,Zn,Ys,gl,vn,Jn,yn,ii,ml,ie,lc,cc,Ad,Cm,HA,Sd,km,Ed,BA,UA;const Ac=class Ac extends pe{constructor(t){super({...t,name:"stampEditor"});x(this,ie);x(this,Pe,null);x(this,ct,null);x(this,qs,null);x(this,Zn,null);x(this,Ys,null);x(this,gl,"");x(this,vn,null);x(this,Jn,null);x(this,yn,null);x(this,ii,!1);x(this,ml,!1);v(this,Zn,t.bitmapUrl),v(this,Ys,t.bitmapFile)}static initialize(t,n){pe.initialize(t,n)}static get supportedTypes(){return se(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return se(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Q.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,n;l(this,ct)&&(v(this,Pe,null),this._uiManager.imageManager.deleteId(l(this,ct)),(t=l(this,vn))==null||t.remove(),v(this,vn,null),(n=l(this,Jn))==null||n.disconnect(),v(this,Jn,null),l(this,yn)&&(clearTimeout(l(this,yn)),v(this,yn,null))),super.remove()}rebuild(){if(!this.parent){l(this,ct)&&y(this,ie,Ad).call(this);return}super.rebuild(),this.div!==null&&(l(this,ct)&&l(this,vn)===null&&y(this,ie,Ad).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,qs)||l(this,Pe)||l(this,Zn)||l(this,Ys)||l(this,ct))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,Pe)?y(this,ie,Cm).call(this):y(this,ie,Ad).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,n*r,this.width*s,this.height*r)}return this.div}copyCanvas(t,n,s=!1){var p;t||(t=224);const{width:r,height:o}=l(this,Pe),a=new Ag;let c=l(this,Pe),u=r,h=o,d=null;if(n){if(r>n||o>n){const k=Math.min(n/r,n/o);u=Math.floor(r*k),h=Math.floor(o*k)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*a.sx),w=d.height=Math.ceil(h*a.sy);l(this,ii)||(c=y(this,ie,Sd).call(this,m,w));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let g="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",b="#42414d");const A=15,S=A*a.sx,T=A*a.sy,_=new OffscreenCanvas(S*2,T*2),C=_.getContext("2d");C.fillStyle=g,C.fillRect(0,0,S*2,T*2),C.fillStyle=b,C.fillRect(0,0,S,T),C.fillRect(S,T,S,T),E.fillStyle=E.createPattern(_,"repeat"),E.fillRect(0,0,m,w),E.drawImage(c,0,0,c.width,c.height,0,0,m,w)}let f=null;if(s){let m,w;if(a.symmetric&&c.width<t&&c.height<t)m=c.width,w=c.height;else if(c=l(this,Pe),r>t||o>t){const b=Math.min(t/r,t/o);m=Math.floor(r*b),w=Math.floor(o*b),l(this,ii)||(c=y(this,ie,Sd).call(this,m,w))}const g=new OffscreenCanvas(m,w).getContext("2d",{willReadFrequently:!0});g.drawImage(c,0,0,c.width,c.height,0,0,m,w),f={width:m,height:w,data:g.getImageData(0,0,m,w).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,vn)}static async deserialize(t,n,s){var w;let r=null;if(t instanceof Jx){const{data:{rect:E,rotation:g,id:b,structParent:A,popupRef:S},container:T,parent:{page:{pageNumber:_}}}=t,C=T.querySelector("canvas"),k=s.imageManager.getFromCanvas(T.id,C);C.remove();const R=((w=await n._structTree.getAriaAttributes(`${Nv}${b}`))==null?void 0:w.get("aria-label"))||"";r=t={annotationType:Q.STAMP,bitmapId:k.id,bitmap:k.bitmap,pageIndex:_-1,rect:E.slice(0),rotation:g,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:R},isSvg:!1,structParent:A,popupRef:S}}const o=await super.deserialize(t,n,s),{rect:a,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&s.imageManager.isValidId(h)?(v(o,ct,h),c&&v(o,Pe,c)):v(o,Zn,u),v(o,ii,d);const[p,m]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/m,o.annotationElementId=t.id||null,f&&(o.altTextData=f),o._initialData=r,v(o,ml,!!r),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Q.STAMP,bitmapId:l(this,ct),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,ii),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=y(this,ie,Ed).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=y(this,ie,UA).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const a=l(this,ii)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(l(this,ct)))n.stamps.set(l(this,ct),{area:a,serialized:s}),s.bitmap=y(this,ie,Ed).call(this,!1);else if(l(this,ii)){const c=n.stamps.get(l(this,ct));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=y(this,ie,Ed).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Pe=new WeakMap,ct=new WeakMap,qs=new WeakMap,Zn=new WeakMap,Ys=new WeakMap,gl=new WeakMap,vn=new WeakMap,Jn=new WeakMap,yn=new WeakMap,ii=new WeakMap,ml=new WeakMap,ie=new WeakSet,lc=function(t,n=!1){if(!t){this.remove();return}v(this,Pe,t.bitmap),n||(v(this,ct,t.id),v(this,ii,t.isSvg)),t.file&&v(this,gl,t.file.name),y(this,ie,Cm).call(this)},cc=function(){if(v(this,qs,null),this._uiManager.enableWaiting(!1),!!l(this,vn)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Pe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Pe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ad=function(){if(l(this,ct)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,ct)).then(s=>y(this,ie,lc).call(this,s,!0)).finally(()=>y(this,ie,cc).call(this));return}if(l(this,Zn)){const s=l(this,Zn);v(this,Zn,null),this._uiManager.enableWaiting(!0),v(this,qs,this._uiManager.imageManager.getFromUrl(s).then(r=>y(this,ie,lc).call(this,r)).finally(()=>y(this,ie,cc).call(this)));return}if(l(this,Ys)){const s=l(this,Ys);v(this,Ys,null),this._uiManager.enableWaiting(!0),v(this,qs,this._uiManager.imageManager.getFromFile(s).then(r=>y(this,ie,lc).call(this,r)).finally(()=>y(this,ie,cc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Ac.supportedTypesStr;const n=this._uiManager._signal;v(this,qs,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),y(this,ie,lc).call(this,r)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>y(this,ie,cc).call(this))),t.click()},Cm=function(){const{div:t}=this;let{width:n,height:s}=l(this,Pe);const[r,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,s=this.height*o;else if(n>a*r||s>a*o){const d=Math.min(a*r/n,a*o/s);n*=d,s*=d}const[c,u]=this.parentDimensions;this.setDims(n*c/r,s*u/o),this._uiManager.enableWaiting(!1);const h=v(this,vn,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),y(this,ie,km).call(this,n,s),y(this,ie,BA).call(this),l(this,ml)||(this.parent.addUndoableEditor(this),v(this,ml,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,gl)&&h.setAttribute("aria-label",l(this,gl))},HA=function(t,n){var a;const[s,r]=this.parentDimensions;this.width=t/s,this.height=n/r,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,yn)!==null&&clearTimeout(l(this,yn)),v(this,yn,setTimeout(()=>{v(this,yn,null),y(this,ie,km).call(this,t,n)},200))},Sd=function(t,n){const{width:s,height:r}=l(this,Pe);let o=s,a=r,c=l(this,Pe);for(;o>2*t||a>2*n;){const u=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,a),c=d.transferToImageBitmap()}return c},km=function(t,n){const s=new Ag,r=Math.ceil(t*s.sx),o=Math.ceil(n*s.sy),a=l(this,vn);if(!a||a.width===r&&a.height===o)return;a.width=r,a.height=o;const c=l(this,ii)?l(this,Pe):y(this,ie,Sd).call(this,r,o),u=a.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,r,o)},Ed=function(t){if(t){if(l(this,ii)){const r=this._uiManager.imageManager.getSvgUrl(l(this,ct));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Pe),n.getContext("2d").drawImage(l(this,Pe),0,0),n.toDataURL()}if(l(this,ii)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*hr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*hr.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,Pe),0,0,l(this,Pe).width,l(this,Pe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,Pe))},BA=function(){this._uiManager._signal&&(v(this,Jn,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&y(this,ie,HA).call(this,n.width,n.height)})),l(this,Jn).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Jn))==null||t.disconnect(),v(this,Jn,null)},{once:!0}))},UA=function(t){var u;const{rect:n,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,o=t.rect.every((h,d)=>Math.abs(h-n[d])<1),a=t.pageIndex===s,c=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===r;return{isSame:o&&a&&c,isSameAltText:c}},V(Ac,"_type","stamp"),V(Ac,"_editorType",Q.STAMP);let _m=Ac;var Co,vl,wn,Ks,es,ni,Qs,yl,wl,xt,ts,z,Zs,dt,WA,Pm,Rm,Lm,_d;const Li=class Li{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:h}){x(this,dt);x(this,Co);x(this,vl,!1);x(this,wn,null);x(this,Ks,null);x(this,es,null);x(this,ni,new Map);x(this,Qs,!1);x(this,yl,!1);x(this,wl,!1);x(this,xt,null);x(this,ts,null);x(this,z);const d=[...l(Li,Zs).values()];if(!Li._initialized){Li._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),v(this,z,e),this.pageIndex=t,this.div=n,v(this,Co,r),v(this,wn,o),this.viewport=u,v(this,xt,c),this.drawLayer=a,this._structTree=s,l(this,z).addLayer(this)}get isEmpty(){return l(this,ni).size===0}get isInvisible(){return this.isEmpty&&l(this,z).getMode()===Q.NONE}updateToolbar(e){l(this,z).updateToolbar(e)}updateMode(e=l(this,z).getMode()){switch(y(this,dt,_d).call(this),e){case Q.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Q.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Q.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of l(Li,Zs).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,xt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,z).getMode()!==Q.INK)return;if(!e){for(const n of l(this,ni).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,z).setEditingState(e)}addCommands(e){l(this,z).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,wn))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of l(this,ni).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,z).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!l(this,wn))return;const t=l(this,wn).getEditableAnnotations();for(const n of t){if(n.hide(),l(this,z).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;v(this,wl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,ni).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(l(this,wn)){const r=l(this,wn).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,z).isDeletedAnnotationElement(a))continue;let c=t.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(a),c&&(l(this,z).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}y(this,dt,_d).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of l(Li,Zs).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,wl,!1)}getEditableAnnotation(e){var t;return((t=l(this,wn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,z).getActive()!==e&&l(this,z).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,xt))!=null&&e.div&&!l(this,ts)){v(this,ts,new AbortController);const t=l(this,z).combinedSignal(l(this,ts));l(this,xt).div.addEventListener("pointerdown",y(this,dt,WA).bind(this),{signal:t}),l(this,xt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,xt))!=null&&e.div&&l(this,ts)&&(l(this,ts).abort(),v(this,ts,null),l(this,xt).div.classList.remove("highlighting"))}enableClick(){if(l(this,Ks))return;v(this,Ks,new AbortController);const e=l(this,z).combinedSignal(l(this,Ks));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,Ks))==null||e.abort(),v(this,Ks,null)}attach(e){l(this,ni).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,z).isDeletedAnnotationElement(t)&&l(this,z).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,ni).delete(e.id),(t=l(this,Co))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,wl)&&e.annotationElementId&&l(this,z).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,z).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,yl)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,z).addDeletedAnnotationElement(e.annotationElementId),pe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,z).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,z).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,es)&&(e._focusEventsAllowed=!1,v(this,es,setTimeout(()=>{v(this,es,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,z)._signal}),t.focus())},0))),e._structTreeParentId=(n=l(this,Co))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return l(this,z).getId()}combinedSignal(e){return l(this,z).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,dt,Pm))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,z).updateToolbar(e),l(this,z).updateMode(e);const{offsetX:n,offsetY:s}=y(this,dt,Lm).call(this),r=this.getNextId(),o=y(this,dt,Rm).call(this,{parent:this,id:r,x:n,y:s,uiManager:l(this,z),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(Li,Zs).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,z)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),r=y(this,dt,Rm).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,z),isCentered:t,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(y(this,dt,Lm).call(this),!0)}setSelected(e){l(this,z).setSelected(e)}toggleSelected(e){l(this,z).toggleSelected(e)}unselect(e){l(this,z).unselect(e)}pointerup(e){const{isMac:t}=Lt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Qs)){if(v(this,Qs,!1),!l(this,vl)){v(this,vl,!0);return}if(l(this,z).getMode()===Q.STAMP){l(this,z).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,z).getMode()===Q.HIGHLIGHT&&this.enableTextSelection(),l(this,Qs)){v(this,Qs,!1);return}const{isMac:t}=Lt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;v(this,Qs,!0);const n=l(this,z).getActive();v(this,vl,!n||n.isEmpty())}findNewParent(e,t,n){const s=l(this,z).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,z).getActive())==null?void 0:e.parent)===this&&(l(this,z).commitOrRemove(),l(this,z).setActiveEditor(null)),l(this,es)&&(clearTimeout(l(this,es)),v(this,es,null));for(const n of l(this,ni).values())(t=l(this,Co))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,ni).clear(),l(this,z).removeLayer(this)}render({viewport:e}){this.viewport=e,Fo(this.div,e);for(const t of l(this,z).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,z).commitOrRemove(),y(this,dt,_d).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Fo(this.div,{rotation:n}),t!==n)for(const s of l(this,ni).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,z).viewParameters.realScale}};Co=new WeakMap,vl=new WeakMap,wn=new WeakMap,Ks=new WeakMap,es=new WeakMap,ni=new WeakMap,Qs=new WeakMap,yl=new WeakMap,wl=new WeakMap,xt=new WeakMap,ts=new WeakMap,z=new WeakMap,Zs=new WeakMap,dt=new WeakSet,WA=function(e){l(this,z).unselectAll();const{target:t}=e;if(t===l(this,xt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,xt).div.contains(t)){const{isMac:n}=Lt.platform;if(e.button!==0||e.ctrlKey&&n)return;l(this,z).showAllEditors("highlight",!0,!0),l(this,xt).div.classList.add("free"),this.toggleDrawing(),ef.startHighlighting(this,l(this,z).direction==="ltr",{target:l(this,xt).div,x:e.x,y:e.y}),l(this,xt).div.addEventListener("pointerup",()=>{l(this,xt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,z)._signal}),e.preventDefault()}},Pm=function(){return l(Li,Zs).get(l(this,z).getMode())},Rm=function(e){const t=l(this,dt,Pm);return t?new t.prototype.constructor(e):null},Lm=function(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+s),u=(r+a)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},_d=function(){v(this,yl,!0);for(const e of l(this,ni).values())e.isEmpty()&&e.remove();v(this,yl,!1)},V(Li,"_initialized",!1),x(Li,Zs,new Map([am,mm,_m,ef].map(e=>[e._editorType,e])));let Tm=Li;var bn,ih,He,is,nh,Nm,$o,Im,VA;const ot=class ot{constructor({pageIndex:e}){x(this,$o);x(this,bn,null);x(this,ih,0);x(this,He,new Map);x(this,is,new Map);this.pageIndex=e}setParent(e){if(!l(this,bn)){v(this,bn,e);return}if(l(this,bn)!==e){if(l(this,He).size>0)for(const t of l(this,He).values())t.remove(),e.append(t);v(this,bn,e)}}static get _svgFactory(){return se(this,"_svgFactory",new Uv)}draw(e,t,n,s=!1){const r=_t(this,ih)._++,o=y(this,$o,Im).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const a=ot._svgFactory.createElement("defs");o.append(a);const c=ot._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),s&&l(this,is).set(r,c);const h=y(this,$o,VA).call(this,a,u),d=ot._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",n),d.setAttribute("href",`#${u}`),l(this,He).set(r,o),{id:r,clipPathId:`url(#${h})`}}drawOutline(e){const t=_t(this,ih)._++,n=y(this,$o,Im).call(this,e.box);n.classList.add(...e.classNamesForOutlining);const s=ot._svgFactory.createElement("defs");n.append(s);const r=ot._svgFactory.createElement("path");s.append(r);const o=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",o),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const h=ot._svgFactory.createElement("mask");s.append(h),a=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",a),h.setAttribute("maskUnits","objectBoundingBox");const d=ot._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=ot._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=ot._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const u=c.cloneNode();return n.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),l(this,He).set(t,n),t}finalizeLine(e,t){const n=l(this,is).get(e);l(this,is).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,He).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,is).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;y(n=ot,nh,Nm).call(n,l(this,He).get(e),t)}show(e,t){l(this,He).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,He).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,He).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,He).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,He).get(e).classList.add(t)}removeClass(e,t){l(this,He).get(e).classList.remove(t)}getSVGRoot(e){return l(this,He).get(e)}remove(e){l(this,is).delete(e),l(this,bn)!==null&&(l(this,He).get(e).remove(),l(this,He).delete(e))}destroy(){v(this,bn,null);for(const e of l(this,He).values())e.remove();l(this,He).clear(),l(this,is).clear()}};bn=new WeakMap,ih=new WeakMap,He=new WeakMap,is=new WeakMap,nh=new WeakSet,Nm=function(e,{x:t=0,y:n=0,width:s=1,height:r=1}={}){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},$o=new WeakSet,Im=function(e){var n;const t=ot._svgFactory.create(1,1,!0);return l(this,bn).append(t),t.setAttribute("aria-hidden",!0),y(n=ot,nh,Nm).call(n,t,e),t},VA=function(e,t){const n=ot._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=ot._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},x(ot,nh);let Mm=ot;X.AbortException;X.AnnotationEditorLayer;X.AnnotationEditorParamsType;X.AnnotationEditorType;X.AnnotationEditorUIManager;X.AnnotationLayer;X.AnnotationMode;X.ColorPicker;X.DOMSVGFactory;X.DrawLayer;X.FeatureTest;var XC=X.GlobalWorkerOptions;X.ImageKind;X.InvalidPDFException;X.MissingPDFException;X.OPS;X.OutputScale;X.PDFDataRangeTransport;X.PDFDateString;X.PDFWorker;X.PasswordResponses;X.PermissionFlag;X.PixelsPerInch;X.RenderingCancelledException;X.TextLayer;X.UnexpectedResponseException;X.Util;X.VerbosityLevel;X.XfaLayer;X.build;X.createValidAbsoluteUrl;X.fetchData;var qC=X.getDocument;X.getFilenameFromUrl;X.getPdfFilenameFromUrl;X.getXfaPageViewport;X.isDataScheme;X.isPdfFile;X.noContextMenu;X.normalizeUnicode;X.setLayerDimensions;X.shadow;X.version;const YC="/CVEditor/assets/pdf.worker.min-GB3t0DcA.mjs",KC=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/i,QC=/\bhttps?:\/\/[^\s]+|(?:www\.)[^\s]+\.[a-z]{2,}\b/i,ZC=/\b(?:\+44\s?7\d{3}|\(0?7\d{3}\)|0?7\d{3})\s?\d{3}\s?\d{3}\b/,JC=/\b(?:\+44\s?|\(0\)\s?|0)(?:1\d{3}|2\d{2}|3\d{2}|[58]\d{2})\s?\d{3}\s?\d{3,4}\b/,ek=new RegExp(`${ZC.source}|${JC.source}`,"i"),GA=/\b([A-Z]{1,2}\d{1,2}[A-Z]?)\s?(\d[A-Z]{2})\b/i,XA=/\b(street|st|road|rd|avenue|ave|lane|ln|close|cl|drive|dr|way|place|pl|court|ct|terrace|terr|crescent|cres|square|sq|gardens|gdns|hill|park|mews)\b/i,tk=/^[0-9]{1,4}[A-Z]?\s+/,tf="(?:jan|feb|mar|apr|may|jun|jul|aug|sep|sept|oct|nov|dec)[a-z]*",Vf=new RegExp(`\\b${tf}\\s+\\d{4}\\s*(?:–|-|to)\\s*(?:present|current|${tf}\\s+\\d{4})`,"i"),Vv=/\b\d{4}\s*(?:–|-|to)\s*(?:present|current|\d{4})\b/i,Gv=new RegExp(`\\b(?:${tf}\\s+)?\\d{4}(?:\\s*-\\s*(?:${tf}\\s+)?\\d{4})?\\b`,"i"),ik=/\b(senior|lead|principal|manager|director|head|chief|specialist|engineer|developer|analyst|consultant|coordinator|supervisor|assistant|intern|trainee)\b/i,nk=/\b(ltd|limited|inc|incorporated|corp|corporation|llc|plc|group|company|co\.|&|and|solutions|services|systems|technologies|consulting)\b/i,kl=/^\s*(?:[-–—•◦▪▫]|(\d+\.)|([a-z]\.))\s+/,sk=[{key:"profile",re:/^\s*(profile|summary|professional summary|about|overview|career summary|personal profile)\s*$/i,priority:10},{key:"experience",re:/^\s*(work experience|experience|employment history|career history|professional experience|work|jobs)\s*$/i,priority:10},{key:"education",re:/^\s*(education|qualifications|academic background|academic qualifications)\s*$/i,priority:9},{key:"projects",re:/^\s*(projects|personal projects|portfolio|key projects)\s*$/i,priority:8},{key:"certs",re:/^\s*(certificates|certifications|professional certifications)\s*$/i,priority:7},{key:"courses",re:/^\s*(courses|training|additional courses|professional development|continuing education)\s*$/i,priority:6}];function fh(i){return(i??"").replace(/\u00a0/g," ").replace(/\s+/g," ").trim()}function ls(i,e){try{const t=i.match(e);return t?t[0].trim():""}catch{return""}}function rk(i){return(i??"").toString().replace(/\r\n/g,`
`).split(`
`).map(e=>(e??"").trim()).filter(Boolean)}function Cy(i){const e=fh(i).toLowerCase();return ik.test(e)||i.length<100&&!/[@.]/.test(i)&&i.split(" ").length<=6&&i.split(" ").length>=2}function ok(i){const e=fh(i);return nk.test(e)||i.includes(",")&&i.length<120||i.length<100&&!kl.test(i)&&!Vf.test(i)}function ak(i){return Vf.test(i)||Vv.test(i)||Gv.test(i)}function xc(i){return kl.test(i)}function lk(i){const e=fh(i);return e?GA.test(e)||tk.test(e)&&XA.test(e):!1}function ck(i){const e=i.findIndex(o=>lk(o));if(e===-1)return"";const t=3;let n=e,s=e;const r=o=>GA.test(o)||XA.test(o)||/^[A-Za-z ,.'-]{2,40}$/.test(o);for(let o=e-1;o>=0&&n>e-t&&r(i[o]);o--)n=o;for(let o=e+1;o<i.length&&s<e+t&&r(i[o]);o++)s=o;return i.slice(n,s+1).join(`
`)}function uk(i){const e=i.slice(0,5),t=n=>{if(!n||/[@\d]/.test(n)||n.length>60)return!1;const s=n.split(/\s+/).filter(Boolean);return s.length>=2&&s.length<=4&&s.every(r=>/^[A-Z][a-z''-]+$/.test(r))};return e.find(t)||""}function hk(i){const e=[];return i.forEach((t,n)=>{const s=fh(t);sk.forEach(r=>{r.re.test(s)&&e.push({index:n,key:r.key,priority:r.priority,title:s})})}),e.sort((t,n)=>t.priority!==n.priority?n.priority-t.priority:t.index-n.index)}function Go(i,e,t){const n=e.find(a=>a.key===t);if(!n)return[];const s=n.index+1,r=e.find(a=>a.index>n.index),o=r?r.index:i.length;return i.slice(s,o)}function dk(i){return i.join(" ").slice(0,600)}function fk(i){const e=[];let t=null,n=null;return i.forEach((s,r)=>{const o=fh(s);if(o){if(ak(o)){t&&!t.dates&&(t.dates=ls(o,Vf)||ls(o,Vv)||ls(o,Gv)),n="dates";return}if(xc(o)){t||(t={title:"",company:"",dates:"",description:"",responsibilities:[]});const a=o.replace(kl,"").trim();a&&t.responsibilities.push(a),n="responsibilities";return}if(Cy(o)&&n!=="responsibilities"){t&&(t.title||t.company||t.responsibilities.length>0)&&e.push(t),t={title:o,company:"",dates:"",description:"",responsibilities:[]},n="title";return}if(ok(o)&&n==="title"){t&&(t.company=o,n="company");return}t?n==="company"||n==="dates"?o.length>30&&!Cy(o)&&(t.description?t.description+=" "+o:t.description=o,n="description"):(!n||n==="description")&&(o.length<200&&!t.title?(t.title=o,n="title"):!t.description&&o.length>30?(t.description=o,n="description"):o.length>20&&t.responsibilities.push(o)):(t={title:o,company:"",dates:"",description:"",responsibilities:[]},n="title")}}),t&&(t.title||t.company||t.responsibilities.length>0)&&e.push(t),e.filter(s=>s.title.trim()||s.company.trim()).map(s=>({...s,title:s.title.trim(),company:s.company.trim(),dates:s.dates.trim(),description:s.description.trim(),responsibilities:s.responsibilities.filter(r=>r.trim()).map(r=>r.trim())}))}function pk(i){const e=i.join(" ");return{degree:i.find(t=>/(BSc|MSc|PhD|Bachelor|Master|Degree|Diploma|Certificate)/i.test(t))||"",university:i.find(t=>/(University|College|Institute|School)/i.test(t))||"",dates:ls(e,Vf)||ls(e,Vv)||ls(e,Gv),grade:i.find(t=>/(First|Second|Upper|Lower|Honours|Honor|Merit|Distinction|GPA|Grade)/i.test(t))||""}}function gk(i){const e=[];let t=null,n=null;for(let s=0;s<i.length;s++){const r=i[s].trim();if(!r)continue;const o=xc(r),a=/technologies?:/i.test(r);if(!o&&!a&&(!t||n==="complete"))t&&(t.title||t.responsibilities.length>0)&&e.push(t),t={title:r,technologies:"",responsibilities:[]},n="title";else if(a)t&&(t.technologies=r.replace(/^technologies?:\s*/i,"").trim(),n="technologies");else if(o){t||(t={title:"",technologies:"",responsibilities:[]});const c=r.replace(kl,"").trim();c&&t.responsibilities.push(c),n="responsibilities"}else t&&n!=="complete"&&r.length>30&&t.responsibilities.push(r)}return t&&(t.title||t.responsibilities.length>0)&&e.push(t),e.filter(s=>s.title.trim()||s.responsibilities.length>0).map(s=>({title:s.title.trim(),technologies:s.technologies.trim(),responsibilities:s.responsibilities.filter(r=>r.trim()).map(r=>r.trim())}))}function mk(i){const e=[];let t=null;for(let s=0;s<i.length;s++){const r=i[s].trim();if(!r)continue;if(!xc(r))t&&t.title&&e.push(t),t={title:r,description:""};else if(t){const a=r.replace(kl,"").trim();a&&(t.description?t.description+=" "+a:t.description=a)}}t&&t.title&&e.push(t);const n=[];for(let s=0;s<i.length;s++){const r=i[s].trim();if(!r)continue;if(!xc(r)&&!r.startsWith(" ")){const a={title:r,description:""},c=[];for(let u=s+1;u<i.length;u++){const h=i[u].trim();if(!h)continue;if(!xc(h)&&!h.startsWith(" ")&&h.length<200&&!(/(certificate|certification|program|course|training)/i.test(a.title)&&/(A comprehensive|program|skills|including)/i.test(h)))break;const f=h.replace(kl,"").trim();f&&c.push(f),s=u}a.description=c.join(" "),n.push(a)}}return n.length>0?n:e}function vk(){return{personalDetails:{name:"",phone:"",address:"",email:"",website:""},profile:"",education:{degree:"",university:"",dates:"",grade:""},workExperience:[],personalProjects:[],certificates:[],courses:""}}const yk={parseCV(i){const e=vk();try{const t=(i??"").toString(),n=rk(t),s=t;e.personalDetails.email=ls(s,KC),e.personalDetails.phone=ls(s,ek),e.personalDetails.website=ls(s,QC),e.personalDetails.address=ck(n),e.personalDetails.name=uk(n);const r=hk(n),o=Go(n,r,"profile");o.length&&(e.profile=dk(o));const a=Go(n,r,"experience");a.length&&(e.workExperience=fk(a));const c=Go(n,r,"education");c.length&&(e.education=pk(c));const u=Go(n,r,"projects");u.length&&(e.personalProjects=gk(u));const h=Go(n,r,"certs");h.length&&(e.certificates=mk(h));const d=Go(n,r,"courses");return d.length&&(e.courses=d.join("; ")),{success:!0,data:e,message:`Successfully parsed CV. Found ${e.workExperience.length} work experience entries, ${e.personalProjects.length} projects, ${e.certificates.length} certificates.`,debug:{sectionsFound:r.map(f=>({key:f.key,title:f.title})),linesProcessed:n.length}}}catch(t){return console.error("CV parsing error:",t),{success:!0,data:e,message:"Parsed with defaults due to error.",error:t.message}}}};XC.workerSrc=YC;const wk=(i,e,t,n,s,r,o,a)=>{const c=U.useCallback(async d=>{const f=d instanceof ArrayBuffer?d:await d.arrayBuffer(),p=await qC({data:f}).promise,m=[];for(let w=1;w<=p.numPages;w++){const g=await(await p.getPage(w)).getTextContent(),b=new Map,A=2;for(const _ of g.items){const C=(_.str||"").trim();if(!C)continue;const k=_.transform||_.matrix||[],R=typeof k[5]=="number"?k[5]:0,L=Math.round(R/A)*A;b.has(L)||b.set(L,[]),b.get(L).push(C)}const T=Array.from(b.keys()).sort((_,C)=>C-_).map(_=>b.get(_).join(" "));m.push(T.join(`
`))}return m.join(`

`)},[]),u=U.useCallback(()=>{const d=t.filter(E=>!n.includes(E)),f=JSON.stringify({cvData:i,sectionOrder:t,hiddenSections:n,selectedTemplate:e}),p=window.open("","_blank"),w=Io.generateExportHTML(e,i,d).replace("</body>",`<!-- CV_DATA:${btoa(f)}:CV_DATA --></body>`);p.document.open(),p.document.write(w),p.document.close(),p.onload=()=>{p.focus(),p.print()}},[i,e,t,n]);return{importFromFile:U.useCallback(async d=>{var p,m;const f=(m=(p=d==null?void 0:d.target)==null?void 0:p.files)==null?void 0:m[0];if(f)try{let w="";if(f.type==="application/pdf"||f.name.toLowerCase().endsWith(".pdf")){const g=await c(f),b=/CV_DATA:([A-Za-z0-9+/=]+):CV_DATA/,A=g.match(b);if(A)try{const S=JSON.parse(atob(A[1]));if(S.cvData){s(S.cvData),S.sectionOrder&&r(S.sectionOrder),S.hiddenSections&&o(S.hiddenSections),S.selectedTemplate&&a(S.selectedTemplate),alert("CV data imported successfully from exported PDF!"),d.target.value="";return}}catch(S){console.warn("Failed to parse embedded JSON data:",S)}if(w=g,!w||w.trim().length<10){alert("This PDF has no selectable text. Try exporting with selectable text or import a .json/.txt file instead."),d.target.value="";return}}else if(f.type==="text/plain"||f.name.toLowerCase().endsWith(".txt"))w=await f.text();else if(f.name.toLowerCase().endsWith(".json"))try{const g=JSON.parse(await f.text());g.cvData?(s(g.cvData),g.sectionOrder&&r(g.sectionOrder),g.hiddenSections&&o(g.hiddenSections),g.selectedTemplate&&a(g.selectedTemplate)):s(g),alert("CV data imported from JSON file."),d.target.value="";return}catch{alert("Invalid JSON file format."),d.target.value="";return}else{alert("Please upload a PDF, TXT, or JSON file."),d.target.value="";return}const E=yk.parseCV(w);s(E.data),E.message&&alert(`Import completed: ${E.message}`)}catch(w){console.error("Import error:",w),alert(`Error reading file: ${(w==null?void 0:w.message)??"Unknown error"}`)}finally{d!=null&&d.target&&(d.target.value="")}},[c,s,r,o,a]),exportToPDF:u}},bk=({isDark:i,toggleTheme:e,selectedTemplate:t,setSelectedTemplate:n,availableTemplates:s,editMode:r,setEditMode:o,importFromFile:a,exportToPDF:c})=>P.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[P.jsx("button",{onClick:e,className:`p-3 rounded-xl transition-colors ${i?"bg-gray-700 hover:bg-gray-600 text-yellow-400":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,title:`Switch to ${i?"light":"dark"} theme`,children:i?P.jsx(NE,{className:"h-5 w-5"}):P.jsx(PE,{className:"h-5 w-5"})}),P.jsxs("div",{className:`flex items-center gap-2 rounded-xl px-3 py-2 ${i?"bg-gray-700":"bg-gray-100"}`,children:[P.jsx(RE,{className:`h-4 w-4 ${i?"text-purple-400":"text-purple-600"}`}),P.jsx("select",{value:t,onChange:u=>n(u.target.value),className:`bg-transparent text-sm font-medium focus:outline-none cursor-pointer ${i?"text-gray-200":"text-gray-700"}`,children:s.map(u=>P.jsx("option",{value:u.value,children:u.label},u.value))})]}),P.jsxs("button",{onClick:()=>o(!r),className:`flex items-center gap-2 px-6 py-3 rounded-xl text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl ${r?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700":`bg-gradient-to-r ${i?"from-gray-600 to-gray-700 text-gray-200 hover:from-gray-500 hover:to-gray-600":"from-gray-200 to-gray-300 text-gray-700 hover:from-gray-300 hover:to-gray-400"}`}`,children:[r?P.jsx(Pv,{className:"h-4 w-4"}):P.jsx(LE,{className:"h-4 w-4"}),r?"Preview Mode":"Edit Mode"]}),P.jsxs("label",{className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl text-sm font-medium hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl cursor-pointer",children:[P.jsx(IE,{className:"h-4 w-4"}),"Import",P.jsx("input",{type:"file",accept:".pdf,.txt,.json",onChange:a,className:"hidden"})]}),P.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl text-sm font-medium hover:from-green-700 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(CE,{className:"h-4 w-4"}),"Export PDF"]})]}),xk=({isDark:i,sectionOrder:e,sectionManager:t,visibleSections:n,activeSection:s,setActiveSection:r,toggleSectionVisibility:o,dragDropHook:a,cvData:c})=>{const u=t.getAllSectionConfigs().map(d=>({id:d.id,name:d.name,icon:d.icon})),h=(d,f)=>{switch(d){case"personal":return f.personalDetails&&(f.personalDetails.name||f.personalDetails.email);case"profile":return typeof f.profile=="string"&&f.profile.trim().length>0;case"experience":return Array.isArray(f.workExperience)&&f.workExperience.length>0;case"projects":return Array.isArray(f.personalProjects)&&f.personalProjects.length>0;case"certificates":return Array.isArray(f.certificates)&&f.certificates.length>0;case"education":return f.education&&(f.education.degree||f.education.university);case"courses":return typeof f.courses=="string"&&f.courses.trim().length>0;default:return!1}};return P.jsxs("div",{className:`rounded-2xl shadow-xl p-6 border ${i?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:[P.jsxs("h2",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${i?"text-gray-100":"text-gray-900"}`,children:[P.jsx(ME,{className:"h-5 w-5"}),"Edit Sections"]}),P.jsx("div",{className:"space-y-2",children:e.map((d,f)=>{var b,A;const p=u.find(S=>S.id===d);if(!p)return null;const m=n.includes(d),w=h(d,c),E=(b=Xl[d])==null?void 0:b.required,g=s===d;return P.jsxs("div",{...a.getDropProps(f),className:`
                relative transition-all duration-300
                ${a.dragOverIndex===f?`transform scale-105 ${i?"bg-purple-900/20":"bg-purple-50"}`:""}
              `,children:[P.jsxs("div",{...a.getDragProps(d,f),className:`
                  flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 cursor-move
                  ${g?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":`${i?"bg-gray-700/80 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`}
                  ${m?"":"opacity-60"}
                  ${w?"":"border-l-4 border-orange-400"}
                  ${((A=a.draggedItem)==null?void 0:A.index)===f?"opacity-50 scale-95":""}
                `,onClick:()=>r(d),children:[P.jsx(Df,{className:"h-4 w-4 text-current opacity-60"}),P.jsx("span",{className:"text-base",children:p.icon}),P.jsx("div",{className:"flex-1",children:P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("span",{children:p.name}),!w&&!g&&P.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-600"}`,children:"Empty"}),E&&!g&&P.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600"}`,children:"Required"})]})}),P.jsx("button",{onClick:S=>{S.stopPropagation(),o(d)},disabled:E,className:`
                    p-1 rounded-lg transition-colors
                    ${E?"opacity-50 cursor-not-allowed":"hover:bg-white/20"}
                    ${m?"text-green-400":"text-gray-400"}
                  `,title:E?"Required section cannot be hidden":m?"Hide section":"Show section",children:m?P.jsx(Pv,{className:"h-4 w-4"}):P.jsx(kE,{className:"h-4 w-4"})})]}),a.dragOverIndex===f&&P.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-dashed border-purple-500 pointer-events-none"})]},d)})}),P.jsx("div",{className:`mt-4 p-3 rounded-lg border ${i?"bg-blue-900/20 border-blue-700 text-blue-300":"bg-blue-50 border-blue-200 text-blue-700"}`,children:P.jsx("p",{className:"text-sm",children:"Drag sections to reorder • Orange border = empty section • Eye icon = show/hide"})})]})},An=(i=!1)=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 text-sm ${i?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,Bc=(i=!1)=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-sm ${i?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,ph=()=>document.documentElement.classList.contains("dark"),Ak=({workExperience:i,onAdd:e,onUpdate:t,onRemove:n,onAddResponsibility:s,onUpdateResponsibility:r,onRemoveResponsibility:o})=>{const a=ph();return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Work Experience"}),P.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(Rv,{className:"h-4 w-4"}),"Add Job"]})]}),i.map((c,u)=>P.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${a?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(Df,{className:"h-5 w-5 text-gray-400"}),P.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Job #",u+1]})]}),P.jsx("button",{onClick:()=>n(u),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:P.jsx(Lv,{className:"h-4 w-4"})})]}),P.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[P.jsx("input",{type:"text",value:c.title,onChange:h=>t(u,"title",h.target.value),placeholder:"Job Title",className:An(a)}),P.jsx("input",{type:"text",value:c.company,onChange:h=>t(u,"company",h.target.value),placeholder:"Company",className:An(a)}),P.jsx("input",{type:"text",value:c.dates,onChange:h=>t(u,"dates",h.target.value),placeholder:"Employment Dates",className:An(a)}),P.jsx("textarea",{value:c.description,onChange:h=>t(u,"description",h.target.value),placeholder:"Company Description",rows:"2",className:Bc(a)})]}),P.jsxs("div",{className:"mt-4",children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Responsibilities:"}),P.jsx("button",{onClick:()=>s(u),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),c.responsibilities.map((h,d)=>P.jsxs("div",{className:"flex gap-2 mb-3",children:[P.jsx("textarea",{value:h,onChange:f=>r(u,d,f.target.value),placeholder:"Responsibility description...",rows:"2",className:Bc(a)+" text-sm"}),P.jsx("button",{onClick:()=>o(u,d),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},d))]})]},u))]})},Sk=({personalProjects:i,onAdd:e,onUpdate:t,onRemove:n,onAddResponsibility:s,onUpdateResponsibility:r,onRemoveResponsibility:o})=>{const a=ph();return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Projects"}),P.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(Rv,{className:"h-4 w-4"}),"Add Project"]})]}),i.map((c,u)=>P.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${a?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(Df,{className:"h-5 w-5 text-gray-400"}),P.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Project #",u+1]})]}),P.jsx("button",{onClick:()=>n(u),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:P.jsx(Lv,{className:"h-4 w-4"})})]}),P.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4",children:[P.jsx("input",{type:"text",value:c.title,onChange:h=>t(u,"title",h.target.value),placeholder:"Project Title",className:An(a)}),P.jsx("input",{type:"text",value:c.technologies,onChange:h=>t(u,"technologies",h.target.value),placeholder:"Technologies Used",className:An(a)})]}),P.jsxs("div",{className:"mt-4",children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Project Details:"}),P.jsx("button",{onClick:()=>s(u),className:"px-3 py-1 text-sm bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Add"})]}),c.responsibilities.map((h,d)=>P.jsxs("div",{className:"flex gap-2 mb-3",children:[P.jsx("textarea",{value:h,onChange:f=>r(u,d,f.target.value),placeholder:"Project detail description...",rows:"2",className:Bc(a)+" text-sm"}),P.jsx("button",{onClick:()=>o(u,d),className:"px-3 py-2 text-sm bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 self-start",children:"Remove"})]},d))]})]},u))]})},Ek=({certificates:i,onAdd:e,onUpdate:t,onRemove:n})=>{const s=ph();return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("h3",{className:"text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Certificates"}),P.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl",children:[P.jsx(Rv,{className:"h-4 w-4"}),"Add Certificate"]})]}),i.map((r,o)=>P.jsxs("div",{className:`p-6 rounded-2xl border shadow-lg ${s?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx(Df,{className:"h-5 w-5 text-gray-400"}),P.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Certificate #",o+1]})]}),P.jsx("button",{onClick:()=>n(o),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:P.jsx(Lv,{className:"h-4 w-4"})})]}),P.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P.jsx("input",{type:"text",value:r.title,onChange:a=>t(o,"title",a.target.value),placeholder:"Certificate Title",className:An(s)}),P.jsx("textarea",{value:r.description,onChange:a=>t(o,"description",a.target.value),placeholder:"Certificate Description",rows:"3",className:Bc(s)})]})]},o))]})},_k=({education:i,onUpdate:e})=>{const t=ph();return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Education"}),P.jsx("div",{className:`p-6 rounded-2xl border shadow-lg ${t?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:P.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Degree"}),P.jsx("input",{type:"text",value:i.degree,onChange:n=>e("degree",n.target.value),placeholder:"Degree Title",className:An(t)})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"University"}),P.jsx("input",{type:"text",value:i.university,onChange:n=>e("university",n.target.value),placeholder:"University Name",className:An(t)})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dates"}),P.jsx("input",{type:"text",value:i.dates,onChange:n=>e("dates",n.target.value),placeholder:"Study Period",className:An(t)})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Grade/Classification"}),P.jsx("input",{type:"text",value:i.grade,onChange:n=>e("grade",n.target.value),placeholder:"Grade or Classification",className:An(t)})]})]})})]})},Ck=({courses:i,onUpdate:e})=>{const t=ph();return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Additional Courses"}),P.jsx("div",{className:`p-6 rounded-2xl border shadow-lg ${t?"bg-gray-800/95 border-gray-700":"bg-gray-50/95 border-gray-200"}`,children:P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Courses Information"}),P.jsx("textarea",{value:i,onChange:n=>e(n.target.value),rows:"4",className:Bc(t),placeholder:"Information about additional courses, training, or qualifications..."})]})})]})},kk=({personalDetails:i,onUpdate:e,isDark:t})=>{const n=()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 text-base ${t?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`,s=()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-base ${t?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`;return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Personal Details"}),P.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),P.jsx("input",{type:"text",value:i.name,onChange:r=>e("name",r.target.value),className:n()})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),P.jsx("input",{type:"text",value:i.phone,onChange:r=>e("phone",r.target.value),className:n()})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address"}),P.jsx("textarea",{value:i.address,onChange:r=>e("address",r.target.value),rows:"3",className:s()})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),P.jsx("input",{type:"email",value:i.email,onChange:r=>e("email",r.target.value),className:n()})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),P.jsx("input",{type:"text",value:i.website,onChange:r=>e("website",r.target.value),className:n()})]})]})]})},Tk=({profile:i,onUpdate:e,isDark:t})=>{const n=()=>`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 resize-none text-base ${t?"border-gray-600 bg-gray-800 text-white placeholder-gray-400 focus:bg-gray-700":"border-gray-300 bg-white text-gray-900 placeholder-gray-500"}`;return P.jsxs("div",{className:"space-y-6",children:[P.jsx("h3",{className:"text-xl font-semibold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600",children:"Professional Profile"}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Profile Description"}),P.jsx("textarea",{value:i,onChange:s=>e(s.target.value),rows:"8",className:n(),placeholder:"Write your professional profile here..."})]})]})},Pk=({isDark:i,activeSection:e,cvData:t,cvDataActions:n})=>{const s=()=>{switch(e){case"personal":return P.jsx(kk,{personalDetails:t.personalDetails,onUpdate:n.updatePersonalDetails,isDark:i});case"profile":return P.jsx(Tk,{profile:t.profile,onUpdate:n.updateProfile,isDark:i});case"experience":return P.jsx(Ak,{workExperience:t.workExperience,onAdd:n.addWorkExperience,onUpdate:n.updateWorkExperience,onRemove:n.removeWorkExperience,onAddResponsibility:n.addResponsibility,onUpdateResponsibility:n.updateResponsibility,onRemoveResponsibility:n.removeResponsibility});case"projects":return P.jsx(Sk,{personalProjects:t.personalProjects,onAdd:n.addPersonalProject,onUpdate:n.updatePersonalProject,onRemove:n.removePersonalProject,onAddResponsibility:n.addProjectResponsibility,onUpdateResponsibility:n.updateProjectResponsibility,onRemoveResponsibility:n.removeProjectResponsibility});case"certificates":return P.jsx(Ek,{certificates:t.certificates,onAdd:n.addCertificate,onUpdate:n.updateCertificate,onRemove:n.removeCertificate});case"education":return P.jsx(_k,{education:t.education,onUpdate:n.updateEducation});case"courses":return P.jsx(Ck,{courses:t.courses,onUpdate:n.updateCourses});default:return P.jsx("div",{className:"text-center py-8",children:P.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Select a section to edit"})})}};return P.jsx("div",{className:`rounded-2xl shadow-xl p-6 border ${i?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:s()})},Rk=({isDark:i,generatePreviewHTML:e})=>P.jsxs("div",{className:`rounded-2xl shadow-xl border overflow-hidden ${i?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:[P.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-4",children:P.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[P.jsx(Pv,{className:"h-5 w-5"}),"Live Preview"]})}),P.jsx("div",{className:"max-h-screen overflow-y-auto",children:P.jsx("div",{className:`cv-preview ${i?"dark-theme":"light-theme"} transition-colors duration-300`,style:{width:"100%",maxWidth:"100%"},dangerouslySetInnerHTML:{__html:e()}})})]}),Lk=()=>{const[i,e]=U.useState(!0),[t,n]=U.useState("plain-professional"),[s,r]=U.useState("personal"),[o,a]=U.useState(Hb),[c,u]=U.useState([]),{toggleTheme:h,isDark:d}=BE();U.useRef();const f=U.useMemo(()=>new HE(o),[o]),{cvData:p,...m}=WE(zE),{importFromFile:w,exportToPDF:E}=wk(p,t,o,c,m.setCvData,a,u,n),g=U.useMemo(()=>Io.getTemplateOptions(),[]),A=UE(o,C=>{a(C)}),S=U.useMemo(()=>o.filter(C=>!c.includes(C)),[o,c]),T=C=>{const k=f.getSectionConfig(C);k!=null&&k.required||u(R=>R.includes(C)?R.filter(L=>L!==C):[...R,C])},_=()=>{const C=Io.generateHTML(t,p,d?"dark":"light",S),k=C.match(/<style[^>]*>([\s\S]*?)<\/style>/),R=C.match(/<body[^>]*>([\s\S]*?)<\/body>/),L=k?k[1]:"",D=R?R[1]:C;return`
      <style>
        /* --- Neutral preview baseline (scoped to preview only) --- */
        .cv-preview .cv-container {
          box-sizing: border-box !important;
          margin: 0 auto !important;  
          text-align: initial !important; /* fence off any global alignments */
        }
      </style>
  
      <style>
        ${L}  /* template CSS overrides the neutral baseline */
      </style>
  
     ${D}
    `};return P.jsxs("div",{className:`min-h-screen w-full transition-colors duration-300 ${d?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-br from-blue-50 via-white to-indigo-50"}`,children:[P.jsx("div",{className:`shadow-xl border-b sticky top-0 z-50 backdrop-blur-xl ${d?"bg-gray-800/95 border-gray-700":"bg-white/95 border-gray-200"}`,children:P.jsx("div",{className:"w-full max-w-none px-6 py-4",children:P.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[P.jsxs("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 flex items-center gap-3",children:[P.jsx(TE,{className:"h-8 w-8 text-purple-600"}),"CV Editor Pro"]}),P.jsx(bk,{isDark:d,toggleTheme:h,selectedTemplate:t,setSelectedTemplate:n,availableTemplates:g,editMode:i,setEditMode:e,importFromFile:w,exportToPDF:E})]})})}),P.jsx("div",{className:"w-full max-w-none px-6 py-8",children:P.jsxs("div",{className:`grid gap-8 ${i?"grid-cols-1 lg:grid-cols-12":"grid-cols-1"}`,children:[i&&P.jsxs("div",{className:"lg:col-span-5 space-y-6",children:[P.jsx(xk,{isDark:d,sectionOrder:o,sectionManager:f,visibleSections:S,activeSection:s,setActiveSection:r,toggleSectionVisibility:T,dragDropHook:A,cvData:p}),P.jsx(Pk,{isDark:d,activeSection:s,cvData:p,cvDataActions:m})]}),P.jsx("div",{className:i?"lg:col-span-7":"lg:col-span-12",children:P.jsx(Rk,{isDark:d,generatePreviewHTML:_})})]})})]})};function Mk(){return P.jsx("div",{className:"App",children:P.jsx(Lk,{})})}zb(document.getElementById("root")).render(P.jsx(U.StrictMode,{children:P.jsx(Mk,{})}));
